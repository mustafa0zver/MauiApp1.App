<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta name=apple-mobile-web-app-capable content=yes>
    <meta name=apple-mobile-web-app-status-bar-style content=black>
    <link rel="shortcut icon" href="">

    <style type="text/css">

        * {
            font-size: 15px;
            font-family: Arial;
            font-weight: normal;
        }

        a {
            text-decoration: none;
            color: white;
            font-size: 0.9rem;
            cursor: pointer;
        }

        input[type=text] {
            display: inline-block;
            background-color: black;
            color: gainsboro;
            padding: 1%;
            padding-top: 1.5%;
            padding-bottom: 1.5%;
            margin: 1%;
            border-radius: 5px;
            font-size: 15px;
            border: 2px silver solid;
        }

        input[type=number] {
            display: inline-block;
            background-color: black;
            color: gainsboro;
            padding: 1%;
            padding-top: 1.5%;
            padding-bottom: 1.5%;
            margin: 1%;
            border-radius: 5px;
            font-size: 15px;
            border: 2px silver solid;
        }

        input[type=password] {
            display: inline-block;
            background-color: black;
            color: gainsboro;
            padding: 1%;
            padding-top: 1.5%;
            padding-bottom: 1.5%;
            margin: 1%;
            border-radius: 5px;
            font-size: 15px;
            border: 2px silver solid;
        }

        select {
            display: inline-block;
            background-color: black;
            color: gainsboro;
            padding: 1%;
            padding-top: 1.5%;
            padding-bottom: 1.5%;
            margin: 1%;
            border-radius: 5px;
            font-size: 15px;
            border: 2px silver solid;
        }

        label {
            display: inline-block;
            background-color: black;
            color: gainsboro;
            padding: 1%;
            padding-top: 1.5%;
            padding-bottom: 1.5%;
            margin: 1%;
            border-radius: 5px;
            font-size: 15px;
        }

        .PushButton {
            display: inline-block;
            text-align: center;
            margin-top: 4px;
            margin-bottom: 4px;
            padding-top: 4px;
            padding-bottom: 4px;
            border-radius: 5px;
            font-size: 15px;
            background: -webkit-linear-gradient(white,#888);
            background: -o-linear-gradient(white,#888);
            background: -moz-linear-gradient(white,#888);
            background: linear-gradient(white,#888);
            color: black;
        }

        .Bold {
            font-weight: bold;
        }

        .Left {
            text-align: left;
        }

        .Center {
            text-align: center;
        }

        .Hidden {
            visibility: hidden;
        }

        .Header {
            display: inline-block;
            background-color: #C60;
            color: white;
            font-weight: bold;
            padding-top: 2%;
            padding-bottom: 2%;
            text-align: center;
            width: 100%;
        }

        .Pad2P {
            display: inline-block;
            background-color: black;
            color: silver;
            padding: 1%;
            padding-top: 1.5%;
            padding-bottom: 1.5%;
            margin: 1%;
            border-radius: 5px;
        }

        .Combo {
            display: inline-block;
            background-color: silver;
            color: black;
            padding: 1%;
            padding-top: 2%;
            padding-bottom: 2%;
            margin: 1%;
            text-align: center;
            border-radius: 5px;
        }

        .BigButton {
            display: inline-block;
            margin-top: 4px;
            margin-bottom: 4px;
            padding-top: 4px;
            padding-bottom: 4px;
            border-radius: 5px;
            font-size: 15px;
        }

        .ComboTable {
            position: absolute;
            display: none;
            overflow: auto;
            height: 120px;
            border-radius: 5px;
            border: 1px silver solid;
            background-color: black;
        }

        .Popup {
            position: absolute;
            display: none;
            overflow: auto;
            height: auto;
            border-radius: 5px;
            border: 2px #444 solid;
            background-color: #222;
            text-align: center;
        }

        .Page {
            position: absolute;
            display: inline-block;
            overflow: hidden;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            padding: 0;
            margin: 0;
            background-color: black;
        }

        .PagePopUp {
            position: absolute;
            visibility: hidden;
            overflow: hidden;
            left: -5%;
            top: 30%;
            width: 80%;
            height: auto;
            padding: 0;
            margin: 0;
            border-radius: 5px;
            border: 2px black solid;
            box-shadow: 0 0 5px 5px #444;
            background-color: black;
        }

        .EntryPage {
            position: absolute;
            visibility: hidden;
            overflow: auto;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            padding: 0;
            margin: 0;
            background-color: #000;
        }

        .TableStyle {
            width: 100%;
            overflow: hidden;
            white-space: nowrap;
            table-layout: fixed;
            margin: 0;
            padding: 0;
            border-collapse: collapse;
            color: white;
            background-color: black;
        }

        .DigerButton {
            display: inline-block;
            margin: 2px;
            padding: 4px;
            width: 40%;
            border-radius: 10px;
            border-bottom: 2px #000 solid;
        }

        .IndicatorButton {
            display: inline-block;
            margin: 2px;
            padding: 4px;
            width: 20%;
            border-bottom: 2px #000 solid;
            border-radius: 10px;
        }

        .LineMenuButton {
            display: inline-block;
            margin: 0px;
            padding-top: 5px;
            padding-bottom: 5px;
            color: silver;
        }

        .PeriodButton {
            display: inline-block;
            margin: 1px;
            margin-top: 1%;
            margin-bottom: 1%;
            padding-top: 2%;
            padding-bottom: 2%;
            border-radius: 3px;
            width: 15%;
        }

        .NoTextHighlight {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }

        .MenuBox {
            position: absolute;
            display: none;
            text-align: center;
            background-color: #333;
            color: silver;
            padding-top: 2%;
            padding-bottom: 2%;
            border: 0;
        }

        .MenuItem {
            display: inline-block;
            padding: 6px;
            margin: 2px;
            text-align: center;
            border-radius: 20px;
            background: -webkit-linear-gradient(#000,#000);
            background: linear-gradient(#000,#000);
            border-bottom: 1px #666 solid;
        }

        .DarkButton {
            display: inline-block;
            text-align: center;
            border-radius: 5px;
            background: -webkit-linear-gradient(#555,#111);
            background: linear-gradient(#555,#111);
        }

        #sartLabel, #aksamSeansLabel {
            margin: -3px 0px 0px 0px;
            vertical-align: text-bottom;
            display: inline-block;
            white-space: nowrap;
            cursor: pointer;
            position: relative;
            padding: 0px;
        }

        #chkViopSart, #chkViopAksamSeans {
            margin: 0px;
            vertical-align: text-bottom;
        }

        .satbtnbackcolor {
            background: #e51c24;
            background-image: -webkit-radial-gradient(#e51c24,#9d1d20);
            background-image: -moz-linear-gradient(#e51c24,#9d1d20);
            background-image: linear-gradient(#e51c24,#9d1d20);
        }

        .albtnbackcolor {
            background: #57b229;
            background-image: -webkit-radial-gradient(#57b229,#3d6a15);
            background-image: -moz-linear-gradient(#57b229,#3d6a15);
            background-image: linear-gradient(#57b229,#3d6a15);
        }

        .vazgecbtnbackcolor {
            background: #e4e3e3;
            background-image: -webkit-radial-gradient(#e4e3e3,#b1b6ac);
            background-image: -moz-linear-gradient(#e4e3e3,#b1b6ac);
            background-image: linear-gradient(#e4e3e3,#b1b6ac);
        }


        .Klavye {
            width: 30%;
            text-align: center;
            background-color: black;
            color: white;
            position: absolute;
            border-radius: 3px;
        }

            .Klavye div {
                width: 28%;
                display: inline-block;
                border: 1px solid #55d7dc;
                margin: 2px;
                padding: 4% 0px 4% 0px;
                border-radius: 2px;
                background-image: -webkit-radial-gradient(black,#666);
                background-image: -moz-linear-gradient(black,#666);
                background-image: linear-gradient(black,#666);
            }

                .Klavye div:active {
                    background-color: yellow;
                    color: black;
                    background-image: -webkit-radial-gradient(yellow,#666);
                    background-image: -moz-linear-gradient(yellow,#666);
                    background-image: linear-gradient(yellow,#666);
                }


        #DivSembolSlider {
            /*background: #f00;*/
            width: 12%;
            height: 22%;
            border-radius: 50%;
            border: 0;
            background-color: transparent;
            padding: 0px;
            box-shadow: none;
        }

        .divSliderArrow:active {
            color: red;
        }

        .sayfamicon {
            width: 32px;
            height: 42px;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-position: 50% 10%;
            background: url('imgsm/_sayfam.svg') no-repeat 50% 10%;
            display: inline-block;
            background-size: 90% 85%;
        }

        .detayicon {
            width: 32px;
            height: 42px;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-position: 50% 10%;
            background: url('imgsm/_detay.svg') no-repeat 50% 10%;
            display: inline-block;
            background-size: 90% 85%;
        }

        .analizicon {
            width: 32px;
            height: 42px;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-position: 50% 10%;
            background: url('imgsm/_analiz.svg') no-repeat 50% 10%;
            display: inline-block;
            background-size: 90% 85%;
        }

        .digericon {
            width: 32px;
            height: 42px;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-position: 50% 10%;
            background: url('imgsm/_diger.svg') no-repeat 50% 10%;
            display: inline-block;
            background-size: 90% 85%;
        }

        .habericon {
            width: 32px;
            height: 42px;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-position: 50% 10%;
            background: url('imgsm/_haber.svg') no-repeat 50% 10%;
            display: inline-block;
            background-size: 90% 85%;
        }

        .temelanalizicon {
            width: 32px;
            height: 42px;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-position: 50% 10%;
            background: url('imgsm/_temelanaliz.svg') no-repeat 50% 10%;
            display: inline-block;
            background-size: 90% 85%;
        }

        .portfoyicon {
            width: 32px;
            height: 42px;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-position: 50% 10%;
            background: url('imgsm/_portfoy.svg') no-repeat 50% 10%;
            display: inline-block;
            background-size: 90% 85%;
        }

        .yuzeyselicon {
            width: 32px;
            height: 42px;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-position: 50% 10%;
            background: url('imgsm/_yÜzeysel.svg') no-repeat 50% 10%;
            display: inline-block;
            background-size: 90% 85%;
        }

        .getiriicon {
            width: 32px;
            height: 42px;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-position: 50% 10%;
            background: url('imgsm/_getiri.svg') no-repeat 50% 10%;
            display: inline-block;
            background-size: 90% 85%;
        }

        .derinlikicon {
            width: 32px;
            height: 42px;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-position: 50% 10%;
            background: url('imgsm/_derinlik.svg') no-repeat 50% 10%;
            display: inline-block;
            background-size: 90% 85%;
        }

        .kademeicon {
            width: 32px;
            height: 42px;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-position: 50% 10%;
            background: url('imgsm/_kademe.svg') no-repeat 50% 10%;
            display: inline-block;
            background-size: 90% 85%;
        }

        .firmahabericon {
            width: 32px;
            height: 42px;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-position: 50% 10%;
            background: url('imgsm/_firmahaber.svg') no-repeat 50% 10%;
            display: inline-block;
            background-size: 90% 85%;
        }

        .grafikicon {
            width: 32px;
            height: 42px;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-position: 50% 10%;
            background: url('imgsm/_grafik.svg') no-repeat 50% 10%;
            display: inline-block;
            background-size: 90% 85%;
        }

        .takasicon {
            width: 32px;
            height: 42px;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-position: 50% 10%;
            background: url('imgsm/_takas.svg') no-repeat 50% 10%;
            display: inline-block;
            background-size: 90% 85%;
        }

        .takasdegicon {
            width: 32px;
            height: 42px;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-position: 50% 10%;
            background: url('imgsm/_takasdeg.svg') no-repeat 50% 10%;
            display: inline-block;
            background-size: 90% 85%;
        }

        .dagilimlisteicon {
            width: 32px;
            height: 42px;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-position: 50% 10%;
            background: url('imgsm/_dagilimliste.svg') no-repeat 50% 10%;
            display: inline-block;
            background-size: 90% 85%;
        }

        .dagilimicon {
            width: 32px;
            height: 42px;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-position: 50% 10%;
            background: url('imgsm/_dagilim.svg') no-repeat 50% 10%;
            display: inline-block;
            background-size: 90% 85%;
        }

        .sermayeicon {
            width: 32px;
            height: 42px;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-position: 50% 10%;
            background: url('imgsm/_sermaye.svg') no-repeat 50% 10%;
            display: inline-block;
            background-size: 90% 85%;
        }

        .piteicon {
            width: 32px;
            height: 42px;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-position: 50% 10%;
            background: url('imgsm/_pite.svg') no-repeat 50% 10%;
            display: inline-block;
            background-size: 90% 85%;
        }

        .DivAkOnayBox {
            width: 100%;
            padding-bottom: 3%;
            border-bottom: 1px solid groove;
            border-top: 1px solid white;
        }

        #DivRBFPopUpContent p, ul li {
            text-align: justify;
            margin: 0;
            font-size: 0.8em;
        }
    </style>
    <script type="text/javascript" charset="utf-8">
        var ServerUrl = "";
        var Versiyon = "8.70";
        var IOSVersiyon = 0;
        var UrlHeader = "wss:";
        var YayinState = false;
        var YayinTime = new Date();
        var YayinColorStatus = -1;
        var YayinFirstConnect = false;
        var SocketSupported = true;
        var SocketInitialData = false; // ssss
        var ConnectionEstablished = false;
        var ConnectionTryCount = 0;
        var BasicUpdateTime = "0";
        var NewsUpdateTime = "0";
        var DerinlikUpdateTime = "0";
        var IslemUpdateTime = "0";
        var SonIslemNo = "0";
        var DerinlikRequestCount = 0;
        var MessageCounter = 0;
        var CurrentTime = "-";
        var Username = "";
        var Socket = null; // realtime
        var Timer;
        var SessionId = "";
        var ProductType = "CEP";
        var DeviceType = "ANY";
        var InitialRequestCount = 0;
        var InitialMesajCount = 0;
        var IslemWindowMaximized = false;
        var DerinlikRepaintTime = new Date();
        var DerinlikRepaintBool = false;
        var BsDerinlikRepaintTime = new Date();
        var BsDerinlikRepaintBool = false;
        var IslemRepaintCount = 0;
        var IslemRepaintTime = new Date();
        var LoginClicked = false;
        var DisplayPortfoyBool = true;
        var SozlesmeKabulDateStr = "0";
        var SozlesmeStr = "";
        var MesajOnayStr = "1";
        var MesajUyariStr = "";
        var MesajDictionary = {};
        var KapEnabled = false;
        var RequestQueue = [];
        var FireBaseToken = "";
        var PiteBool = false;
        var BuySellDerinlik = "";

        var Time200 = new Date();
        var Time1000 = new Date();
        var Time5000 = new Date();
        var Time30000 = new Date();
        var Time300000 = new Date();
        var TimeConnectionTest = new Date();
        var KapalicarsiUpdateTime = new Date();
        var KapalicarsiRepaintBool = false;


        var BackColor = "black";
        var ForeColor = "gainsboro";
        var HighColor = "lawngreen";
        var LowColor = "red";
        var LastColor = "yellow";
        var UpdateBackColor = "#666";
        var UpdateForeColor = "white";
        var WatchlistSelectedColor = "#444444";
        var NewsBackColor = "black";
        var Border = "1px #333 solid";
        var BorderBottom = "2px #888 solid";
        var HeaderColor = "#888";
        var DeviceHeight = 320;
        var YatayHeight = 200;
        var TradeHeaderColor = "skyblue";
        var DerinlikToplamForeColor = "Silver";

        var BasicObject = {};
        var WatchlistSymbolObject = {};
        var NewsObject = {};
        var ChartObject = {};
        var Bars = [];
        var LicObject = {};

        var WatchlistName = "SAYFAM";
        var WatchlistActiveRow = -1;
        var WatchlistActiveSymbol = "";
        var WatchlistInitialLoad = false;
        var WatchlistType = 2;
        var VipActiveRequested = false;
        var SEP1 = String.fromCharCode(2);
        var SEP2 = String.fromCharCode(3);
        var SEPEOL = String.fromCharCode(4);
        var ZIndex = 1000;
        var DetaySymbol = "";

        var ChartWidth = 0;
        var ChartHeight = 0;
        var ChartBarSpace = 4;
        var ChartRightMargin = 70;
        var ChartTopMargin = 20;
        var ChartLastBarNo = 0;
        var ChartFirstBarNo = 0;
        var ChartCurrentBarNo = 0;
        var ChartLevelPoint = 0;
        var ChartMaxPrice = 100;
        var ChartMinPrice = 0;
        var ChartBarCount = 0;
        var ChartValuesVisible = true;
        var ChartDoubleColoring = true;
        var ChartCaptureLevel = true;
        var ChartBuySellVisible = true;
        var ChartBarType = 0;
        var IndLineCount = 0;
        var IndPanel = 0;
        var IndParam1 = "X";
        var IndParam2 = "X";
        var IndParam3 = "X";
        var IndParam4 = "X";
        var IndParam5 = "X";
        var IndParam6 = "X";
        var IndColors = ["#40F040", "#F04040", "#00F0F0"];
        var IndMaxPrice = 100;
        var IndMinPrice = 0;
        var IndWidth = 0;
        var IndHeight = 0;
        var IndDecimal = -1;
        var IndText = new Array(3);
        var DrawTypes = [0, 0, 0]; //0-line , 1-vol , 2-parabolic
        var AvrTypes = ["Simple", "Exponential", "Weighted", "Wilder", "TimeSeries", "Triangular", "Variable"];
        var TrendAvailable = false;
        var TrendSymbol = "";
        var TrendPeriod = "";
        var TrendType = 0;
        var TrendPeriod = "";
        var TrendStartDateStr = "";
        var TrendEndDateStr = "";
        var TrendStartPrice = 0;
        var TrendEndPrice = 0;
        var Fibo = [0.382, 0.50, 0.618, 1.618];

        var HesapLogin = "0";
        var HesapKurum = "";
        var HesapNo = "";
        var HesapAltHesap = "";
        var HesapParola = "";
        var HesapSifre = "";
        var HesapSMSSifre = "";
        var HesapMusteriTip = "";
        var BistBackOffice = "";
        var ViopBackOffice = "";
        var KurumlarArray = [];
        var ParolasizKurumlar = [];

        var ActivePageElement;
        var ActiveWatchlistElement;
        var ActiveDetayFooterNo = 0;
        var ActiveAnalizFooterNo = 0;
        var ActiveChartPeriodElement;
        var ActiveKademePeriodNo = 7;
        var ActiveFooterNo = 0;
        var ActiveEmirElement;
        var ActiveTakasFarkPeriodNo = 0;
        var ActivePortfoyToolbarNo = 0;
        var ActiveTakasFarkYonString = "Alanlar";
        var ActiveDagilimPeriodNo = 0;
        var ActiveTakasPeriodNo = 0;
        var ActiveDagilimYonString = "Alanlar";
        var ActivePiteYonString = "Alanlar";
        var ActiveDglListYonElement;
        var ActiveIndicatorElement;
        var ActiveKurumIslemPeriodNo = 0;
        var ActiveKurumIslemYonString = "Alınan";
        var ActiveHacimListePeriodNo = 0;
        var ActiveHacimListeYonString = "Alanlar";
        var ActiveObserveElement;
        var RenkElement;
        var TouchTechX = 0;
        var KapaliCarsiStatus = "0";

        var AlarmSilRowNo = -1;
        var EmirSilRowNo = -1;
        var PortfoyUyariOkundu = "0";

        var BrokerKodArray = [];
        var BrokerAdArray = [];
        var ActiveTakasKurumAd = "";
        var SiraliArray = ["Net Kar", "F/K", "Halka Açıklık", "Piyasa Değeri", "Öz Sermaye", "Ödenmiş Sermaye", "Seans Getiri", "Gün Getiri", "Bu Hafta Getiri",
            "1 Hafta Getiri", "Bu Ay Getiri", "1 Ay Getiri", "3 Ay Getiri", "6 Ay Getiri", "Bu Yıl Getiri", "1 Yıl Getiri", "PGÇ Net+", "PGÇ Net-"];

        var MenuPassiveBackColor = "#000";
        var MenuPassiveForeColor = "silver";
        var MenuActiveBackColor = "#555";
        var MenuActiveForeColor = "yellow";
        var FooterPassiveColor = "#000";
        var FooterActiveColor = "#555";

        var FontSizeTable;
        var FontSizeBigWL;
        var FontSizeSmallWL;
        var FontSizeTrade;
        var FontSizeCarsi;

        var IslemKonsolideBool = false;
        var IslemPrevTime = "";
        var IslemPrevFiyat = "";
        var IslemPrevYon = "";

        // garbage collection için
        var WatchlistTable;
        var BasicItem;
        var Cell1;
        var Cell2;
        var RowNo;
        var NewsItem;
        var NewsArray = [];
        var NewsTable;
        var NewsRow;
        var NewsCell;
        var ParserArray;
        var ParserFieldArray;
        var ParserSplitArray;
        var ChartBarItem;
        var SearchTable;
        var SearchRow;
        var SayfamCell;
        var SaatCell;
        var MesajCell;
        var WatchlistCell1;
        var WatchlistCell2;
        var WatchlistCell3;
        var WatchlistCell4;
        var WatchlistCell5;
        var DerinlikTable;
        var DerinlikToplamTable;
        var DrnIslemTable;
        var DrnYuzeyselRow;
        var UpdateRow;
        var BrutTakas;


        var YayinSckt = null; // cccc
        var YayinStatus = "1";
        var YayinURL = "//127.0.0.1:0";
        var YayinTimeSckt1 = new Date();
        var YayinTimeSckt2 = new Date();
        var ReconnectAllowBool = "0";
        var BistDerinlikLisansBool = false; //  cccc
        var BistIslemlerLisansBool = false;
        var ViopDerinlikLisansBool = false;
        var ViopIslemlerLisansBool = false;
        var ChartGoruntuLisansBool = false;
        var FSystemLisansBool = false;

        var Trend2Available = false;
        var Trend2StartDateStr = "";
        var Trend2EndDateStr = "";
        var Trend2StartPrice = 0;
        var Trend2EndPrice = 0;


        var YatayAvailable = false;
        var YatayStartDateStr = "";
        var YatayEndDateStr = "";
        var YatayStartPrice = 0;
        var YatayEndPrice = 0;
        var YatayChartLevelPoint = 0;
        var footermenuclick = false;

        var txtFocusBool = false;
        var SpkUariBool = false;
        var BaskaBaglantiBool = false;
        var RiskBildirimOnay;
        var DerinlikMaxKadene = 10;
        var BSDerinlikKademeSay = 3;
        var symbolarray = [];

        function onFocusTxtbox(el, evt) {
            if (evt.type == "focus")
                txtFocusBool = true;
            else
                txtFocusBool = true;
        }


        // fonksiyonlar
        function ActivateWindow() {
            EmirSilRowNo = -1;
            BuySellDerinlik = "";
            HidePopups();

            GetEl("DivHelp").style.display = "none";
            GetEl("DivTemelAnaliz").style.display = "none";
            GetEl("DivIletisim").style.display = "none";
            GetEl("DivGelenMesaj").style.display = "none";
            GetEl("DivStat").style.display = "none";
            GetEl("DivWatchlist").style.visibility = "hidden";
            GetEl("DivDetay").style.visibility = "hidden";
            GetEl("DivHaber").style.visibility = "hidden";
            GetEl("DivPortfoy").style.visibility = "hidden";
            GetEl("DivMenu").style.display = "none";
            GetEl("DivBistTumGorunum").style.visibility = "hidden";
            GetEl("DivKapalicarsi").style.visibility = "hidden";
            GetEl("DivSermayeGenel").style.visibility = "hidden";
            GetEl("DivTakvim").style.visibility = "hidden";
            GetEl("DivKurumTakas").style.visibility = "hidden";
            GetEl("DivKurumIslem").style.visibility = "hidden";
            GetEl("DivKurumIslemPITE").style.visibility = "hidden";
            GetEl("DivSirali").style.visibility = "hidden";
            GetEl("DivHacimListe").style.visibility = "hidden";


            ActivePageElement.style.visibility = "visible";

            if (ChartGoruntuLisansBool)
                GetEl("DivChartGoruntuIndıcator").style.display = "inline-block";
            else
                GetEl("DivChartGoruntuIndıcator").style.display = "none";

            if (FSystemLisansBool)
                GetEl("DivChartFSystemIndıcator").style.display = "inline-block";
            else
                GetEl("DivChartFSystemIndıcator").style.display = "none";

            // Alarm Listesi
            if (ActivePageElement.id == "DivAlarmListesi") {

                SendRequest("X" + SEP1 + "REQ_ALARM_LIST" + SEP1 + Username + SEP1 + SessionId);

            }
            // watchlist
            if (ActivePageElement.id == "DivWatchlist") {
                ActiveFooterNo = 0;
                GetEl("DivFooter").style.visibility = "visible";
                GetEl("DivMain").style.visibility = "visible";
                if (Username == "DEMO")
                    GetEl("DivDemo").style.display = "inline-block";
            }

            // BIST tüm görünüm
            if (ActivePageElement.id == "DivBistTumGorunum") {
                ActiveFooterNo = 3;
                FillBistTumGorunum();
            }

            // kapalıçarşı
            if (ActivePageElement.id == "DivKapalicarsi") {
                if (KapaliCarsiStatus != "1") {
                    KapaliCarsiStatus = "1";
                    localStorage.removeItem("KapaliCarsiStatus");
                    localStorage["KapaliCarsiStatus"] = "1";
                }
                ActiveFooterNo = 3;
                GetEl("DivKapalicarsi").style.visibility = "visible";
                var message = "X" + SEP1 + "REQ_CARSI2" + SEP1 + Username + SEP1 + SessionId + SEP1 + "0";
                SendRequest(message);
            }
            else {
                if (KapaliCarsiStatus != "0") {
                    KapaliCarsiStatus = "0";
                    localStorage.removeItem("KapaliCarsiStatus");
                    localStorage["KapaliCarsiStatus"] = "0";
                }
            }

            // sermaye genel
            if (ActivePageElement.id == "DivSermayeGenel") {
                ActiveFooterNo = 3;
                GetEl("DivSermayeGenel").style.visibility = "visible";
                var message = "X" + SEP1 + "REQ_SERM_GENEL" + SEP1 + Username + SEP1 + SessionId;
                SendRequest(message);
            }

            // Kurum işlem
            if (ActivePageElement.id == "DivKurumIslem") {
                ClearTable("TableKurumIslem");
                ActiveFooterNo = 3;
                PaintToolbarTable("TableKurumIslemToolbar", ActiveKurumIslemPeriodNo);
                CheckString("DivKurumIslemYonA2", "DivKurumIslemYonA", ToEngUp(ActiveKurumIslemYonString) == "ALINAN", "silver", "aqua");
                CheckString("DivKurumIslemYonS2", "DivKurumIslemYonS", ToEngUp(ActiveKurumIslemYonString) == "SATILAN", "silver", "aqua");
                GetEl("DivKurumIslem").style.visibility = "visible";
                if (ActiveTakasKurumAd == "")
                    GetEl("TextKurumIslemSearch").value = "Kurum Seçiniz";
                else
                    GetEl("TextKurumIslemSearch").value = ActiveTakasKurumAd;
                if (BrokerKodArray.length == 0) {
                    SendRequest("X" + SEP1 + "REQ_TAKASKURUM_LIST" + SEP1 + Username + SEP1 + SessionId);
                }
                var kurumkod = GetTakasKurumKod(ActiveTakasKurumAd);
                if (kurumkod != "") {
                    var message = "X" + SEP1 + "REQ_KURUMISLEM_DATA" + SEP1 + Username + SEP1 + SessionId + SEP1 + kurumkod + SEP1 + GetEl("TableKurumIslemToolbar").rows[0].cells[ActiveKurumIslemPeriodNo].innerHTML + SEP1 + ToEngUp(ActiveKurumIslemYonString);
                    SendRequest(message);
                }
            }
            // Kurum işlem
            if (ActivePageElement.id == "DivKurumIslemPITE") {
                ClearTable("TableKurumIslemPITE");
                ActiveFooterNo = 3;
                CheckString("DivKurumIslemPITEYonA2", "DivKurumIslemPITEYonA", ToEngUp(ActiveKurumIslemYonString) == "ALINAN", "silver", "aqua");
                CheckString("DivKurumIslemPITEYonS2", "DivKurumIslemPITEYonS", ToEngUp(ActiveKurumIslemYonString) == "SATILAN", "silver", "aqua");
                GetEl("DivKurumIslemPITE").style.visibility = "visible";
                if (ActiveTakasKurumAd == "")
                    GetEl("TextKurumIslemPITESearch").value = "Kurum Seçiniz";
                else
                    GetEl("TextKurumIslemPITESearch").value = ActiveTakasKurumAd;
                if (BrokerKodArray.length == 0) {
                    SendRequest("X" + SEP1 + "REQ_TAKASKURUM_LIST" + SEP1 + Username + SEP1 + SessionId);
                }
                var kurumkod = GetTakasKurumKod(ActiveTakasKurumAd);
                if (kurumkod != "") {
                    var message = "X" + SEP1 + "REQ_KURUMISLEM_DATA_PITE" + SEP1 + Username + SEP1 + SessionId + SEP1 + kurumkod + SEP1 + "0" + SEP1 + ToEngUp(ActiveKurumIslemYonString);
                    SendRequest(message);
                }
            }

            // hacim liste
            if (ActivePageElement.id == "DivHacimListe") {
                ClearTable("TableHacimListe");
                ActiveFooterNo = 3;
                PaintToolbarTable("TableHacimListeToolbar", ActiveHacimListePeriodNo);
                CheckString("", "DivHacimListeYonA", ToEngUp(ActiveHacimListeYonString) == "ALANLAR", "silver", "aqua");
                CheckString("", "DivHacimListeYonS", ToEngUp(ActiveHacimListeYonString) == "SATANLAR", "silver", "aqua");
                CheckString("", "DivHacimListeYonT", ToEngUp(ActiveHacimListeYonString) == "TOPLAM", "silver", "aqua");
                var period = GetEl("TableHacimListeToolbar").rows[0].cells[ActiveHacimListePeriodNo].innerHTML.substr(0, GetEl("TableHacimListeToolbar").rows[0].cells[ActiveHacimListePeriodNo].innerHTML.length - 2);
                var message = "X" + SEP1 + "REQ_HACIM_LIST" + SEP1 + period + SEP1 + ToEngUp(ActiveHacimListeYonString) + SEP1 + Username + SEP1 + SessionId;
                SendRequest(message);
            }

            // takvim
            if (ActivePageElement.id == "DivTakvim") {
                ActiveFooterNo = 3;
                GetEl("DivTakvim").style.visibility = "visible";
                var message = "X" + SEP1 + "REQ_TAKVIM" + SEP1 + Username + SEP1 + SessionId;
                SendRequest(message);
            }

            // Kurum Takas
            if (ActivePageElement.id == "DivKurumTakas") {
                ClearTable("TableKurumTakas");
                ActiveFooterNo = 3;
                GetEl("DivKurumTakas").style.visibility = "visible";
                if (ActiveTakasKurumAd == "")
                    GetEl("TextKurumTakasSearch").value = "Kurum Seçiniz";
                else
                    GetEl("TextKurumTakasSearch").value = ActiveTakasKurumAd;
                if (BrokerKodArray.length == 0) {
                    var message = "X" + SEP1 + "REQ_TAKASKURUM_LIST" + SEP1 + Username + SEP1 + SessionId;
                    SendRequest(message);
                }
                var kurumkod = GetTakasKurumKod(ActiveTakasKurumAd);
                if (kurumkod != "") {
                    var message = "X" + SEP1 + "REQ_TAKASKURUM_DATA" + SEP1 + Username + SEP1 + SessionId + SEP1 + kurumkod;
                    SendRequest(message);
                }
            }

            // sıralı
            if (ActivePageElement.id == "DivSirali") {
                ClearTable("TableSirali");
                ActiveFooterNo = 3;
                GetEl("DivSirali").style.visibility = "visible";
                var message = "X" + SEP1 + "REQ_SIRALI" + SEP1 + Username + SEP1 + SessionId + SEP1 + ToEngUp(GetComboValue("SelectSirali"));
                SendRequest(message);
            }

            BringToFront(ActivePageElement);

            // detay
            if (ActivePageElement.id == "DivDetay") {
                ActiveFooterNo = 1;
                var detayindex = ActiveDetayFooterNo;
                PaintTable("TableDetayFooter", ActiveDetayFooterNo, "black", "black", "white", "#555", "#000", "white");

                var basicitem = BasicObject[DetaySymbol];
                if (basicitem == undefined) return;
                GetEl("TextDetayHeaderSymbol").value = basicitem.GetOriginal();

                if (basicitem.Prefix == "IMKBH" || basicitem.Prefix == "VIP")
                    GetEl("DivDetayBuySell").style.visibility = "visible";
                else
                    GetEl("DivDetayBuySell").style.visibility = "hidden";

                // detay yüzeysel
                if (ActiveDetayFooterNo == 0) {
                    GetEl("DivDetayName").innerHTML = "Yüzeysel";
                    FillDetayYuzeyselTable();
                    SendRequest("X" + SEP1 + "REQ_YUZEYSEL3" + SEP1 + Username + SEP1 + SessionId + SEP1 + basicitem.Composite);
                }

                // getiri
                if (ActiveDetayFooterNo == 1) {
                    GetEl("DivDetayName").innerHTML = "Getiri";
                    var message = "X" + SEP1 + "REQ_SYMBOL_GETIRI" + SEP1 + basicitem.Composite + SEP1 + Username + SEP1 + SessionId + SEP1 + "0";
                    SendRequest(message);
                }

                // detay derinlik
                if (ActiveDetayFooterNo == 2) {
                    GetEl("DivDetayName").innerHTML = "Derinlik-" + DerinlikMaxKadene;
                    FillDetayDerinlikTable();
                    if (basicitem == undefined) return;
                    DerinlikUpdateTime = "0";
                    IslemUpdateTime = "0";
                    SonIslemNo = "0";
                    DerinlikRequestCount = 0;
                    DerinlikRepaintBool = false;
                    IslemRepaintCount = 0;
                    var semboller = basicitem.Composite;//+ ";" + "IMKBH'SAHOL";  //  cccc
                    SendRequest("X" + SEP1 + "REQ_DERINLIK" + SEP1 + Username + SEP1 + SessionId + SEP1 + basicitem.Composite + SEP1 + DerinlikUpdateTime + SEP1 + IslemUpdateTime + SEP1 + SonIslemNo + SEP1 + semboller);
                }

                // detay kademe
                if (ActiveDetayFooterNo == 3) {
                    GetEl("DivDetayName").innerHTML = "Kademe";
                    PaintToolbarTable("TableKademeToolbar", ActiveKademePeriodNo);
                    ClearTable("TableDetayKademeData");
                    SendRequest("X" + SEP1 + "REQ_KDM2" + SEP1 + Username + SEP1 + basicitem.Composite + SEP1 + GetEl("TableKademeToolbar").rows[0].cells[ActiveKademePeriodNo].innerHTML);
                }

                // detay haber
                if (ActiveDetayFooterNo == 4) {
                    GetEl("DivDetayName").innerHTML = "Frm.Haber";
                    ClearTable("TableDetayHaber");
                    var message = "X" + SEP1 + "REQ_NEWS_HEADER" + SEP1 + Username + SEP1 + SessionId + SEP1 + NewsUpdateTime + SEP1 + "SEMBOL" + SEP1 + basicitem.Composite;
                    SendRequest(message);
                }

                // detay chart
                if (ActiveDetayFooterNo == 5) {
                    GetEl("DivDetayName").innerHTML = "Grafik";
                    GetEl("TableDetayChartToolbar").rows[0].cells[0].innerHTML = ActiveChartPeriodElement.innerHTML;
                    ChartObject = {};
                    Bars.length = 0;
                    ChartCurrentBarNo = -1;
                    ChartLevelPoint = 0;
                    DrawChart();
                    if (ActiveIndicatorElement.id == "DivIndicatorNONE")
                        SendRequest("X" + SEP1 + "REQ_CHART" + SEP1 + Username + SEP1 + basicitem.Composite + SEP1 + ActiveChartPeriodElement.innerHTML + SEP1 + "400");
                    else
                        SendRequest("X" + SEP1 + "REQ_TA" + SEP1 + Username + SEP1 + basicitem.Composite + SEP1 + ActiveChartPeriodElement.innerHTML + SEP1 + "400" + SEP1 + ActiveIndicatorElement.innerHTML + SEP1 +
                            IndParam1 + SEP1 + IndParam2 + SEP1 + IndParam3 + SEP1 + IndParam4 + SEP1 + IndParam5 + SEP1 + IndParam6);
                }
            }

            // analiz
            if (ActivePageElement.id == "DivAnaliz") {
                ActiveFooterNo = 2;
                var analizindex = ActiveAnalizFooterNo;
                PaintTable("TableAnalizFooter", ActiveAnalizFooterNo, "black", "black", "white", "#555", "#000", "white");

                var basicitem = BasicObject[DetaySymbol];
                if (basicitem == undefined) return;
                GetEl("TextAnalizHeaderSymbol").value = basicitem.GetOriginal();

                if (basicitem.Prefix == "IMKBH" || basicitem.Prefix == "VIP")
                    GetEl("DivAnalizBuySell").style.visibility = "visible";
                else
                    GetEl("DivAnalizBuySell").style.visibility = "hidden";


                // analiz takas liste
                if (ActiveAnalizFooterNo == 0) {
                    PaintToolbarTable("TableTakasToolbar", ActiveTakasPeriodNo);
                    GetEl("DivAnalizName").innerHTML = "Takas";
                    ClearTable("TableAnalizTakas");
                    SendRequest("X" + SEP1 + "REQ_TKS2" + SEP1 + Username + SEP1 + basicitem.Composite + SEP1 + GetEl("TableTakasToolbar").rows[0].cells[ActiveTakasPeriodNo].innerHTML);
                }

                // analiz takas fark
                if (ActiveAnalizFooterNo == 1) {
                    GetEl("DivAnalizName").innerHTML = "Tks.Fark";
                    PaintToolbarTable("TableTakasFarkToolbar", ActiveTakasFarkPeriodNo);
                    CheckString("DivTakasFarkYonA2", "DivTakasFarkYonA", ToEngUp(ActiveTakasFarkYonString) == "ALANLAR", "silver", "aqua");
                    CheckString("DivTakasFarkYonS2", "DivTakasFarkYonS", ToEngUp(ActiveTakasFarkYonString) == "SATANLAR", "silver", "aqua");
                    var message = "X" + SEP1 + "REQ_TAKAS_FARK" + SEP1 + DetaySymbol + SEP1 + ToEngUp(GetEl("TableTakasFarkToolbar").rows[0].cells[ActiveTakasFarkPeriodNo].innerHTML) + SEP1 + ToEngUp(ActiveTakasFarkYonString) + SEP1 + Username + SEP1 + SessionId;
                    SendRequest(message);
                }

                // analiz dagilim
                if (ActiveAnalizFooterNo == 2) {
                    GetEl("DivAnalizName").innerHTML = "Dağılım";
                    PaintToolbarTable("TableDagilimToolbar", ActiveDagilimPeriodNo);
                    CheckString("", "DivDagilimYonA", ToEngUp(ActiveDagilimYonString) == "ALANLAR", "silver", "aqua");
                    CheckString("", "DivDagilimYonS", ToEngUp(ActiveDagilimYonString) == "SATANLAR", "silver", "aqua");
                    CheckString("", "DivDagilimYonT", ToEngUp(ActiveDagilimYonString) == "TOPLAM", "silver", "aqua");
                    var period = GetEl("TableDagilimToolbar").rows[0].cells[ActiveDagilimPeriodNo].innerHTML.substr(0, GetEl("TableDagilimToolbar").rows[0].cells[ActiveDagilimPeriodNo].innerHTML.length - 2);
                    var message = "X" + SEP1 + "REQ_DAGILIM_PASTA" + SEP1 + DetaySymbol + SEP1 + period + SEP1 + ToEngUp(ActiveDagilimYonString) + SEP1 + Username + SEP1 + SessionId;
                    SendRequest(message);
                }

                // analiz dgl list
                if (ActiveAnalizFooterNo == 3) {
                    GetEl("DivAnalizName").innerHTML = "Dğl.Liste";
                    PaintToolbarTable("TableDglListToolbar", ActiveDagilimPeriodNo);
                    CheckString("", "DivDglListYonA", ToEngUp(ActiveDagilimYonString) == "ALANLAR", "silver", "aqua");
                    CheckString("", "DivDglListYonS", ToEngUp(ActiveDagilimYonString) == "SATANLAR", "silver", "aqua");
                    CheckString("", "DivDglListYonT", ToEngUp(ActiveDagilimYonString) == "TOPLAM", "silver", "aqua");
                    var period = GetEl("TableDagilimToolbar").rows[0].cells[ActiveDagilimPeriodNo].innerHTML.substr(0, GetEl("TableDagilimToolbar").rows[0].cells[ActiveDagilimPeriodNo].innerHTML.length - 2);
                    var message = "X" + SEP1 + "REQ_DAGILIM_LIST" + SEP1 + DetaySymbol + SEP1 + period + SEP1 + ToEngUp(ActiveDagilimYonString) + SEP1 + Username + SEP1 + SessionId;
                    SendRequest(message);
                }

                // analiz sermaye firma
                if (ActiveAnalizFooterNo == 4) {
                    GetEl("DivAnalizName").innerHTML = "Srm.Artış";
                    var message = "X" + SEP1 + "REQ_SERM_FIRMA" + SEP1 + DetaySymbol + SEP1 + Username + SEP1 + SessionId;
                    SendRequest(message);
                }

                // analiz Pite
                if (ActiveAnalizFooterNo == 5) {

                    GetEl("DivAnalizName").innerHTML = "Anlık Dğl.";
                    PaintToolbarTable("TablePiteToolbar", ActiveDagilimPeriodNo);
                    CheckString("", "DivPiteYonA", ToEngUp(ActivePiteYonString) == "ALANLAR", "silver", "aqua");
                    CheckString("", "DivPiteYonS", ToEngUp(ActivePiteYonString) == "SATANLAR", "silver", "aqua");
                    CheckString("", "DivPiteYonT", ToEngUp(ActivePiteYonString) == "TOPLAM", "silver", "aqua");
                    var period = GetEl("TablePiteToolbar").rows[0].cells[ActiveDagilimPeriodNo].innerHTML.substr(0, GetEl("TablePiteToolbar").rows[0].cells[ActiveDagilimPeriodNo].innerHTML.length - 2);
                    GetEl("TablePiteToolbar").style.display = "none";
                    var message = "X" + SEP1 + "REQ_PITE" + SEP1 + DetaySymbol + SEP1 + period + SEP1 + ToEngUp(ActivePiteYonString) + SEP1 + Username + SEP1 + SessionId;
                    SendRequest(message);
                }

            }

            // haber
            if (ActivePageElement.id == "DivHaber") {
                // initial manşet haber request
                if (InitialRequestCount == 0) {
                    var message = "X" + SEP1 + "REQ_NEWS_HEADER" + SEP1 + Username + SEP1 + SessionId + SEP1 + "0" + SEP1 + "MANSET";
                    SendRequest(message);
                }

                ActiveFooterNo = 4;
                FillNewsTable();
            }
            // Temel analiz
            if (ActivePageElement.id == "DivTemelAnaliz") {
                ActiveFooterNo = 5;
                SendRequest("X" + SEP1 + "REQ_TANALIZ" + SEP1 + Username + SEP1 + SessionId + SEP1 + HesapKurum);
                GetEl("DivTemelAnaliz").style.display = "inline-block";
                BringToFront(GetEl("DivTemelAnaliz"));

            }

            // portfoy
            if (ActivePageElement.id == "DivPortfoy") {
                PaintToolbarTable("TablePortfoyToolbar", ActivePortfoyToolbarNo);
                ActiveFooterNo = 6;
                var datatable = GetEl("TablePortfoyData");
                ClearTable("TablePortfoyData");
                if (ActivePortfoyToolbarNo == 1 || ActivePortfoyToolbarNo == 3)
                    GetEl("DivPortfoyEmirDuzelt").style.visibility = "visible";
                else
                    GetEl("DivPortfoyEmirDuzelt").style.visibility = "hidden";

                if (ActivePortfoyToolbarNo == 1 || ActivePortfoyToolbarNo == 3) {
                    GetEl("DivPortfoyEmirStatus").style.display = "inline-block";
                    GetEl("DivPortfoyEmirOperation").style.display = "inline-block";
                }
                else {
                    GetEl("DivPortfoyEmirStatus").style.display = "none";
                    GetEl("DivPortfoyEmirOperation").style.display = "none";
                }
                GetEl("DivPortfoy").style.visibility = "visible";
                GetEl("DivPortfoyHesapNo").innerHTML = HesapAltHesap;
                if (HesapLogin == "0") {
                    GetEl("DivPortfoyLogin").style.backgroundColor = "#F00";
                    GetEl("DivPortfoyLogin").innerHTML = "Giriş";
                }
                else {
                    GetEl("DivPortfoyLogin").style.backgroundColor = "black";
                    GetEl("DivPortfoyLogin").innerHTML = "Çıkış";
                }
                CheckString("DivPortfoyEmirBekleyen2", "DivPortfoyEmirBekleyen", ActiveEmirElement.id == "DivPortfoyEmirBekleyen", "silver", "aqua");
                CheckString("DivPortfoyEmirGerceklesen2", "DivPortfoyEmirGerceklesen", ActiveEmirElement.id == "DivPortfoyEmirGerceklesen", "silver", "aqua");
                CheckString("DivPortfoyEmirIptaller2", "DivPortfoyEmirIptaller", ActiveEmirElement.id == "DivPortfoyEmirIptaller", "silver", "aqua");

                if (HesapLogin == "1") {
                    var orderstatus = "WAITING";
                    if (ActiveEmirElement.id == GetEl("DivPortfoyEmirGerceklesen").id)
                        orderstatus = "FILLED";

                    if (ActivePortfoyToolbarNo == 0)
                        SendRequest("X" + SEP1 + "REQ_TRD_BIST_PORTFOY" + SEP1 + Username + SEP1 + SessionId + SEP1 + HesapKurum + SEP1 + HesapNo + SEP1 + HesapAltHesap + SEP1 + HesapParola + SEP1);
                    else if (ActivePortfoyToolbarNo == 1)
                        SendRequest("X" + SEP1 + "REQ_TRD_BIST_EMIRLER" + SEP1 + Username + SEP1 + SessionId + SEP1 + HesapKurum + SEP1 + HesapNo + SEP1 + HesapAltHesap + SEP1 + HesapParola + SEP1 + orderstatus + SEP1);
                    else if (ActivePortfoyToolbarNo == 2)
                        SendRequest("X" + SEP1 + "REQ_TRD_VIOP_PORTFOY" + SEP1 + Username + SEP1 + SessionId + SEP1 + HesapKurum + SEP1 + HesapNo + SEP1 + HesapAltHesap + SEP1 + HesapParola + SEP1);
                    else if (ActivePortfoyToolbarNo == 3)
                        SendRequest("X" + SEP1 + "REQ_TRD_VIOP_EMIRLER" + SEP1 + Username + SEP1 + SessionId + SEP1 + HesapKurum + SEP1 + HesapNo + SEP1 + HesapAltHesap + SEP1 + HesapParola + SEP1 + orderstatus + SEP1);

                }
            }

            PaintTable("TableFooter", ActiveFooterNo, "#000", "#000", "white", "#555", "#000", "white");
            if (ActiveFooterNo == 0)
                PaintTable("TableFooter", ActiveFooterNo, "#000", "#000", "white", "#555", "#000", "white");

            Resize();


            if (SozlesmeKabulDateStr == "0" && YayinState) {
                GetEl("DivSozlesme").style.display = "inline";
                BringToFront(GetEl("DivSozlesme"));
                GetEl("DivSozlesmeText").style.height = (GetEl("DivSozlesmeKabul").offsetTop - GetEl("DivSozlesmeHeader").offsetTop - GetEl("DivSozlesmeHeader").offsetHeight - 10) + "px";
                GetEl("DivSozlesmeText").innerHTML = SozlesmeStr.replace(/\r\n/g, "<br>").replace(/\n/g, "<br>");
            }

            if (RiskBildirimOnay == "0") {
                ShowByID("DivRBFPopUp");
                BringByID("DivRBFPopUp");
                GetEl("DivRBFPopUpContent").style.height = (DeviceHeight - GetEl("DivRBFPopUpButton").clientHeight - GetEl("DivRBFPopUpHeader").clientHeight - 20) + "px";
            }

        }

        Array.prototype.contains = function (obj) {
            var i = this.length;
            while (i--) {
                if (this[i] === obj)
                    return true;
            }
            return false;
        }

        function AddSpace(num) {
            var str = "";
            for (var i = 0; i < num; ++i)
                str += "&nbsp";
            return str;
        }


        function AlarmEkle() {
            var basic = BasicObject[DetaySymbol];
            if (basic == undefined) return;

            if (FireBaseToken == "" || FireBaseToken == "null" || FireBaseToken == undefined) {
                ShowAlertWindow("Alarm Uyarı", "Alaram kurabilmek için programınızın kurulumu yapıldıktan sonra en az bir defa kapatılıp açılması gerekiyor.");

                return;
            }
            var fiyat = GetEl("DivAlarmEkleTextFiyat").value;
            var elselect = GetEl("DivAlarmEkleSelectSart");
            var sart = elselect.options[elselect.selectedIndex].value;
            SendRequest("X" + SEP1 + "REQ_ALARM_EKLE" + SEP1 + Username + SEP1 + SessionId + SEP1 + basic.Composite + SEP1 + sart + SEP1 + fiyat + SEP1 + FireBaseToken);
        }
        function AlarmSil() {
            var onaystr = "";
            if (AlarmSilRowNo < 0) return;
            var table = GetEl("TableAlarmListesi");
            var sembol = table.rows[AlarmSilRowNo].cells[0].innerHTML;
            var sart = table.rows[AlarmSilRowNo].cells[1].innerHTML;
            var fiyat = table.rows[AlarmSilRowNo].cells[2].innerHTML;
            var alarmid = table.rows[AlarmSilRowNo].cells[4].innerHTML;
            onaystr += "Sembol = " + sembol;
            onaystr += "<br>Şart = " + sart;
            onaystr += "<br>Fiyat = " + fiyat;
            onaystr += "<br>Alarm Silinecek !! <br>Emin misiniz";

            GetEl("DivConfirmMsj").innerHTML = "X" + SEP1 + "REQ_ALARM_SIL" + SEP1 + Username + SEP1 + SessionId + SEP1 + alarmid
            ShowConfirmWindow("Alarm Sil", onaystr, 2);
        }
        function ApproveMesajOnay() {
            SendRequest("X" + SEP1 + "REQ_ONAY_MESAJ" + SEP1 + Username + SEP1 + SessionId);
        }

        function ApproveSozlesme() {
            SendRequest("X" + SEP1 + "REQ_ONAY_SOZLESME" + SEP1 + Username + SEP1 + SessionId);
        }

        function ApprovePortfoySozlesme() {
            HideByID("DivPortfoySozlesme");
            localStorage.removeItem("UYARIOKUNDU");
            localStorage["UYARIOKUNDU"] = "1";
            DisplayHesapLogin();
        }

        function BringToFront(el) {
            ZIndex++;
            el.style.zIndex = ZIndex;
        }

        function BringByID(id) {
            ZIndex++;
            document.getElementById(id).style.zIndex = ZIndex;
        }

        function BasicClass() {
            this.Symbol = "";
            this.Prefix = "";
            this.Composite = "";
            this.DecPoint = 4;
            this.SeriNo = "";				// 4
            this.IndexType = "000";		// 5
            this.SubMarket = "";			// 6
            this.Group = "";				// 7
            this.LastPrice = 0;			// 0
            this.DayClose = 0;			// 1
            this.Percent = 0;
            this.LimitUp = 0;				// N
            this.LimitDown = 0;	 		// O
            this.Original = "";			// h
            this.Adim = 0;				// 8
            this.BidPrice = 0;
            this.MarketMakerBid = 0;
            this.MarketMakerAsk = 0;


            this.AskPrice = 0;// 3
            this.BrutTakasBool = false; //9

            this.UpdateTime = new Date();
            this.UpdateBool = false;
            this.BidAskBool = false;

            this.CalculatePercent = function () {
                this.Percent = 0;
                if (this.LastPrice > 0 && this.DayClose > 0)
                    this.Percent = 100 * (this.LastPrice - this.DayClose) / this.DayClose;
            }

            this.GetOriginal = function () {
                if (this.Original != "") return this.Original;
                return this.Symbol;
            }

            this.GetPriceStr = function (priceX) {
                if (priceX == 0) return "";
                return priceX.toFixed(this.DecPoint);
            }
            this.GetPercentStr = function () {
                if (this.LastPrice == 0 || this.DayClose == 0) return "";
                return "% " + this.Percent.toFixed(2);
            }
            this.GetPercentStr2 = function () {
                if (this.LastPrice == 0 || this.DayClose == 0) return "";
                return this.Percent.toFixed(2);
            }

        }

        function BistBuySellTutarhesapla() {
            var tutarval = 0.00;
            var adetval = 0.00;
            var fiyatval = 0.00;
            var fiyatstr = GetEl("DivBistBuySellTextFiyat").value;//.replace(/\./g,"");
            var adetstr = GetEl("DivBistBuySellTextMiktar").value;//.replace(/\./g,"");
            if (fiyatstr != "")
                fiyatval = parseFloat(fiyatstr);
            if (adetstr != "")
                adetval = parseFloat(adetstr);
            GetEl("lblBuysellTutar").innerHTML = (fiyatval * adetval).toLocaleString("en-US");
        }
        function BoolToStr(val) {
            if (val)
                return "1";
            else
                return "0";
        }
        function BrutTakasKontrol(sembolx) {
            var str = "";
            BasicItem = BasicObject[sembolx];
            if (BasicItem != undefined) {
                if (BasicItem.BrutTakasBool)
                    str = "<b>Brüt Takas Uyarısı</b><br>Hisse senedinde brüt takas uygulaması vardır. Brüt Takas kapsamında alınan pay aynı gün içerisinde satılamaz.";

                if (BasicItem.BrutTakasBool == true && BasicItem.Group == "ALT") str += "<br>";
                if (BasicItem.Group == "ALT")
                    str += "<b>Alt Pazar Uyarısı</b><br>İşlem yapmak istediğiniz payın yer aldığı Alt Pazar paylarında, derinliğin/likiditenin sınırlı olabileceği dolayısıyla aşağı/yukarı yönlü sert fiyat hareketleri ihtimalinin daha yüksek olabileceğini dikkate alınarak piyasa risklerinin net bir şekilde farkında olunması, bu riskler değerlendirilerek işlem yapılması ve fiyat riskinin sınırlandırılabilmesi için alım-satım emirlerinin mümkün olduğu kadar limit fiyatlı emir şeklinde iletilmesi hususları önemle dikkatinize sunulur.";

                str += "<br>Devam etmek istiyor musunuz ?";

                if (BasicItem.BrutTakasBool == false && BasicItem.Group != "ALT") str = "";
            }
            return str;
        }

        function CalculateIncrement(highval, lowval) {
            var dif = (highval - lowval) / 5;

            var str = (dif * Math.pow(10, 8)).toFixed(0);
            var len = str.length;
            var num = parseFloat(str) * Math.pow(10, 30 - len);

            if (num < 1 * Math.pow(10, 29))
                return 1 / Math.pow(10, 9 - len);
            else if (num < 2 * Math.pow(10, 29))
                return 2 / Math.pow(10, 9 - len);
            else if (num < 5 * Math.pow(10, 29))
                return 5 / Math.pow(10, 9 - len);
            else
                return 10 / Math.pow(10, 9 - len);
            return 1000;
        }

        function CheckElement(id, val, color1, color2) {
            var el = GetEl(id);
            el.innerHTML = "&#9711;";
            el.style.color = color1;
            if (val) {
                el.innerHTML = "&#10003;";
                el.style.color = color2;
            }
        }

        function CheckString(id1, id2, val, color1, color2) {
            if (id1 != "") {
                var el1 = GetEl(id1);
                el1.innerHTML = "&#9711;";
                el1.style.color = color1;
                if (val) {
                    el1.innerHTML = "&#10003;";
                    el1.style.color = color2;
                }
            }
            var el2 = GetEl(id2);
            el2.style.color = color1;
            el2.style.fontWeight = "Normal";
            if (val) {
                el2.style.color = color2;
                el2.style.fontWeight = "Bold";
            }
        }

        function CheckTableCell(cell, val) {
            if (val) {
                cell.innerHTML = "&#10003;";
                cell.style.color = "aqua";
            }
            else {
                cell.innerHTML = "&#9711;";
                cell.style.color = "silver";
            }
        }

        function CellType(cell, width, align, color, innerhtml, padding, extend) {
            if (width != "")
                cell.style.width = width;
            if (align != "")
                cell.style.textAlign = align;
            cell.style.color = color;
            cell.innerHTML = innerhtml;
            cell.style.borderBottom = Border;
            cell.style.padding = padding;
            cell.style.fontSize = FontSizeTable;
            if (extend == false) {
                cell.style.overflow = "hidden";
                cell.style.whiteSpace = "nowrap";
            }
        }

        function CellTypeToolbar(cell, innerhtml, color1, color2, color, padding) {
            cell.style.textAlign = "center";
            cell.style.color = color;
            cell.innerHTML = innerhtml;
            cell.style.border = "1px black solid";
            cell.style.paddingTop = padding;
            cell.style.paddingBottom = padding;
            cell.style.overflow = "hidden";
            cell.style.whiteSpace = "nowrap";
            cell.style.background = "-webkit-linear-gradient(" + color1 + "," + color2 + ")";
            cell.style.background = "-moz-linear-gradient(" + color1 + "," + color2 + ")";
            cell.style.background = "linear-gradient(" + color1 + "," + color2 + ")";
        }

        function CellTypeHighLowColor(cell, num) {
            if (num > 0)
                cell.style.color = HighColor;
            else if (num < 0)
                cell.style.color = LowColor;
            else
                cell.style.color = LastColor;
        }

        function ChangeWatchlistType() {
            WatchlistType++;
            if (WatchlistType > 2)
                WatchlistType = 0;
            FillWatchlistTable();
            localStorage.removeItem("WatchlistType");
            localStorage["WatchlistType"] = WatchlistType;
        }

        function ChartClass() {
            this.DateTime = "";
            this.Open = 0;
            this.High = 0;
            this.Low = 0;
            this.Close = 0;
            this.IndData = new Array(3);

            this.GetDateStr = function () {
                switch (ActiveChartPeriodElement.innerHTML) {
                    case "1":
                    case "2":
                    case "3":
                    case "4":
                    case "5":
                    case "8":
                    case "10":
                    case "15":
                    case "20":
                    case "30":
                    case "60":
                    case "S":
                        return this.DateTime.substr(8, 2) + "/" + this.DateTime.substr(5, 2) + " - " + this.DateTime.substr(11, 5);
                    case "G":
                    case "H":
                        return this.DateTime.substr(0, 10);
                    case "A":
                        return this.DateTime.substr(0, 7);
                    case "Y":
                        return this.DateTime.substr(0, 4);
                }
            }
        }

        function ClearTable(id) {
            var table = GetEl(id);
            for (var i = table.rows.length - 1; i >= 0; i--)
                table.deleteRow(i);
        }

        function CloseSocket() {
            if (Socket != null) {
                Socket.close();
                Socket = null;
            }
        }

        function Connect() {
            if (GetEl("DivLoginConnect").innerHTML == "Bekleyiniz")
                return;
            try {

                YayinStatus = "1"; // cccc
                //CloseSocket();   // cccc
                try {
                    localStorage.removeItem("LOGIN");
                    if (GetEl("checkRemember").checked) {
                        var str = GetEl("textUsername").value + "|" + GetEl("textPassword").value;
                        localStorage["LOGIN"] = str;
                    }

                } catch (e) {
                    alert(e);
                }


                SessionId = (Math.random() * 1000000000).toFixed(0);
                HesapLogin = "0";
                VipActiveRequested = false;
                InitialRequestCount = 0;
                InitialMesajCount = 0;
                ConnectionEstablished = false;
                SocketSupported = true;
                ServerUrl = FillServerList();
                Socket = new WebSocket(ServerUrl);
                Socket.onopen = function () {
                    Username = GetEl("textUsername").value;
                    var password = GetEl("textPassword").value;
                    if (Username != "" && password != "") {
                        var msgsend = "X" + SEP1 + "REQ_CONNECT" + SEP1 + Username + SEP1 + password + SEP1 + SessionId + SEP1 + ProductType + SEP1 + DeviceType;

                        Socket.send(msgsend);
                    }
                }

                Socket.onmessage = function (event) {
                    SocketInitialData = true;  // ssss
                    ParseMessage(event.data);
                    SocketSupported = true;
                    YayinTimeSckt1 = new Date();
                }

                Socket.onclose = function () { // cccc
                    if (YayinSckt != null)
                        YayinSckt.close();
                }
            }
            catch (ex) {
                //alert(ex.message);
            }

            GetEl("DivLoginConnect").innerHTML = "Bekleyiniz";
            var LoginPressTimeOut = window.setTimeout(function () { GetEl("DivLoginConnect").innerHTML = "Giriş"; window.clearTimeout(LoginPressTimeOut); }, 5000);
        }


        function ConnectYayin(prm) {   // cccc
            if (YayinSckt != null)
                YayinSckt.close();
            YayinSckt = new WebSocket(UrlHeader + YayinURL);
            YayinSckt.onopen = function () {
                var msgsend = "X" + SEP1 + "329" + SEP1 + Username + SEP1 + prm + SEP1 + SessionId + SEP1 + ProductType + SEP1 + DeviceType;
                YayinSckt.send(msgsend);
            }

            YayinSckt.onmessage = function (event) {
                ParseMessage(event.data);
                YayinTimeSckt2 = new Date();
            }

            YayinSckt.onclose = function () {
                //if (Socket != null)
                //    Socket.close();
            }
        }

        Date.prototype.AddDays = function (days) {
            var dat = new Date(this.valueOf());
            dat.setDate(dat.getDate() + days);
            return dat;
        }

        function DisplayAutoCompleteTable(el, table) {
            var div = table.parentNode;
            div.style.display = "inline-block";
            if (el == null) return;
            div.style.top = (el.offsetTop + el.clientHeight + 5) + "px";
            div.style.left = el.offsetLeft + "px";
            div.style.width = el.clientWidth + "px";
            div.style.height = "40%";
        }
        function CheckAkseansSembol(val) {
            if (val.GetOriginal().indexOf("_X") > -1 && val.GetOriginal().indexOf("_XAUTRY") < 0)
                return true;
            else
                return false;
        }
        function DisplayBuySell() {
            GetEl("lblBuysellTutar").innerHTML = "";
            var basic = BasicObject[DetaySymbol];

            var prefix = "";

            if (basic != undefined) {
                prefix = basic.Prefix;
                if (ActivePageElement.id == "DivPortfoy") {
                    if (ActivePortfoyToolbarNo == 0 || ActivePortfoyToolbarNo == 1) {
                        if (prefix != "IMKBH") {
                            prefix = "IMKBH";
                            DetaySymbol = "";
                            basic = BasicObject[DetaySymbol];
                        }
                    }
                    if (ActivePortfoyToolbarNo == 2 || ActivePortfoyToolbarNo == 3) {
                        if (prefix != "VIP") {
                            prefix = "VIP";
                            DetaySymbol = "";
                            basic = BasicObject[DetaySymbol];
                        }
                    }
                }
            }
            else {
                if (ActivePageElement.id == "DivPortfoy") {
                    if (ActivePortfoyToolbarNo == 0 || ActivePortfoyToolbarNo == 1) {
                        prefix = "IMKBH";
                        DetaySymbol = "";
                        basic = BasicObject[DetaySymbol];

                    }
                    if (ActivePortfoyToolbarNo == 2 || ActivePortfoyToolbarNo == 3) {
                        prefix = "VIP";
                        DetaySymbol = "";
                        basic = BasicObject[DetaySymbol];
                    }
                }
                else {
                    prefix = "IMKBH";
                }
            }
            var original = "";

            if (basic != undefined) {
                original = basic.GetOriginal();
                prefix = basic.Prefix;

                if (CheckAkseansSembol(basic))
                    GetEl("DivAksamSeans").style.display = "inline-block";
                else
                    GetEl("DivAksamSeans").style.display = "none";

            }
            else {
                HideByID("DivAksamSeans");
            }

            if (HesapLogin == "0") {
                DisplayHesapLogin();
                return;
            }

            var table;
            var maxrows = 0;

            BuySellDerinlik = prefix;
            BuySellDerinlikTemizle();

            if (prefix == "IMKBH") {
                GetEl("TableBistBuySellSymbol").style.display = "none";
                GetEl("TableBistBuySellFiyat").style.display = "none";



                // fill symbol table
                table = GetEl("TableBistBuySellSymbol");
                var symbolarray = [];
                for (var name in BasicObject) {
                    var item = BasicObject[name];
                    if (item.Prefix == "IMKBH")
                        symbolarray.push(name);
                }
                symbolarray.sort();
                maxrows = symbolarray.length;

                ClearTable("TableBistBuySellSymbol");
                for (var i = 0; i < maxrows; i++) {
                    var rowcount = table.rows.length;
                    var row = table.insertRow(rowcount);
                    InsertCell(row, "300px", "L", "", "gainsboro", "", symbolarray[i]);
                    row.cells[0].style.padding = "5px";
                }

                // click events
                for (var i = 0; i < table.rows.length; i++) {
                    var currentrow = table.rows[i];
                    var cellclick = function (rowno) {
                        return function () {
                            GetEl("DivBistBuySellTextSymbol").value = table.rows[rowno].cells[0].innerHTML;
                            OnChange_DivBistBuySellTextSymbol();
                            table.style.display = "none";
                        };
                    };
                    currentrow.onmousedown = cellclick(i);
                }

                var datenow = new Date();
                if (datenow.getHours() * 60 + datenow.getMinutes() >= 18 * 60 + 10)
                    datenow = datenow.AddDays(1);
                if (datenow.getDay() == 0)
                    datenow = datenow.AddDays(1);
                if (datenow.getDay() == 6)
                    datenow = datenow.AddDays(2);

                GetEl("TextBistValor").value = FormatDate(datenow, "DD/MM/YYYY");
                if (BistBackOffice == "GTP") {
                    GetEl("LabelBistValor").style.display = "inline-block";
                    GetEl("LabelBistValorFormat").style.display = "inline-block";
                    GetEl("TextBistValor").style.display = "inline-block";
                    GetEl("BrBistValor").style.display = "inline-block";
                }
                else {
                    GetEl("LabelBistValor").style.display = "none";
                    GetEl("LabelBistValorFormat").style.display = "none";
                    GetEl("TextBistValor").style.display = "none";
                    GetEl("BrBistValor").style.display = "none";
                }

                // show buy sell division
                var el = GetEl("DivBistBuySell");
                el.style.display = "inline-block";
                BringToFront(el);
                GetEl("DivBistBuySellTextSymbol").value = original;
                GetEl("DivBistBuySellTextFiyat").value = "";
                GetEl("DivBistBuySellButtonAciga").checked = false;
                GetEl("DivBistBuySellTextMiktar").value = "";

                OnChange_DivBistBuySellTextSymbol();

            }

            if (prefix == "VIP") {

                GetEl("TableViopBuySellSymbol").style.display = "none";
                GetEl("TableViopBuySellFiyat").style.display = "none";

                GetEl("chkViopSart").checked = false;
                OnChange_DivViopBuySellSartEmirCheck(GetEl('chkViopSart'));
                GetEl("chkViopSart").style.display = "inline-block";
                GetEl("sartLabel").style.display = "inline-block";

                // fill symbol table
                table = GetEl("TableViopBuySellSymbol");
                var symbolarray = [];
                for (var name in BasicObject) {
                    var item = BasicObject[name];
                    if (item.Prefix == "VIP" && name.substr(0, 3) != "VIP")
                        symbolarray.push(name);
                }
                symbolarray.sort();
                maxrows = symbolarray.length;


                ClearTable("TableViopBuySellSymbol");
                for (var i = 0; i < maxrows; i++) {
                    var rowcount = table.rows.length;
                    var row = table.insertRow(rowcount);
                    InsertCell(row, "300px", "L", "", "gainsboro", "", symbolarray[i]);
                    row.cells[0].style.padding = "5px";
                }

                // click events
                for (var i = 0; i < table.rows.length; i++) {
                    var currentrow = table.rows[i];
                    var cellclick = function (rowno) {
                        return function () {
                            GetEl("DivViopBuySellTextSymbol").value = table.rows[rowno].cells[0].innerHTML;
                            OnChange_DivViopBuySellTextSymbol();
                            table.style.display = "none";
                        };
                    };
                    currentrow.onmousedown = cellclick(i);
                }

                // show buy sell division
                var el = GetEl("DivViopBuySell");
                el.style.display = "inline-block";
                BringToFront(el);
                GetEl("DivViopBuySellTextSymbol").value = original;
                GetEl("DivViopBuySellTextSartSymbol").value = original;
                GetEl("DivViopBuySellTextFiyat").value = "";
                GetEl("DivViopBuySellTextMiktar").value = "";
                GetEl("DivViopBuySellTextMiktar").disabled = false;
                GetEl("DivViopBuySellTextSymbol").disabled = false;
                GetEl("DivViopBuySellHeader").innerHTML = "VIOP Emir Gönder";
                GetEl("DivViopBuySellHeader").style.backgroundColor = "orange";
                GetEl("DivViopBuySellSelectEmirTip").disabled = false;
                GetEl("DivViopBuySellButton").style.display = "inline-block";
                GetEl("DivViopBuySellEmirDuzelt").style.display = "none";
                OnChange_DivViopBuySellTextSymbol();
            }
        }
        function DisplayHesapLogin() {
            HidePopups();
            if (YayinState == false) return;

            var el = GetEl("DivHesapLogin");
            el.style.visibility = "visible";
            BringToFront(el);

            if (HesapLogin == "0") {
                // local storage
                var loginkey = localStorage["TRADELOGINKEY"];
                if (loginkey != undefined) {
                    var fieldarray = loginkey.split("|");

                    GetEl("HesapLoginCheckRemember").checked = false;
                    if (fieldarray[0] == "1") GetEl("HesapLoginCheckRemember").checked = true;

                    GetEl("HesapLoginCheckRemember2").checked = false;
                    if (fieldarray[1] == "1") GetEl("HesapLoginCheckRemember2").checked = true;

                    HesapKurum = fieldarray[2];
                    HesapParola = fieldarray[3];
                    HesapSifre = fieldarray[4];
                    HesapNo = fieldarray[5];
                    HesapAltHesap = fieldarray[6];
                    HesapMusteriTip = fieldarray[7];

                    if (fieldarray[0] != "1") {
                        HesapKurum = "";
                        HesapParola = "";
                        HesapNo = "";
                        HesapSifre = "";
                    }
                    if (fieldarray[1] != "1") {
                        HesapSifre = "";
                    }
                }

                // set element values
                GetEl("HesapLoginTextHesapNo").value = HesapNo;
                GetEl("HesapLoginTextParola").value = HesapParola;
                GetEl("HesapLoginTextSifre").value = HesapSifre;
                var elselect = GetEl("HesapLoginSelectKurum");
                elselect.options.length = 0;

                for (var i = 0; i < KurumlarArray.length; i++) {
                    var item = document.createElement("option");
                    item.text = KurumlarArray[i];
                    elselect.add(item, null);
                }
                for (var i = 0; i < elselect.options.length; i++) {
                    if (elselect.options[i].innerHTML == HesapKurum)
                        elselect.selectedIndex = i;
                }

                vararrMusteriTip = ["Bireysel", "Kurumsal"];
                var elselectMusteriTip = GetEl("HesapLoginSelectMusteriTip");
                elselectMusteriTip.options.length = 0;

                for (var i = 0; i < vararrMusteriTip.length; i++) {
                    var item = document.createElement("option");
                    item.text = vararrMusteriTip[i];
                    elselectMusteriTip.add(item, null);
                }

                GetEl("HesapLoginOl").innerHTML = "Giriş Yap";
                ReorderParolaSifre();
            }
            else {
                GetEl("HesapLoginOl").innerHTML = "Çıkış Yap";
            }

        }
        function DisplayEmirDetay() {
            if (EmirSilRowNo < 0) return;
            GetEl("DivEmirDetayZincir").style.visibility = "visible";
            var table = GetEl("TablePortfoyData");
            var eskimiktarstr = table.rows[EmirSilRowNo].cells[2].innerHTML;
            var eskifiyatstr = table.rows[EmirSilRowNo].cells[3].innerHTML;
            var emirnostr = table.rows[EmirSilRowNo].cells[5].innerHTML;
            var emirsure = table.rows[EmirSilRowNo].cells[4].innerHTML;
            var geneksdurationstr = table.rows[EmirSilRowNo].cells[6].innerHTML;
            var yon = table.rows[EmirSilRowNo].cells[1].innerHTML;
            var sembol = table.rows[EmirSilRowNo].cells[0].innerHTML;
            var ordertypestr = ToEngUp(table.rows[EmirSilRowNo].cells[8].innerHTML);
            var durumstr = ToEngUp(table.rows[EmirSilRowNo].cells[10].innerHTML);
            var orderdate = ToEngUp(table.rows[EmirSilRowNo].cells[12].innerHTML);

            var tableDetay = GetEl("TableEmirDetay");
            ClearTable("TableEmirDetay");

            parserow = tableDetay.insertRow(0);
            InsertCell(parserow, "30%", "L", "", "", "", "Hesap No");
            InsertCell(parserow, "60%", "L", "", "", "", HesapNo);
            parserow = tableDetay.insertRow(1);
            InsertCell(parserow, "30%", "L", "", "", "", "Alt Hesap")
            InsertCell(parserow, "60%", "L  ", "", "", "", HesapAltHesap);
            parserow = tableDetay.insertRow(2);
            InsertCell(parserow, "30%", "L", "", "", "", "Emir Numarası");
            InsertCell(parserow, "60%", "L", "", "", "", emirnostr);
            parserow = tableDetay.insertRow(3);
            InsertCell(parserow, "30%", "L", "", "", "", "Emir Yön")
            InsertCell(parserow, "60%", "L  ", "", "", "", yon);
            parserow = tableDetay.insertRow(4);
            InsertCell(parserow, "30%", "L", "", "", "", "Emir Sembol")
            InsertCell(parserow, "60%", "L  ", "", "", "", sembol);
            parserow = tableDetay.insertRow(5);
            InsertCell(parserow, "30%", "L", "", "", "", "Emir Tip")
            InsertCell(parserow, "60%", "L  ", "", "", "", ordertypestr);
            parserow = tableDetay.insertRow(6);
            InsertCell(parserow, "30%", "L", "", "", "", "Emir Süre")
            InsertCell(parserow, "60%", "L  ", "", "", "", emirsure);
            parserow = tableDetay.insertRow(7);
            InsertCell(parserow, "30%", "L", "", "", "", "Emir Miktar")
            InsertCell(parserow, "60%", "L  ", "", "", "", eskimiktarstr);
            parserow = tableDetay.insertRow(8);
            InsertCell(parserow, "30%", "L", "", "", "", "Emir Fiyat")
            InsertCell(parserow, "30%", "L  ", "", "", "", eskifiyatstr);
            parserow = tableDetay.insertRow(9);
            InsertCell(parserow, "30%", "L", "", "", "", "Emir Durum")
            var cell = InsertCell(parserow, "60%", "L  ", "", "", "", durumstr);
            cell.style.whiteSpace = "normal";
            parserow = tableDetay.insertRow(10);
            InsertCell(parserow, "30%", "L", "", "", "", "Emir Saat")
            var cell = InsertCell(parserow, "60%", "L  ", "", "", "", orderdate);
            cell.style.whiteSpace = "normal";


            GetEl("DivEmirDetay").style.display = "inline";
            BringToFront(GetEl("DivEmirDetay"));

        }
        function DisplayEmirDetayViop() {
            if (EmirSilRowNo < 0) return;
            GetEl("DivEmirDetayZincir").style.visibility = "hidden";

            var table = GetEl("TablePortfoyData");
            var sembol = table.rows[EmirSilRowNo].cells[0].innerHTML;
            var yon = table.rows[EmirSilRowNo].cells[1].innerHTML;
            var eskimiktarstr = table.rows[EmirSilRowNo].cells[2].innerHTML;
            var eskifiyatstr = table.rows[EmirSilRowNo].cells[3].innerHTML;
            var emirsure = table.rows[EmirSilRowNo].cells[4].innerHTML;
            var emirnostr = table.rows[EmirSilRowNo].cells[5].innerHTML;
            var ordertypestr = ToEngUp(table.rows[EmirSilRowNo].cells[6].innerHTML);
            // var geneksdurationstr = table.rows[EmirSilRowNo].cells[6].innerHTML;
            var enddatestr = ToEngUp(table.rows[EmirSilRowNo].cells[8].innerHTML);
            var sartsembolstr = ToEngUp(table.rows[EmirSilRowNo].cells[11].innerHTML);
            var sarttipstr = ToEngUp(table.rows[EmirSilRowNo].cells[12].innerHTML);
            var sartfiyatstr = ToEngUp(table.rows[EmirSilRowNo].cells[13].innerHTML);
            var ordertime = table.rows[EmirSilRowNo].cells[15].innerHTML;
            var gerceklerenMiktar = table.rows[EmirSilRowNo].cells[16].innerHTML;
            var KalanMiktar = table.rows[EmirSilRowNo].cells[17].innerHTML;
            var aksamSeansStr = "Normal";
            if (table.rows[EmirSilRowNo].cells[18].innerHTML == "1")
                aksamSeansStr = "Akşam";




            // var durumstr = ToEngUp(table.rows[EmirSilRowNo].cells[10].innerHTML);

            var tableDetay = GetEl("TableEmirDetay");
            ClearTable("TableEmirDetay");

            parserow = tableDetay.insertRow(0);
            InsertCell(parserow, "40%", "L", "", "", "", "Hesap No");
            InsertCell(parserow, "55%", "L", "", "", "", HesapNo);
            parserow = tableDetay.insertRow(1);
            InsertCell(parserow, "40%", "L", "", "", "", "Alt Hesap")
            InsertCell(parserow, "55%", "L  ", "", "", "", HesapAltHesap);
            parserow = tableDetay.insertRow(2);
            InsertCell(parserow, "40%", "L", "", "", "", "Emir Numarası");
            InsertCell(parserow, "55%", "L", "", "", "", emirnostr);
            parserow = tableDetay.insertRow(3);
            InsertCell(parserow, "40%", "L", "", "", "", "Emir Yön")
            InsertCell(parserow, "55%", "L  ", "", "", "", yon);
            parserow = tableDetay.insertRow(4);
            InsertCell(parserow, "40%", "L", "", "", "", "Emir Sembol")
            InsertCell(parserow, "55%", "L  ", "", "", "", sembol);
            parserow = tableDetay.insertRow(5);
            InsertCell(parserow, "40%", "L", "", "", "", "Emir Tip")
            InsertCell(parserow, "55%", "L  ", "", "", "", ordertypestr);
            parserow = tableDetay.insertRow(6);
            InsertCell(parserow, "40%", "L", "", "", "", "Emir Süre")
            InsertCell(parserow, "55%", "L  ", "", "", "", emirsure);
            parserow = tableDetay.insertRow(7);
            InsertCell(parserow, "40%", "L", "", "", "", "Emir Miktar")
            InsertCell(parserow, "55%", "L  ", "", "", "", eskimiktarstr);
            parserow = tableDetay.insertRow(8);
            InsertCell(parserow, "40%", "L", "", "", "", "Emir Fiyat")
            InsertCell(parserow, "55%", "L  ", "", "", "", eskifiyatstr);
            parserow = tableDetay.insertRow(9);
            InsertCell(parserow, "40%", "L", "", "", "", "Şart Sözleşme")
            InsertCell(parserow, "55%", "L  ", "", "", "", sartsembolstr);
            parserow = tableDetay.insertRow(10);
            InsertCell(parserow, "40%", "L", "", "", "", "Şart Tip")
            InsertCell(parserow, "55%", "L  ", "", "", "", sarttipstr);
            parserow = tableDetay.insertRow(11);
            InsertCell(parserow, "40%", "L", "", "", "", "Şart Fiyat")
            InsertCell(parserow, "55%", "L  ", "", "", "", sartfiyatstr);
            parserow = tableDetay.insertRow(12);
            InsertCell(parserow, "40%", "L", "", "", "", "Emir Giriş Zamanı")
            InsertCell(parserow, "55%", "L  ", "", "", "", ordertime);
            parserow = tableDetay.insertRow(13);
            InsertCell(parserow, "40%", "L", "", "", "", "Gerçekleşen Miktar")
            InsertCell(parserow, "55%", "L  ", "", "", "", gerceklerenMiktar);
            parserow = tableDetay.insertRow(14);
            InsertCell(parserow, "40%", "L", "", "", "", "Kalan Miktar")
            InsertCell(parserow, "55%", "L  ", "", "", "", KalanMiktar);
            parserow = tableDetay.insertRow(15);
            InsertCell(parserow, "40%", "L", "", "", "", "Seans Tip")
            InsertCell(parserow, "55%", "L", "", "", "", aksamSeansStr);

            GetEl("DivEmirDetay").style.display = "inline";
            BringToFront(GetEl("DivEmirDetay"));

        }
        function DisplayPortfoyUyariWindow() {
            SendRequest("X" + SEP1 + "REQ_TRD_UYARI" + SEP1 + Username + SEP1 + SessionId);
        }
        function DisplaySembolSlider(rowno) {
            GetEl("DivSliderRow").innerHTML = rowno;
            var cel = GetEl("TableWatchlist").rows[rowno].cells[4];
            GetEl("DivSembolSlider").style.display = "inline"; 5
            GetEl("DivSembolSlider").style.top = (cel.offsetTop - GetEl("DivTableWatchlist").scrollTop + cel.clientHeight * 1.2) + "px";
            GetEl("DivSembolSlider").style.left = cel.clientWidth - GetEl("DivSembolSlider").clientWidth + cel.offsetLeft - 5 + "px";
            GetEl("DivSembolSlider").style.width = cel.clientWidth + "px";
            GetEl("DivSembolSlider").style.visibility = "visible";
            GetEl("DivSembolSlider").style.opacity = "1";
            GetEl("DivSembolSlider").style.height = "25%";
            BringToFront(GetEl("DivSembolSlider"));
            GetEl("DivSembolSlider").style.transition = "all 0.2s";
        }
        function DisplayWatchlistData(nameX) {
            // get basic data
            BasicItem = BasicObject[nameX];
            if (BasicItem == undefined) return;



            // get row no
            RowNo = WatchlistSymbolObject[nameX];
            if (RowNo == undefined) return;




            UpdateRow = WatchlistTable.rows[RowNo];

            if (WatchlistType == 0) {
                // print last price
                UpdateRow.cells[1].innerHTML = BasicItem.GetPriceStr(BasicItem.LastPrice);
                var bcolor = BackColor;
                var fcolor = "gainsboro";
                if (BasicItem.UpdateBool) {
                    bcolor = UpdateBackColor;
                    fcolor = UpdateForeColor;
                }
                UpdateRow.cells[1].style.backgroundColor = bcolor;
                UpdateRow.cells[1].style.color = fcolor;

                // print percent
                UpdateRow.cells[2].innerHTML = BasicItem.GetPercentStr();
                if (BasicItem.Percent > 0)
                    UpdateRow.cells[2].style.color = HighColor;
                else if (BasicItem.Percent < 0)
                    UpdateRow.cells[2].style.color = LowColor;
                else
                    UpdateRow.cells[2].style.color = "gold";
            }

            else if (WatchlistType == 1) {
                // print bid ask
                UpdateRow.cells[1].innerHTML = BasicItem.GetPriceStr(BasicItem.BidPrice);
                UpdateRow.cells[2].innerHTML = BasicItem.GetPriceStr(BasicItem.AskPrice);
                var bcolor = BackColor;
                var fcolor = "gainsboro";
                if (BasicItem.UpdateBool) {
                    bcolor = UpdateBackColor;
                    fcolor = UpdateForeColor;
                }
                UpdateRow.cells[1].style.backgroundColor = bcolor;
                UpdateRow.cells[1].style.color = fcolor;
                UpdateRow.cells[2].style.backgroundColor = bcolor;
                UpdateRow.cells[2].style.color = fcolor;
            }

            else if (WatchlistType == 2) {
                UpdateRow.cells[1].innerHTML = BasicItem.GetPriceStr(BasicItem.LastPrice);
                UpdateRow.cells[2].innerHTML = BasicItem.GetPriceStr(BasicItem.BidPrice);
                UpdateRow.cells[3].innerHTML = BasicItem.GetPriceStr(BasicItem.AskPrice);
                UpdateRow.cells[4].innerHTML = BasicItem.GetPercentStr();

                // last price
                var bcolor = BackColor;
                var fcolor = "#DC8";
                if (BasicItem.UpdateBool) {
                    bcolor = UpdateBackColor;
                    fcolor = "#FF4";
                    //bcolor="#FF6";
                    //fcolor="#000";

                }
                UpdateRow.cells[1].style.backgroundColor = bcolor;
                UpdateRow.cells[1].style.color = fcolor;

                // bid ask
                bcolor = BackColor;
                fcolor = "silver";
                if (BasicItem.BidAskBool) {
                    bcolor = UpdateBackColor;
                    fcolor = UpdateForeColor;
                }
                UpdateRow.cells[2].style.backgroundColor = bcolor;
                UpdateRow.cells[2].style.color = fcolor;
                UpdateRow.cells[3].style.backgroundColor = bcolor;
                UpdateRow.cells[3].style.color = fcolor;

                // print percent
                UpdateRow.cells[4].innerHTML = BasicItem.GetPercentStr2();
                if (BasicItem.Percent > 0)
                    UpdateRow.cells[4].style.color = HighColor;
                else if (BasicItem.Percent < 0)
                    UpdateRow.cells[4].style.color = LowColor;
                else
                    UpdateRow.cells[4].style.color = "gold";

            }

        }
        function DisplayZincirBuySell() {

            if (EmirSilRowNo < 0) return;
            var table = GetEl("TablePortfoyData");
            var emirno = table.rows[EmirSilRowNo].cells[5].innerHTML;

            if (HesapLogin == "0") {
                DisplayHesapLogin();
                return;
            }
            GetEl("lblZincirSelltype").style.display = "inline";
            if (BistBackOffice != "IDB")
                GetEl("lblZincirSelltype").style.display = "none";



            var table;
            var maxrows = 0;

            GetEl("DivBistZincirBuySellEmirNo").innerHTML = emirno;
            GetEl("TableBistZincirBuySellSymbol").style.display = "none";
            GetEl("TableBistZincirBuySellFiyat").style.display = "none";

            // fill symbol table
            table = GetEl("TableBistZincirBuySellSymbol");
            var symbolarray = [];
            for (var name in BasicObject) {
                var item = BasicObject[name];
                if (item.Prefix == "IMKBH")
                    symbolarray.push(name);
            }
            symbolarray.sort();
            maxrows = symbolarray.length;

            ClearTable("TableBistZincirBuySellSymbol");
            for (var i = 0; i < maxrows; i++) {
                var rowcount = table.rows.length;
                var row = table.insertRow(rowcount);
                InsertCell(row, "300px", "L", "", "gainsboro", "", symbolarray[i]);
                row.cells[0].style.padding = "5px";
            }

            // click events
            for (var i = 0; i < table.rows.length; i++) {
                var currentrow = table.rows[i];
                var cellclick = function (rowno) {
                    return function () {
                        GetEl("DivBistZincirBuySellTextSymbol").value = table.rows[rowno].cells[0].innerHTML;
                        OnChange_DivBistZincirBuySellTextSymbol();
                        table.style.display = "none";
                    };
                };
                currentrow.onmousedown = cellclick(i);
            }
            // show buy sell division
            var el = GetEl("DivBistZincirBuySell");
            el.style.display = "inline-block";
            BringToFront(el);
            GetEl("DivBistZincirBuySellTextFiyat").value = "";
            GetEl("DivBistZincirBuySellButtonAciga").checked = false;
            GetEl("DivBistZincirBuySellTextMiktar").value = "";

            OnChange_DivBistZincirBuySellTextSymbol();

        }
        function DrawChart() {
            function GetX(barno) {
                return ChartWidth - ChartRightMargin - (ChartLastBarNo - barno) * ChartBarSpace + 0.5;
            }
            function GetY(price) {
                if (ChartMaxPrice == ChartMinPrice) return 0;
                var virtualheight = ChartHeight - ChartTopMargin;
                return ChartTopMargin + virtualheight * (ChartMaxPrice - price) / (ChartMaxPrice - ChartMinPrice) + 0.5;
            }
            function GetPrice(Y) {
                if (ChartMaxPrice == ChartMinPrice) return 0;
                var virtualheight = ChartHeight - ChartTopMargin;
                return ChartMaxPrice - (Y - ChartTopMargin) * (ChartMaxPrice - ChartMinPrice) / virtualheight;
            }
            function GetIndY(price) {
                if (IndMaxPrice == IndMinPrice) return 0;
                return IndHeight * (IndMaxPrice - price) / (IndMaxPrice - IndMinPrice) + 0.5;
            }
            function DrawBar(i) {
                var x1 = GetX(i);
                if (x1 <= 0) return;
                var highy = GetY(Bars[i].High);
                var lowy = GetY(Bars[i].Low);
                var openy = GetY(Bars[i].Open);
                var closey = GetY(Bars[i].Close);
                ctx.moveTo(x1, highy); ctx.lineTo(x1, lowy);

                var bartype = ChartBarType;




                if (ChartBarSpace < 5) bartype = 0;
                if (bartype == 0) {
                    if (ChartBarSpace > 2) {
                        ctx.moveTo(x1, closey); ctx.lineTo(x1 + 2, closey);
                        ctx.moveTo(x1 - 2, openy); ctx.lineTo(x1, openy);
                    }
                    if (i == ChartLastBarNo) {
                        ctx.moveTo(x1, closey); ctx.lineTo(ChartWidth - ChartRightMargin + 20, closey);
                    }
                }
                else if (bartype == 1) {
                    ctx.fillRect(x1 - ChartBarSpace / 2 + 1, closey, ChartBarSpace - 2, openy - closey);
                    ctx.moveTo(x1, closey); ctx.lineTo(x1 + 2, closey);
                    ctx.moveTo(x1 - 2, openy); ctx.lineTo(x1, openy);
                }

            }

            var xpos = 0;

            // canvas
            var canvas;
            if (GetEl("DivTech").style.display == "inline-block")
                canvas = GetEl("Canvas1Tech");
            else
                canvas = GetEl("CanvasDetayChart");

            var ctx = canvas.getContext("2d");
            ctx.font = "12px Arial";
            ctx.lineWidth = 1;
            ChartWidth = canvas.width;
            ChartHeight = canvas.height;

            // canvas2
            var canvas2;
            if (GetEl("DivTech").style.display == "inline-block")
                canvas2 = GetEl("Canvas2Tech");
            else
                canvas2 = GetEl("CanvasDetayInd");

            var ctx2 = canvas2.getContext("2d");
            ctx2.font = "12px Arial";
            ctx2.lineWidth = 1;
            IndWidth = canvas2.width;
            IndHeight = canvas2.height;

            // clear
            ctx.fillStyle = "black";
            ctx.clearRect(0, 0, ChartWidth, ChartHeight);
            ctx2.fillStyle = "black";
            ctx2.clearRect(0, 0, IndWidth, IndHeight);

            // read data
            if (ChartCurrentBarNo >= ChartBarCount) {
                if (ChartBarCount != Bars.length)
                    ChartCurrentBarNo = -1;
            }

            ChartBarCount = Bars.length;
            ChartLastBarNo = ChartBarCount - 1;
            if (ChartBarCount == 0) return;
            if (ChartCurrentBarNo == -1) ChartCurrentBarNo = ChartBarCount;
            var barno = ChartCurrentBarNo;
            barno = Math.max(0, barno);
            barno = Math.min(ChartLastBarNo, barno);

            for (var i = ChartLastBarNo; i >= 0; i--) {
                xpos = GetX(i);
                if (xpos <= 0) break;
                ChartFirstBarNo = i;
            }

            // bar min max
            ChartMaxPrice = Bars[ChartFirstBarNo].High;
            ChartMinPrice = Bars[ChartFirstBarNo].Low;
            for (var i = ChartLastBarNo; i >= ChartFirstBarNo; i--) {
                ChartMaxPrice = Math.max(ChartMaxPrice, Bars[i].High);
                ChartMinPrice = Math.min(ChartMinPrice, Bars[i].Low);
            }
            ChartMaxPrice = ChartMaxPrice + 0.1 * (ChartMaxPrice - ChartMinPrice);
            ChartMinPrice = ChartMinPrice - 0.1 * (ChartMaxPrice - ChartMinPrice);


            // ind min max
            if (IndLineCount > 0) {
                IndMaxPrice = Bars[ChartFirstBarNo].IndData[0];
                IndMinPrice = Bars[ChartFirstBarNo].IndData[0];
                for (var i = ChartLastBarNo; i >= ChartFirstBarNo; i--) {
                    for (var j = 0; j < IndLineCount; j++) {
                        IndMaxPrice = Math.max(IndMaxPrice, Bars[i].IndData[j]);
                        IndMinPrice = Math.min(IndMinPrice, Bars[i].IndData[j]);
                    }
                }
                IndMaxPrice = IndMaxPrice + 0.1 * (IndMaxPrice - IndMinPrice);
                IndMinPrice = IndMinPrice - 0.1 * (IndMaxPrice - IndMinPrice);

                if (ActiveIndicatorElement.id == "DivIndicatorVOL")
                    IndMinPrice = 0;
            }


            // horizontal grid
            var inc = CalculateIncrement(ChartMaxPrice, ChartMinPrice);
            var lowval = Math.floor(ChartMinPrice / inc) * inc - inc;
            ctx.strokeStyle = "#222";
            ctx.fillStyle = "silver";
            ctx.beginPath();
            ctx2.strokeStyle = "#222";
            ctx2.fillStyle = "silver";
            ctx2.beginPath();
            for (var i = 0; i < 100; i++) {
                var gridval = lowval + inc * i;
                if (gridval > ChartMaxPrice) break;
                var gridy = GetY(gridval);
                if (gridy > ChartTopMargin + 20 && gridy < ChartHeight) {
                    ctx.moveTo(0, gridy); ctx.lineTo(ChartWidth - ChartRightMargin + 20, gridy);
                    ctx.fillText(PriceToStr(DetaySymbol, gridval), ChartWidth - ChartRightMargin + 20 + 2, gridy);
                }
            }

            // vertical grid
            for (var i = ChartLastBarNo; i >= ChartFirstBarNo + 1; i--) {
                if (ActiveChartPeriodElement.innerHTML == "H" || ActiveChartPeriodElement.innerHTML == "A") {
                    var year1 = Bars[i].DateTime.substr(0, 4);
                    var year2 = Bars[i - 1].DateTime.substr(0, 4);
                    if (year1 != year2) {
                        xpos = GetX(i);
                        ctx.moveTo(xpos, ChartTopMargin); ctx.lineTo(xpos, ChartHeight);
                        ctx.fillText(year1.substr(2, 2), xpos, ChartTopMargin - 5);
                        ctx2.moveTo(xpos, 0); ctx2.lineTo(xpos, IndHeight);
                    }
                }

                else if (ActiveChartPeriodElement.innerHTML == "S" || ActiveChartPeriodElement.innerHTML == "G") {
                    var year1 = Bars[i].DateTime.substr(0, 4);
                    var year2 = Bars[i - 1].DateTime.substr(0, 4);
                    var month1 = Bars[i].DateTime.substr(5, 2);
                    var month2 = Bars[i - 1].DateTime.substr(5, 2);
                    if (year1 != year2) {
                        xpos = GetX(i);
                        ctx.moveTo(xpos, ChartTopMargin); ctx.lineTo(xpos, ChartHeight);
                        ctx.fillText(year1, xpos, ChartTopMargin - 5);
                        ctx2.moveTo(xpos, 0); ctx2.lineTo(xpos, IndHeight);
                    }
                    else if (month1 != month2) {
                        if (ChartBarSpace >= 3) {
                            xpos = GetX(i);
                            ctx.moveTo(xpos, ChartTopMargin); ctx.lineTo(xpos, ChartHeight);
                            ctx.fillText(month1, xpos, ChartTopMargin - 5);
                            ctx2.moveTo(xpos, 0); ctx2.lineTo(xpos, IndHeight);
                        }
                    }
                }

                else if (ActiveChartPeriodElement.innerHTML == "60") {
                    var month1 = Bars[i].DateTime.substr(5, 2);
                    var year1 = Bars[i].DateTime.substr(0, 4);
                    var month1 = Bars[i].DateTime.substr(5, 2);
                    var day1 = Bars[i].DateTime.substr(8, 2);
                    var date1 = new Date(year1, month1 - 1, day1);
                    var week1 = date1.getDay();

                    var month2 = Bars[i - 1].DateTime.substr(5, 2);
                    var year2 = Bars[i - 1].DateTime.substr(0, 4);
                    var month2 = Bars[i - 1].DateTime.substr(5, 2);
                    var day2 = Bars[i - 1].DateTime.substr(8, 2);
                    var date2 = new Date(year2, month2 - 1, day2);
                    var week2 = date2.getDay();

                    if (week1 < week2) {
                        xpos = GetX(i);
                        ctx.moveTo(xpos, ChartTopMargin); ctx.lineTo(xpos, ChartHeight);
                        ctx.fillText(day1, xpos, ChartTopMargin - 5);
                        ctx2.moveTo(xpos, 0); ctx2.lineTo(xpos, IndHeight);
                    }
                }

                else if (ActiveChartPeriodElement.innerHTML == "5" || ActiveChartPeriodElement.innerHTML == "10" ||
                    ActiveChartPeriodElement.innerHTML == "15" || ActiveChartPeriodElement.innerHTML == "20" ||
                    ActiveChartPeriodElement.innerHTML == "30") {
                    var year1 = Bars[i].DateTime.substr(0, 4);
                    var month1 = Bars[i].DateTime.substr(5, 2);
                    var day1 = Bars[i].DateTime.substr(8, 2);
                    var date1 = new Date(year1, month1 - 1, day1);
                    var week1 = date1.getDay();
                    var year2 = Bars[i - 1].DateTime.substr(0, 4);
                    var month2 = Bars[i - 1].DateTime.substr(5, 2);
                    var day2 = Bars[i - 1].DateTime.substr(8, 2);
                    var date2 = new Date(year2, month2 - 1, day2);
                    var week2 = date2.getDay();
                    var day1 = Bars[i].DateTime.substr(8, 2);
                    var day2 = Bars[i - 1].DateTime.substr(8, 2);
                    if (ChartBarSpace < 3) {
                        if (week1 != week2) {
                            xpos = GetX(i);
                            ctx.moveTo(xpos, ChartTopMargin); ctx.lineTo(xpos, ChartHeight);
                            ctx.fillText(day1, xpos, ChartTopMargin - 5);
                            ctx2.moveTo(xpos, 0); ctx2.lineTo(xpos, IndHeight);
                        }
                    }
                    else {
                        if (day1 != day2) {
                            xpos = GetX(i);
                            ctx.moveTo(xpos, ChartTopMargin); ctx.lineTo(xpos, ChartHeight);
                            ctx.fillText(day1, xpos, ChartTopMargin - 5);
                            ctx2.moveTo(xpos, 0); ctx2.lineTo(xpos, IndHeight);
                        }
                    }
                }

                else if (ActiveChartPeriodElement.innerHTML == "1" || ActiveChartPeriodElement.innerHTML == "2") {
                    var day1 = Bars[i].DateTime.substr(8, 2);
                    var day2 = Bars[i - 1].DateTime.substr(8, 2);
                    var hour1 = Bars[i].DateTime.substr(11, 2);
                    var hour2 = Bars[i - 1].DateTime.substr(11, 2);
                    if (ChartBarSpace < 3) {
                        if (day1 != day2) {
                            xpos = GetX(i);
                            ctx.moveTo(xpos, ChartTopMargin); ctx.lineTo(xpos, ChartHeight);
                            ctx.fillText(hour1, xpos, ChartTopMargin - 5);
                            ctx2.moveTo(xpos, 0); ctx2.lineTo(xpos, IndHeight);
                        }
                    }
                    else {
                        if (hour1 != hour2) {
                            xpos = GetX(i);
                            ctx.moveTo(xpos, ChartTopMargin); ctx.lineTo(xpos, ChartHeight);
                            ctx.fillText(hour1, xpos, ChartTopMargin - 5);
                            ctx2.moveTo(xpos, 0); ctx2.lineTo(xpos, IndHeight);
                        }
                    }
                }
            }
            ctx.stroke();

            // current bar
            if (ChartCurrentBarNo < ChartBarCount) {
                ctx.strokeStyle = "blue";
                ctx.beginPath();
                xpos = GetX(ChartCurrentBarNo);
                ctx.moveTo(xpos, ChartTopMargin + 1); ctx.lineTo(xpos, ChartHeight - 1);
                ctx.stroke();

                ctx2.strokeStyle = "blue";
                ctx2.beginPath();
                xpos = GetX(ChartCurrentBarNo);
                ctx2.moveTo(xpos, 1); ctx2.lineTo(xpos, IndHeight - 1);
                ctx2.stroke();
            }

            // OHLC
            if (ChartBarType == 0) //OHLC
            {
                if (ChartDoubleColoring) {
                    // green
                    ctx.strokeStyle = "#1F1";
                    ctx.beginPath();
                    for (var i = ChartFirstBarNo + 1; i <= ChartLastBarNo; i++) {
                        if (Bars[i].Close > Bars[i - 1].Close)
                            DrawBar(i);
                    }
                    ctx.stroke();
                    // red
                    ctx.strokeStyle = "#F11";
                    ctx.beginPath();
                    for (var i = ChartFirstBarNo + 1; i <= ChartLastBarNo; i++) {
                        if (Bars[i].Close < Bars[i - 1].Close)
                            DrawBar(i);
                    }
                    ctx.stroke();
                    // yellow
                    ctx.strokeStyle = "#FF0";
                    ctx.beginPath();
                    for (var i = ChartFirstBarNo + 1; i <= ChartLastBarNo; i++) {
                        if (Bars[i].Close == Bars[i - 1].Close)
                            DrawBar(i);
                    }
                    ctx.stroke();
                }
                else {
                    // yellow
                    ctx.strokeStyle = "#FF0";
                    ctx.beginPath();
                    for (var i = ChartFirstBarNo; i <= ChartLastBarNo; i++)
                        DrawBar(i);
                    ctx.stroke();
                }
            }
            else if (ChartBarType == 1) //Candle
            {
                // green
                ctx.fillStyle = "#1F1";
                ctx.strokeStyle = "#1F1";
                ctx.beginPath();
                for (var i = ChartFirstBarNo; i <= ChartLastBarNo; i++) {
                    if (Bars[i].Close > Bars[i].Open)
                        DrawBar(i);
                }
                ctx.stroke();
                // red
                ctx.fillStyle = "#F11";
                ctx.strokeStyle = "#F11";
                ctx.beginPath();
                for (var i = ChartFirstBarNo; i <= ChartLastBarNo; i++) {
                    if (Bars[i].Close < Bars[i].Open)
                        DrawBar(i);
                }
                ctx.stroke();
                // yellow
                ctx.fillStyle = "#FF0";
                ctx.strokeStyle = "#FF0";
                ctx.beginPath();
                for (var i = ChartFirstBarNo; i <= ChartLastBarNo; i++) {
                    if (Bars[i].Close == Bars[i].Open)
                        DrawBar(i);
                }
                ctx.stroke();
            }
            else if (ChartBarType == 2) //Line
            {
                // yellow
                ctx.fillStyle = "#FF0";
                ctx.strokeStyle = "#FF0";
                ctx.beginPath();
                for (var i = ChartFirstBarNo; i <= ChartLastBarNo; i++) {
                    var x1 = GetX(i);
                    var closey = GetY(Bars[i].Close);
                    ctx.moveTo(x1, closey); ctx.lineTo(GetX(i - 1), GetY(Bars[i - 1].Close));

                    if (i == ChartLastBarNo) {
                        ctx.moveTo(x1, closey); ctx.lineTo(ChartWidth - ChartRightMargin + 20, closey);
                    }
                }
                ctx.stroke();
            }


            ctx.fillStyle = "gray";
            ctx.fillRect(ChartWidth - ChartRightMargin + 23, GetY(Bars[ChartLastBarNo].Close) - 12, 32, 15);
            ctx.stroke();
            ctx.fillStyle = "white";

            ctx.fillText(Bars[ChartLastBarNo].Close, ChartWidth - ChartRightMargin + 26, GetY(Bars[ChartLastBarNo].Close));


            ctx2.stroke();

            // indicator
            if (IndLineCount > 0) {
                if (IndPanel == 0) {
                    for (var m = 0; m < IndLineCount; m++) {
                        ctx.strokeStyle = IndColors[m];
                        ctx.beginPath();
                        // line
                        if (DrawTypes[m] == 0) {
                            for (var i = ChartFirstBarNo; i <= ChartLastBarNo; i++) {
                                xpos1 = GetX(i - 1);
                                xpos2 = GetX(i);
                                var p1 = GetY(Bars[i - 1].IndData[m]);
                                var p2 = GetY(Bars[i].IndData[m]);
                                ctx.moveTo(xpos1, p1); ctx.lineTo(xpos2, p2);
                            }
                        }
                        // parabolic
                        else if (DrawTypes[m] == 2) {
                            for (var i = ChartFirstBarNo; i <= ChartLastBarNo; i++) {
                                xpos = GetX(i);
                                var p1 = GetY(Bars[i].IndData[m]);
                                ctx.moveTo(xpos - ChartBarSpace / 3, p1); ctx.lineTo(xpos + ChartBarSpace / 3, p1);
                                ctx.moveTo(xpos - ChartBarSpace / 3, p1 + 1); ctx.lineTo(xpos + ChartBarSpace / 3, p1 + 1);
                                ctx.moveTo(xpos - ChartBarSpace / 3, p1 - 1); ctx.lineTo(xpos + ChartBarSpace / 3, p1 - 1);
                            }
                            ctx.lineWidth = 1;
                        }
                        ctx.stroke();
                    }

                    // values
                    if (ChartValuesVisible) {
                        for (var m = 0; m < IndLineCount; m++)
                            PrintCanvasText(ctx, IndText[m] + "=" + PriceToIndStr(DetaySymbol, Bars[barno].IndData[m]), "black", IndColors[m], 2, (m + 6) * 13 + ChartTopMargin + 2);
                    }
                }
                if (IndPanel == 1) {
                    // horizontal grid
                    var inc = CalculateIncrement(IndMaxPrice, IndMinPrice);
                    var lowval = Math.floor(IndMinPrice / inc) * inc - inc;
                    ctx2.strokeStyle = "silver";
                    ctx2.fillStyle = "silver";
                    ctx2.beginPath();
                    for (var i = 0; i < 100; i++) {
                        var gridval = lowval + inc * i;
                        if (gridval > IndMaxPrice) break;
                        var gridy = GetIndY(gridval);
                        if (gridy > 0 && gridy < IndHeight) {
                            ctx2.moveTo(0, gridy); ctx2.lineTo(IndWidth - ChartRightMargin + 20, gridy);
                            ctx2.fillText(PriceToIndStr(DetaySymbol, gridval), IndWidth - ChartRightMargin + 20 + 2, gridy);
                        }
                    }

                    // lines
                    for (var m = 0; m < IndLineCount; m++) {
                        ctx2.strokeStyle = IndColors[m];
                        ctx2.beginPath();
                        // line
                        if (DrawTypes[m] == 0) {
                            for (var i = ChartFirstBarNo; i <= ChartLastBarNo; i++) {
                                xpos1 = GetX(i - 1);
                                xpos2 = GetX(i);
                                var p1 = GetIndY(Bars[i - 1].IndData[m]);
                                var p2 = GetIndY(Bars[i].IndData[m]);
                                ctx2.moveTo(xpos1, p1); ctx2.lineTo(xpos2, p2);
                            }
                        }
                        // vol
                        else if (DrawTypes[m] == 1) {
                            for (var i = ChartFirstBarNo; i <= ChartLastBarNo; i++) {
                                xpos = GetX(i);
                                var p1 = GetIndY(Bars[i].IndData[m]);
                                var p2 = GetIndY(0);
                                ctx2.moveTo(xpos, p1); ctx2.lineTo(xpos, p2);
                            }
                        }
                        ctx2.stroke();
                    }

                    // values
                    if (ChartValuesVisible) {
                        for (var m = 0; m < IndLineCount; m++)
                            PrintCanvasText(ctx2, IndText[m] + "=" + PriceToIndStr(DetaySymbol, Bars[barno].IndData[m]), "black", IndColors[m], 2, (m + 1) * 13 + 2);
                    }
                }
            }


            ShowChartBuysell(ChartBuySellVisible);



            // horizontal
            if (ChartCaptureLevel) {
                if (ChartLevelPoint > 0) {
                    ctx.strokeStyle = "blue";
                    ctx.beginPath();
                    var levelprice = GetPrice(ChartLevelPoint);
                    ctx.moveTo(0, ChartLevelPoint + 0.5); ctx.lineTo(ChartWidth - ChartRightMargin + 20, ChartLevelPoint + 0.5);
                    ctx.stroke();
                    PrintCanvasText(ctx, PriceToStr(DetaySymbol, levelprice), "black", "yellow", ChartWidth - ChartRightMargin + 20 + 2, ChartLevelPoint);
                }
            }

            // trendline
            var trendtype = TrendType;
            var trendparam = localStorage["TREND" + "|" + DetaySymbol + "|" + ActiveChartPeriodElement.innerHTML];
            if (trendparam != undefined) {
                var trendparamarray = trendparam.split("|");
                trendtype = trendparamarray[0];
                TrendStartDateStr = trendparamarray[1];
                TrendStartPrice = trendparamarray[2];
                TrendEndDateStr = trendparamarray[3];
                TrendEndPrice = trendparamarray[4];
                TrendSymbol = DetaySymbol;
                TrendPeriod = ActiveChartPeriodElement.innerHTML;
                TrendAvailable = true;
            }

            if (TrendSymbol != DetaySymbol) TrendStartDateStr = "";
            if (TrendPeriod != ActiveChartPeriodElement.innerHTML) TrendStartDateStr = "";
            if (TrendAvailable) {
                if (TrendStartDateStr != "" && TrendEndDateStr && TrendStartPrice > 0 && TrendEndPrice > 0) {
                    var x1 = 0;
                    var x2 = 0;
                    var y1 = GetY(TrendStartPrice);
                    var y2 = GetY(TrendEndPrice);
                    for (var i = 0; i <= ChartLastBarNo; i++) {
                        if (TrendStartDateStr == Bars[i].DateTime)
                            x1 = GetX(i);
                        if (TrendEndDateStr == Bars[i].DateTime) {
                            x2 = GetX(i);
                            break;
                        }
                    }
                    if (trendtype == 0) {
                        var x3 = ChartWidth - ChartRightMargin + 20.5;
                        var y3 = y1 + (x3 - x1) * (y2 - y1) / (x2 - x1);
                        ctx.lineWidth = 2;
                        ctx.strokeStyle = "#F6F";
                        ctx.beginPath();
                        xpos = GetX(i);
                        var point = GetY(TrendStartPrice);
                        ctx.moveTo(x1, y1); ctx.lineTo(x3, y3);
                        ctx.stroke();
                        ctx.lineWidth = 1;
                    }
                    else {
                        var x3 = ChartWidth - ChartRightMargin + 20.5;
                        var y3 = y1 + (x3 - x1) * (y2 - y1) / (x2 - x1);
                        ctx.lineWidth = 2;
                        ctx.strokeStyle = "#F6F";
                        ctx.beginPath();
                        xpos = GetX(i);
                        var point = GetY(TrendStartPrice);
                        ctx.moveTo(x1, y1); ctx.lineTo(x2, y2);
                        ctx.moveTo(x1, y1); ctx.lineTo(x3, y1);
                        ctx.moveTo(x1, y2); ctx.lineTo(x3, y2);
                        ctx.stroke();
                        ctx.lineWidth = 1;

                        //Fibo
                        ctx.beginPath();
                        var dif = y2 - y1;
                        for (var i = 0; i < Fibo.length; i++) {
                            var point = y1 + Fibo[i] * dif;
                            ctx.moveTo(x1, point); ctx.lineTo(x3, point);
                        }
                        ctx.stroke();
                    }
                }
            }
            else {
                if (TrendStartDateStr != "") {
                    for (var i = 0; i <= ChartLastBarNo; i++) {
                        if (TrendStartDateStr == Bars[i].DateTime) {
                            ctx.lineWidth = 2;
                            ctx.strokeStyle = "#F6F";
                            ctx.beginPath();
                            xpos = GetX(i);
                            var point = GetY(TrendStartPrice);
                            ctx.moveTo(xpos - ChartBarSpace - 2, point); ctx.lineTo(xpos + ChartBarSpace + 2, point);
                            ctx.stroke();
                            ctx.lineWidth = 1;
                            break;
                        }
                    }
                }
            }

            // trendline2
            trendtype = TrendType;
            trendparam = localStorage["TREND2" + "|" + DetaySymbol + "|" + ActiveChartPeriodElement.innerHTML];
            if (trendparam != undefined) {
                var trendparamarray = trendparam.split("|");
                trendtype = trendparamarray[0];
                Trend2StartDateStr = trendparamarray[1];
                Trend2StartPrice = trendparamarray[2];
                Trend2EndDateStr = trendparamarray[3];
                Trend2EndPrice = trendparamarray[4];
                TrendSymbol = DetaySymbol;
                TrendPeriod = ActiveChartPeriodElement.innerHTML;
                Trend2Available = true;
            }
            if (TrendSymbol != DetaySymbol) Trend2StartDateStr = "";
            if (TrendPeriod != ActiveChartPeriodElement.innerHTML) Trend2StartDateStr = "";
            if (Trend2Available) {
                if (Trend2StartDateStr != "" && Trend2EndDateStr && Trend2StartPrice > 0 && Trend2EndPrice > 0) {
                    var x1 = 0;
                    var x2 = 0;
                    var y1 = GetY(Trend2StartPrice);
                    var y2 = GetY(Trend2EndPrice);
                    for (var i = 0; i <= ChartLastBarNo; i++) {
                        if (Trend2StartDateStr == Bars[i].DateTime)
                            x1 = GetX(i);
                        if (Trend2EndDateStr == Bars[i].DateTime) {
                            x2 = GetX(i);
                            break;
                        }
                    }
                    if (trendtype == 0) {
                        var x3 = ChartWidth - ChartRightMargin + 20.5;
                        var y3 = y1 + (x3 - x1) * (y2 - y1) / (x2 - x1);
                        ctx.lineWidth = 2;
                        ctx.strokeStyle = "#6FF";
                        ctx.beginPath();
                        xpos = GetX(i);
                        var point = GetY(Trend2StartPrice);
                        ctx.moveTo(x1, y1); ctx.lineTo(x3, y3);
                        ctx.stroke();
                        ctx.lineWidth = 1;
                    }
                    else {
                        var x3 = ChartWidth - ChartRightMargin + 20.5;
                        var y3 = y1 + (x3 - x1) * (y2 - y1) / (x2 - x1);
                        ctx.lineWidth = 2;
                        ctx.strokeStyle = "#6FF";
                        ctx.beginPath();
                        xpos = GetX(i);
                        var point = GetY(Trend2StartPrice);
                        ctx.moveTo(x1, y1); ctx.lineTo(x2, y2);
                        ctx.moveTo(x1, y1); ctx.lineTo(x3, y1);
                        ctx.moveTo(x1, y2); ctx.lineTo(x3, y2);
                        ctx.stroke();
                        ctx.lineWidth = 1;

                        //Fibo
                        ctx.beginPath();
                        var dif = y2 - y1;
                        for (var i = 0; i < Fibo.length; i++) {
                            var point = y1 + Fibo[i] * dif;
                            ctx.moveTo(x1, point); ctx.lineTo(x3, point);
                        }
                        ctx.stroke();
                    }
                }
            }
            else {
                if (Trend2StartDateStr != "") {
                    for (var i = 0; i <= ChartLastBarNo; i++) {
                        if (Trend2StartDateStr == Bars[i].DateTime) {
                            ctx.lineWidth = 2;
                            ctx.strokeStyle = "#6FF";
                            ctx.beginPath();
                            xpos = GetX(i);
                            var point = GetY(Trend2StartPrice);
                            ctx.moveTo(xpos - ChartBarSpace - 2, point); ctx.lineTo(xpos + ChartBarSpace + 2, point);
                            ctx.stroke();
                            ctx.lineWidth = 1;
                            break;
                        }
                    }
                }
            }


            // Yatay Trend
            trendtype = TrendType;
            trendparam = localStorage["YATAY" + "|" + DetaySymbol + "|" + ActiveChartPeriodElement.innerHTML];
            if (trendparam != undefined) {
                var trendparamarray = trendparam.split("|");
                trendtype = trendparamarray[0];
                YatayStartDateStr = trendparamarray[1];
                YatayStartPrice = trendparamarray[2];
                YatayEndDateStr = trendparamarray[3];
                YatayEndPrice = trendparamarray[4];
                TrendSymbol = DetaySymbol;
                TrendPeriod = ActiveChartPeriodElement.innerHTML;
                YatayAvailable = true;
            }
            if (TrendSymbol != DetaySymbol) YatayStartDateStr = "";
            if (TrendPeriod != ActiveChartPeriodElement.innerHTML) YatayStartDateStr = "";
            if (YatayAvailable) {
                if (YatayStartDateStr != "" && YatayEndDateStr && YatayStartPrice > 0 && YatayEndPrice > 0) {
                    var x1 = 0;
                    var x2 = 0;
                    var y1 = GetY(YatayStartPrice);
                    var y2 = GetY(YatayEndPrice);
                    for (var i = 0; i <= ChartLastBarNo; i++) {
                        if (YatayStartDateStr == Bars[i].DateTime)
                            x1 = GetX(i);
                        if (YatayEndDateStr == Bars[i].DateTime) {
                            x2 = GetX(i);
                            break;
                        }
                    }
                    if (trendtype == 0) {
                        var x3 = ChartWidth - ChartRightMargin + 20.5;
                        var y3 = y1 + (x3 - x1) * (y2 - y1) / (x2 - x1);
                        ctx.lineWidth = 2;
                        ctx.strokeStyle = "#FFF";
                        ctx.beginPath();
                        xpos = GetX(i);
                        var point = GetY(YatayStartPrice);
                        ctx.moveTo(x1, y1); ctx.lineTo(x3, y3);
                        ctx.stroke();
                        ctx.lineWidth = 1;
                    }
                    else {
                        var x3 = ChartWidth - ChartRightMargin + 20.5;
                        var y3 = y1 + (x3 - x1) * (y2 - y1) / (x2 - x1);
                        ctx.lineWidth = 2;
                        ctx.strokeStyle = "#FFF";
                        ctx.beginPath();
                        xpos = GetX(i);
                        var point = GetY(YatayStartPrice);
                        ctx.moveTo(x1, y1); ctx.lineTo(x2, y2);
                        ctx.moveTo(x1, y1); ctx.lineTo(x3, y1);
                        ctx.moveTo(x1, y2); ctx.lineTo(x3, y2);
                        ctx.stroke();
                        ctx.lineWidth = 1;

                        //Fibo
                        ctx.beginPath();
                        var dif = y2 - y1;
                        for (var i = 0; i < Fibo.length; i++) {
                            var point = y1 + Fibo[i] * dif;
                            ctx.moveTo(x1, point); ctx.lineTo(x3, point);
                        }
                        ctx.stroke();
                    }
                }
            }
            else {
                if (YatayStartDateStr != "") {
                    for (var i = 0; i <= ChartLastBarNo; i++) {
                        if (YatayStartDateStr == Bars[i].DateTime) {
                            ctx.lineWidth = 2;
                            ctx.strokeStyle = "#FFF";
                            ctx.beginPath();
                            xpos = GetX(i);
                            var point = GetY(YatayStartPrice);
                            ctx.moveTo(xpos - ChartBarSpace - 2, point); ctx.lineTo(xpos + ChartBarSpace + 2, point);
                            ctx.stroke();
                            ctx.lineWidth = 1;
                            break;
                        }
                    }
                }
            }


            // print O-H-L-C values
            if (ChartValuesVisible) {
                PrintCanvasText(ctx, Bars[barno].GetDateStr(), "black", "white", 2, (1) * 13 + ChartTopMargin + 2);
                PrintCanvasText(ctx, "O=" + PriceToStr(DetaySymbol, Bars[barno].Open), "black", "aqua", 2, (2) * 13 + ChartTopMargin + 2);
                PrintCanvasText(ctx, "H=" + PriceToStr(DetaySymbol, Bars[barno].High), "black", "#4F4", 2, (3) * 13 + ChartTopMargin + 2);
                PrintCanvasText(ctx, "L=" + PriceToStr(DetaySymbol, Bars[barno].Low), "black", "#F44", 2, (4) * 13 + ChartTopMargin + 2);
                PrintCanvasText(ctx, "C=" + PriceToStr(DetaySymbol, Bars[barno].Close), "black", "yellow", 2, (5) * 13 + ChartTopMargin + 2);
            }

            // frames
            ctx.strokeStyle = "teal";
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(0, ChartTopMargin + 0.5); ctx.lineTo(ChartWidth, ChartTopMargin + 0.5);
            ctx.moveTo(0, ChartHeight - 0.5); ctx.lineTo(ChartWidth, ChartHeight - 0.5);
            ctx.moveTo(ChartWidth - ChartRightMargin + 20.5, ChartTopMargin + 1); ctx.lineTo(ChartWidth - ChartRightMargin + 20.5, ChartHeight - 1);
            ctx.stroke();

            ctx2.strokeStyle = "teal";
            ctx2.lineWidth = 3;
            ctx2.beginPath();
            ctx2.moveTo(0, IndHeight - 0.5); ctx2.lineTo(IndWidth, IndHeight - 0.5);
            ctx2.moveTo(IndWidth - ChartRightMargin + 20.5, 1); ctx2.lineTo(IndWidth - ChartRightMargin + 20.5, IndHeight - 1);
            ctx2.stroke();

        }
        function GetComboValue(id) {
            str = "";
            var selectedindex = GetEl(id).selectedIndex;
            if (selectedindex != -1)
                str = GetEl(id).options[selectedindex].text;
            return str;
        }
        function GetEl(id) {
            return document.getElementById(id);
        }
        function GetKurumUnvan() {
            if (HesapKurum == "INFO YATIRIM") return "İNFO YATIRIM MENKUL DEĞERLER A.Ş.";
            else if (HesapKurum == "OSMANLI MENKUL") return "OSMANLI YATIRIM MENKUL DEĞERLER A.Ş.";
            else if (HesapKurum == "YATIRIM FINANSMAN") return "Yatırım Finansman Menkul Değerler A.Ş.";
            else if (HesapKurum == "NOOR CM") return "Noor Capital Market Menkul Değerler A.Ş.";
            return HesapKurum;
        }
        function GetQuery() {
            var queryArray = {};
            var decode = function (s) { return decodeURIComponent(s.replace(/\+/g, " ")); };
            var qString = location.href;
            qString = qString.replace("?", "&");


            var keyValues = qString.split('&');

            for (var i = 0; i < keyValues.length; i++) {
                if (keyValues[i].indexOf('=') > 0) {
                    var key = keyValues[i].split('=');
                    if (key.length > 1) {
                        queryArray[decode(key[0])] = decode(key[1]);
                    }
                }

            }


            return queryArray;
        }
        function GetBsDerinlikTip() {
            //Emir ve düzeltme pencerelerindeki derinliklerin cinsleri için
            var sonuc = 0;
            if (GetEl("DivBistBuySell").style.display != "none") sonuc = 1;
            else if (GetEl("DivBistEmirDuzelt").style.display != "none") sonuc = 2;
            else if (GetEl("DivViopBuySell").style.display != "none") sonuc = 3;
            else if (GetEl("DivChartBuySell").style.display != "none") sonuc = 4;
            else sonuc = 0;

            return sonuc;

        }
        function GetTakasKurumKod(str) {
            for (var i = 0; i < BrokerKodArray.length; i++) {
                if (ToEngUp(BrokerAdArray[i]) == ToEngUp(str))
                    return BrokerKodArray[i];
            }
            return "";
        }
        function GetSartTipStr(kod) {
            var sarttip = "";
            switch (kod) {
                case "3U":
                    sarttip = "ALIŞ >= ";
                    break;
                case "3D":
                    sarttip = "ALIŞ <= ";
                    break;
                case "1U":
                    sarttip = "SATIŞ >= ";
                    break;
                case "1D":
                    sarttip = "SATIŞ <= ";
                    break;
                case "2U":
                    sarttip = "SON >= ";
                    break;
                case "2D":
                    sarttip = "SON <= ";
                    break;
            }
            return sarttip;
        }
        function GetGrupDefinition(grpKod) {
            var sonuc = "";
            sonuc = grpKod;
            switch (grpKod) {
                case "Y":
                    sonuc = "Yıldız Pazar";
                    break;
                case "A":
                    sonuc = "Ana Pazar";
                    break;
                case "ALT":
                    sonuc = "Alt Pazar";
                    break;
                default:
            }

            return sonuc;
        }
        function grup1Check(Symbolx) {
            var sonuc = false;
            if (Symbolx.indexOf("AKBNK") > -1)
                sonuc = true;
            else if (Symbolx.indexOf("ARCLK") > -1)
                sonuc = true;
            else if (Symbolx.indexOf("EKGYO") > -1)
                sonuc = true;
            else if (Symbolx.indexOf("EREGL") > -1)
                sonuc = true;
            else if (Symbolx.indexOf("GARAN") > -1)
                sonuc = true;
            else if (Symbolx.indexOf("HALKB") > -1)
                sonuc = true;
            else if (Symbolx.indexOf("ISCTR") > -1)
                sonuc = true;
            return sonuc;
        }

        function HttpSend(message) {
            var request = new XMLHttpRequest();
            request.onreadystatechange = function () {
                if (request.readyState == 4) {
                    ParseMessage(request.responseText);
                }
            }
            var url = "http:" + ServerURL + "/" + message;
            request.open("GET", url, true);
            request.send(null);

        }

        function FillAutoCompleteTable(symbolarray, table) {
            ClearTable(table.id);
            var symbolx = GetEl("DivSymbolEditSymbol").value;
            var tableBody = document.createElement('TBODY');
            table.appendChild(tableBody);
            for (var i = 0; i < symbolarray.length; i++) {
                if (symbolarray[i].indexOf(symbolx) < 0) continue;
                //var row = table.insertRow(table.rows.length);
                //InsertCell(row, "", "L", "", "gainsboro", "", symbolarray[i]);
                //row.cells[0].style.padding = "5px";
                var tr = document.createElement('TR');
                tableBody.appendChild(tr);
                var td = document.createElement('TD');
                td.style.paddingTop = "5px";
                td.style.paddingBottom = "5px";
                td.style.border = "1px gray solid";
                td.style.textAlign = "left";
                td.appendChild(document.createTextNode(symbolarray[i]));
                var cellclick = function (rowno) {
                    return function () {
                        var tablewl = GetEl("TableWatchlist");
                        for (var i = 0; i < tablewl.rows.length; i++) {
                            var sembolname = tablewl.rows[i].cells[0].innerHTML;
                            if (sembolname == table.rows[rowno].cells[0].innerHTML)
                                tablewl.rows[i].cells[0].innerHTML = "";
                        }
                        tablewl.rows[WatchlistActiveRow].cells[0].innerHTML = table.rows[rowno].cells[0].innerHTML;
                        SaveWatchlistSymbols();
                        FillWatchlistTable();
                        ActivateWindow();
                    };
                };
                td.onmousedown = cellclick(i);
                tr.appendChild(td);
            }
        }

        function FillAutoCompleteTable2(symbolarrayx, table) {
            ClearTable(table.id);
            for (var i = 0; i < symbolarrayx.length; i++) {
                var row = table.insertRow(table.rows.length);
                InsertCell(row, "", "L", "", "gainsboro", "", symbolarrayx[i]);
                row.cells[0].style.padding = "5px";
            }
        }

        function FillAutoAnalizHeader(el) {
            var str = ToEngUp(el.value);
            el.value = "";
            var table = GetEl("TableAnalizHeaderSearch");
            if (symbolarray.length == 0) {
                for (var name in BasicObject) {
                    var item = BasicObject[name];
                    symbolarray.push(name);
                }
                symbolarray.sort();
            }
            DisplayAutoCompleteTable(el, table);
            SearchAutoCompleteTable(table, str);
        }

        function FillAutoDetayHeader(el) {
            var str = ToEngUp(el.value);
            el.value = "";
            var table = GetEl("TableDetayHeaderSearch");
            if (symbolarray.length == 0) {
                for (var name in BasicObject) {
                    var item = BasicObject[name];
                    symbolarray.push(name);
                }
                symbolarray.sort();
            }
            DisplayAutoCompleteTable(el, table);
            SearchAutoCompleteTable(table, str);
        }

        function FillAutoTech(el) {
            var str = ToEngUp(el.value);
            el.value = "";
            var table = GetEl("TableTechSearch");
            if (symbolarray.length == 0) {
                for (var name in BasicObject) {
                    var item = BasicObject[name];
                    symbolarray.push(name);
                }
                symbolarray.sort();
            }
            DisplayAutoCompleteTable(el, table);
            SearchAutoCompleteTable(table, str);
            GetEl("DivTechSearch").style.height = "70px";
        }

        function FillAutoSymbolEdit(str) // ssss
        {
            try {


                var el = GetEl("DivSymbolEditSymbol");
                el.value = "";
                var table = GetEl("TableWatchlistSymbol");
                if (symbolarray.length == 0) {
                    for (var name in BasicObject) {
                        var item = BasicObject[name];
                        symbolarray.push(name);
                    }
                    symbolarray.sort();
                }

                DisplayAutoCompleteTable(null, table);
                SearchAutoCompleteTable(table, str);
            }
            catch (e) { alert(e); }
        }


        function FillAutoKurumIslem(el) {
            var str = ToEngUp(el.value);
            el.value = "";
            var table = GetEl("TableKurumIslemSearch");
            if (table.rows.length == 0) {
                var symbolarrayx = [];
                for (var i = 0; i < BrokerAdArray.length; i++)
                    symbolarrayx.push(BrokerAdArray[i]);
                symbolarrayx.sort();
                FillAutoCompleteTable2(symbolarrayx, table);
                for (var i = 0; i < table.rows.length; i++) {
                    var cellclick = function (rowno) {
                        return function () {
                            el.value = table.rows[rowno].cells[0].innerHTML;
                            ActiveTakasKurumAd = el.value;
                            ActivateWindow();
                        };
                    };
                    table.rows[i].cells[0].onmousedown = cellclick(i);
                }
            }
            DisplayAutoCompleteTable(el, table);
            SearchAutoCompleteTable2(table, str);
        }
        function FillAutoKurumIslemPITE(el) {
            var str = ToEngUp(el.value);
            el.value = "";
            var table = GetEl("TableKurumIslemPITESearch");
            if (table.rows.length == 0) {
                var symbolarrayx = [];
                for (var i = 0; i < BrokerAdArray.length; i++)
                    symbolarrayx.push(BrokerAdArray[i]);
                symbolarrayx.sort();
                FillAutoCompleteTable2(symbolarrayx, table);
                for (var i = 0; i < table.rows.length; i++) {
                    var cellclick = function (rowno) {
                        return function () {
                            el.value = table.rows[rowno].cells[0].innerHTML;
                            ActiveTakasKurumAd = el.value;
                            ActivateWindow();
                        };
                    };
                    table.rows[i].cells[0].onmousedown = cellclick(i);
                }
            }
            DisplayAutoCompleteTable(el, table);
            SearchAutoCompleteTable2(table, str);
        }

        function FillAutoKurumTakas(el) {
            var str = ToEngUp(el.value);
            el.value = "";
            var table = GetEl("TableKurumTakasSearch");
            if (table.rows.length == 0) {
                var symbolarrayx = [];
                for (var i = 0; i < BrokerAdArray.length; i++)
                    symbolarrayx.push(BrokerAdArray[i]);
                symbolarrayx.sort();
                FillAutoCompleteTable(symbolarrayx, table);
                for (var i = 0; i < table.rows.length; i++) {
                    var cellclick = function (rowno) {
                        return function () {
                            el.value = table.rows[rowno].cells[0].innerHTML;
                            ActiveTakasKurumAd = el.value;
                            ActivateWindow();
                        };
                    };
                    table.rows[i].cells[0].onmousedown = cellclick(i);
                }
            }
            DisplayAutoCompleteTable(el, table);
            SearchAutoCompleteTable2(table, str);
        }

        function FillBistTumGorunum() {
            var total = 0;
            var yukselen = 0;
            var dusen = 0;
            var ayni = 0;

            // hesapla
            for (var name in BasicObject) {
                var item = BasicObject[name];
                if (item.Prefix == "IMKBH" && item.SeriNo == "E") {
                    total++;
                    if (item.Percent > 0)
                        yukselen++;
                    else if (item.Percent < 0)
                        dusen++;
                    else
                        ayni++;
                }
            }
            if (total == 0) return;

            // fill table
            var table = GetEl("TableBistTumGorunum");
            for (var i = 0; i < 3; i++) {
                table.rows[0].cells[i].style.backgroundColor = "#3F3";
                table.rows[0].cells[i].style.color = "black";
            }
            table.rows[0].cells[0].innerHTML = "Yükselen";
            table.rows[0].cells[1].innerHTML = yukselen;
            table.rows[0].cells[2].innerHTML = "% " + (100 * yukselen / total).toFixed(2);

            for (var i = 0; i < 3; i++) {
                table.rows[1].cells[i].style.backgroundColor = "#F33";
                table.rows[1].cells[i].style.color = "black";
            }
            table.rows[1].cells[0].innerHTML = "Düşen";
            table.rows[1].cells[1].innerHTML = dusen;
            table.rows[1].cells[2].innerHTML = "% " + (100 * dusen / total).toFixed(2);

            for (var i = 0; i < 3; i++) {
                table.rows[2].cells[i].style.backgroundColor = "gold";
                table.rows[2].cells[i].style.color = "black";
            }
            table.rows[2].cells[0].innerHTML = "Aynı";
            table.rows[2].cells[1].innerHTML = ayni;
            table.rows[2].cells[2].innerHTML = "% " + (100 * ayni / total).toFixed(2);

            // canvas bist tüm görünüm
            GetEl("DivBistTumGorunumCanvasContainer").style.top = (GetEl("TableBistTumGorunum").offsetTop + GetEl("TableBistTumGorunum").offsetHeight + 20) + "px";
            GetEl("DivBistTumGorunumCanvasContainer").style.height = (GetEl("DivBistTumGorunum").offsetHeight - GetEl("DivBistTumGorunumCanvasContainer").offsetTop) + "px";
            var min = Math.min(GetEl("DivBistTumGorunumCanvasContainer").clientWidth, GetEl("DivBistTumGorunumCanvasContainer").clientHeight) - 10;
            GetEl("CanvasBistTumGorunum").width = min;
            GetEl("CanvasBistTumGorunum").height = min;


            // pie
            var canvas = GetEl("CanvasBistTumGorunum");
            var ctx = canvas.getContext("2d");
            var lastend = 0;
            var data = [];
            var colors = ["#0B0", "#D00", "gold"];
            var offset = Math.PI / 2;

            data[0] = yukselen;
            data[1] = dusen;
            data[2] = ayni;

            for (var i = 0; i < data.length; i++) {
                ctx.fillStyle = colors[i];
                ctx.beginPath();
                ctx.moveTo(canvas.width / 2, canvas.height / 2);
                ctx.arc(canvas.width / 2, canvas.height / 2, canvas.height / 2, lastend - offset, lastend - offset + (Math.PI * 2 * (data[i] / total)), false);
                ctx.lineTo(canvas.width / 2, canvas.height / 2);
                ctx.fill();
                lastend += Math.PI * 2 * (data[i] / total);
            }
        }

        function FillCombo(id, list, selected) {
            var elselect = GetEl(id);
            elselect.options.length = 0;
            for (var i = 0; i < list.length; i++) {
                var item = document.createElement("option");
                item.text = list[i];
                elselect.add(item, null);
            }
            for (var i = 0; i < elselect.options.length; i++) {
                if (elselect.options[i].innerHTML == selected)
                    elselect.selectedIndex = i;
            }
        }

        function FillDetayDerinlikTable() {
            for (var i = 0; i < 5; i++)
                DrnYuzeyselRow.cells[i].innerHTML = "-";

            IslemPrevTime = "";
            IslemPrevFiyat = "";
            IslemPrevYon = "";
            GetEl("TableDrnIslemColName").rows[0].cells[2].innerHTML = IslemKonsolideBool ? "Lot (Kons)" : "Lot (Ayrık)";

            ClearTable("TableDrnIslem");
            var item = BasicObject[DetaySymbol];
            if (item == undefined) return;
            var max = 0;
            if (item.Prefix == "IMKBH")
                max = 25;
            else if (item.Prefix == "VIP")
                max = 25;
            else {
                ClearTable("TableDetayDerinlik");
                ClearTable("TableDetayDerinlikToplam");
                return;
            }
            if (max == DerinlikTable.rows.length) {
                for (var i = 0; i < max; i++) {
                    var row = DerinlikTable.rows[i];
                    row.cells[0].innerHTML = "";
                    row.cells[1].innerHTML = "";
                    row.cells[2].innerHTML = "-";
                    row.cells[3].innerHTML = "";
                    row.cells[4].innerHTML = "";
                    row.cells[5].innerHTML = "";
                    row.cells[6].innerHTML = "";

                    if (item.Prefix == "IMKBH") {

                        row.cells[0].style.width = "10%";
                        row.cells[1].style.width = "21%";
                        row.cells[2].style.width = "15%";
                        row.cells[3].style.width = "2%";
                        row.cells[4].style.width = "15%";
                        row.cells[5].style.width = "21%";
                        row.cells[6].style.width = "10%";


                    }
                    else {
                        row.cells[0].style.width = "10%";
                        row.cells[1].style.width = "15%";
                        row.cells[2].style.width = "21%";
                        row.cells[3].style.width = "2%";
                        row.cells[4].style.width = "21%";
                        row.cells[5].style.width = "15%";
                        row.cells[6].style.width = "10%";
                    }
                }

                DerinlikToplamTable.rows[0].cells[0].innerHTML = "";
                DerinlikToplamTable.rows[0].cells[1].innerHTML = "";
                DerinlikToplamTable.rows[0].cells[2].innerHTML = "";
                DerinlikToplamTable.rows[0].cells[3].innerHTML = "";
                DerinlikToplamTable.rows[0].cells[4].innerHTML = "";
                DerinlikToplamTable.rows[0].cells[5].innerHTML = "";

                var tableDerHeader = GetEl("TableDerinlikHeader1");
                if (item.Prefix == "IMKBH") {


                    tableDerHeader.rows[0].cells[0].style.width = "10%";
                    tableDerHeader.rows[0].cells[1].style.width = "21%";
                    tableDerHeader.rows[0].cells[2].style.width = "15%";
                    tableDerHeader.rows[0].cells[3].style.width = "2%";
                    tableDerHeader.rows[0].cells[4].style.width = "15%";
                    tableDerHeader.rows[0].cells[5].style.width = "21%";
                    tableDerHeader.rows[0].cells[6].style.width = "10%";

                    DerinlikToplamTable.rows[0].cells[0].style.width = "10%";
                    DerinlikToplamTable.rows[0].cells[1].style.width = "21%";
                    DerinlikToplamTable.rows[0].cells[2].style.width = "15%";
                    DerinlikToplamTable.rows[0].cells[3].style.width = "2%";
                    DerinlikToplamTable.rows[0].cells[4].style.width = "15%";
                    DerinlikToplamTable.rows[0].cells[5].style.width = "21%";
                    DerinlikToplamTable.rows[0].cells[6].style.width = "10%";

                }
                else {

                    tableDerHeader.rows[0].cells[0].style.width = "10%";
                    tableDerHeader.rows[0].cells[1].style.width = "15%";
                    tableDerHeader.rows[0].cells[2].style.width = "21%";
                    tableDerHeader.rows[0].cells[3].style.width = "2%";
                    tableDerHeader.rows[0].cells[4].style.width = "21%";
                    tableDerHeader.rows[0].cells[5].style.width = "15%";
                    tableDerHeader.rows[0].cells[6].style.width = "10%";

                    DerinlikToplamTable.rows[0].cells[0].style.width = "10%";
                    DerinlikToplamTable.rows[0].cells[1].style.width = "15%";
                    DerinlikToplamTable.rows[0].cells[2].style.width = "21%";
                    DerinlikToplamTable.rows[0].cells[3].style.width = "2%";
                    DerinlikToplamTable.rows[0].cells[4].style.width = "21%";
                    DerinlikToplamTable.rows[0].cells[5].style.width = "15%";
                    DerinlikToplamTable.rows[0].cells[6].style.width = "10%";

                }

            }
            else {
                ClearTable("TableDetayDerinlik");

                if (item.Prefix == "IMKBH") {

                    var tableDerHeader = GetEl("TableDerinlikHeader1");
                    tableDerHeader.rows[0].cells[0].style.width = "10%";
                    tableDerHeader.rows[0].cells[1].style.width = "21%";
                    tableDerHeader.rows[0].cells[2].style.width = "15%";
                    tableDerHeader.rows[0].cells[3].style.width = "2%";
                    tableDerHeader.rows[0].cells[4].style.width = "15%";
                    tableDerHeader.rows[0].cells[5].style.width = "21%";
                    tableDerHeader.rows[0].cells[6].style.width = "10%";

                    for (var i = 0; i < max; i++) {
                        var row = DerinlikTable.insertRow(i);
                        InsertCell(row, "10%", "R", "", "#2F2", "0", "");
                        InsertCell(row, "21%", "R", "", "#2F2", "0", "");
                        InsertCell(row, "15%", "R", "", "#2F2", "0", "");
                        InsertCell(row, "2%", "R", "", "black", "0", "-");
                        InsertCell(row, "15%", "L", "", "#F22", "0", "");
                        InsertCell(row, "21%", "L", "", "#F22", "0", "");
                        InsertCell(row, "10%", "L", "", "#F22", "0", "");



                        for (var j = 0; j < row.cells.length; j++) {
                            row.cells[j].style.paddingTop = "0";
                            row.cells[j].style.paddingBottom = "0";
                        }


                    }



                    var row = DerinlikToplamTable.insertRow(0);
                    InsertCell(row, "10%", "R", "", DerinlikToplamForeColor, "0", "");
                    InsertCell(row, "21%", "R", "", DerinlikToplamForeColor, "0", "");
                    InsertCell(row, "15%", "R", "", DerinlikToplamForeColor, "0", "");
                    InsertCell(row, "2%", "R", "", BackColor, "0", "-");
                    InsertCell(row, "15%", "L", "", DerinlikToplamForeColor, "0", "");
                    InsertCell(row, "21%", "L", "", DerinlikToplamForeColor, "0", "");
                    InsertCell(row, "10%", "L", "", DerinlikToplamForeColor, "0", "");
                }
                else {

                    var tableDerHeader = GetEl("TableDerinlikHeader1");
                    tableDerHeader.rows[0].cells[0].style.width = "10%";
                    tableDerHeader.rows[0].cells[1].style.width = "15%";
                    tableDerHeader.rows[0].cells[2].style.width = "21%";
                    tableDerHeader.rows[0].cells[3].style.width = "2%";
                    tableDerHeader.rows[0].cells[4].style.width = "21%";
                    tableDerHeader.rows[0].cells[5].style.width = "15%";
                    tableDerHeader.rows[0].cells[6].style.width = "10%";

                    for (var i = 0; i < max; i++) {
                        var row = DerinlikTable.insertRow(i);
                        InsertCell(row, "10%", "R", "", "#2F2", "0", "");
                        InsertCell(row, "15%", "R", "", "#2F2", "0", "");
                        InsertCell(row, "21%", "R", "", "#2F2", "0", "");
                        InsertCell(row, "2%", "R", "", "black", "0", "-");
                        InsertCell(row, "21%", "L", "", "#F22", "0", "");
                        InsertCell(row, "15%", "L", "", "#F22", "0", "");
                        InsertCell(row, "10%", "L", "", "#F22", "0", "");
                        for (var j = 0; j < row.cells.length; j++) {
                            row.cells[j].style.paddingTop = "0";
                            row.cells[j].style.paddingBottom = "0";
                        }


                    }

                    var row = DerinlikToplamTable.insertRow(0);
                    InsertCell(row, "10%", "R", "", DerinlikToplamForeColor, "0", "");
                    InsertCell(row, "15%", "R", "", DerinlikToplamForeColor, "0", "");
                    InsertCell(row, "21%", "R", "", DerinlikToplamForeColor, "0", "");
                    InsertCell(row, "2%", "R", "", BackColor, "0", "-");
                    InsertCell(row, "21%", "L", "", DerinlikToplamForeColor, "0", "");
                    InsertCell(row, "15%", "L", "", DerinlikToplamForeColor, "0", "");
                    InsertCell(row, "10%", "L", "", DerinlikToplamForeColor, "0", "");

                }

            }
        }

        function FillDetayYuzeyselTable() {
            var bigfont = (window.innerWidth / 15) + "px";
            var table = GetEl("TableDetayYuzeysel");
            ClearTable("TableDetayYuzeysel");

            var item = BasicObject[DetaySymbol];
            if (item == undefined) return;

            var rowcount = table.rows.length;


            // son, yüzde
            var color = "#555";
            if (item.Percent > 0)
                color = "#0A0";
            else if (item.Percent < 0)
                color = "#A00";

            var row = table.insertRow(rowcount);
            var cell = row.insertCell(0);
            cell.style.fontWeight = "bold";
            CellType(cell, "50%", "center", "yellow", item.GetPriceStr(item.LastPrice), "2%", true);
            cell.style.backgroundColor = "#555";
            cell.style.fontSize = bigfont;
            cell.style.border = "2px black solid";
            cell = row.insertCell(1);

            cell.style.fontWeight = "bold";
            CellType(cell, "50%", "center", "white", item.GetPercentStr(), "2%", true);
            cell.style.fontSize = bigfont;
            cell.style.backgroundColor = color;
            cell.style.border = "2px black solid";

            // alış, satış
            rowcount++;
            row = table.insertRow(rowcount);
            cell = row.insertCell(0);
            cell.style.backgroundColor = "#555";
            cell.style.fontWeight = "bold";
            CellType(cell, "", "center", "white", "-", "2%", true);
            cell.style.fontSize = bigfont;
            cell.style.border = "2px black solid";

            cell = row.insertCell(1);
            cell.style.backgroundColor = "#555";
            cell.style.fontWeight = "bold";
            CellType(cell, "", "center", "white", "-", "2%", true);
            cell.style.fontSize = bigfont;
            cell.style.border = "2px black solid";


            var namearray = [];
            namearray.push("Grup");
            namearray.push("Tavan");
            namearray.push("Taban");  // 3

            namearray.push(".");  // 4
            namearray.push("Önc.Kapanış");  // 5
            namearray.push("Fark");
            namearray.push("Yüksek");
            namearray.push("Düşük");
            namearray.push("A.Ort");
            namearray.push("Lot");
            namearray.push("Hacim"); // 11

            namearray.push(".");
            namearray.push("Denge Fiyatı");
            namearray.push("Denge Miktar");
            namearray.push("Denge Alış Kalan");
            namearray.push("Denge Satış Kalan");

            namearray.push(".");
            namearray.push("- Para Giriş Çıkışı");
            namearray.push("Aktif Alışlar");
            namearray.push("Aktif Satışlar");
            namearray.push("Toplam");
            namearray.push("Net");

            namearray.push(".");
            namearray.push("- Bilanço");
            namearray.push("Dönem");
            namearray.push("Net Kar");
            namearray.push("Öz Sermaye");
            namearray.push("Ödenmiş Sermaye");
            namearray.push("Piyasa Değeri");
            namearray.push("F/K");
            namearray.push("Halka Açıklık");
            namearray.push("Defter Değeri");
            namearray.push("PD/DD");

            namearray.push(".");
            namearray.push("- Vadeli");
            namearray.push("Açık Pozisyon");
            namearray.push("Açık Poz Fark");
            namearray.push("Uzlaşı");
            namearray.push("Önceki Uzlaşı");
            namearray.push("Teorik Fiyat");

            namearray.push(".");
            namearray.push("- Varant");
            namearray.push("Dayanak Varlık");
            namearray.push("Vadeye Kalan Gün");
            namearray.push("Vade Sonu");
            namearray.push("Tür");
            namearray.push("Kullanım Fiyatı");
            namearray.push("İhraççı");


            for (var i = 0; i < namearray.length; i++) {
                rowcount++;
                row = table.insertRow(rowcount);
                cell = row.insertCell(0);
                CellType(cell, "", "left", "silver", namearray[i], "2px", true);
                if (namearray[i][0] == "-") {
                    cell.style.color = "aqua";
                    cell.style.fontWeight = "bold";
                }
                if (namearray[i][0] == ".") {
                    cell.style.color = "black";
                }
                cell = row.insertCell(1);
                CellType(cell, "", "right", "white", "", "2px", true);
            }
        }

        function FillNewsTable() {
            NewsArray.length = 0;
            for (var name in NewsObject)
                NewsArray.push(NewsObject[name]);
            NewsArray.sort(function (a, b) { return b.SortKey.localeCompare(a.SortKey) });
            maxrows = NewsArray.length;

            // display table
            NewsTable = GetEl("TableNewsHeader");
            ClearTable("TableNewsHeader");

            // insert rows
            for (var i = 0; i < maxrows; i++) {
                var rowcount = NewsTable.rows.length;
                NewsRow = NewsTable.insertRow(rowcount);
                NewsCell = NewsRow.insertCell(0);
                CellType(NewsCell, "100%", "left", "silver", NewsArray[i].Header + "<br/>" + "--- " + NewsArray[i].DateStr.substr(11) + " --- " + NewsArray[i].DateStr.substr(0, 10) + "<br>" + ".", "1%", true);
            }

            // click events
            for (var i = 0; i < NewsTable.rows.length; i++) {
                for (var j = 0; j < NewsTable.rows[i].cells.length; j++) {
                    NewsCell = NewsTable.rows[i].cells[j];
                    var cellclick = function (colno, rowno) {
                        return function () {
                            for (var k = 0; k < NewsTable.rows.length; k++)
                                NewsTable.rows[k].cells[0].style.backgroundColor = NewsBackColor;
                            NewsTable.rows[rowno].cells[0].style.backgroundColor = "#246";
                            SendRequest("X" + SEP1 + "REQ_NEWS_CONTENT" + SEP1 + NewsArray[rowno].NewsID);
                            HidePopups();
                        };
                    };
                    NewsCell.onclick = cellclick(j, i);
                }
            }
        }

        function FillWatchlistTable() {

            // clear updatebool
            for (var name in BasicObject) {
                BasicItem = BasicObject[name];
                BasicItem.UpdateBool = false;
                BasicItem.BidAskBool = false;
            }

            var fontsize = FontSizeBigWL;
            var colwidth = ["40%", "30%", "30%", "0%", "0%"];
            var bordertype = 0;

            var headertable = GetEl("TableWatchlistColName");

            // başlıklar
            if (WatchlistType == 0) {
                WatchlistCell2.innerHTML = "SON";
                WatchlistCell3.innerHTML = "GÜN %";
                WatchlistCell2.style.color = "darkturquoise";
                WatchlistCell3.style.color = "darkturquoise";
            }
            else if (WatchlistType == 1) {
                WatchlistCell2.innerHTML = "ALIŞ";
                WatchlistCell3.innerHTML = "SATIŞ";
                WatchlistCell2.style.color = "#2F2";
                WatchlistCell3.style.color = "#F22";
            }
            else if (WatchlistType == 2) {
                WatchlistCell2.innerHTML = "SON";
                WatchlistCell3.innerHTML = "ALIŞ";
                WatchlistCell4.innerHTML = "SATIŞ";
                WatchlistCell5.innerHTML = "G%";
                WatchlistCell2.style.color = "darkturquoise";
                WatchlistCell3.style.color = "darkturquoise";
                WatchlistCell4.style.color = "darkturquoise";
                WatchlistCell5.style.color = "darkturquoise";
                fontsize = FontSizeSmallWL;
                colwidth = ["33%", "19%", "18%", "18%", "12%", "0%"];
                bordertype = 1;

                /*WatchlistCell1.style.backgroundColor="#567";
                WatchlistCell2.style.backgroundColor="#567";
                WatchlistCell3.style.backgroundColor="#567";
                WatchlistCell4.style.backgroundColor="#567";
                WatchlistCell5.style.backgroundColor="#567";
                WatchlistCell2.style.color="white";
                WatchlistCell3.style.color="white";
                WatchlistCell4.style.color="white";
                WatchlistCell5.style.color="white";
        */


            }
            var headerrow = headertable.rows[0];

            for (var i = 0; i < headerrow.cells.length; i++) {
                headerrow.cells[i].style.fontSize = fontsize;
                headerrow.cells[i].style.fontWeight = "bold";
                headerrow.cells[i].style.width = colwidth[i];
                headerrow.cells[i].style.padding = "2px";
                headerrow.cells[i].style.paddingTop = "4px";
                headerrow.cells[i].style.paddingBottom = "4px";
            }

            WatchlistActiveSymbol = "";
            WatchlistActiveRow = -1;

            // find max rows
            var maxrows = 0;
            for (var name in WatchlistSymbolObject) {
                if (maxrows < WatchlistSymbolObject[name])
                    maxrows = WatchlistSymbolObject[name];
            }
            maxrows += 5;

            // display table
            var table = GetEl("TableWatchlist");
            ClearTable("TableWatchlist");
            table.style.backgroundColor = BackColor;
            table.style.color = ForeColor;

            // insert rows
            for (var i = 0; i < maxrows; i++) {
                var rowcount = table.rows.length;
                var row = table.insertRow(rowcount);
                InsertCell(row, colwidth[0], "L", "", "", "", "");
                InsertCell(row, colwidth[1], "R", "", "", "", "");
                InsertCell(row, colwidth[2], "R", "", "", "", "");
                InsertCell(row, colwidth[3], "R", "", "", "", "");
                InsertCell(row, colwidth[4], "R", "", "black", "", ".");
                for (var j = 0; j < row.cells.length; j++) {
                    row.cells[j].style.fontSize = fontsize;
                    //row.cells[j].style.paddingTop="5px";
                    //row.cells[j].style.paddingBottom="5px";
                    row.cells[j].style.padding = "2px";
                    row.cells[j].style.paddingTop = "4px";
                    row.cells[j].style.paddingBottom = "4px";
                }
            }

            // display symbol names and data
            for (var name in WatchlistSymbolObject) {
                var rowno = WatchlistSymbolObject[name];
                var el = table.rows[rowno].cells[0];
                el.innerHTML = name;
                DisplayWatchlistData(name);
            }

            // click events
            for (var i = 0; i < table.rows.length; i++) {
                var row = table.rows[i];
                for (var j = 0; j < row.cells.length; j++) {
                    var currentcell = table.rows[i].cells[j];
                    var cellclick = function (colno, rowno) {
                        return function () {
                            var entrycount = 0;
                            list = document.getElementsByClassName("EntryPage");
                            for (var i = 0; i < list.length; i++) {
                                if (list[i].style.visibility == "visible")
                                    entrycount++;
                            }

                            var SliderOpenBool = false;

                            if (GetEl("DivSembolSlider").style.display == "inline" && colno != 4) {
                                SliderOpenBool = true;
                                GetEl("DivSembolSlider").style.display = "none";
                                HidePopups();
                                return;
                            }
                            if (entrycount > 0) {
                                HidePopups();
                                return;
                            }

                            for (var k = 0; k < table.rows.length; k++)
                                table.rows[k].cells[0].style.backgroundColor = BackColor;

                            WatchlistActiveSymbol = table.rows[rowno].cells[0].innerHTML;
                            WatchlistActiveRow = rowno;


                            if (colno == 0) {


                                table.rows[rowno].cells[0].style.backgroundColor = WatchlistSelectedColor;

                                // DivSymbolEdit
                                if (WatchlistName == "SAYFAM") {
                                    FillAutoSymbolEdit(WatchlistActiveSymbol);
                                    var el = GetEl("DivSymbolEdit");
                                    el.style.visibility = "visible";
                                    BringToFront(el);
                                    GetEl("DivSymbolEditSymbol").focus();
                                }
                            }

                            // detay
                            else if (colno == 1) {
                                BasicItem = BasicObject[WatchlistActiveSymbol];
                                if (BasicItem == undefined) return;
                                ActivePageElement = GetEl("DivDetay");
                                ActiveFooterNo = 1;
                                DetaySymbol = WatchlistActiveSymbol;
                                ActivateWindow();
                            }

                            // menu
                            else if (colno == 2) {
                                BasicItem = BasicObject[WatchlistActiveSymbol];
                                if (BasicItem == undefined) return;
                                ActivePageElement = GetEl("DivAnaliz");
                                ActiveFooterNo = 2;
                                DetaySymbol = WatchlistActiveSymbol;
                                ActivateWindow();
                            }
                            else if (colno == 4 && SayfamCell.innerHTML == "SAYFAM") {
                                DisplaySembolSlider(rowno);
                            }

                            else {
                                BasicItem = BasicObject[WatchlistActiveSymbol];
                                if (BasicItem == undefined) return;
                                DetaySymbol = WatchlistActiveSymbol;

                                for (var k = 0; k < table.rows.length; k++)
                                    table.rows[k].cells[0].style.backgroundColor = BackColor;
                                table.rows[rowno].cells[0].style.backgroundColor = "teal";
                            }

                        };
                    };
                    currentcell.onclick = cellclick(j, i);
                }
            }
        }
        function FillServerList() {

            var ServerListesi = [];
            ServerListesi.push("//mobilserver1.idealdata.com.tr:7650");
            ServerListesi.push("//mobilserver1.idealdata.com.tr:7651");
            ServerListesi.push("//mobilserver1.idealdata.com.tr:7652");
            ServerListesi.push("//mobilserver1.idealdata.com.tr:7653");
            ServerListesi.push("//mobilserver1.idealdata.com.tr:7654");
            ServerListesi.push("//mobilserver3.idealdata.com.tr:7650");
            ServerListesi.push("//mobilserver3.idealdata.com.tr:7651");
            ServerListesi.push("//mobilserver4.idealdata.com.tr:443");
            ServerListesi.push("//mobilserver4.idealdata.com.tr:8080");

            //ServerListesi.push("//testserver.idealdata.com.tr:7650");

            //ServerListesi.push("//demo.idealdata.com.tr:7788");


            //ServerListesi.push("//demo.idealdata.com.tr:7650");



            var randomdeger = RandomSayiBul(0, ServerListesi.length);
            randdomurl = UrlHeader + ServerListesi[randomdeger];
            return randdomurl;
        }

        function FormatDate(date, format) {
            format = format.replace("DD", (date.getDate() < 10 ? "0" : "") + date.getDate()); // Pad with "0" if needed
            format = format.replace("MM", (date.getMonth() < 9 ? "0" : "") + (date.getMonth() + 1)); // Months are zero-based
            format = format.replace("YYYY", date.getFullYear());
            return format;

        }
        function FormattedVolumePrice(pricexStr) {
            if (pricexStr.indexOf(",")) {
                pricexStr = pricexStr.replace(/\,/g, ".")
            }
            pricexStr = (isNaN(parseFloat(pricexStr)) == false) ? parseFloat(pricexStr).toLocaleString("en-US") : pricexStr;
            return pricexStr;
        }
        function FormattedVolumePriceReverse(pricexStr) {
            if (pricexStr.indexOf(",")) {
                pricexStr = pricexStr.replace(/\,/g, "")
            }
            pricexStr = (isNaN(parseFloat(pricexStr)) == false) ? parseFloat(pricexStr) : pricexStr;
            return pricexStr;
        }
        function HideComboTables() {
            var list = document.getElementsByClassName("ComboTable");
            for (var i = 0; i < list.length; i++)
                list[i].style.display = "none";
        }

        function HidePopups() {
            var list = document.getElementsByClassName("EntryPage");
            for (var i = 0; i < list.length; i++)
                list[i].style.visibility = "hidden";

            list = document.getElementsByClassName("ComboTable");
            for (var i = 0; i < list.length; i++)
                list[i].style.display = "none";

            list = document.getElementsByClassName("Popup");
            for (var i = 0; i < list.length; i++)
                list[i].style.display = "none";

            if (footermenuclick == false) {
                list = document.getElementsByClassName("MenuBox");
                for (var i = 0; i < list.length; i++)
                    list[i].style.display = "none";
            }
            list = document.getElementsByClassName("Klavye");
            for (var i = 0; i < list.length; i++)
                list[i].style.display = "none";

        }

        function HideThis(el) {
            el.style.display = "none";
        }

        function HideByID(id) {
            GetEl(id).style.display = "none";
        }

        function checkVersion() {
            var agent = window.navigator.userAgent,
                start = agent.indexOf("OS");
            if ((agent.indexOf("iPhone") > -1 || agent.indexOf("iPad") > -1) && start > -1) {
                return window.Number(agent.substr(start + 3, 3).replace("_", "."));
            }
            return 0;
        }

        function Init() {
            FontSizeTable = (window.innerWidth / 22) + "px";
            FontSizeBigWL = (window.innerWidth / 20) + "px";
            FontSizeSmallWL = (window.innerWidth / 24) + "px";
            FontSizeTrade = (window.innerWidth / 27) + "px";
            FontSizeCarsi = (window.innerWidth / 26) + "px";

            var qs = GetQuery();
            FireBaseToken = qs["Did"];

            IOSVersiyon = checkVersion();
            GetEl("CodeVer").innerHTML = Versiyon;

            if (location.href.indexOf("IOS") < 0) {

                if (parseFloat(IOSVersiyon) >= 15) {

                    window.location.href = "http://cep.idealdata.com.tr/IOS15.html?Did=" + FireBaseToken;
                }

            }



            if (navigator.userAgent.match(/Android/i))
                DeviceType = "ANDROID";
            else if (navigator.userAgent.match(/iPhone|iPad|iPod/i))
                DeviceType = "IOS";
            else if (navigator.userAgent.match(/BlackBerry/i))
                DeviceType = "BLACKBERRY";
            else if (navigator.userAgent.match(/IEMobile/i))
                DeviceType = "IEMOBILE";

            ActivePageElement = GetEl("DivWatchlist");
            ActiveWatchlistElement = GetEl("DivMarketSayfam");
            ActiveChartPeriodElement = GetEl("DivDetayChartPeriodGun");
            ActiveEmirElement = GetEl("DivPortfoyEmirBekleyen");
            ActiveIndicatorElement = GetEl("DivIndicatorNONE");
            DerinlikTable = GetEl("TableDetayDerinlik");
            DerinlikToplamTable = GetEl("TableDetayDerinlikToplam");
            DrnIslemTable = GetEl("TableDrnIslem");
            ActiveObserveElement = GetEl("DivObserveType1");
            SessionId = (Math.random() * 1000000000).toFixed(0);
            Time200 = new Date();
            Time30000 = new Date();
            Time300000 = new Date();

            // init watchlist header
            var table = GetEl("TableWatchlistHeader");
            var row = table.insertRow(table.rows.length);
            InsertCell(row, "48%", "C", "#000", "#111", "", "Sayfam");
            InsertCell(row, "28%", "C", "black", "black", "", "Saat");
            InsertCell(row, "24%", "C", "black", "gold", "", "&#x2709;");
            //PaintTable("TableWatchlistHeader",-1,"#000","#000","red","#0CF","#08B","black");
            for (var i = 0; i < row.cells.length; i++) {
                if (i != 2)
                    row.cells[i].style.fontWeight = "bold";
                row.cells[i].style.paddingTop = "6px";
                row.cells[i].style.paddingBottom = "6px";
                row.cells[i].style.border = "0px #b3b3b3 solid";
                row.cells[i].style.borderBottom = "3px gold solid";
                row.cells[i].style.color = "gold";
                row.cells[i].style.borderRadius = "20px";
            }
            SayfamCell = row.cells[0];
            SaatCell = row.cells[1];
            MesajCell = row.cells[2];
            var fontsize = (window.innerWidth / 20) + "px";
            SayfamCell.style.fontSize = fontsize;
            SaatCell.style.fontSize = fontsize;
            MesajCell.style.fontSize = fontsize;
            for (var i = 0; i < row.cells.length; i++) {
                var cellclick = function (colno) {
                    return function () {
                        HideByID("DivSembolSlider");

                        if (colno == 0) {
                            OnClick_PiyasaSec();
                        }
                        else if (colno == 1) {
                            OnClick_Saat();
                        }
                        else if (colno == 2) {
                            SendRequest("X" + SEP1 + "REQ_DUYURU" + SEP1 + Username + SEP1 + SessionId);
                        }
                    };
                };
                row.cells[i].onclick = cellclick(i);
            }


            // init watchlist col names
            var table = GetEl("TableWatchlistColName");
            var row = table.insertRow(table.rows.length);
            InsertCell(row, "40%", "L", "", "darkturquoise", "0", "SEMBOL");
            InsertCell(row, "30%", "R", "", "darkturquoise", "0", "");
            InsertCell(row, "30%", "R", "", "darkturquoise", "0", "");
            InsertCell(row, "0", "R", "", "", "0", "");
            InsertCell(row, "0", "R", "", "", "0", "");
            WatchlistCell1 = row.cells[0];
            WatchlistCell2 = row.cells[1];
            WatchlistCell3 = row.cells[2];
            WatchlistCell4 = row.cells[3];
            WatchlistCell5 = row.cells[4];
            //SetRowStyle(row,"","1px darkturquoise solid","");
            for (var i = 0; i < row.cells.length; i++) {
                var cellclick = function (colno) {
                    return function () { ChangeWatchlistType(); };
                };
                row.cells[i].onclick = cellclick(i);
            }



            // init footer
            var table = GetEl("TableFooter");
            var row = table.insertRow(table.rows.length);
            var headers = ["Sayfa", "Detay", "Analiz", "Diğer", "Haber", "Trade", "TemelA"];
            for (var i = 0; i < headers.length; i++) {
                CellTypeToolbar(row.insertCell(i), headers[i], "#036", "#000", "silver", "0px");
                row.cells[i].style.border = "1px solid #666";
                row.cells[i].style.borderRadius = "5px";
                row.cells[i].style.background = "";
            }

            var iconfontsize = window.innerWidth / 35;
            row.cells[0].innerHTML = "<div style='position:relative'> <div class='sayfamicon'></div><div style='font-size:" + iconfontsize + "px;position:absolute;bottom:0;text-align:center;width:100%'>SAYFAM<div></div>";
            row.cells[1].innerHTML = "<div style='position:relative'> <div class='detayicon'></div><div style='font-size:" + iconfontsize + "px;position:absolute;bottom:0;text-align:center;width:100%'>DETAY<div></div>";
            row.cells[2].innerHTML = "<div style='position:relative'> <div class='analizicon'></div><div style='font-size:" + iconfontsize + "px;position:absolute;bottom:0;text-align:center;width:100%'>ANALİZ<div></div>";
            row.cells[3].innerHTML = "<div style='position:relative'> <div class='digericon'></div><div style='font-size:" + iconfontsize + "px;position:absolute;bottom:0;text-align:center;width:100%'>DİĞER<div></div>";
            row.cells[4].innerHTML = "<div style='position:relative'> <div class='habericon'></div><div style='font-size:" + iconfontsize + "px;position:absolute;bottom:0;text-align:center;width:100%'>HABER<div></div>";
            row.cells[5].innerHTML = "<div style='position:relative'> <div class='temelanalizicon'></div><div style='font-size:" + iconfontsize + "px;position:absolute;bottom:0;text-align:center;width:100%'>T.ANALİZ<div></div>";
            row.cells[6].innerHTML = "<div style='position:relative'> <div class='portfoyicon'></div><div style='font-size:" + iconfontsize + "px;position:absolute;bottom:0;text-align:center;width:100%'>PORTFÖY<div></div>";
            //row.cells[0].innerHTML = "<img src='imgsm/_sayfam.png'/>";
            // row.cells[1].innerHTML = "<img src='imgsm/_detay.png'/>";
            //  row.cells[2].innerHTML = "<img src='imgsm/_analiz.png'/>";
            //row.cells[3].innerHTML = "<img src='imgsm/_diger.png'/>";
            //row.cells[4].innerHTML = "<img src='imgsm/_haber.png'/>";
            //row.cells[5].innerHTML = "<img src='imgsm/_temelanaliz.png'/>";
            //  row.cells[6].innerHTML = "<img src='imgsm/_portfoy.png'/>";

            for (var i = 0; i < row.cells.length; i++) {
                var cellclick = function (colno) {
                    return function () { OnClick_DivFooter(colno); };
                };
                row.cells[i].onclick = cellclick(i);
            }

            // init detay footer
            var table = GetEl("TableDetayFooter");
            var row = table.insertRow(table.rows.length);
            var headers = ["Yzy", "Gtr", "Drn", "Kdm", "Hbr", "Grf"];
            for (var i = 0; i < headers.length; i++) {
                CellTypeToolbar(row.insertCell(i), headers[i], "black", "black", "white", "0px");
                row.cells[i].style.border = "0";
                row.cells[i].style.borderRadius = "5px";
                row.cells[i].style.border = "1px solid #666";
                row.cells[i].style.background = "";
            }
            row.cells[0].innerHTML = "<div style='position:relative'> <div class='yuzeyselicon'></div><div style='font-size:" + iconfontsize + "px;position:absolute;bottom:0;text-align:center;width:100%'>YÜZEYSEL<div></div>";
            row.cells[1].innerHTML = "<div style='position:relative'> <div class='getiriicon'></div><div style='font-size:" + iconfontsize + "px;position:absolute;bottom:0;text-align:center;width:100%'>GETİRİ<div></div>";
            row.cells[2].innerHTML = "<div style='position:relative'> <div class='derinlikicon'></div><div style='font-size:" + iconfontsize + "px;position:absolute;bottom:0;text-align:center;width:100%'>DERİNLİK<div></div>";
            row.cells[3].innerHTML = "<div style='position:relative'> <div class='kademeicon'></div><div style='font-size:" + iconfontsize + "px;position:absolute;bottom:0;text-align:center;width:100%'>KADEME<div></div>";
            row.cells[4].innerHTML = "<div style='position:relative'> <div class='firmahabericon'></div><div style='font-size:" + iconfontsize + "px;position:absolute;bottom:0;text-align:center;width:100%'>F.HABER<div></div>";
            row.cells[5].innerHTML = "<div style='position:relative'> <div class='grafikicon'></div><div style='font-size:" + iconfontsize + "px;position:absolute;bottom:0;text-align:center;width:100%'>GRAFİK<div></div>";
            // row.cells[0].innerHTML = "<img src='imgsm/_yuzeysel.png'/>";
            // row.cells[1].innerHTML = "<img src='imgsm/_getiri.png'/>";
            // row.cells[2].innerHTML = "<img src='imgsm/_derinlik.png'/>";
            //row.cells[3].innerHTML = "<img src='imgsm/_kademe.png'/>";
            //row.cells[4].innerHTML = "<img src='imgsm/_firmahaber.png'/>";
            //row.cells[5].innerHTML = "<img src='imgsm/_grafik.png'/>";

            for (var i = 0; i < row.cells.length; i++) {
                var cellclick = function (colno) {
                    return function () {
                        ActiveDetayFooterNo = colno;
                        ActivateWindow();
                    };
                };
                row.cells[i].onclick = cellclick(i);
            }

            // init analiz footer
            var table = GetEl("TableAnalizFooter");
            var row = table.insertRow(table.rows.length);
            var headers = ["Tks", "Tks2", "Dğl", "Dğl2", "Srm", "Pite"];
            for (var i = 0; i < headers.length; i++) {
                CellTypeToolbar(row.insertCell(i), headers[i], "#000", "#000", "white", "0px");
                row.cells[i].style.border = "1px solid #666";
                row.cells[i].style.borderRadius = "5px";
                row.cells[i].style.background = "";
            }
            //row.cells[0].innerHTML = "<img src='imgsm/_takas.png'/>";
            //row.cells[1].innerHTML = "<img src='imgsm/_takasdeg.png'/>";
            //row.cells[2].innerHTML = "<img src='imgsm/_dagilim.png'/>";
            //row.cells[3].innerHTML = "<img src='imgsm/_dagilimliste.png'/>";
            //row.cells[4].innerHTML = "<img src='imgsm/_sermaye.png'/>";
            //row.cells[5].innerHTML = "<img src='imgsm/_pite.png'/>";

            row.cells[0].innerHTML = "<div style='position:relative'> <div class='takasicon'></div><div style='font-size:" + iconfontsize + "px;position:absolute;bottom:0;text-align:center;width:100%'>TAKAS<div></div>";
            row.cells[1].innerHTML = "<div style='position:relative'> <div class='takasdegicon'></div><div style='font-size:" + iconfontsize + "px;position:absolute;bottom:0;text-align:center;width:100%'>D.TAKAS<div></div>";
            row.cells[2].innerHTML = "<div style='position:relative'> <div class='dagilimicon'></div><div style='font-size:" + iconfontsize + "px;position:absolute;bottom:0;text-align:center;width:100%'>DAĞILIM<div></div>";
            row.cells[3].innerHTML = "<div style='position:relative'> <div class='dagilimlisteicon'></div><div style='font-size:" + iconfontsize + "px;position:absolute;bottom:0;text-align:center;width:100%'>L.DAĞILIM<div></div>";
            row.cells[4].innerHTML = "<div style='position:relative'> <div class='sermayeicon'></div><div style='font-size:" + iconfontsize + "px;position:absolute;bottom:0;text-align:center;width:100%'>SERMAYE<div></div>";
            row.cells[5].innerHTML = "<div style='position:relative'> <div class='piteicon'></div><div style='font-size:" + iconfontsize + "px;position:absolute;bottom:0;text-align:center;width:100%'>PİTE<div></div>";
            for (var i = 0; i < row.cells.length; i++) {
                var cellclick = function (colno) {
                    return function () {
                        ActiveAnalizFooterNo = colno;
                        ActivateWindow();
                    };
                };
                row.cells[i].onclick = cellclick(i);
            }

            // init kademe header
            var table = GetEl("TableKademeToolbar");
            var row = table.insertRow(table.rows.length);
            var headers = ["1", "5", "10", "30", "60", "S1", "S2", "G"];
            for (var i = 0; i < headers.length; i++) {
                InsertCell(row, "", "C", "", "", "0", headers[i]);
            }
            SetRowStyle(row, "2%", "", "");
            for (var i = 0; i < row.cells.length; i++) {
                var cellclick = function (colno) {
                    return function () {
                        ActiveKademePeriodNo = colno;
                        ActivateWindow();
                    };
                };
                row.cells[i].onclick = cellclick(i);
            }

            // init takas fark header
            var table = GetEl("TableTakasFarkToolbar");
            var row = table.insertRow(table.rows.length);
            var headers = ["Gün", "Hafta", "Ay", "Yıl"];
            for (var i = 0; i < headers.length; i++) {
                InsertCell(row, "", "C", "", "", "0", headers[i]);
            }
            SetRowStyle(row, "2%", "", "");
            for (var i = 0; i < row.cells.length; i++) {
                var cellclick = function (colno) {
                    return function () {
                        ActiveTakasFarkPeriodNo = colno;
                        ActivateWindow();
                    };
                };
                row.cells[i].onclick = cellclick(i);
            }

            // init takas header
            var table = GetEl("TableTakasToolbar");
            var row = table.insertRow(table.rows.length);
            var headers = ["SON", "1", "2", "3", "4", "5", "10"];
            for (var i = 0; i < headers.length; i++) {
                InsertCell(row, "", "C", "", "", "0", headers[i]);
            }
            SetRowStyle(row, "2%", "", "");
            for (var i = 0; i < row.cells.length; i++) {
                var cellclick = function (colno) {
                    return function () {
                        ActiveTakasPeriodNo = colno;
                        ActivateWindow();
                    };
                };
                row.cells[i].onclick = cellclick(i);
            }

            // init dağılım header
            var table = GetEl("TableDagilimToolbar");
            var row = table.insertRow(table.rows.length);
            var headers = ["1 G", "2 G", "3 G", "4 G", "5 G", "10 G"];
            for (var i = 0; i < headers.length; i++) {
                InsertCell(row, "", "C", "", "", "0", headers[i]);
            }
            SetRowStyle(row, "2%", "", "");
            for (var i = 0; i < row.cells.length; i++) {
                var cellclick = function (colno) {
                    return function () {
                        ActiveDagilimPeriodNo = colno;
                        ActivateWindow();
                    };
                };
                row.cells[i].onclick = cellclick(i);
            }

            // init dgllist header
            var table = GetEl("TableDglListToolbar");
            var row = table.insertRow(table.rows.length);
            var headers = ["1 G", "2 G", "3 G", "4 G", "5 G", "10 G"];
            for (var i = 0; i < headers.length; i++) {
                InsertCell(row, "", "C", "", "", "0", headers[i]);
            }
            SetRowStyle(row, "2%", "", "");
            for (var i = 0; i < row.cells.length; i++) {
                var cellclick = function (colno) {
                    return function () {
                        ActiveDagilimPeriodNo = colno;
                        ActivateWindow();
                    };
                };
                row.cells[i].onclick = cellclick(i);
            }

            // init PITE header
            var table = GetEl("TablePiteToolbar");
            var row = table.insertRow(table.rows.length);
            var headers = ["1 G", "2 G", "3 G", "4 G", "5 G", "10 G"];
            for (var i = 0; i < headers.length; i++) {
                InsertCell(row, "", "C", "", "", "0", headers[i]);
            }
            SetRowStyle(row, "2%", "", "");
            for (var i = 0; i < row.cells.length; i++) {
                var cellclick = function (colno) {
                    return function () {
                        ActiveDagilimPeriodNo = colno;
                        ActivateWindow();
                    };
                };
                row.cells[i].onclick = cellclick(i);
            }

            // init hacim liste header
            var table = GetEl("TableHacimListeToolbar");
            var row = table.insertRow(table.rows.length);
            var headers = ["1 G", "2 G", "3 G", "4 G", "5 G", "10 G"];
            for (var i = 0; i < headers.length; i++) {
                InsertCell(row, "", "C", "", "", "0", headers[i]);
            }
            SetRowStyle(row, "2%", "", "");
            for (var i = 0; i < row.cells.length; i++) {
                var cellclick = function (colno) {
                    return function () {
                        ActiveHacimListePeriodNo = colno;
                        ActivateWindow();
                    };
                };
                row.cells[i].onclick = cellclick(i);
            }

            // init kurum işlem header
            var table = GetEl("TableKurumIslemToolbar");
            var row = table.insertRow(table.rows.length);
            var headers = ["1", "2", "3", "4", "5", "10"];
            for (var i = 0; i < headers.length; i++) {
                InsertCell(row, "", "C", "", "", "0", headers[i]);
            }
            SetRowStyle(row, "2%", "", "");
            for (var i = 0; i < row.cells.length; i++) {
                var cellclick = function (colno) {
                    return function () {
                        ActiveKurumIslemPeriodNo = colno;
                        ActivateWindow();
                    };
                };
                row.cells[i].onclick = cellclick(i);
            }

            // init chart toolbar
            var table = GetEl("TableDetayChartToolbar");
            var row = table.insertRow(table.rows.length);
            var headers = ["G", "&#9660;", "I", "P", "&#8678;", "&#8680;", "+", "-"];
            for (var i = 0; i < headers.length; i++) {
                InsertCell(row, "", "C", "", "", "0", headers[i]);
            }
            SetRowStyle(row, "2%", "", "");
            PaintToolbarTable("TableDetayChartToolbar", -1);
            for (var i = 0; i < row.cells.length; i++) {
                var cellclick = function (colno) {
                    return function () { OnClick_DivDetayChartToolbar(colno); };
                };
                row.cells[i].onclick = cellclick(i);
            }

            // init tech toolbar
            var table = GetEl("TableTechToolbar");
            var row = table.insertRow(table.rows.length);
            CellType(row.insertCell(0), "80%", "center", "", "", "", false);
            CellTypeToolbar(row.cells[0], "Sembol", "#333", "#333", "silver", "5px");
            CellType(row.insertCell(1), "20%", "center", "", "", "", false);
            CellTypeToolbar(row.cells[1], "P", "#555", "#111", "silver", "5px");
            CellType(row.insertCell(2), "20%", "right", "", "", "", false);
            CellTypeToolbar(row.cells[2], "&#9660;", "#555", "#111", "silver", "5px");
            CellType(row.insertCell(3), "20%", "right", "", "", "", false);
            CellTypeToolbar(row.cells[3], "I", "#555", "#111", "silver", "5px");
            CellType(row.insertCell(4), "20%", "right", "", "", "", false);
            CellTypeToolbar(row.cells[4], "&#8678;", "#555", "#111", "silver", "5px");
            CellType(row.insertCell(5), "20%", "right", "", "", "", false);
            CellTypeToolbar(row.cells[5], "&#8680;", "#555", "#111", "silver", "5px");
            CellType(row.insertCell(6), "20%", "right", "", "", "", false);
            CellTypeToolbar(row.cells[6], "+", "#555", "#111", "silver", "5px");
            CellType(row.insertCell(7), "20%", "right", "", "", "", false);
            CellTypeToolbar(row.cells[7], "-", "#555", "#111", "silver", "5px");
            for (var i = 0; i < row.cells.length; i++) {
                row.cells[i].style.borderRadius = "5px";
                row.cells[i].style.border = "0";
                row.cells[i].style.fontWeight = "bold";
            }


            for (var i = 0; i < row.cells.length; i++) {
                var cellclick = function (colno) {
                    return function () { OnClick_DivTechToolbar(colno); };
                };
                row.cells[i].onclick = cellclick(i);
            }

            WatchlistTable = GetEl("TableWatchlist");

            //var docElm = document.documentElement;
            //if (docElm.requestFullscreen)
            //    docElm.requestFullscreen();
            //else if (docElm.mozRequestFullScreen)
            //    docElm.mozRequestFullScreen();
            //else if (docElm.webkitRequestFullScreen)
            //    docElm.webkitRequestFullScreen();

            DeviceHeight = window.innerHeight;
            Resize();


            ReadWatchlistSymbols();

            window.addEventListener("orientationchange", OrientationChanged);


            KurumlarArray.push("A1 CAPITAL");
            KurumlarArray.push("ALTERNATIF YATIRIM");
            //KurumlarArray.push("ACAR MENKUL");
            KurumlarArray.push("AHLATCI YATIRIM");
            KurumlarArray.push("AK YATIRIM");
            KurumlarArray.push("ALAN YATIRIM");
            KurumlarArray.push("ALB YATIRIM");
            KurumlarArray.push("ALNUS YATIRIM");
            KurumlarArray.push("ANADOLU YATIRIM");
            KurumlarArray.push("BURGAN YATIRIM");
            KurumlarArray.push("DINAMIK MENKUL");
            KurumlarArray.push("GEDIK YATIRIM");
            KurumlarArray.push("GLOBAL MENKUL");
            KurumlarArray.push("HALK YATIRIM");
            KurumlarArray.push("INFO YATIRIM");
            KurumlarArray.push("ISIK MENKUL");
            KurumlarArray.push("INVEST AZ");
            KurumlarArray.push("MARBAS MENKUL");
            KurumlarArray.push("MEKSA YATIRIM");
            //KurumlarArray.push("NOOR CM");
            KurumlarArray.push("OSMANLI MENKUL");
            KurumlarArray.push("OYAK YATIRIM");
            KurumlarArray.push("PHILLIP CAPITAL");
            KurumlarArray.push("SANKO MENKUL");

            //KurumlarArray.push("TEKSTIL YATIRIM");
            //KurumlarArray.push("TERA MENKUL");
            KurumlarArray.push("TACIRLER MENKUL");
            KurumlarArray.push("TURKISH YATIRIM");
            KurumlarArray.push("UNLU MENKUL");
            KurumlarArray.push("VAKIF YATIRIM");
            KurumlarArray.push("YAPI KREDI");
            KurumlarArray.push("YATIRIM FINANSMAN");

            ParolasizKurumlar.push("AK YATIRIM");
            ParolasizKurumlar.push("MEKSA YATIRIM");
            ParolasizKurumlar.push("SANKO MENKUL");
            ParolasizKurumlar.push("VAKIF YATIRIM");
            ParolasizKurumlar.push("YAPI KREDI");
            ParolasizKurumlar.push("HALK YATIRIM");
            ParolasizKurumlar.push("TACIRLER MENKUL");
            ParolasizKurumlar.push("TURKISH YATIRIM");
            ParolasizKurumlar.push("BURGAN YATIRIM");
            ParolasizKurumlar.push("ANADOLU YATIRIM");



            // BIST görünüm table
            var table = GetEl("TableBistTumGorunum");
            for (var i = 0; i < 3; i++) {
                var row = table.insertRow(i);
                InsertCell(row, "33%", "L", "", "", "0", "");
                InsertCell(row, "33%", "C", "", "", "0", "");
                InsertCell(row, "33%", "C", "", "", "0", "");
            }

            // init takas fark table
            var colors = ["lawngreen", "red", "gold", "blue", "cyan", "dimgray"];
            var table = GetEl("TableTakasFark");
            for (var i = 0; i < 6; i++) {
                var row = table.insertRow(i);
                InsertCell(row, "12%", "C", "", colors[i], "0", "&#9679");
                InsertCell(row, "32%", "L", "", "gainsboro", "0", "");
                InsertCell(row, "34%", "R", "", "gold", "0", "");
                InsertCell(row, "22%", "R", "", "silver", "0", "");
                SetRowStyle(row, "0", "0", "");
            }

            // getiri table
            var table = GetEl("TableGetiri");
            var row = table.insertRow(0);

            InsertCell(row, "12%", "L", "", "", "H", "");
            InsertCell(row, "19%", "R", "", "", "H", "%");
            InsertCell(row, "23%", "R", "", "", "H", "Ort");
            InsertCell(row, "23%", "R", "", "", "H", "Yüksek");
            InsertCell(row, "23%", "R", "", "", "H", "Düşük");
            var names = ["G", "Bu H", "1 H", "Bu A", "1 A", "3 A", "6 A", "Bu Y", "1 Y"];
            for (var i = 0; i < 9; i++) {
                var row = table.insertRow(i + 1);
                InsertCell(row, "12%", "L", "", "silver", "", names[i]);
                InsertCell(row, "19%", "R", "", "", "", "");
                InsertCell(row, "23%", "R", "", "", "", "");
                InsertCell(row, "23%", "R", "", "", "", "");
                InsertCell(row, "23%", "R", "", "", "", "");
            }

            // dagilim table
            var colors = ["lawngreen", "red", "gold", "blue", "cyan", "dimgray"];
            var table = GetEl("TableDagilim");
            for (var i = 0; i < 6; i++) {
                var row = table.insertRow(i);
                InsertCell(row, "6%", "C", "", colors[i], "", "&#9679");
                InsertCell(row, "26%", "L", "", "gainsboro", "", "");
                InsertCell(row, "32%", "R", "", "gold", "", "");
                InsertCell(row, "16%", "R", "", "silver", "", "");
                InsertCell(row, "20%", "R", "", "yellow", "", "");
                SetRowStyle(row, "0", "0", "");
            }

            // Pite table
            var colors = ["lawngreen", "red", "gold", "blue", "cyan", "dimgray"];
            var table = GetEl("TablePite");
            for (var i = 0; i < 6; i++) {
                var row = table.insertRow(i);
                InsertCell(row, "6%", "C", "", colors[i], "", "&#9679");
                InsertCell(row, "26%", "L", "", "gainsboro", "", "");
                InsertCell(row, "32%", "R", "", "gold", "", "");
                InsertCell(row, "16%", "R", "", "silver", "", "");
                InsertCell(row, "20%", "R", "", "yellow", "", "");
                SetRowStyle(row, "0", "0", "");
            }


            // hacim özet table
            var headers = ["Toplam", "Net", "Net/Toplam"];
            var table = GetEl("TableHacimOzet");
            for (var i = 0; i < 3; i++) {
                var row = table.insertRow(i);
                InsertCell(row, "50%", "L", "", "silver", "", headers[i]);
                InsertCell(row, "50%", "R", "", "gainsboro", "", "");
            }

            // derinlik yzy
            var table = GetEl("TableDerinlikYzy");
            var row = table.insertRow(0);
            var backcolor = "#222";
            var forecolor = "silver";
            InsertCell(row, "20%", "C", "#000", "#999", "", "Tavan");
            InsertCell(row, "20%", "C", "#000", "#999", "", "Taban");
            InsertCell(row, "20%", "C", "#000", "#999", "", "Ort.S");
            InsertCell(row, "20%", "C", "#000", "#999", "", "Yks.S");
            InsertCell(row, "20%", "C", "#000", "#999", "", "Dşk.S");
            for (var i = 0; i < row.cells.length; i++) {
                //row.cells[i].style.padding="3px";
                row.cells[i].style.border = "";
                row.cells[i].style.padding = "1px";
            }
            //SetRowStyle(row,"","0","bold");

            var row = table.insertRow(1);
            InsertCell(row, "20%", "C", "#000", "lime", "", "-");
            InsertCell(row, "20%", "C", "#000", "red", "", "-");
            InsertCell(row, "20%", "C", "#000", "gold", "", "-");
            InsertCell(row, "20%", "C", "#000", "lime", "", "-");
            InsertCell(row, "20%", "C", "#000", "red", "", "-");
            for (var i = 0; i < row.cells.length; i++) {
                //row.cells[i].style.border="1px #666 solid";
                row.cells[i].style.padding = "2px";
            }
            DrnYuzeyselRow = row;

            // derinlik header1
            var table = GetEl("TableDerinlikHeader1");
            var row = table.insertRow(0);
            InsertCell(row, "10%", "R", backcolor, forecolor, "", "A.E");
            InsertCell(row, "21%", "R", backcolor, forecolor, "", "A.Lot");
            InsertCell(row, "15%", "R", backcolor, forecolor, "", "Alış");
            InsertCell(row, "2%", "C", backcolor, forecolor, "", "");
            InsertCell(row, "15%", "L", backcolor, forecolor, "", "Satış");
            InsertCell(row, "21%", "L", backcolor, forecolor, "", "S.Lot");
            InsertCell(row, "10%", "L", backcolor, forecolor, "", "S.E");
            for (var i = 0; i < row.cells.length; i++) {
                row.cells[i].style.padding = "3px";
                row.cells[i].style.border = "";
            }
            SetRowStyle(row, "", "0", "");

            // BistBuySell derinlik header
            var table = GetEl("BistBuysellDerinlik");
            var row = table.insertRow(0);
            InsertCell(row, "22%", "R", "black", "white", "", "A.Lot");
            InsertCell(row, "20%", "R", "black", "white", "", "Alış");
            InsertCell(row, "4%", "C", "black", "white", "", "");
            InsertCell(row, "20%", "L", "black", "white", "", "Satış");
            InsertCell(row, "22%", "L", "black", "white", "", "S.Lot");
            for (var i = 0; i < row.cells.length; i++) {
                row.cells[i].style.padding = "3px";
                row.cells[i].style.border = "";
            }
            SetRowStyle(row, "", "0", "");

            // BistBuySell Edit derinlik header
            var table = GetEl("BistBuysellEditDerinlik");
            var row = table.insertRow(0);
            InsertCell(row, "22%", "R", "black", "white", "", "A.Lot");
            InsertCell(row, "20%", "R", "black", "white", "", "Alış");
            InsertCell(row, "4%", "C", "black", "white", "", "");
            InsertCell(row, "20%", "L", "black", "white", "", "Satış");
            InsertCell(row, "22%", "L", "black", "white", "", "S.Lot");
            for (var i = 0; i < row.cells.length; i++) {
                row.cells[i].style.padding = "3px";
                row.cells[i].style.border = "";
            }
            SetRowStyle(row, "", "0", "");

            // ViopBuySell derinlik header
            var table = GetEl("ViopBuysellDerinlik");
            var row = table.insertRow(0);
            InsertCell(row, "22%", "R", "black", "white", "", "A.Lot");
            InsertCell(row, "20%", "R", "black", "white", "", "Alış");
            InsertCell(row, "4%", "C", "black", "white", "", "");
            InsertCell(row, "20%", "L", "black", "white", "", "Satış");
            InsertCell(row, "22%", "L", "black", "white", "", "S.Lot");
            for (var i = 0; i < row.cells.length; i++) {
                row.cells[i].style.padding = "3px";
                row.cells[i].style.border = "";
            }
            SetRowStyle(row, "", "0", "");


            // ChartBuySell derinlik header
            var table = GetEl("ChartBuysellDerinlik");
            var row = table.insertRow(0);
            InsertCell(row, "22%", "R", "black", "white", "", "A.Lot");
            InsertCell(row, "20%", "R", "black", "white", "", "Alış");
            InsertCell(row, "4%", "C", "black", "white", "", "");
            InsertCell(row, "20%", "L", "black", "white", "", "Satış");
            InsertCell(row, "22%", "L", "black", "white", "", "S.Lot");
            for (var i = 0; i < row.cells.length; i++) {
                row.cells[i].style.padding = "3px";
                row.cells[i].style.border = "";
            }
            SetRowStyle(row, "", "0", "");



            // init drn işlem col name
            var table = GetEl("TableDrnIslemColName");
            var row = table.insertRow(table.rows.length);
            InsertCell(row, "34%", "L", backcolor, forecolor, "0", "Saat");
            row.cells[0].style.paddingLeft = "5%";
            InsertCell(row, "33%", "C", backcolor, forecolor, "0", "Fiyat");
            InsertCell(row, "33%", "R", backcolor, forecolor, "0", "Lot");
            row.cells[2].style.paddingRight = "5%";
            InsertCell(row, "0", "R", backcolor, forecolor, "0", "");
            InsertCell(row, "0", "L", backcolor, forecolor, "0", "");
            InsertCell(row, "0", "L", backcolor, forecolor, "0", "");
            SetRowStyle(row, "3px", "0", "");
            for (var i = 0; i < row.cells.length; i++) {
                var cellclick = function (colno) {
                    return function () {
                        IslemWindowMaximized = !IslemWindowMaximized;
                        if (IslemWindowMaximized) {
                            GetEl("DivTableDetayDerinlik").style.display = "none";
                            GetEl("TableDerinlikHeader1").style.display = "none";
                        }
                        else {
                            GetEl("DivTableDetayDerinlik").style.display = "inline-block";
                            GetEl("TableDerinlikHeader1").style.display = "";
                        }
                        var el = GetEl("DivDrnIslem");
                        el.style.height = (el.parentNode.clientHeight - el.offsetTop - 0) + "px";
                    };
                };
                row.cells[i].onclick = cellclick(i);
            }


            // kademe header
            var table = GetEl("TableDetayKademeHeader");
            var row = table.insertRow(0);
            InsertCell(row, "10%", "C", "", "", "H", "");
            InsertCell(row, "18%", "C", "", "", "H", "Fiyat");
            InsertCell(row, "26%", "R", "", "", "H", "Lot");
            InsertCell(row, "18%", "R", "", "", "H", "%");
            InsertCell(row, "14%", "R", "", "", "H", "A%");
            InsertCell(row, "14%", "R", "", "", "H", "S%");

            // takas header
            var table = GetEl("TableAnalizTakasHeader");
            var row = table.insertRow(0);
            InsertCell(row, "14%", "C", "", "", "H", "");
            InsertCell(row, "32%", "L", "", "", "H", "Kurum");
            InsertCell(row, "36%", "R", "", "", "H", "Lot");
            InsertCell(row, "18%", "R", "", "", "H", "%");

            // dgl list header
            var table = GetEl("TableDglListHeader");
            var row = table.insertRow(0);
            InsertCell(row, "30%", "L", "", "", "H", "Kurum");
            InsertCell(row, "30%", "R", "", "", "H", "Lot");
            InsertCell(row, "18%", "R", "", "", "H", "%");
            InsertCell(row, "22%", "R", "", "", "H", "Maliyet");


            // init portfoy toolbar
            var table = GetEl("TablePortfoyToolbar");
            var row = table.insertRow(table.rows.length);
            var headers = ["BIST POZ", "BIST EMIR", "VIOP POZ", "VIOP EMIR"];
            for (var i = 0; i < headers.length; i++) {
                InsertCell(row, "", "C", "", "", "0", headers[i]);
            }
            SetRowStyle(row, "3%", "", "");
            for (var i = 0; i < row.cells.length; i++) {
                var cellclick = function (colno) {
                    return function () {
                        ActivePortfoyToolbarNo = colno;
                        ActivateWindow();
                    };
                };
                row.cells[i].onclick = cellclick(i);
            }




            // ********
            var val = localStorage["ChartValuesVisible"];
            if (val != undefined) ChartValuesVisible = StrToBool(val);
            var val = localStorage["ChartDoubleColoring"];
            if (val != undefined) ChartDoubleColoring = StrToBool(val);
            var val = localStorage["ChartBuySellVisible"];
            if (val != undefined) ChartBuySellVisible = StrToBool(val);
            var val = localStorage["ChartBarType"];
            if (val != undefined) ChartBarType = val;
            //if (ChartBarType != 0) ChartBarType = 1;
            var val = localStorage["ChartCaptureLevel"];
            if (val != undefined) ChartCaptureLevel = StrToBool(val);
            var val = localStorage["ChartTrendType"];
            if (val != undefined) TrendType = val;

            //var val=localStorage["WatchlistType"];
            //if (val!=undefined) WatchlistType=val;

            FillCombo("SelectSirali", SiraliArray, "Net Kar");

            GetEl("DivTechCanvas1").addEventListener("touchstart", TouchStartTech, false);
            GetEl("DivTechCanvas1").addEventListener("touchmove", TouchMoveTech, false);


            try {
                // local storage
                var loginkey = localStorage["LOGIN"];
                if (loginkey != undefined) {
                    var fieldarray = loginkey.split("|");
                    GetEl("checkRemember").checked = true;
                    GetEl("textUsername").value = fieldarray[0];
                    GetEl("textPassword").value = fieldarray[1];
                    if (GetEl("textUsername").value == "DEMO")
                        GetEl("checkRemember").checked = false;
                    else {
                        TimeConnectionTest = new Date();
                        ConnectionTryCount = 0;
                        LoginClicked = true;
                        Connect();
                        //setTimeout(function(){Connect()},100);
                    }
                }
            } catch (e) {

                alert(e);
            }


            Timer = window.setInterval("TimerElapsed()", 200);
            setInterval("SendRequestFromQueue()", 50);  // cccc
            //setTimeout(function () { Socket.send("984309"); }, 30000);
            //setTimeout(function () { SendRequest("984309"); }, 30000);
        }

        function InsertCell(rowx, widthx, alignx, backcolorx, forecolorx, borderbottomx, textx) {
            var newcell = rowx.insertCell(rowx.cells.length);
            newcell.innerHTML = textx;
            newcell.style.padding = "3px";
            newcell.style.paddingTop = "5px";
            newcell.style.paddingBottom = "5px";
            if (widthx != "") newcell.style.width = widthx;
            if (alignx == "L")
                newcell.style.textAlign = "left";
            else if (alignx == "R")
                newcell.style.textAlign = "right";
            else if (alignx == "C")
                newcell.style.textAlign = "center";
            if (backcolorx != "") newcell.style.backgroundColor = backcolorx;
            if (forecolorx != "") newcell.style.color = forecolorx;
            if (borderbottomx == "")
                newcell.style.borderBottom = Border;
            else if (borderbottomx == "H") {
                newcell.style.borderBottom = BorderBottom;
                newcell.style.color = HeaderColor;
                newcell.style.fontWeight = "bold";
            }
            else if (borderbottomx != "")
                newcell.style.borderBottom = borderbottomx;

            newcell.style.overflow = "hidden";
            newcell.style.whiteSpace = "nowrap";

            return newcell;
        }

        function LocalStorageSpace() {
            var allStrings = '';
            for (var key in window.localStorage) {
                if (window.localStorage.hasOwnProperty(key)) {
                    allStrings += window.localStorage[key];
                }
            }
            return allStrings ? 3 + ((allStrings.length * 16) / (8 * 1024)) + ' KB' : 'Empty (0 KB)';
        };

        function NewsClass() {
            this.SortKey = "";
            this.NewsID = "";
            this.DateStr = "";
            this.NewsNo = "";
            this.Header = "";
        }
        function navigateUrl(val, tipx) {
            if (tipx == 0)
                window.location.href = val;
            else if (tipx == 1)
                window.open(val);
        }

        Number.prototype.Format = function () {
            return this.toString().split(/(?=(?:\d{3})+(?:\.|$))/g).join(",");
        }

        function OnChange_DivBistBuySellTextSymbol() {
            GetEl("lblBuysellTutar").innerHTML = "";
            GetEl("DivBistBuySellGrup").innerHTML = "";
            var fiyattable = GetEl("TableBistBuySellFiyat");
            ClearTable("TableBistBuySellFiyat");

            GetEl("DivBistBuySellTextFiyat").value = "";


            // find symbol
            var symbol = GetEl("DivBistBuySellTextSymbol").value.replace("ı", "i").replace("İ", "I").toUpperCase();
            var basic = BasicObject[symbol];
            if (basic == undefined) {

                DetaySymbol = "";
                return;
            }

            DetaySymbol = symbol;
            BuySellDerinlikTemizle();
            var pricestep = GetPriceStep(basic);

            if (basic.Group != "")
                GetEl("DivBistBuySellGrup").innerHTML = basic.Group;

            //if (basic.Symbol == "MMCAS" || basic.Symbol == "ASYAB" || basic.Symbol == "KERVN")
            //{
            //    var str = "Brüt takas uygulaması kapsamına alınan paylarda alım yapmak isteyen yatırımcıların takas tarihinde hesaplarında alımlarını karşılayacak tutarda nakit, satım yapmak isteyen yatırımcıların takas tarihinde hesaplarında satımlarını karşılayacak miktarda menkul kıymet bulundurması gerekmektedir.\r\n\r\n Devam etmek istiyor musunuz ?";
            //    if (window.confirm(str) == false)
            //    {
            //        GetEl("DivBistBuySellTextSymbol").value = "";
            //        return;
            //    }
            //}

            //if (BrutTakasKontrol(basic.Symbol) != "") {
            //    if (window.confirm(BrutTakasKontrol(basic.Symbol)) == false) {
            //        GetEl("DivBistBuySellTextSymbol").value = "";
            //        return;
            //    }
            //}


            var laststr = basic.GetPriceStr(basic.LastPrice).replace(",", ".");
            if (basic.LastPrice == 0)
                laststr = basic.GetPriceStr(basic.DayClose).replace(",", ".");


            GetEl("DivBistBuySellTextFiyat").value = laststr;
            GetEl("DivBistBuySellTextFiyat").step = pricestep;

            var pricearray = GetBistPriceSteps(basic);
            for (var i = 0; i < pricearray.length; i++) {
                var rowcount = fiyattable.rows.length;
                var row = fiyattable.insertRow(rowcount);
                InsertCell(row, "300px", "L", "", "gainsboro", "", basic.GetPriceStr(pricearray[i]).replace(",", "."));
                row.cells[0].style.padding = "5px";
            }
            BistBuySellTutarhesapla();

            // click events
            for (var i = 0; i < fiyattable.rows.length; i++) {
                var currentrow = fiyattable.rows[i];
                var cellclick = function (rowno) {
                    return function () {
                        GetEl("DivBistBuySellTextFiyat").value = fiyattable.rows[rowno].cells[0].innerHTML;
                        GetEl("TableBistBuySellFiyat").style.display = "none";
                        BistBuySellTutarhesapla();
                    };
                };
                currentrow.onmousedown = cellclick(i);
            }

            if (basic.BrutTakasBool || basic.Group == "ALT") {
                GetEl("lblBuysellTutar").innerHTML = "";
                GetEl("DivBistBuySellGrup").innerHTML = "";
                ClearTable("TableBistBuySellFiyat");

                GetEl("DivBistBuySellTextFiyat").value = "";
                ShowConfirmWindow("Uyarı", BrutTakasKontrol(basic.Symbol), 4);
                GetEl("DivBistBuySellTextSymbol").value = "";


            }


        }
        function OnChange_DivBistZincirBuySellTextSymbol() {


            GetEl("DivBistZincirBuySellGrup").innerHTML = "";
            var fiyattable = GetEl("TableBistZincirBuySellFiyat");
            ClearTable("TableBistZincirBuySellFiyat");

            GetEl("DivBistZincirBuySellTextFiyat").value = "";

            // find symbol
            var symbol = GetEl("DivBistZincirBuySellTextSymbol").value.replace("ı", "i").replace("İ", "I").toUpperCase();
            var basic = BasicObject[symbol];
            if (basic == undefined) return;
            var pricestep = GetPriceStep(basic);
            if (basic.Group != "")
                GetEl("DivBistZincirBuySellGrup").innerHTML = basic.Group;

            if (basic.Symbol == "MMCAS" || basic.Symbol == "ASYAB" || basic.Symbol == "KERVN") {
                var str = "Brüt takas uygulaması kapsamına alınan paylarda alım yapmak isteyen yatırımcıların takas tarihinde hesaplarında alımlarını karşılayacak tutarda nakit, satım yapmak isteyen yatırımcıların takas tarihinde hesaplarında satımlarını karşılayacak miktarda menkul kıymet bulundurması gerekmektedir.\r\n\r\n Devam etmek istiyor musunuz ?";
                if (window.confirm(str) == false) {
                    GetEl("DivBistZincirBuySellTextSymbol").value = "";
                    return;
                }
            }

            var laststr = basic.GetPriceStr(basic.LastPrice).replace(",", ".");
            GetEl("DivBistZincirBuySellTextFiyat").value = laststr;
            GetEl("DivBistZincirBuySellTextFiyat").step = pricestep;

            var pricearray = GetBistPriceSteps(basic);
            for (var i = 0; i < pricearray.length; i++) {
                var rowcount = fiyattable.rows.length;
                var row = fiyattable.insertRow(rowcount);
                InsertCell(row, "300px", "L", "", "gainsboro", "", basic.GetPriceStr(pricearray[i]).replace(",", "."));
                row.cells[0].style.padding = "5px";
            }

            // click events
            for (var i = 0; i < fiyattable.rows.length; i++) {
                var currentrow = fiyattable.rows[i];
                var cellclick = function (rowno) {
                    return function () {
                        GetEl("DivBistZincirBuySellTextFiyat").value = fiyattable.rows[rowno].cells[0].innerHTML;
                        GetEl("TableBistZincirBuySellFiyat").style.display = "none";
                    };
                };
                currentrow.onmousedown = cellclick(i);
            }
        }

        function OnChange_DivViopBuySellSelectEmirTip(el) //Ssedat
        {
            var option = el.options[el.selectedIndex];
            if (option.value == "PYS" || option.value == "PYL") {
                GetEl("DivViopBuySellTextFiyat").style.visibility = "hidden";
                GetEl("DivViopBuySellButtonFiyat").style.visibility = "hidden";
            }
            else {
                GetEl("DivViopBuySellTextFiyat").style.visibility = "visible";
                GetEl("DivViopBuySellButtonFiyat").style.visibility = "visible";
            }
        }

        function OnChange_DivViopBuySellSelectFiyatTip(el) {
            var option = el.options[el.selectedIndex];
            if (option.value == "LMT") {
                GetEl("DivViopBuySellTextFiyat").style.visibility = "visible";
                GetEl("DivViopBuySellButtonFiyat").style.visibility = "visible";
            }
            else {
                GetEl("DivViopBuySellTextFiyat").style.visibility = "hidden";
                GetEl("DivViopBuySellButtonFiyat").style.visibility = "hidden";
            }
        }

        function OnChange_DivViopBuySellSelectSure(el) {

            var option = el.options[el.selectedIndex];
            if (option.value == "TAR") {
                GetEl("DivViopBuySellTextTarih").style.visibility = "visible";
                if (GetEl("DivViopBuySellTextTarih").value == "")
                    GetEl("DivViopBuySellTextTarih").value = FormatDate(new Date(), "DD/MM/YYYY");
            }
            else {
                GetEl("DivViopBuySellTextTarih").style.visibility = "hidden";
            }
        }
        function OnChange_DivViopBuySellTextSymbol() {

            var fiyattable = GetEl("TableViopBuySellFiyat");
            ClearTable("TableViopBuySellFiyat");

            GetEl("DivViopBuySellTextFiyat").value = "";


            // find symbol
            var symbol = GetEl("DivViopBuySellTextSymbol").value.replace("ı", "i").replace("İ", "I").toUpperCase();


            var basic = BasicObject[symbol];
            if (basic != undefined) {
                original = basic.GetOriginal();
                prefix = basic.Prefix;

                if (CheckAkseansSembol(basic))
                    GetEl("DivAksamSeans").style.display = "inline-block";
                else
                    GetEl("DivAksamSeans").style.display = "none";

            }
            else {
                HideByID("DivAksamSeans");
            }
            if (basic == undefined) {
                DetaySymbol = "";
                BuySellDerinlikTemizle();
                return;
            }
            DetaySymbol = basic.GetOriginal();
            BuySellDerinlikTemizle();
            // fill fiyat table
            var limitup = basic.LimitUp;
            var limitdown = basic.LimitDown;
            var pricestep = basic.Adim;

            var laststr = basic.GetPriceStr(basic.LastPrice).replace(",", ".");
            GetEl("DivViopBuySellTextFiyat").value = laststr;
            GetEl("DivViopBuySellTextFiyat").step = pricestep;
            if (limitup == 0 || limitdown == 0 || pricestep == 0) return;
            // fill table
            for (var i = 400; i >= 0; i--) {
                var refprice = basic.DayClose + i * pricestep;
                if (refprice < limitup) {
                    var rowcount = fiyattable.rows.length;
                    var row = fiyattable.insertRow(rowcount);
                    InsertCell(row, "300px", "L", "", "gainsboro", "", basic.GetPriceStr(refprice).replace(",", "."));
                    row.cells[0].style.padding = "5px";
                }
            }
            for (var i = 1; i <= 400; i++) {
                var refprice = basic.DayClose - i * pricestep;
                if (refprice > limitdown) {
                    var rowcount = fiyattable.rows.length;
                    var row = fiyattable.insertRow(rowcount);
                    InsertCell(row, "300px", "L", "", "gainsboro", "", basic.GetPriceStr(refprice).replace(",", "."));
                    row.cells[0].style.padding = "5px";
                }
            }
            //while (limitup >= limitdown)
            //{
            //    var rowcount = fiyattable.rows.length;
            //    var row = fiyattable.insertRow(rowcount);
            //    InsertCell(row, "300px", "L", "", "gainsboro", "", basic.GetPriceStr(limitup).replace(",", "."));
            //    row.cells[0].style.padding = "5px";
            //    limitup -= pricestep;
            //}

            // click events
            for (var i = 0; i < fiyattable.rows.length; i++) {
                var currentrow = fiyattable.rows[i];
                var cellclick = function (rowno) {
                    return function () {
                        GetEl("DivViopBuySellTextFiyat").value = fiyattable.rows[rowno].cells[0].innerHTML;
                        fiyattable.style.display = "none";
                    };
                };
                currentrow.onmousedown = cellclick(i);
            }

            // Şart Sembolleri  Gurplara Göre Doldur
            // GetEl("DivViopBuySellTextSartSymbol").value = "";
            GetEl("DivViopBuySellTextSartFiyat").value = "";

            table = GetEl("TableViopBuySellSartSymbol");
            var symbolarrayx = [];
            for (var name in BasicObject) {

                if (grup1Check(symbol) != grup1Check(name))
                    continue;

                var item = BasicObject[name];
                if (item.Prefix == "VIP" && name.substr(0, 3) != "VIP")
                    symbolarrayx.push(name);
            }
            symbolarrayx.sort();
            maxrows = symbolarrayx.length;

            ClearTable("TableViopBuySellSartSymbol");
            for (var i = 0; i < maxrows; i++) {
                var rowcount = table.rows.length;
                var row = table.insertRow(rowcount);
                var cell = row.insertCell(0);
                cell.innerHTML = symbolarrayx[i];
                cell.style.borderBottom = "1px #DDD solid";
                cell.style.paddingTop = "3px";
                cell.style.paddingBottom = "3px";
                cell.style.width = "300px";
            }

            // click events
            for (var i = 0; i < table.rows.length; i++) {
                var currentrow = table.rows[i];
                var cellclick = function (rowno) {
                    return function () {
                        GetEl("DivViopBuySellTextSartSymbol").value = table.rows[rowno].cells[0].innerHTML;
                        OnChange_DivViopBuySellTextSartSymbol();
                        table.style.display = "none";
                    };
                };
                currentrow.onmousedown = cellclick(i);
            }

            if (GetEl("DivViopBuySellTextSartSymbol").value != "") {
                if (grup1Check(symbol) != grup1Check(GetEl("DivViopBuySellTextSartSymbol").value)) {

                    GetEl("DivViopBuySellTextSartSymbol").value = symbol;
                    OnChange_DivViopBuySellTextSartSymbol();
                }
            }
            else {
                GetEl("DivViopBuySellTextSartSymbol").value = symbol;
                OnChange_DivViopBuySellTextSartSymbol();
            }
        }
        function OnChange_DivViopBuySellTextSartSymbol() {
            var fiyattable = GetEl("TableViopBuySellSartFiyat");
            ClearTable("TableViopBuySellSartFiyat");

            GetEl("DivViopBuySellTextSartFiyat").value = "";

            // find symbol
            var symbol = GetEl("DivViopBuySellTextSartSymbol").value.replace("ı", "i").replace("İ", "I").toUpperCase();
            var basic = BasicObject[symbol];
            if (basic == undefined) return;


            // fill fiyat table
            var limitup = basic.LimitUp;
            var limitdown = basic.LimitDown;
            var pricestep = basic.Adim;

            //alert(limitup + "   " + limitdown + "   " + pricestep);

            if (limitup == 0 || limitdown == 0 || pricestep == 0) return;
            // fill table
            for (var i = 400; i >= 0; i--) {
                var refprice = basic.DayClose + i * pricestep;
                if (refprice < limitup) {
                    var rowcount = fiyattable.rows.length;
                    var row = fiyattable.insertRow(rowcount);
                    InsertCell(row, "300px", "L", "", "gainsboro", "", basic.GetPriceStr(refprice).replace(",", "."));
                    row.cells[0].style.padding = "5px";
                }
            }
            for (var i = 1; i <= 400; i++) {
                var refprice = basic.DayClose - i * pricestep;
                if (refprice > limitdown) {
                    var rowcount = fiyattable.rows.length;
                    var row = fiyattable.insertRow(rowcount);
                    InsertCell(row, "300px", "L", "", "gainsboro", "", basic.GetPriceStr(refprice).replace(",", "."));
                    row.cells[0].style.padding = "5px";
                }
            }

            var laststr = basic.GetPriceStr(basic.LastPrice).replace(",", ".");
            GetEl("DivViopBuySellTextSartFiyat").value = laststr;
            GetEl("DivViopBuySellTextSartFiyat").step = pricestep;

            // click events
            for (var i = 0; i < fiyattable.rows.length; i++) {
                var currentrow = fiyattable.rows[i];
                var cellclick = function (rowno) {
                    return function () {
                        GetEl("DivViopBuySellTextSartFiyat").value = fiyattable.rows[rowno].cells[0].innerHTML;
                        fiyattable.style.display = "none";
                    };
                };
                currentrow.onmousedown = cellclick(i);
            }
        }
        function OnClick_DivViopEmirDuzeltOK() // Ssedat
        {

            if (EmirSilRowNo < 0) return;
            var table = GetEl("TablePortfoyData");
            var symbol = table.rows[EmirSilRowNo].cells[0].innerHTML;
            var yon = table.rows[EmirSilRowNo].cells[1].innerHTML;
            var emirnostr = table.rows[EmirSilRowNo].cells[5].innerHTML;
            var elemirtip = GetEl("DivViopBuySellSelectEmirTip");
            var fiyatstr = GetEl("DivViopBuySellTextFiyat").value;
            var emirtipstr = elemirtip.options[elemirtip.selectedIndex].value;
            var sarttip = table.rows[EmirSilRowNo].cells[9].innerHTML;
            var sartsembol = table.rows[EmirSilRowNo].cells[11].innerHTML;
            var sartfiyat = table.rows[EmirSilRowNo].cells[13].innerHTML;
            var aksamseansstr = table.rows[EmirSilRowNo].cells[18].innerHTML;


            if (HesapKurum == "TURKISH YATIRIM" && ViopBackOffice == "INFINA")
                emirnostr = ToEngUp(table.rows[EmirSilRowNo].cells[14].innerHTML);


            if (emirtipstr == "LMT") {
                if (isNaN(fiyatstr) || fiyatstr.trim() == "") {

                    ShowAlertWindow("Viop Emir Giriş", "Fiyat Giriniz !!!");
                    return;
                }
            }
            var miktarstr = GetEl("DivViopBuySellTextMiktar").value;
            if (isNaN(miktarstr) || miktarstr.trim() == "") {
                ShowAlertWindow("Viop Emir Giriş", "Miktar Giriniz !!!");
                return;
            }


            var elsure = GetEl("DivViopBuySellSelectSure");
            var surestr = elsure.options[elsure.selectedIndex].value;
            var tarihstr = GetEl("DivViopBuySellTextTarih").value;

            var msgsend = "EMIRNO=" + emirnostr;
            msgsend += "|" + "SEMBOL=" + symbol;
            msgsend += "|" + "YON=" + yon;
            msgsend += "|" + "EMIKTAR=" + table.rows[EmirSilRowNo].cells[2].innerHTML;
            msgsend += "|" + "FIYAT=" + fiyatstr;
            msgsend += "|" + "MIKTAR=" + miktarstr;
            msgsend += "|" + "EMIRTIP=" + emirtipstr;
            msgsend += "|" + "STOP=";
            msgsend += "|" + "SURE=" + surestr;
            msgsend += "|" + "TARIH=" + tarihstr;
            msgsend += "|" + "SARTSEMBOL=" + sartsembol;
            msgsend += "|" + "SARTTIP=" + sarttip;
            msgsend += "|" + "SARTFIYAT=" + sartfiyat;
            msgsend += "|" + "AKSAMSEANS=" + aksamseansstr;

            // emir gönder
            SendRequest("X" + SEP1 + "REQ_TRD_VIOP_EMIRIYILESTIR" + SEP1 + Username + SEP1 + SessionId + SEP1 + HesapKurum + SEP1 + HesapNo + SEP1 + HesapAltHesap + SEP1 + HesapParola + SEP1 + msgsend);
            HidePopups();

        }

        function OnClick_DivDagilimYon(el) {
            if (el.id == "DivDagilimYonA" || el.id == "DivDglListYonA")
                ActiveDagilimYonString = "Alanlar";
            if (el.id == "DivDagilimYonS" || el.id == "DivDglListYonS")
                ActiveDagilimYonString = "Satanlar";
            if (el.id == "DivDagilimYonT" || el.id == "DivDglListYonT")
                ActiveDagilimYonString = "Toplam";

            if (el.id == "DivPiteYonA" || el.id == "DivPiteYonA")
                ActivePiteYonString = "Alanlar";
            if (el.id == "DivPiteYonS" || el.id == "DivPiteYonS")
                ActivePiteYonString = "Satanlar";
            if (el.id == "DivPiteYonT" || el.id == "DivPiteYonT")
                ActivePiteYonString = "Toplam";

            ActivateWindow();
        }

        function OnClick_DivKurumIslemYon(el) {
            if (el.id == "DivKurumIslemYonA2" || el.id == "DivKurumIslemYonA")
                ActiveKurumIslemYonString = "Alınan";
            if (el.id == "DivKurumIslemYonS2" || el.id == "DivKurumIslemYonS")
                ActiveKurumIslemYonString = "Satılan";
            ActivateWindow();
        }

        function OnClick_DivKurumIslemPITEYon(el) {
            if (el.id == "DivKurumIslemPITEYonA2" || el.id == "DivKurumIslemPITEYonA")
                ActiveKurumIslemYonString = "Alınan";
            if (el.id == "DivKurumIslemPITEYonS2" || el.id == "DivKurumIslemPITEYonS")
                ActiveKurumIslemYonString = "Satılan";
            ActivateWindow();
        }
        function OnClick_DivHacimListeYon(el) {
            if (el.id == "DivHacimListeYonA")
                ActiveHacimListeYonString = "Alanlar";
            if (el.id == "DivHacimListeYonS")
                ActiveHacimListeYonString = "Satanlar";
            if (el.id == "DivHacimListeYonT")
                ActiveHacimListeYonString = "Toplam";

            ActivateWindow();
        }

        function OnClick_DivDetayChartToolbar(colno) {
            HidePopups();

            // period list
            if (colno == 0) {
                GetEl("DivDetayChartPeriod").style.display = "inline-block";
                BringToFront(GetEl("DivDetayChartPeriod"));
                PaintMenuColor(ActiveChartPeriodElement);
                return;
            }

            // chart menu
            if (colno == 1) {
                GetEl("DivDetayChartMenu").style.display = "inline-block";
                BringToFront(GetEl("DivDetayChartMenu"));
                CheckElement("DivDetayChartMenuValues1", ChartValuesVisible, "silver", "yellow");
                CheckElement("DivDetayChartMenuColors1", ChartDoubleColoring, "silver", "yellow");
                CheckElement("DivDetayChartMenuLevel1", ChartCaptureLevel, "silver", "yellow");
                CheckElement("DivDetayChartMenuBuySell1", ChartBuySellVisible, "silver", "yellow");
                CheckElement("DivDetayChartMenuOHLC1", ChartBarType == 0, "silver", "yellow");
                CheckElement("DivDetayChartMenuCandle1", ChartBarType == 1, "silver", "yellow");
                CheckElement("DivDetayChartMenuLine1", ChartBarType == 2, "silver", "yellow");
                CheckElement("DivDetayChartMenuTrend1", TrendType == 0, "silver", "yellow");
                CheckElement("DivDetayChartMenuFibo1", TrendType == 1, "silver", "yellow");
                return;
            }

            // indicator list
            if (colno == 2) {
                GetEl("DivIndicator").style.display = "inline-block";
                BringToFront(GetEl("DivIndicator"));
                PaintMenuColor(ActiveIndicatorElement);
                return;
            }

            // parametre
            if (colno == 3) {
                var elparam;
                switch (ActiveIndicatorElement.id) {
                    case "DivIndicatorNONE":
                        return;

                    case "DivIndicatorADX":
                        {
                            elparam = GetEl("DivParamADX");
                            GetEl("TextParamADXParam1").value = IndParam1;
                            GetEl("TextParamADXParam2").value = IndParam2;
                            FillCombo("SelectParamADXParam3", AvrTypes, IndParam3);
                            break;
                        }
                    case "DivIndicatorATR":
                        {
                            elparam = GetEl("DivParamATR");
                            GetEl("TextParamATRParam1").value = IndParam1;
                            GetEl("TextParamATRParam2").value = IndParam2;
                            FillCombo("SelectParamATRParam3", AvrTypes, IndParam3);
                            break;
                        }
                    case "DivIndicatorBOL":
                        {
                            elparam = GetEl("DivParamBOL");
                            GetEl("TextParamBOLParam1").value = IndParam1;
                            GetEl("TextParamBOLParam2").value = IndParam2;
                            FillCombo("SelectParamBOLParam3", AvrTypes, IndParam3);
                            GetEl("DivColorParamBOL1").style.backgroundColor = IndColors[0];
                            GetEl("DivColorParamBOL1").style.color = IndColors[0];
                            GetEl("DivColorParamBOL2").style.backgroundColor = IndColors[1];
                            GetEl("DivColorParamBOL2").style.color = IndColors[1];
                            GetEl("DivColorParamBOL3").style.backgroundColor = IndColors[2];
                            GetEl("DivColorParamBOL3").style.color = IndColors[2];
                            break;
                        }
                    case "DivIndicatorFBANDS":
                        {
                            elparam = GetEl("DivParamFBANDS");
                            GetEl("TextParamFBANDSParam1").value = IndParam1;
                            break;
                        }
                    case "DivIndicatorALGTR":
                        {
                            elparam = GetEl("DivParamALGTR");
                            GetEl("DivColorParamALGTR1").style.backgroundColor = IndColors[0];
                            GetEl("DivColorParamALGTR1").style.color = IndColors[0];
                            GetEl("DivColorParamALGTR2").style.backgroundColor = IndColors[1];
                            GetEl("DivColorParamALGTR2").style.color = IndColors[1];
                            GetEl("DivColorParamALGTR3").style.backgroundColor = IndColors[2];
                            GetEl("DivColorParamALGTR3").style.color = IndColors[2];
                            break;
                        }
                    case "DivIndicatorEHLRS":
                        {
                            elparam = GetEl("DivParamEHLRS");
                            GetEl("DivColorParamEHLRS1").style.backgroundColor = IndColors[0];
                            GetEl("DivColorParamEHLRS1").style.color = IndColors[0];
                            break;
                        }
                    case "DivIndicatorENV":
                        {
                            elparam = GetEl("DivParamENV");
                            GetEl("TextParamENVParam1").value = IndParam1;
                            GetEl("TextParamENVParam2").value = IndParam2;
                            FillCombo("SelectParamENVParam3", AvrTypes, IndParam3);
                            break;
                        }
                    case "DivIndicatorEWO":
                        {
                            elparam = GetEl("DivParamEWO");
                            GetEl("TextParamEWOParam1").value = IndParam1;
                            GetEl("TextParamEWOParam2").value = IndParam2;
                            FillCombo("SelectParamEWOParam3", AvrTypes, IndParam3);
                            GetEl("TextParamEWOParam4").value = IndParam4;
                            break;
                        }
                    case "DivIndicatorDI":
                        {
                            elparam = GetEl("DivParamDI");
                            GetEl("TextParamDIParam1").value = IndParam1;
                            break;
                        }
                    case "DivIndicatorAROON":
                        {
                            elparam = GetEl("DivParamAROON");
                            GetEl("TextParamAROONParam1").value = IndParam1;
                            break;
                        }
                    case "DivIndicatorKAIRI":
                        {
                            elparam = GetEl("DivParamKAIRI");
                            GetEl("TextParamKAIRIParam1").value = IndParam1;
                            GetEl("TextParamKAIRIParam2").value = IndParam2;
                            FillCombo("SelectParamKAIRIParam3", AvrTypes, IndParam3);
                            break;
                        }
                    case "DivIndicatorMA":
                        {
                            elparam = GetEl("DivParamMA");
                            GetEl("TextParamMAParam1").value = IndParam1;
                            FillCombo("SelectParamMAParam1", AvrTypes, IndParam2);
                            GetEl("DivColorParamMAParam1").style.backgroundColor = IndColors[0];
                            GetEl("DivColorParamMAParam1").style.color = IndColors[0];
                            GetEl("TextParamMAParam2").value = IndParam3;
                            FillCombo("SelectParamMAParam2", AvrTypes, IndParam4);
                            GetEl("DivColorParamMAParam2").style.backgroundColor = IndColors[1];
                            GetEl("DivColorParamMAParam2").style.color = IndColors[1];
                            GetEl("TextParamMAParam3").value = IndParam5;
                            FillCombo("SelectParamMAParam3", AvrTypes, IndParam6);
                            GetEl("DivColorParamMAParam3").style.backgroundColor = IndColors[2];
                            GetEl("DivColorParamMAParam3").style.color = IndColors[2];
                            break;
                        }
                    case "DivIndicatorMACD":
                        {
                            elparam = GetEl("DivParamMACD");
                            GetEl("TextParamMACDParam1").value = IndParam1;
                            GetEl("TextParamMACDParam2").value = IndParam2;
                            FillCombo("SelectParamMACDParam3", AvrTypes, IndParam3);
                            GetEl("TextParamMACDParam4").value = IndParam4;
                            break;
                        }
                    case "DivIndicatorMFI":
                        {
                            elparam = GetEl("DivParamMFI");
                            GetEl("TextParamMFIParam1").value = IndParam1;
                            GetEl("TextParamMFIParam2").value = IndParam2;
                            FillCombo("SelectParamMFIParam3", AvrTypes, IndParam3);
                            break;
                        }
                    case "DivIndicatorMOM":
                        {
                            elparam = GetEl("DivParamMOM");
                            GetEl("TextParamMOMParam1").value = IndParam1;
                            GetEl("TextParamMOMParam2").value = IndParam2;
                            FillCombo("SelectParamMOMParam3", AvrTypes, IndParam3);
                            break;
                        }
                    case "DivIndicatorPAR":
                        {
                            elparam = GetEl("DivParamPAR");
                            GetEl("TextParamPARParam1").value = IndParam1;
                            GetEl("TextParamPARParam2").value = IndParam2;
                            GetEl("DivColorParamPAR1").style.backgroundColor = IndColors[0];
                            GetEl("DivColorParamPAR1").style.color = IndColors[0];
                            break;
                        }
                    case "DivIndicatorPVTG":
                        {
                            elparam = GetEl("DivParamPVTG");
                            GetEl("DivColorParamPVTGParam1").style.backgroundColor = IndColors[0];
                            GetEl("DivColorParamPVTGParam1").style.color = IndColors[0];
                            GetEl("DivColorParamPVTGParam2").style.backgroundColor = IndColors[1];
                            GetEl("DivColorParamPVTGParam2").style.color = IndColors[1];
                            GetEl("DivColorParamPVTGParam3").style.backgroundColor = IndColors[2];
                            GetEl("DivColorParamPVTGParam3").style.color = IndColors[2];
                            break;
                        }
                    case "DivIndicatorPVTH":
                        {
                            elparam = GetEl("DivParamPVTH");
                            GetEl("DivColorParamPVTHParam1").style.backgroundColor = IndColors[0];
                            GetEl("DivColorParamPVTHParam1").style.color = IndColors[0];
                            GetEl("DivColorParamPVTHParam2").style.backgroundColor = IndColors[1];
                            GetEl("DivColorParamPVTHParam2").style.color = IndColors[1];
                            GetEl("DivColorParamPVTHParam3").style.backgroundColor = IndColors[2];
                            GetEl("DivColorParamPVTHParam3").style.color = IndColors[2];
                            break;
                        }
                    case "DivIndicatorRSI":
                        {
                            elparam = GetEl("DivParamRSI");
                            GetEl("TextParamRSIParam1").value = IndParam1;
                            GetEl("TextParamRSIParam2").value = IndParam2;
                            FillCombo("SelectParamRSIParam3", AvrTypes, IndParam3);
                            break;
                        }
                    case "DivIndicatorWILLR":
                        {
                            elparam = GetEl("DivParamWILLR");
                            GetEl("TextParamWILLRParam1").value = IndParam1;
                            GetEl("TextParamWILLRParam2").value = IndParam2;
                            FillCombo("SelectParamWILLRParam3", AvrTypes, IndParam3);
                            break;
                        }
                    case "DivIndicatorCCI":
                        {
                            elparam = GetEl("DivParamCCI");
                            GetEl("TextParamCCIParam1").value = IndParam1;
                            GetEl("TextParamCCIParam2").value = IndParam2;
                            FillCombo("SelectParamCCIParam3", AvrTypes, IndParam3);
                            break;
                        }
                    case "DivIndicatorPRCH":
                        {
                            elparam = GetEl("DivParamPRCH");
                            GetEl("TextParamPRCHParam1").value = IndParam1;
                            break;
                        }
                    case "DivIndicatorQQE":
                        {
                            elparam = GetEl("DivParamQQE");
                            GetEl("TextParamQQEParam1").value = IndParam1;
                            GetEl("TextParamQQEParam2").value = IndParam2;
                            break;
                        }
                    case "DivIndicatorSTO":
                        {
                            elparam = GetEl("DivParamSTO");
                            GetEl("TextParamSTOParam1").value = IndParam1;
                            GetEl("TextParamSTOParam2").value = IndParam2;
                            FillCombo("SelectParamSTOParam3", AvrTypes, IndParam3);
                            GetEl("TextParamSTOParam4").value = IndParam4;
                            break;
                        }
                    case "DivIndicatorTKE":
                        {
                            elparam = GetEl("DivParamTKE");
                            GetEl("TextParamTKEParam1").value = IndParam1;
                            FillCombo("SelectParamTKEParam2", AvrTypes, IndParam3);
                            break;
                        }
                    case "DivIndicatorTOMA":
                        {
                            elparam = GetEl("DivParamTOMA");
                            GetEl("TextParamTOMAParam1").value = IndParam1;
                            GetEl("TextParamTOMAParam2").value = IndParam2;
                            GetEl("DivColorParamTOMA1").style.backgroundColor = IndColors[0];
                            GetEl("DivColorParamTOMA1").style.color = IndColors[0];
                            GetEl("DivColorParamTOMA2").style.backgroundColor = IndColors[1];
                            GetEl("DivColorParamTOMA2").style.color = IndColors[1];

                            break;
                        }
                    case "DivIndicatorVHF":
                        {
                            elparam = GetEl("DivParamVHF");
                            GetEl("TextParamVHFParam1").value = IndParam1;
                            GetEl("TextParamVHFParam2").value = IndParam2;
                            FillCombo("SelectParamVHFParam3", AvrTypes, IndParam3);
                            break;
                        }
                    case "DivIndicatorVOL":
                        {
                            elparam = GetEl("DivParamVOL");
                            GetEl("TextParamVOLParam1").value = IndParam1;
                            FillCombo("SelectParamVOLParam2", AvrTypes, IndParam3);
                            break;
                        }


                }
                elparam.style.display = "inline-block";
                BringToFront(elparam);
                return;
            }

            if (colno == 4) // left
                ChartCurrentBarNo = ChartCurrentBarNo - 1;
            else if (colno == 5) // right
                ChartCurrentBarNo = ChartCurrentBarNo + 1;
            else if (colno == 6) // compress
                ChartBarSpace = ChartBarSpace * 2;
            else if (colno == 7) // expand
                ChartBarSpace = ChartBarSpace / 2;

            if (ChartCurrentBarNo > ChartBarCount) ChartCurrentBarNo = ChartBarCount;
            if (ChartBarSpace < 1) ChartBarSpace = 1;

            DrawChart();
        }

        function OnClick_DivTechToolbar(colno) {
            HidePopups();

            if (colno == 1) // period
            {
                GetEl("DivDetayChartPeriod").style.display = "inline-block";
                BringToFront(GetEl("DivDetayChartPeriod"));
                PaintMenuColor(ActiveChartPeriodElement);
                GetEl("DivDetayChartPeriod").style.top = GetEl("DivTechToolbar").offsetHeight + 5 + "px";
                GetEl("DivDetayChartPeriod").style.left = GetEl("TableTechToolbar").rows[0].cells[1].offsetLeft + "px";
                GetEl("DivDetayChartPeriod").style.width = "50%";

            }
            else if (colno == 2) // menu
            {
                GetEl("DivDetayChartMenu").style.display = "inline-block";
                BringToFront(GetEl("DivDetayChartMenu"));
                CheckElement("DivDetayChartMenuValues1", ChartValuesVisible, "silver", "yellow");
                CheckElement("DivDetayChartMenuColors1", ChartDoubleColoring, "silver", "yellow");
                CheckElement("DivDetayChartMenuLevel1", ChartCaptureLevel, "silver", "yellow");
                CheckElement("DivDetayChartMenuBuySell1", ChartBuySellVisible, "silver", "yellow");
                CheckElement("DivDetayChartMenuOHLC1", ChartBarType == 0, "silver", "yellow");
                CheckElement("DivDetayChartMenuCandle1", ChartBarType == 1, "silver", "yellow");
                CheckElement("DivDetayChartMenuLine1", ChartBarType == 2, "silver", "yellow");
                CheckElement("DivDetayChartMenuTrend1", TrendType == 0, "silver", "yellow");
                CheckElement("DivDetayChartMenuFibo1", TrendType == 1, "silver", "yellow");
                GetEl("DivDetayChartMenu").style.top = GetEl("DivTechToolbar").offsetHeight + 5 + "px";
                GetEl("DivDetayChartMenu").style.width = "70%";
                GetEl("DivDetayChartMenu").style.left = "20%";//GetEl("TableTechToolbar").rows[0].cells[2].offsetLeft+"px";
            }
            else if (colno == 3) // indicator
            {
                GetEl("DivIndicator").style.display = "inline-block";
                BringToFront(GetEl("DivIndicator"));
                PaintMenuColor(ActiveIndicatorElement);
                GetEl("DivIndicator").style.top = GetEl("DivTechToolbar").offsetHeight + 2 + "px";
                GetEl("DivIndicator").style.width = "60%";
                GetEl("DivIndicator").style.left = "25%";


            }
            else if (colno == 4) // left
                ChartCurrentBarNo = ChartCurrentBarNo - 1;
            else if (colno == 5) // right
                ChartCurrentBarNo = ChartCurrentBarNo + 1;
            else if (colno == 6) // compress
                ChartBarSpace = ChartBarSpace * 2;
            else if (colno == 7) // expand
                ChartBarSpace = ChartBarSpace / 2;

            if (ChartCurrentBarNo > ChartBarCount) ChartCurrentBarNo = ChartBarCount;
            if (ChartBarSpace < 1) ChartBarSpace = 1;

            DrawChart();
        }

        function OnClick_DivDosyaMenu(el) {
            if (el.id == "DivDosyaMenuZoom100") {
                GetEl("ImgMesajDosya").style.width = "100%";
                GetEl("ImgMesajDosya").style.height = "100%";
                GetEl("DivDosyaMenu").style.display = "none";
            }
            else if (el.id == "DivDosyaMenuZoom125") {
                GetEl("ImgMesajDosya").style.width = "200%";
                GetEl("ImgMesajDosya").style.height = "200%";
                GetEl("DivDosyaMenu").style.display = "none";
            }
            else if (el.id == "DivDosyaMenuZoom150") {
                GetEl("ImgMesajDosya").style.width = "300%";
                GetEl("ImgMesajDosya").style.height = "300%";
                GetEl("DivDosyaMenu").style.display = "none";
            }
            else if (el.id == "DivDosyaMenuKapat") {
                GetEl("DivDosyaMenu").style.display = "none";
                GetEl("DivMesajDosya").style.display = "none";
            }
        }

        function OnClick_DivDetayChartMenu(el) {
            if (el.id == "DivDetayChartMenuValues1" || el.id == "DivDetayChartMenuValues2")
                ChartValuesVisible = !ChartValuesVisible;
            else if (el.id == "DivDetayChartMenuColors1" || el.id == "DivDetayChartMenuColors2")
                ChartDoubleColoring = !ChartDoubleColoring;
            else if (el.id == "DivDetayChartMenuBuySell1" || el.id == "DivDetayChartMenuBuySell2") {
                ChartBuySellVisible = !ChartBuySellVisible;
                ShowChartBuysell(ChartBuySellVisible);
            }
            else if (el.id == "DivDetayChartMenuLevel1" || el.id == "DivDetayChartMenuLevel2")
                ChartCaptureLevel = !ChartCaptureLevel;
            else if (el.id == "DivDetayChartMenuOHLC1" || el.id == "DivDetayChartMenuOHLC2")
                ChartBarType = 0;
            else if (el.id == "DivDetayChartMenuCandle1" || el.id == "DivDetayChartMenuCandle2")
                ChartBarType = 1;
            else if (el.id == "DivDetayChartMenuLine1" || el.id == "DivDetayChartMenuLine2")
                ChartBarType = 2;
            else if (el.id == "DivDetayChartMenuTrend1" || el.id == "DivDetayChartMenuTrend2")
                TrendType = 0;
            else if (el.id == "DivDetayChartMenuFibo1" || el.id == "DivDetayChartMenuFibo2")
                TrendType = 1;
            else if (el.id == "DivDetayChartMenuTrendStart") {
                TrendAvailable = false;
                TrendSymbol = DetaySymbol;
                TrendPeriod = ActiveChartPeriodElement.innerHTML;
                TrendStartDateStr = "";
                TrendStartPrice = 0;
                if (ChartCurrentBarNo >= Bars.length) return;
                if (ChartLevelPoint <= 0) return;
                TrendStartDateStr = Bars[ChartCurrentBarNo].DateTime;
                TrendStartPrice = ChartMaxPrice - (ChartLevelPoint - ChartTopMargin) * (ChartMaxPrice - ChartMinPrice) / (ChartHeight - ChartTopMargin);
                localStorage.removeItem("TREND" + "|" + TrendSymbol + "|" + TrendPeriod);
            }
            else if (el.id == "DivDetayChartMenuTrend2Start") {
                Trend2Available = false;
                TrendSymbol = DetaySymbol;
                TrendPeriod = ActiveChartPeriodElement.innerHTML;
                Trend2StartDateStr = "";
                Trend2StartPrice = 0;
                if (ChartCurrentBarNo >= Bars.length) return;
                if (ChartLevelPoint <= 0) return;
                Trend2StartDateStr = Bars[ChartCurrentBarNo].DateTime;
                Trend2StartPrice = ChartMaxPrice - (ChartLevelPoint - ChartTopMargin) * (ChartMaxPrice - ChartMinPrice) / (ChartHeight - ChartTopMargin);
                localStorage.removeItem("TREND2" + "|" + TrendSymbol + "|" + TrendPeriod);
            }
            else if (el.id == "DivDetayChartMenuYatayStart") {
                YatayAvailable = false;
                TrendSymbol = DetaySymbol;
                TrendPeriod = ActiveChartPeriodElement.innerHTML;
                YatayStartDateStr = "";
                YatayStartPrice = 0;
                if (ChartCurrentBarNo >= Bars.length) return;
                if (ChartLevelPoint <= 0) return;
                YatayChartLevelPoint = ChartLevelPoint;
                YatayStartDateStr = Bars[ChartCurrentBarNo].DateTime;
                YatayStartPrice = ChartMaxPrice - (ChartLevelPoint - ChartTopMargin) * (ChartMaxPrice - ChartMinPrice) / (ChartHeight - ChartTopMargin);
                localStorage.removeItem("YATAY" + "|" + TrendSymbol + "|" + TrendPeriod);
            }
            else if (el.id == "DivDetayChartMenuTrendEnd") {
                TrendEndDateStr = "";
                TrendEndPrice = 0;
                if (TrendStartDateStr == "") return;
                if (ChartCurrentBarNo >= Bars.length) return;
                if (ChartLevelPoint <= 0) return;
                if (TrendSymbol != DetaySymbol) return;
                if (TrendPeriod != ActiveChartPeriodElement.innerHTML) return;
                TrendEndDateStr = Bars[ChartCurrentBarNo].DateTime;
                if (TrendEndDateStr <= TrendStartDateStr) return;
                TrendEndPrice = ChartMaxPrice - (ChartLevelPoint - ChartTopMargin) * (ChartMaxPrice - ChartMinPrice) / (ChartHeight - ChartTopMargin);
                TrendAvailable = true;
                localStorage.removeItem("TREND" + "|" + TrendSymbol + "|" + TrendPeriod);
                localStorage["TREND" + "|" + TrendSymbol + "|" + TrendPeriod] = TrendType + "|" + TrendStartDateStr + "|" + TrendStartPrice + "|" + TrendEndDateStr + "|" + TrendEndPrice;
            }
            else if (el.id == "DivDetayChartMenuTrend2End") {
                Trend2EndDateStr = "";
                Trend2EndPrice = 0;
                if (Trend2StartDateStr == "") return;
                if (ChartCurrentBarNo >= Bars.length) return;
                if (ChartLevelPoint <= 0) return;
                if (TrendSymbol != DetaySymbol) return;
                if (TrendPeriod != ActiveChartPeriodElement.innerHTML) return;
                Trend2EndDateStr = Bars[ChartCurrentBarNo].DateTime;
                if (Trend2EndDateStr <= Trend2StartDateStr) return;
                Trend2EndPrice = ChartMaxPrice - (ChartLevelPoint - ChartTopMargin) * (ChartMaxPrice - ChartMinPrice) / (ChartHeight - ChartTopMargin);
                Trend2Available = true;
                localStorage.removeItem("TREND2" + "|" + TrendSymbol + "|" + TrendPeriod);
                localStorage["TREND2" + "|" + TrendSymbol + "|" + TrendPeriod] = TrendType + "|" + Trend2StartDateStr + "|" + Trend2StartPrice + "|" + Trend2EndDateStr + "|" + Trend2EndPrice;
            }
            else if (el.id == "DivDetayChartMenuYatayEnd") {
                YatayEndDateStr = "";
                YatayEndPrice = 0;
                if (YatayStartDateStr == "") return;
                if (YatayChartLevelPoint <= 0) return;
                if (TrendSymbol != DetaySymbol) return;
                if (TrendPeriod != ActiveChartPeriodElement.innerHTML) return;
                YatayEndDateStr = Bars[Bars.length - 1].DateTime;
                YatayStartDateStr = Bars[0].DateTime;
                if (YatayEndDateStr <= YatayStartDateStr) return;
                YatayEndPrice = ChartMaxPrice - (YatayChartLevelPoint - ChartTopMargin) * (ChartMaxPrice - ChartMinPrice) / (ChartHeight - ChartTopMargin);
                YatayAvailable = true;
                localStorage.removeItem("YATAY" + "|" + TrendSymbol + "|" + TrendPeriod);
                localStorage["YATAY" + "|" + TrendSymbol + "|" + TrendPeriod] = TrendType + "|" + YatayStartDateStr + "|" + YatayStartPrice + "|" + YatayEndDateStr + "|" + YatayEndPrice;
            }
            else if (el.id == "DivDetayChartMenuTrendDelete") {
                TrendAvailable = false;
                TrendStartDateStr = "";
                TrendEndDateStr = "";
                localStorage.removeItem("TREND" + "|" + TrendSymbol + "|" + TrendPeriod);
            }
            else if (el.id == "DivDetayChartMenuTrend2Delete") {
                Trend2Available = false;
                Trend2StartDateStr = "";
                Trend2EndDateStr = "";
                localStorage.removeItem("TREND2" + "|" + TrendSymbol + "|" + TrendPeriod);
            }
            else if (el.id == "DivDetayChartMenuYatayDelete") {
                YatayAvailable = false;
                YatayStartDateStr = "";
                YatayEndDateStr = "";
                localStorage.removeItem("YATAY" + "|" + TrendSymbol + "|" + TrendPeriod);
            }

            localStorage.removeItem("ChartValuesVisible");
            localStorage.removeItem("ChartDoubleColoring");
            localStorage.removeItem("ChartCaptureLevel");
            localStorage.removeItem("ChartBarType");
            localStorage.removeItem("ChartTrendType");
            localStorage.removeItem("ChartBuySellVisible");

            localStorage["ChartValuesVisible"] = BoolToStr(ChartValuesVisible);
            localStorage["ChartDoubleColoring"] = BoolToStr(ChartDoubleColoring);
            localStorage["ChartCaptureLevel"] = BoolToStr(ChartCaptureLevel);
            localStorage["ChartBarType"] = ChartBarType;
            localStorage["ChartTrendType"] = TrendType;
            localStorage["ChartBuySellVisible"] = BoolToStr(ChartBuySellVisible);

            //DrawChart();
            ActivateWindow();


        }

        function OnClick_DivDetayChartPeriod(el) {
            ActiveChartPeriodElement = el;
            if (GetEl("DivTech").style.display != "none")
                RequestTech();
            ActivateWindow();
        }

        function OnClick_DivFooter(colno) {
            footermenuclick = true;
            HidePopups();
            footermenuclick = false;
            //// portfoy
            if (colno == 6) {
                var uyariokundu = localStorage["UYARIOKUNDU"];
                if (uyariokundu == undefined)
                    PortfoyUyariOkundu = "0";
                else
                    PortfoyUyariOkundu = "1";

                if (PortfoyUyariOkundu == "0") {
                    DisplayPortfoyUyariWindow();
                    return;
                }
            }

            // diğer
            if (colno == 3) {
                if (GetEl("DivMenu").style.display == "inline-block") {
                    GetEl("DivMenu").style.display = "none";
                }
                else {
                    GetEl("DivMenu").style.display = "inline-block";
                    BringToFront(GetEl("DivMenu"));
                }
                return;
            }

            if (colno == 5) {

                // if (Username == "_8" || Username == "_7" || Username == "_5" || Username == "_mert" || Username == "yunus@fintables.com" || Username == "ekrembuyukkaya")


            }

            ActiveFooterNo = colno;
            switch (colno) {
                case 0: ActivePageElement = GetEl("DivWatchlist"); break;
                case 1: ActivePageElement = GetEl("DivDetay"); break;
                case 2: ActivePageElement = GetEl("DivAnaliz"); break;
                case 4: ActivePageElement = GetEl("DivHaber"); break;
                case 5: ActivePageElement = GetEl("DivTemelAnaliz"); break;
                case 6: ActivePageElement = GetEl("DivPortfoy"); break;
            }
            ActivateWindow();

            // portfoy
            if (colno == 6) {
                if (HesapLogin == "0")
                    DisplayHesapLogin();
            }

        }

        function OnClick_DivHesapLoginOl() {

            if (GetEl("HesapLoginOl").innerHTML == "Bekleyiniz")
                return;
            HesapKurum = "";
            var selectedindex = GetEl("HesapLoginSelectKurum").selectedIndex;
            if (selectedindex != -1)
                HesapKurum = GetEl("HesapLoginSelectKurum").options[selectedindex].text;

            if (HesapKurum == "ANADOLU YATIRIM") {
                HesapMusteriTip = "";
                var selectedindexMusteriTip = GetEl("HesapLoginSelectMusteriTip").selectedIndex;
                if (selectedindexMusteriTip != -1) {
                    if (GetEl("HesapLoginSelectMusteriTip").options[selectedindexMusteriTip].text == "Bireysel")
                        HesapMusteriTip = "B";
                    else if (GetEl("HesapLoginSelectMusteriTip").options[selectedindexMusteriTip].text == "Kurumsal")
                        HesapMusteriTip = "K";
                }
            }
            HesapParola = GetEl("HesapLoginTextParola").value;
            HesapSifre = GetEl("HesapLoginTextSifre").value;
            HesapNo = GetEl("HesapLoginTextHesapNo").value;
            var checkstr = "0";
            if (GetEl("HesapLoginCheckRemember").checked)
                checkstr = "1";


            if (HesapSifre == "") {
                ShowAlertWindow("Uyarı", "Şifre giriniz (!)");
                return;
            }
            SaveTradeLoginKey();

            if (HesapLogin == "0") {
                if (HesapKurum == "HALK YATIRIM" || HesapKurum == "ANADOLU YATIRIM" || HesapKurum == "TURKISH YATIRIM" || HesapKurum == "BURGAN YATIRIM") {
                    SendRequest("X" + SEP1 + "B" + SEP1 + Username + SEP1 + SessionId);
                    return;
                }


                DisplayPortfoyBool = true;
                if (ParolasizKurumlar.contains(HesapKurum)) HesapParola = "";
                SendRequest("X" + SEP1 + "B" + SEP1 + Username + SEP1 + SessionId);

                GetEl("HesapLoginOl").innerHTML = "Bekleyiniz";
                window.setTimeout(function () { GetEl("HesapLoginOl").innerHTML = "Giriş"; }, 5000);
            }
            else {
                ActiveFooterNo = 5;
                ActivateWindow();
            }
        }
        function OnClick_SmsTalep() {
            if (GetEl("HesapLoginSMSOnay").innerHTML == "Bekleyiniz")
                return;

            HesapSMSSifre = GetEl("TextSMS").value;
            if (HesapSMSSifre == "") {
                ShowAlertWindow("Uyarı", "Şifre giriniz (!)");
                return;
            }
            DisplayPortfoyBool = true;
            F3(1);

            GetEl("HesapLoginSMSOnay").innerHTML = "Bekleyiniz";
            var LoginSMSPressTimeOut = window.setTimeout(function () { GetEl("HesapLoginSMSOnay").innerHTML = "Giriş"; window.clearTimeout(LoginSMSPressTimeOut); }, 10000);

        }
        function Onclick_SembolSliler(updown) {

            var rowno = parseInt(GetEl("DivSliderRow").innerHTML);
            if (rowno == 0 && updown == "up") return;
            var tablewl = GetEl("TableWatchlist");
            var table = GetEl("TableWatchlist");

            var rowno2 = rowno;
            if (updown == "up")
                rowno2--;
            else if (updown == "down")
                rowno2++;

            for (var i = 0; i < table.rows.length; i++) {

                if (updown == "up") {
                    if (i == rowno) {

                        var sembolname1 = table.rows[rowno].cells[0].innerHTML.trim();
                        var sembolname2 = table.rows[rowno2].cells[0].innerHTML.trim();
                        table.rows[rowno2].cells[0].innerHTML = sembolname1;
                        table.rows[rowno].cells[0].innerHTML = sembolname2;
                    }
                }
                if (updown == "down") {
                    if (i == rowno) {

                        var sembolname1 = table.rows[rowno].cells[0].innerHTML.trim();
                        var sembolname2 = table.rows[rowno2].cells[0].innerHTML.trim();
                        table.rows[rowno2].cells[0].innerHTML = sembolname1;
                        table.rows[rowno].cells[0].innerHTML = sembolname2;
                    }
                }

            }

            GetEl("DivSliderRow").innerHTML = rowno2;
            WatchlistActiveRow = rowno2;

            SaveWatchlistSymbols();
            FillWatchlistTable();
            ActivateWindow();
            DisplaySembolSlider(rowno2);
        }
        function OnClick_DivIndicator(el) {
            ActiveIndicatorElement = el;

            IndLineCount = 2;
            IndPanel = 0;
            IndDecimal = -1;
            DrawTypes[0] = 0;
            DrawTypes[1] = 0;
            DrawTypes[2] = 0;

            IndColors[0] = "#40F040";
            IndColors[1] = "#F04040";
            IndColors[2] = "#00F0F0";

            if (ActiveIndicatorElement.id == "DivIndicatorNONE")
                IndLineCount = 0;
            else if (ActiveIndicatorElement.id == "DivIndicatorPAR" || ActiveIndicatorElement.id == "DivIndicatorEHLRS")
                IndLineCount = 1;
            else if (ActiveIndicatorElement.id == "DivIndicatorPVTG")
                IndLineCount = 3;
            else if (ActiveIndicatorElement.id == "DivIndicatorPVTH")
                IndLineCount = 3;
            else if (ActiveIndicatorElement.id == "DivIndicatorPRCH")
                IndLineCount = 2;
            else if (ActiveIndicatorElement.id == "DivIndicatorBOL" || ActiveIndicatorElement.id == "DivIndicatorMA" || ActiveIndicatorElement.id == "DivIndicatorALGTR")
                IndLineCount = 3;
            else if (ActiveIndicatorElement.id == "DivIndicatorFBANDS") {
                IndLineCount = 3;
                IndColors[0] = "#00F0F0";
                IndColors[1] = "#00F0F0";
                IndColors[2] = "#00F0F0";
            }

            switch (ActiveIndicatorElement.id) {
                case "DivIndicatorADX":
                case "DivIndicatorATR":
                case "DivIndicatorEWO":
                case "DivIndicatorMACD":
                case "DivIndicatorMFI":
                case "DivIndicatorMOM":
                case "DivIndicatorKAIRI":
                case "DivIndicatorRSI":
                case "DivIndicatorQQE":
                case "DivIndicatorSTO":
                case "DivIndicatorTKE":
                case "DivIndicatorVHF":
                case "DivIndicatorVOL":
                case "DivIndicatorCCI":
                case "DivIndicatorDI":
                case "DivIndicatorAROON":
                case "DivIndicatorWILLR":
                    IndPanel = 1;
                    break;
            }

            switch (ActiveIndicatorElement.id) {
                case "DivIndicatorADX":
                    IndParam1 = "14";
                    IndParam2 = "9";
                    IndParam3 = "simple";
                    IndDecimal = 2;
                    IndText[0] = "ADX";
                    IndText[1] = "AVR";
                    break;
                case "DivIndicatorALGTR":
                    IndText[0] = "Üst";
                    IndText[1] = "Orta";
                    IndText[2] = "Alt";
                    break;
                case "DivIndicatorATR":
                    IndParam1 = "14";
                    IndParam2 = "9";
                    IndParam3 = "simple";
                    IndDecimal = 2;
                    IndText[0] = "ATR";
                    IndText[1] = "AVR";
                    break;
                case "DivIndicatorBOL":
                    IndParam1 = "20";
                    IndParam2 = "2";
                    IndParam3 = "simple";
                    IndText[0] = "BOL Üst";
                    IndText[1] = "BOL Orta";
                    IndText[2] = "BOL Alt";
                    break;
                case "DivIndicatorENV":
                    IndParam1 = "25";
                    IndParam2 = "5";
                    IndParam3 = "simple";
                    IndText[0] = "ENV Üst";
                    IndText[1] = "ENV Alt";
                    break;
                case "DivIndicatorEWO":
                    IndParam1 = "5";
                    IndParam2 = "34";
                    IndParam3 = "simple";
                    IndParam4 = "10";
                    IndText[0] = "Slow";
                    IndText[1] = "Fast";
                    IndDecimal = 4;
                    break;
                case "DivIndicatorFBANDS":
                    IndParam1 = "1";
                    IndText[0] = "1";
                    IndText[1] = "2";
                    IndText[2] = "3";
                    break;
                case "DivIndicatorDI":
                    IndParam1 = "14";
                    IndText[0] = "DI+";
                    IndText[1] = "DI-";
                    break;
                case "DivIndicatorQQE":
                    IndParam1 = "14";
                    IndParam2 = "5";
                    IndDecimal = 4;
                    IndText[0] = "Slow";
                    IndText[1] = "Fast";
                    break;
                case "DivIndicatorAROON":
                    IndParam1 = "14";
                    IndText[0] = "AROON Up";
                    IndText[1] = "AROON Dn";
                    break;
                case "DivIndicatorKAIRI":
                    IndParam1 = "14";
                    IndParam2 = "9";
                    IndParam3 = "simple";
                    IndDecimal = 2;
                    IndText[0] = "KAIRI";
                    IndText[1] = "AVR";
                    break;
                case "DivIndicatorMA":
                    IndParam1 = "5";
                    IndParam2 = "simple";
                    IndParam3 = "22";
                    IndParam4 = "simple";
                    IndParam5 = "50";
                    IndParam6 = "simple";
                    IndText[0] = "MA " + IndParam1;
                    IndText[1] = "MA " + IndParam3;
                    IndText[2] = "MA " + IndParam5;
                    break;
                case "DivIndicatorMACD":
                    IndParam1 = "12";
                    IndParam2 = "26";
                    IndParam3 = "Exponential";
                    IndParam4 = "9";
                    IndText[0] = "MACD";
                    IndText[1] = "AVR";
                    break;
                case "DivIndicatorMFI":
                    IndParam1 = "14";
                    IndParam2 = "9";
                    IndParam3 = "simple";
                    IndDecimal = 2;
                    IndText[0] = "MFI";
                    IndText[1] = "AVR";
                    break;
                case "DivIndicatorMOM":
                    IndParam1 = "14";
                    IndParam2 = "9";
                    IndParam3 = "simple";
                    IndDecimal = 2;
                    IndText[0] = "MOM";
                    IndText[1] = "AVR";
                    break;
                case "DivIndicatorPAR":
                    IndParam1 = "0.02";
                    IndParam2 = "0.2";
                    IndText[0] = "PAR";
                    DrawTypes[0] = 2;
                    break;
                case "DivIndicatorPVTG":
                    IndText[0] = "G-PH";
                    IndText[1] = "G-PVT";
                    IndText[2] = "G-PL";
                    DrawTypes[0] = 2;
                    DrawTypes[1] = 2;
                    DrawTypes[2] = 2;
                    break;
                case "DivIndicatorPVTH":
                    IndText[0] = "H-PH";
                    IndText[1] = "H-PVT";
                    IndText[2] = "H-PL";
                    DrawTypes[0] = 2;
                    DrawTypes[1] = 2;
                    DrawTypes[2] = 2;
                    break;
                case "DivIndicatorRSI":
                    IndParam1 = "14";
                    IndParam2 = "9";
                    IndParam3 = "simple";
                    IndDecimal = 2;
                    IndText[0] = "RSI";
                    IndText[1] = "AVR";
                    break;
                case "DivIndicatorWILLR":
                    IndParam1 = "14";
                    IndParam2 = "9";
                    IndParam3 = "simple";
                    IndDecimal = 2;
                    IndText[0] = "WILLR";
                    IndText[1] = "AVR";
                    break;
                case "DivIndicatorCCI":
                    IndParam1 = "13";
                    IndParam2 = "8";
                    IndParam3 = "simple";
                    IndDecimal = 2;
                    IndText[0] = "CCI";
                    IndText[1] = "AVR";
                    break;
                case "DivIndicatorPRCH":
                    IndParam1 = "10";
                    IndDecimal = 2;
                    IndText[0] = "Üst";
                    IndText[1] = "Alt";
                    break;
                case "DivIndicatorSTO":
                    IndParam1 = "5";
                    IndParam2 = "3";
                    IndParam3 = "Exponential";
                    IndParam4 = "3";
                    IndDecimal = 4;
                    IndText[0] = "STO";
                    IndText[1] = "AVR";
                    break;
                case "DivIndicatorTKE":
                    IndParam1 = "10";
                    IndParam2 = "simple";
                    IndDecimal = 2;
                    IndText[0] = "TKE";
                    IndText[1] = "AVR";
                    DrawTypes[0] = 0;
                    break;
                case "DivIndicatorTOMA":
                    IndParam1 = "3";
                    IndParam2 = "2";
                    IndText[0] = "TOMA";
                    IndText[1] = "EMA";
                    break;
                case "DivIndicatorEHLRS":
                    IndText[0] = "EHLRS";
                    break;
                case "DivIndicatorVHF":
                    IndParam1 = "14";
                    IndParam2 = "9";
                    IndParam3 = "simple";
                    IndDecimal = 2;
                    IndText[0] = "VHF";
                    IndText[1] = "AVR";
                    break;
                case "DivIndicatorVOL":
                    IndParam1 = "10";
                    IndParam2 = "simple";
                    IndDecimal = 0;
                    IndText[0] = "VOL";
                    IndText[1] = "AVR";
                    DrawTypes[0] = 1;
                    break;

            }

            var paramkey = localStorage[ActiveIndicatorElement.innerHTML];
            if (paramkey != undefined) {
                var paramarray = paramkey.split("|");
                IndParam1 = paramarray[0];
                IndParam2 = paramarray[1];
                IndParam3 = paramarray[2];
                IndParam4 = paramarray[3];
                IndParam5 = paramarray[4];
                IndParam6 = paramarray[5];

                if (ActiveIndicatorElement.id == "DivIndicatorBOL" ||
                    ActiveIndicatorElement.id == "DivIndicatorMA" ||
                    ActiveIndicatorElement.id == "DivIndicatorPAR" ||
                    ActiveIndicatorElement.id == "DivIndicatorPVTG" ||
                    ActiveIndicatorElement.id == "DivIndicatorPVTH" ||
                    ActiveIndicatorElement.id == "DivIndicatorPVTH" ||
                    ActiveIndicatorElement.id == "DivIndicatorEHLRS") {
                    if (paramarray.length == 9) {
                        IndColors[0] = paramarray[6];
                        IndColors[1] = paramarray[7];
                        IndColors[2] = paramarray[8];
                    }
                }
            }

            ActivateWindow();
            if (GetEl("DivTech").style.display != "none")
                RequestTech();
        }

        function OnClick_ChartGoruntu(el) {

            var basicitem = BasicObject[DetaySymbol];
            if (basicitem == undefined) return;

            var indkod = "";
            switch (el.id) {

                case "DivIndicatorBMK1":
                    indkod = "BMK1";
                    break;
                case "DivIndicatorBMK2":
                    indkod = "BMK2";
                    break;
                case "DivIndicatorBMK3":
                    indkod = "BMK3";
                    break;
                case "DivIndicatorBMK4":
                    indkod = "BMK4";
                    break;
                case "DivIndicatorBMK5":
                    indkod = "BMK5";
                    break;
                case "DivIndicatorSistem1":
                    indkod = "Sistem1";
                    break;
                case "DivIndicatorSistem2":
                    indkod = "Sistem2";
                    break;
                case "DivIndicatorFSYSTEM1":
                    indkod = "FSYSTEM1";
                    break;
                case "DivIndicatorFSYSTEM2":
                    indkod = "FSYSTEM2";
                    break;
                case "DivIndicatorFSYSTEM3":
                    indkod = "FSYSTEM3";
                    break;
                case "DivIndicatorFSYSTEM4":
                    indkod = "FSYSTEM4";
                    break;

            }


            SendRequest("X" + SEP1 + "REQ_CHART_GORUNTU" + SEP1 + Username + SEP1 + basicitem.Composite + SEP1 + ActiveChartPeriodElement.innerHTML + SEP1 + "600" + SEP1 + indkod + SEP1 +
                "" + SEP1 + "" + SEP1 + "" + SEP1 + "" + SEP1 + "" + SEP1 + "");

        }

        function OnClick_DivMenu(event) {
            var el = event.target;
            if (el.id == "DivMenu") return;

            if (el.id == "DivMenuLogin") {
                ActiveFooterNo = 3;
                var logindiv = GetEl("DivLogin");
                logindiv.style.visibility = "visible";
                LoginClicked = false;
                BringToFront(logindiv);
                return;
            }

            if (el.id == "DivMenuHelp") {
                ActiveFooterNo = 3;
                GetEl("FrameHelp").src = "http://cep.directfn.com.tr/cepyardim.html";
                GetEl("DivHelp").style.display = "inline-block";
                BringToFront(GetEl("DivHelp"));
                return;
            }

            if (el.id == "DivMenuIletisim") {
                ActiveFooterNo = 3;
                GetEl("FrameIletisim").src = "http://www.directfn.com.tr/iletisimcep.aspx";
                GetEl("DivIletisim").style.display = "inline-block";
                BringToFront(GetEl("DivIletisim"));
                return;
            }

            if (el.id == "DivMenuMesaj") {
                ActiveFooterNo = 3;
                GetEl("DivMesajlar").style.display = "inline-block";
                BringToFront(GetEl("DivMesajlar"));
                return;
            }
            if (el.id == "DivMenuCepSifre") {
                SendRequest("X" + SEP1 + "REQ_CEP_USERNAME" + SEP1 + Username + SEP1 + SessionId);
                return;
            }

            if (el.id == "DivMenuBistTumGorunum")
                ActivePageElement = GetEl("DivBistTumGorunum");
            else if (el.id == "DivMenuKapalicarsi")
                ActivePageElement = GetEl("DivKapalicarsi");
            else if (el.id == "DivMenuSermayeGenel")
                ActivePageElement = GetEl("DivSermayeGenel");
            else if (el.id == "DivMenuTakvim")
                ActivePageElement = GetEl("DivTakvim");
            else if (el.id == "DivMenuKurumTakas")
                ActivePageElement = GetEl("DivKurumTakas");
            else if (el.id == "DivMenuKurumIslem")
                ActivePageElement = GetEl("DivKurumIslem");
            else if (el.id == "DivMenuKurumIslemPITE")
                ActivePageElement = GetEl("DivKurumIslemPITE");
            else if (el.id == "DivMenuSirali")
                ActivePageElement = GetEl("DivSirali");
            else if (el.id == "DivMenuHacimListe")
                ActivePageElement = GetEl("DivHacimListe");
            else if (el.id == "DivMenuAlarm")
                ActivePageElement = GetEl("DivAlarmListesi");

            ActivateWindow();
        }

        function OnClick_DivMesajDosya(ev) {
            if (ev.target.id != "ImgMesajDosya") return;
            var dosyamenu = GetEl("DivDosyaMenu");
            if (dosyamenu.style.display == "none") {
                dosyamenu.style.display = "inline-block";
                dosyamenu.style.visibility = "visible";
                BringToFront(dosyamenu);
            }
            else {
                dosyamenu.style.display = "none";
            }
        }


        function OnClick_DivSymbolEdit(el) // ssss
        {
            try {
                // DivSymbolEditInsert
                if (el.id == "DivSymbolEditInsert") {
                    var table = GetEl("TableWatchlist");
                    if (WatchlistActiveRow >= 0 && WatchlistActiveRow < table.rows.length) {
                        var fontsize = FontSizeBigWL;
                        var colwidth = ["40%", "30%", "30%", "0%", "0%"];
                        var row = table.insertRow(WatchlistActiveRow);
                        //alert(table.rows.length);
                        InsertCell(row, colwidth[0], "L", "", "", "", "");
                        InsertCell(row, colwidth[1], "R", "", "", "", "");
                        InsertCell(row, colwidth[2], "R", "", "", "", "");
                        InsertCell(row, colwidth[3], "R", "", "", "", "");
                        InsertCell(row, colwidth[4], "R", "", "black", "", ".");

                        for (var j = 0; j < row.cells.length; j++) {
                            row.cells[j].style.fontSize = fontsize;
                            //row.cells[j].style.paddingTop="5px";
                            //row.cells[j].style.paddingBottom="5px";
                            row.cells[j].style.padding = "2px";
                            row.cells[j].style.paddingTop = "4px";
                            row.cells[j].style.paddingBottom = "4px";
                        }
                    }

                    //for (var name in WatchlistSymbolObject)
                    //{
                    //    var item = WatchlistSymbolObject[name];
                    //    if (item >= WatchlistActiveRow)
                    //        WatchlistSymbolObject[name] = WatchlistSymbolObject[name] + 1;
                    //}
                    SaveWatchlistSymbols();
                    FillWatchlistTable();
                }

                // DivSymbolEditDelete
                if (el.id == "DivSymbolEditDelete") {
                    var table = GetEl("TableWatchlist");
                    if (WatchlistActiveRow >= 0 && WatchlistActiveRow < table.rows.length)
                        table.rows[WatchlistActiveRow].remove();

                    //delete WatchlistSymbolObject[WatchlistActiveSymbol];
                    //for (var name in WatchlistSymbolObject)
                    //{
                    //    var item = WatchlistSymbolObject[name];
                    //    if (item >= WatchlistActiveRow)
                    //        WatchlistSymbolObject[name] = WatchlistSymbolObject[name] - 1;
                    //}
                    SaveWatchlistSymbols();
                    FillWatchlistTable();
                }
                HidePopups();
            }
            catch (e) { alert(e); }
            //catch{}
        }


        function OnClick_DivNewsText() {
            var el = GetEl("DivNewsContent");
            el.style.display = "none";
        }

        function OnClick_DivPortfoyEmirDuzelt()  //Ssedat
        {



            if (EmirSilRowNo < 0) return;
            var table = GetEl("TablePortfoyData");

            if (ActivePortfoyToolbarNo == 1)  // BIST
            {
                var symbolstr = table.rows[EmirSilRowNo].cells[0].innerHTML;



                var yon = table.rows[EmirSilRowNo].cells[1].innerHTML;
                var yonstr = (yon == "A") ? "Alış" : "Satış";
                var miktarstr = table.rows[EmirSilRowNo].cells[2].innerHTML;
                var fiyatstr = table.rows[EmirSilRowNo].cells[3].innerHTML;
                var emirnostr = table.rows[EmirSilRowNo].cells[5].innerHTML;
                var emirrefstr = table.rows[EmirSilRowNo].cells[7].innerHTML;
                var ordertypestr = ToEngUp(table.rows[EmirSilRowNo].cells[8].innerHTML);
                var zinciremirbool = ToEngUp(table.rows[EmirSilRowNo].cells[11].innerHTML);


                if (HesapKurum == "TURKISH YATIRIM" && zinciremirbool == "1" && ViopBackOffice == "INFINA") {
                    ShowAlertWindow("Uyarı", "Zincir emir iyileştirilemiyor.");
                    return;
                }

                BuySellDerinlik = "IMKBH";
                DetaySymbol = symbolstr;
                BuySellDerinlikTemizle();

                var onaystr = "Hisse = " + symbolstr + "<br>";
                onaystr += "İşlem = " + yonstr + "<br>";
                onaystr += "Miktar = " + miktarstr + "<br>";
                onaystr += "Fiyat = " + fiyatstr + "<br>";
                onaystr += "Emir No = " + emirrefstr + "<br>";

                GetEl("TableBistEmirDuzeltFiyat").style.display = "none";
                GetEl("DivBistEmirDuzelt").style.display = "inline-block";
                BringToFront(GetEl("DivBistEmirDuzelt"));
                GetEl("DivBistEmirDuzeltDesc").innerHTML = onaystr;
                if (yon == "A")
                    GetEl("DivBistEmirDuzeltDesc").style.color = "#6F6";
                else
                    GetEl("DivBistEmirDuzeltDesc").style.color = "#F66";
                GetEl("TextBistEmirDuzeltYeniFiyat").value = fiyatstr;
                GetEl("TextBistEmirDuzeltYeniMiktar").value = miktarstr;

                GetEl("LabelBistEmirDuzeltYeniMiktar").style.display = "inline-block";
                GetEl("TextBistEmirDuzeltYeniMiktar").style.display = "inline-block";



                var fiyattable = GetEl("TableBistEmirDuzeltFiyat");
                ClearTable("TableBistEmirDuzeltFiyat");

                // find symbol
                var symbol = symbolstr;
                var laststr = GetEl("TablePortfoyData").rows[EmirSilRowNo].cells[3].innerHTML;
                var basic = BasicObject[symbol];
                if (basic == undefined) return;

                GetEl("TextBistEmirDuzeltYeniFiyat").min = basic.LimitDown;
                GetEl("TextBistEmirDuzeltYeniFiyat").max = basic.LimitUp;
                GetEl("TextBistEmirDuzeltYeniFiyat").step = 0.01;

                var pricearray = GetBistPriceSteps(basic);
                for (var i = 0; i < pricearray.length; i++) {
                    var rowcount = fiyattable.rows.length;
                    var row = fiyattable.insertRow(rowcount);
                    InsertCell(row, "300px", "L", "", "gainsboro", "", basic.GetPriceStr(pricearray[i]).replace(",", "."));
                    row.cells[0].style.padding = "5px";
                }


                GetEl("LabelBistEmirDuzeltYeniFiyat").style.display = "inline-block";
                GetEl("TextBistEmirDuzeltYeniFiyat").style.display = "inline-block";
                GetEl("DivBistEmirDuzeltButtonFiyat").style.display = "inline-block";
                if (ordertypestr == "PIYASA" || ordertypestr == "PIYASADAN LIMITE") {
                    GetEl("LabelBistEmirDuzeltYeniFiyat").style.display = "none";
                    GetEl("TextBistEmirDuzeltYeniFiyat").style.display = "none";
                    GetEl("DivBistEmirDuzeltButtonFiyat").style.display = "none";
                }

                // click events
                for (var i = 0; i < fiyattable.rows.length; i++) {
                    var currentrow = fiyattable.rows[i];
                    var cellclick = function (rowno) {
                        return function () {
                            GetEl("TextBistEmirDuzeltYeniFiyat").value = fiyattable.rows[rowno].cells[0].innerHTML;
                            GetEl("TableBistEmirDuzeltFiyat").style.display = "none";
                        };
                    };
                    currentrow.onmousedown = cellclick(i);
                }
            }

            else if (ActivePortfoyToolbarNo == 3)  // VIOP
            {
                var symbolstr = table.rows[EmirSilRowNo].cells[0].innerHTML;
                var yon = table.rows[EmirSilRowNo].cells[1].innerHTML;
                var yonstr = (yon == "A") ? "Alış" : "Satış";
                var miktarstr = Math.abs(table.rows[EmirSilRowNo].cells[2].innerHTML);
                var fiyatstr = table.rows[EmirSilRowNo].cells[3].innerHTML;
                var surestr = table.rows[EmirSilRowNo].cells[4].innerHTML;
                var emirnostr = table.rows[EmirSilRowNo].cells[5].innerHTML;
                var emirtipstr = table.rows[EmirSilRowNo].cells[6].innerHTML;
                var fiyattipstr = table.rows[EmirSilRowNo].cells[7].innerHTML;
                var enddatestr = table.rows[EmirSilRowNo].cells[8].innerHTML;
                var stopfiyatstr = table.rows[EmirSilRowNo].cells[9].innerHTML;


                BuySellDerinlik = "VIP";
                DetaySymbol = symbolstr;
                BuySellDerinlikTemizle();

                GetEl("chkViopSart").checked = false;
                OnChange_DivViopBuySellSartEmirCheck(GetEl('chkViopSart'));
                GetEl("chkViopSart").style.display = "none";
                GetEl("sartLabel").style.display = "none";

                var el = GetEl("DivViopBuySell");
                el.style.display = "inline-block";
                BringToFront(el);
                GetEl("DivViopBuySellTextSymbol").value = symbolstr;
                OnChange_DivViopBuySellTextSymbol();
                GetEl("DivViopBuySellTextSymbol").disabled = true;
                GetEl("DivViopBuySellTextFiyat").value = fiyatstr;
                GetEl("DivViopBuySellTextMiktar").value = Math.abs(miktarstr);
                GetEl("DivViopBuySellTextMiktar").disabled = false;

                if (yon == "A") {
                    GetEl("DivViopBuySellHeader").innerHTML = "VIOP Emir İyileştir , ALIŞ";
                    GetEl("DivViopBuySellHeader").style.backgroundColor = "#0D0";
                }
                else if (yon == "S") {
                    GetEl("DivViopBuySellHeader").innerHTML = "VIOP Emir İyileştir , SATIŞ";
                    GetEl("DivViopBuySellHeader").style.backgroundColor = "#D00";
                }
                GetEl("DivViopBuySellSelectEmirTip").disabled = true;

                GetEl("DivViopBuySellButton").style.display = "none";
                GetEl("DivAksamSeans").style.display = "none";
                GetEl("DivViopBuySellEmirDuzelt").style.display = "inline-block";

                var elemirtipselect = GetEl("DivViopBuySellSelectEmirTip");
                for (var i = 0; i < elemirtipselect.options.length; i++) {

                    if (elemirtipselect.options[i].value == emirtipstr)
                        elemirtipselect.selectedIndex = i;
                }
                // OnChange_DivViopBuySellSelectEmirTip(elemirtipselect);
                //GetEl("DivViopBuySellTextStopFiyat").value = stopfiyatstr;

                var elsureselect = GetEl("DivViopBuySellSelectSure");
                for (var i = 0; i < elsureselect.options.length; i++) {
                    if (elsureselect.options[i].value == surestr)
                        elsureselect.selectedIndex = i;
                }
                OnChange_DivViopBuySellSelectSure(elsureselect);

            }

        }

        function OnClick_DivPortfoyEmirIptal() {
            if (EmirSilRowNo < 0) return;

            var table = GetEl("TablePortfoyData");
            var symbolstr = table.rows[EmirSilRowNo].cells[0].innerHTML;
            var yonstr = table.rows[EmirSilRowNo].cells[1].innerHTML;
            var miktarstr = table.rows[EmirSilRowNo].cells[2].innerHTML;
            var fiyatstr = table.rows[EmirSilRowNo].cells[3].innerHTML;
            var emirnostr = table.rows[EmirSilRowNo].cells[5].innerHTML;
            var emirrefstr = table.rows[EmirSilRowNo].cells[7].innerHTML;
            var zincir = table.rows[EmirSilRowNo].cells[11].innerHTML;


            var onaystr = "Hisse=" + symbolstr;
            onaystr += "\n" + "İşlem=" + yonstr;
            onaystr += "\n" + "Miktar=" + miktarstr;
            onaystr += "\n" + "Fiyat=" + fiyatstr;
            onaystr += "\n" + "Emir No=" + emirrefstr;
            onaystr += "</br>" + ((zincir == "0" || zincir == "") ? "Emir silinecek, Onaylıyor musunuz ?" : "Zincir Emir silinecek, Onaylıyor musunuz");



            ShowConfirmWindow("Emir Silme", onaystr, 1)

        }

        function OnClick_DivPortfoyEmirStatus(el) {
            if (el.id == "DivPortfoyEmirBekleyen2" || el.id == "DivPortfoyEmirBekleyen")
                ActiveEmirElement = GetEl("DivPortfoyEmirBekleyen");
            else if (el.id == "DivPortfoyEmirGerceklesen2" || el.id == "DivPortfoyEmirGerceklesen")
                ActiveEmirElement = GetEl("DivPortfoyEmirGerceklesen");
            else if (el.id == "DivPortfoyEmirIptaller2" || el.id == "DivPortfoyEmirIptaller")
                ActiveEmirElement = GetEl("DivPortfoyEmirIptaller");

            ActivateWindow();
        }

        function OnClick_DivPortfoyHesapNo() {
            var el = GetEl("DivPortfoySubAccount");
            if (el.style.visibility == "visible")
                el.style.visibility = "hidden";
            else
                el.style.visibility = "visible";
            el.style.top = (GetEl("DivPortfoyHesapNo").offsetTop + GetEl("DivPortfoyHesapNo").offsetHeight + 5) + "px";
            BringToFront(el);
        }
        function OnChange_DivViopBuySellSartEmirCheck(el) {
            if (el.checked == true) {

                GetEl("ViopSartDiv").style.display = "inline";
                GetEl("TableViopBuySellSartSymbol").style.display = "none";
            }
            else {
                GetEl("ViopSartDiv").style.display = "none";
            }

        }

        function OnClick_DivPortfoyLogin() {
            if (HesapLogin == "1") {
                SendRequest("X" + SEP1 + "REQ_TRD_LOGOUT" + SEP1 + Username + SEP1 + SessionId);
                HesapLogin = "0";
                ActivateWindow();
            }
            else {
                DisplayHesapLogin();
            }
        }

        function OnClick_DivTakasFarkYon(el) {
            if (el.id == "DivTakasFarkYonA2" || el.id == "DivTakasFarkYonA")
                ActiveTakasFarkYonString = "Alanlar";
            if (el.id == "DivTakasFarkYonS2" || el.id == "DivTakasFarkYonS")
                ActiveTakasFarkYonString = "Satanlar";
            ActivateWindow();
        }

        function OnClick_PiyasaSec() {
            HidePopups();
            var el = GetEl("DivMarket");
            el.style.display = "inline-block";
            BringToFront(el);
            PaintMenuColor(ActiveWatchlistElement);

        }

        function OnClick_PiyasaSec_Button(ev) {
            if (ev.target.id == "DivMarket") return;
            if (ev.target.id == "") return;

            ActiveWatchlistElement = ev.target;
            GetEl("DivMarket").style.display = "none";
            WatchlistSymbolObject = {};
            WatchlistName = ev.target.innerHTML;
            if (WatchlistName == "Yükselen")
                SendRequest("X" + SEP1 + "REQ_BIST_YUKSELEN" + SEP1 + Username + SEP1 + SessionId);
            if (WatchlistName == "Düşen")
                SendRequest("X" + SEP1 + "REQ_BIST_DUSEN" + SEP1 + Username + SEP1 + SessionId);
            if (WatchlistName == "Hacim")
                SendRequest("X" + SEP1 + "REQ_BIST_HACIM" + SEP1 + Username + SEP1 + SessionId);
            if (WatchlistName == "Varant")
                SendRequest("X" + SEP1 + "REQ_BIST_VARANT" + SEP1 + Username + SEP1 + SessionId);
            if (WatchlistName == "VIOP opsiyon")
                SendRequest("X" + SEP1 + "REQ_VIOP_OPSIYON" + SEP1 + Username + SEP1 + SessionId);
            if (WatchlistName == "Sertifika")
                SendRequest("X" + SEP1 + "REQ_BIST_SERTIFIKA" + SEP1 + Username + SEP1 + SessionId);

            if (WatchlistName == "Bankalar" || WatchlistName == "Sigortalar" || WatchlistName == "Holdingler" || WatchlistName == "Taş, Toprak" || WatchlistName == "Metal" || WatchlistName == "Teknoloji" || WatchlistName == "Kimya")
                SendRequest("X" + SEP1 + "REQ_BIST_SEKTOR" + SEP1 + Username + SEP1 + SessionId + SEP1 + ToEngUp(WatchlistName));

            if (WatchlistName == "SAYFAM") {
                SendRequest("X" + SEP1 + "REQ_SENETLER" + SEP1 + Username + SEP1 + SessionId + SEP1 + "2" + SEP1);
            }
            else {
                ReadWatchlistSymbols();
                FillWatchlistTable();
            }

        }

        function OnClick_Saat() {
            if (Username == "_2" || Username == "_5" || Username == "leventarin") {
                ClearTable("TableObserve");
                GetEl("DivObserve").style.display = "inline-block";
                BringToFront(GetEl("DivObserve"));
                PaintToolbarGradient(ActiveObserveElement, "#666", "#000", "gainsboro", "#999", "#000", "yellow")
                var el = GetEl("DivTableObserve");
                el.style.height = (el.parentNode.clientHeight - el.offsetTop - 2) + "px";
                SendRequest("X" + SEP1 + "REQ_OBSERVE" + SEP1 + Username + SEP1 + SessionId + SEP1 + ToEngUp(ActiveObserveElement.innerHTML));
                return;
            }

            CloseSocket();
            SocketSupported = true;
            ConnectionTryCount = 0;
            TimeConnectionTest = new Date();
            LoginClicked = true;
            setTimeout(function () { Connect() }, 100);



            /*if (YayinState)
            {
                RequestLogout();
                YayinState=false;
                LoginClicked==false;
            }
            else
            {
                ConnectionTryCount=0;
                TimeConnectionTest=new Date();
                Connect();
            }
        */

        }

        function OnClick_DivBistEmirDuzeltOK() {

            if (EmirSilRowNo < 0) return;
            var table = GetEl("TablePortfoyData");
            var eskimiktarstr = table.rows[EmirSilRowNo].cells[2].innerHTML;
            var eskifiyatstr = table.rows[EmirSilRowNo].cells[3].innerHTML;
            var emirnostr = table.rows[EmirSilRowNo].cells[5].innerHTML;
            var geneksdurationstr = table.rows[EmirSilRowNo].cells[6].innerHTML;
            var yon = table.rows[EmirSilRowNo].cells[1].innerHTML;
            var sembol = table.rows[EmirSilRowNo].cells[0].innerHTML;
            var ordertypestr = ToEngUp(table.rows[EmirSilRowNo].cells[8].innerHTML);


            // yeni fiyat
            var yenifiyatstr = GetEl("TextBistEmirDuzeltYeniFiyat").value;
            if (ordertypestr == "PIYASA" || ordertypestr == "PIYASADAN LIMITE") {
                yenifiyatstr = "0";
            }
            else {
                if (isNaN(yenifiyatstr) || yenifiyatstr.trim() == "" || parseFloat(yenifiyatstr) == 0) {
                    ShowAlertWindow("Emir Düzeltme Uyarı", "Fiyat Giriniz !!!");
                    return;
                }
            }



            // yeni miktar
            var yenimiktarstr = GetEl("TextBistEmirDuzeltYeniMiktar").value;
            if (isNaN(yenimiktarstr) || yenimiktarstr.trim() == "") {
                ShowAlertWindow("Emir Düzeltme Uyarı", "Miktar Giriniz !!!");
                return;
            }

            // iyilieştirme gönder
            var msgsend = "EMIRNO=" + emirnostr + "|" + "ESKIFIYAT=" + eskifiyatstr + "|" + "ESKIMIKTAR=" + eskimiktarstr + "|" + "YENIFIYAT=" + yenifiyatstr + "|" +
                "YENIMIKTAR=" + yenimiktarstr + "|" + "GENEKSDURATION=" + geneksdurationstr + "|" + "SEMBOL=" + sembol + "|" + "YON=" + yon;
            SendRequest("X" + SEP1 + "REQ_TRD_BIST_EMIRIYILESTIR" + SEP1 + Username + SEP1 + SessionId + SEP1 + HesapKurum + SEP1 + HesapNo + SEP1 + HesapAltHesap + SEP1 + HesapParola + SEP1 + msgsend);
            HidePopups();
        }
        function OnMouseUp_DivBistEmirDuzeltDisplayFiyatTable() {
            var fiyattable = GetEl("TableBistEmirDuzeltFiyat");
            fiyattable.style.display = "inline-block";
            fiyattable.style.top = (GetEl("TextBistEmirDuzeltYeniFiyat").offsetTop + GetEl("TextBistEmirDuzeltYeniFiyat").clientHeight + 5) + "px";
            fiyattable.style.left = GetEl("TextBistEmirDuzeltYeniFiyat").offsetLeft + "px";
            fiyattable.style.width = (GetEl("TextBistEmirDuzeltYeniFiyat").offsetWidth + 50) + "px";

            var symbol = GetEl("TablePortfoyData").rows[EmirSilRowNo].cells[0].innerHTML;
            var fiyat = GetEl("TablePortfoyData").rows[EmirSilRowNo].cells[3].innerHTML;

            var basic = BasicObject[symbol];
            if (basic == undefined) return;

            //var fiyat=basic.GetPriceStr(basic.LastPrice+basic.Adim).replace(",",".");
            for (var i = 0; i < fiyattable.rows.length; i++) {
                var row = fiyattable.rows[i];
                if (row.cells[0].innerHTML.indexOf(fiyat) == 0) {
                    fiyattable.scrollTop = row.offsetTop;
                    break;
                }
            }
        }

        function OnKeyUp_TextBistEmirDuzeltYeniFiyat(e) {
            var fiyattable = GetEl("TableBistEmirDuzeltFiyat");
            if (e.keyCode == 13) {
                fiyattable.style.display = "none";
                return;
            }

            fiyattable.style.display = "inline-block";
            fiyattable.style.top = (GetEl("TextBistEmirDuzeltYeniFiyat").offsetTop + GetEl("TextBistEmirDuzeltYeniFiyat").clientHeight + 5) + "px";
            fiyattable.style.left = GetEl("TextBistEmirDuzeltYeniFiyat").offsetLeft + "px";
            fiyattable.style.width = (GetEl("TextBistEmirDuzeltYeniFiyat").clientWidth + 20) + "px";

            var symbol = GetEl("TablePortfoyData").rows[EmirSilRowNo].cells[0].innerHTML;
            var fiyat = GetEl("TextBistEmirDuzeltYeniFiyat").value.replace(",", ".");

            var basic = BasicObject[symbol];
            if (basic == undefined) return;

            for (var i = 0; i < fiyattable.rows.length; i++) {
                var row = fiyattable.rows[i];
                if (row.cells[0].innerHTML.indexOf(fiyat) == 0) {
                    fiyattable.scrollTop = row.offsetTop;
                    break;
                }
            }
        }
        function GetBistPriceSteps(basicitem) {
            var limitup = basicitem.LimitUp;
            var limitdown = basicitem.LimitDown;
            var pricearray = [];
            var refprice = basicitem.LastPrice;
            if (refprice == 0) refprice = basicitem.DayClose;

            if (refprice > 0) {
                if (basicitem.SeriNo == "V" || basicitem.SeriNo == "C" || basicitem.SeriNo == "NSE" || refprice > 1000) {
                    for (var i = 100; i >= 0; i--) {
                        var price = refprice + i * 0.01;
                        if (basicitem.SeriNo == "E" && price > limitup) continue;
                        if (price > 0)
                            pricearray.push(price);
                    }
                    for (var i = 1; i < 100; i++) {
                        var price = refprice - i * 0.01;

                        if (basicitem.SeriNo == "E" && price < limitdown) continue;
                        if (price > 0)
                            pricearray.push(price);
                    }
                }
                else if (basicitem.SeriNo == "F") {
                    if (limitup > 0 && limitdown > 0) {
                        pricearray.push(refprice);
                        var price = refprice;
                        while (price < limitup) {
                            var pricestep = 0.01;
                            if (price >= 50) pricestep = 0.02;
                            if (price >= 100) pricestep = 0.05;
                            if (price >= 250) pricestep = 0.1;
                            price += pricestep;
                            price = parseFloat(price.toFixed(2));
                            pricearray.push(price);
                            if (price == limitup)
                                break;
                        }
                        price = refprice;
                        while (price > limitdown) {
                            var pricestep = 0.01;
                            if (price >= 50) pricestep = 0.02;
                            if (price >= 100) pricestep = 0.05;
                            if (price >= 250) pricestep = 0.1;
                            price -= pricestep;
                            price = parseFloat(price.toFixed(2));
                            pricearray.push(price);
                            if (price == limitup)
                                break;
                        }
                    }
                }
                else {
                    if (limitup > 0 && limitdown > 0) {
                        pricearray.push(refprice);
                        var price = refprice;
                        while (price < limitup) {
                            var pricestep = 0.01;
                            if (price >= 20) pricestep = 0.02;
                            if (price >= 50) pricestep = 0.05;
                            if (price >= 100) pricestep = 0.1;
                            price += pricestep;
                            price = parseFloat(price.toFixed(2));
                            pricearray.push(price);
                            if (price == limitup)
                                break;
                        }
                        price = refprice;
                        while (price > limitdown) {
                            var pricestep = 0.01;
                            if (price >= 20) pricestep = 0.02;
                            if (price >= 50) pricestep = 0.05;
                            if (price >= 100) pricestep = 0.1;
                            price -= pricestep;
                            price = parseFloat(price.toFixed(2));
                            pricearray.push(price);
                            if (price == limitup)
                                break;
                        }
                    }
                }
            }
            pricearray.sort(function (a, b) {
                return b - a;
            });
            //pricearray.reverse();
            return pricearray;
        }

        function GetPriceStep(basicitem) {
            var step = 0;
            try {
                var refprice = basicitem.LastPrice;
                if (refprice == 0) refprice = basicitem.PrevCloseSession;
                if (refprice > 0) {
                    if (basicitem.Seri == "V" || basicitem.Seri == "C" || basicitem.Seri == "NSE") {
                        step = 0.01;
                    }
                    else if (basicitem.Seri == "F") {
                        var limitup = basicitem.LimitUp;
                        var limitdown = basicitem.LimitDown;
                        if (limitup > 0 && limitdown > 0) {
                            var price = refprice;

                            var pricestep = 0.01;
                            if (price >= 50) pricestep = 0.02;
                            if (price >= 100) pricestep = 0.05;
                            if (price >= 250) pricestep = 0.1;
                            step = pricestep;

                        }
                    }
                    else {
                        var limitup = basicitem.LimitUp;
                        var limitdown = basicitem.LimitDown;
                        if (limitup > 0 && limitdown > 0) {

                            var price = refprice;

                            var pricestep = 0.01;
                            if (price >= 20) pricestep = 0.02;
                            if (price >= 50) pricestep = 0.05;
                            if (price >= 100) pricestep = 0.1;
                            step = pricestep;
                        }
                    }
                }


                return step;


            }
            catch (e) {
                return step;
            }
        }
        function OnClick_DivBistBuySellSendOrder(el) {
            if (el.id == "DivBistBuySellButtonVazgec") {
                GetEl("DivBistBuySell").style.display = "none";
                BuySellDerinlik = "";
                return;
            }

            var symbol = GetEl("DivBistBuySellTextSymbol").value.replace("ı", "i").replace("İ", "I").toUpperCase();

            var basic = BasicObject[symbol];
            if (basic == undefined) return;
            if (basic.Prefix != "IMKBH") return;

            var yon = "A";
            if (el.id == "DivBistBuySellButtonSat")
                yon = "S";

            var msgsend = "SEMBOL=" + symbol;
            msgsend += "|" + "YON=" + yon;

            var elemirtip = GetEl("DivBistBuySellSelectEmirTip");
            var emirtipstr = elemirtip.options[elemirtip.selectedIndex].value;
            msgsend += "|" + "EMIRTIP=" + emirtipstr;

            var fiyatstr = GetEl("DivBistBuySellTextFiyat").value;
            if (ToEngUp(emirtipstr) == "LIMIT" || ToEngUp(emirtipstr) == "MIDPOINT LIMIT" || ToEngUp(emirtipstr) == "DENGE") {
                if (isNaN(fiyatstr) || fiyatstr.trim() == "") {
                    // alert("Fiyat Giriniz !!!");
                    ShowAlertWindow("Emir Girişi Uyarı", "Fiyat Giriniz !!!")
                    return;
                }
            }
            else {
                fiyatstr = "0";
            }
            msgsend += "|" + "FIYAT=" + fiyatstr;

            var miktarstr = GetEl("DivBistBuySellTextMiktar").value;
            if (isNaN(miktarstr) || miktarstr.trim() == "") {
                //alert("Miktar Giriniz !!!");
                ShowAlertWindow("Emir Girişi Uyarı", "Miktar Giriniz !!!")
                return;
            }
            msgsend += "|" + "MIKTAR=" + miktarstr;

            var elsure = GetEl("DivBistBuySellSelectSureTip");
            var surestr = elsure.options[elsure.selectedIndex].value;
            msgsend += "|" + "SURE=" + surestr;

            if (HesapLogin == "0") {
                // alert("Hesabınıza giriş yapınız !!!");
                ShowAlertWindow("Emir Girişi Uyarı", "Hesabınıza giriş yapınız !!!");
                return;
            }

            var satistipstr = "";
            if (GetEl("DivBistBuySellButtonAciga").checked)
                satistipstr = "ACIK";
            msgsend += "|" + "SATISTIP=" + satistipstr;

            var valorstr = GetEl("TextBistValor").value;
            msgsend += "|" + "VALOR=" + valorstr;



            // onay string
            var onaystr = "";
            if (basic.Group == "B") {
                onaystr += symbol + " hisse senedi B grubunda işlem görmektedir. Sürekli müzayede sistemine göre işlem görürler. Belirli bir anda oluşabilecek açık Takas pozisyonunun asgari yüzde 100 ü oranında net varlığının bulunması zorunludur. A, B, C, D grubu paylara ilişkin SPK nın karar ve düzenlemelerinden haberdar olduğumu kabul ve beyan ederim.";
                onaystr += "\n";
            }
            else if (basic.Group == "C" || basic.Group == "D") {
                onaystr += symbol + " hisse senedi " + basic.Group + " grubunda işlem görmektedir. " + basic.Group + " grubu hisse senetleri Kredili İşlem ve Açığa Satışa konu olamazlar. Piyasa yapıcısına sahip olması durumda sürekli müzayede, olmaması durumunda tek fiyat işlem yöntemine  göre işlem görürler. A, B, C, D grubu paylara ilişkin SPK nın karar ve düzenlemelerinden haberdar olduğumu kabul ve beyan ederim.";
                onaystr += "\n";
            }
            onaystr += symbol;
            if (el.id == "DivBistBuySellButtonAl")
                onaystr += "\n" + "ALIŞ";
            else if (el.id == "DivBistBuySellButtonSat")
                onaystr += "\n" + "SATIŞ";
            onaystr += "\n" + "Miktar=" + miktarstr;
            if (ToEngUp(emirtipstr) == "LIMIT" || ToEngUp(emirtipstr) == "MIDPOINT LIMIT" || ToEngUp(emirtipstr) == "DENGE")
                onaystr += "\n" + "Fiyat=" + fiyatstr;
            else
                onaystr += "\n" + "Piyasa Fiyatı";

            onaystr += "\n\n" + "Emir Gönderilecek, Onaylıyor musunuz ?";

            //// emir gönder
            //if (confirm(onaystr) == true)
            //{
            //    SendRequest("X" + SEP1 + "REQ_TRD_BIST_EMIRGONDER" + SEP1 + Username + SEP1 + SessionId + SEP1 + HesapKurum + SEP1 + HesapNo + SEP1 + HesapAltHesap + SEP1 + HesapParola + SEP1 + msgsend);
            //    HidePopups();
            //}
            GetEl("DivConfirmMsj").innerHTML = "X" + SEP1 + "REQ_TRD_BIST_EMIRGONDER" + SEP1 + Username + SEP1 + SessionId + SEP1 + HesapKurum + SEP1 + HesapNo + SEP1 + HesapAltHesap + SEP1 + HesapParola + SEP1 + msgsend;
            ShowConfirmWindow("Bist Emir Gönder", onaystr, 2);
        }
        function OnClick_DivBistZincirBuySellSendOrder(el) {
            if (el.id == "DivBistZincirBuySellButtonVazgec") {
                GetEl("DivBistZincirBuySell").style.display = "none";
                return;
            }

            var symbol = GetEl("DivBistZincirBuySellTextSymbol").value.replace("ı", "i").replace("İ", "I").toUpperCase();

            var basic = BasicObject[symbol];
            if (basic == undefined) return;
            if (basic.Prefix != "IMKBH") return;

            var yon = "A";
            if (el.id == "DivBistZincirBuySellButtonSat")
                yon = "S";

            var msgsend = "SEMBOL=" + symbol;
            msgsend += "|" + "YON=" + yon;

            var emirno = GetEl("DivBistZincirBuySellEmirNo").innerHTML;
            msgsend += "|" + "REF=" + emirno;

            var elemirtip = GetEl("DivBistZincirBuySellSelectEmirTip");
            var emirtipstr = elemirtip.options[elemirtip.selectedIndex].value;
            msgsend += "|" + "EMIRTIP=" + emirtipstr;

            var fiyatstr = GetEl("DivBistZincirBuySellTextFiyat").value;
            if (ToEngUp(emirtipstr) == "LIMIT" || ToEngUp(emirtipstr) == "MIDPOINT LIMIT" || ToEngUp(emirtipstr) == "DENGE") {
                if (isNaN(fiyatstr) || fiyatstr.trim() == "") {
                    ShowAlertWindow("Emir Girişi Uyarı", "Fiyat Giriniz !!!");
                    return;
                }
            }
            else {
                fiyatstr = "0";
            }
            msgsend += "|" + "FIYAT=" + fiyatstr;

            var miktarstr = GetEl("DivBistZincirBuySellTextMiktar").value;
            if (isNaN(miktarstr) || miktarstr.trim() == "") {
                ShowAlertWindow("Emir Girişi Uyarı", "Miktar Giriniz !!!");
                return;
            }
            msgsend += "|" + "MIKTAR=" + miktarstr;

            var elsure = GetEl("DivBistZincirBuySellSelectSureTip");
            var surestr = elsure.options[elsure.selectedIndex].value;
            msgsend += "|" + "SURE=" + surestr;

            if (HesapLogin == "0") {
                ShowAlertWindow("Emir Girişi Uyarı", "Hesabınıza giriş yapınız !!!");
                return;
            }

            var satistipstr = "";
            if (GetEl("DivBistZincirBuySellButtonAciga").checked)
                satistipstr = "ACIK";
            msgsend += "|" + "SATISTIP=" + satistipstr;

            var valorstr = GetEl("TextBistValor").value;
            msgsend += "|" + "VALOR=" + valorstr;



            // onay string
            var onaystr = "";
            if (basic.Group == "B") {
                onaystr += symbol + " hisse senedi B grubunda işlem görmektedir. Sürekli müzayede sistemine göre işlem görürler. Belirli bir anda oluşabilecek açık Takas pozisyonunun asgari yüzde 100 ü oranında net varlığının bulunması zorunludur. A, B, C, D grubu paylara ilişkin SPK nın karar ve düzenlemelerinden haberdar olduğumu kabul ve beyan ederim.";
                onaystr += "\n";
            }
            else if (basic.Group == "C" || basic.Group == "D") {
                onaystr += symbol + " hisse senedi " + basic.Group + " grubunda işlem görmektedir. " + basic.Group + " grubu hisse senetleri Kredili İşlem ve Açığa Satışa konu olamazlar. Piyasa yapıcısına sahip olması durumda sürekli müzayede, olmaması durumunda tek fiyat işlem yöntemine  göre işlem görürler. A, B, C, D grubu paylara ilişkin SPK nın karar ve düzenlemelerinden haberdar olduğumu kabul ve beyan ederim.";
                onaystr += "\n";
            }
            onaystr += symbol;
            onaystr += "\n" + "Referans Emir = " + emirno;
            if (el.id == "DivBistBuySellButtonAl")
                onaystr += "\n" + "ALIŞ";
            else if (el.id == "DivBistBuySellButtonSat")
                onaystr += "\n" + "SATIŞ";
            onaystr += "\n" + "Miktar=" + miktarstr;
            if (ToEngUp(emirtipstr) == "LIMIT" || ToEngUp(emirtipstr) == "MIDPOINT LIMIT" || ToEngUp(emirtipstr) == "DENGE")
                onaystr += "\n" + "Fiyat=" + fiyatstr;
            else
                onaystr += "\n" + "Piyasa Fiyatı";

            onaystr += "\n\n" + "Zincir Emir Gönderilecek, Onaylıyor musunuz ?";


            GetEl("DivConfirmMsj").innerHTML = "X" + SEP1 + "REQ_TRD_BIST_ZINCIR" + SEP1 + Username + SEP1 + SessionId + SEP1 + HesapKurum + SEP1 + HesapNo + SEP1 + HesapAltHesap + SEP1 + HesapParola + SEP1 + msgsend;
            ShowConfirmWindow("Zincir Emir Gönder", onaystr, 2);
        }
        function OnClick_ChartDivBistBuySellSendOrder(el) {

            if (HesapLogin == "0") {
                ShowAlertWindow("Emir Giriş Uyarı", "Hesabınıza giriş yapınız !!!");
                return;
            }
            var symbol = GetEl("TextTechSymbol").value.replace("ı", "i").replace("İ", "I").toUpperCase();

            var basic = BasicObject[symbol];
            if (basic == undefined) return;
            if (basic.Prefix != "IMKBH" && basic.Prefix != "VIP") return;
            var yon = "A";
            if (el.id == "DivChartBistBuySellButtonSat")
                yon = "S";

            var msgsend = "SEMBOL=" + symbol;
            msgsend += "|" + "YON=" + yon;


            var miktarstr = GetEl("textChartBuySellAdet").innerText;
            if (isNaN(miktarstr) || miktarstr.trim() == "") {
                ShowAlertWindow("Emir Giriş Uyarı", "Miktar Giriniz !!!")
                return;
            }

            if (basic.Prefix == "IMKBH") {
                msgsend += "|" + "EMIRTIP=PIYASA";
                msgsend += "|" + "FIYAT=0";
                msgsend += "|" + "MIKTAR=" + miktarstr;
                msgsend += "|" + "SURE=KIE";

                // onay string
                var onaystr = "";
                if (basic.Group == "B") {
                    onaystr += symbol + " hisse senedi B grubunda işlem görmektedir. Sürekli müzayede sistemine göre işlem görürler. Belirli bir anda oluşabilecek açık Takas pozisyonunun asgari yüzde 100 ü oranında net varlığının bulunması zorunludur. A, B, C, D grubu paylara ilişkin SPK nın karar ve düzenlemelerinden haberdar olduğumu kabul ve beyan ederim.";
                    onaystr += "\n";
                }
                else if (basic.Group == "C" || basic.Group == "D") {
                    onaystr += symbol + " hisse senedi " + basic.Group + " grubunda işlem görmektedir. " + basic.Group + " grubu hisse senetleri Kredili İşlem ve Açığa Satışa konu olamazlar. Piyasa yapıcısına sahip olması durumda sürekli müzayede, olmaması durumunda tek fiyat işlem yöntemine  göre işlem görürler. A, B, C, D grubu paylara ilişkin SPK nın karar ve düzenlemelerinden haberdar olduğumu kabul ve beyan ederim.";
                    onaystr += "\n";
                }
                onaystr += symbol;
                if (yon == "A")
                    onaystr += "\n" + "ALIŞ";
                else
                    onaystr += "\n" + "SATIŞ";
                onaystr += "\n" + "Miktar=" + miktarstr;
                onaystr += "\n" + "Piyasa Fiyatı";
                onaystr += "\n\n" + "Emir Gönderilecek, Onaylıyor musunuz ?";

                // emir gönder
                //if (confirm(onaystr) == true) {
                //    SendRequest("X" + SEP1 + "REQ_TRD_BIST_EMIRGONDER" + SEP1 + Username + SEP1 + SessionId + SEP1 + HesapKurum + SEP1 + HesapNo + SEP1 + HesapAltHesap + SEP1 + HesapParola + SEP1 + msgsend);
                //    HidePopups();
                //}
                GetEl("DivConfirmMsj").innerHTML = "X" + SEP1 + "REQ_TRD_BIST_EMIRGONDER" + SEP1 + Username + SEP1 + SessionId + SEP1 + HesapKurum + SEP1 + HesapNo + SEP1 + HesapAltHesap + SEP1 + HesapParola + SEP1 + msgsend;
                ShowConfirmWindow("Bist Emir Gönder", onaystr, 2);

            }
            else if (basic.Prefix == "VIP") {
                msgsend += "|" + "FIYAT=0";
                msgsend += "|" + "MIKTAR=" + miktarstr;
                msgsend += "|" + "EMIRTIP=PYS";
                msgsend += "|" + "SURE=KIE";


                // onay string
                var onaystr = symbol;
                if (yon == "A")
                    onaystr += "\n" + "ALIŞ";
                else if (yon == "S")
                    onaystr += "\n" + "SATIŞ";
                onaystr += "\n" + "Miktar=" + miktarstr;
                onaystr += "\n" + "Emir Tipi=Piyasa";
                onaystr += "\n" + "Süre=KIE";
                onaystr += "\n\n" + "Emir Gönderilecek, Onaylıyor musunuz ?";

                //// emir gönder
                //if (confirm(onaystr) == true) {
                //    SendRequest("X" + SEP1 + "REQ_TRD_VIOP_EMIRGONDER" + SEP1 + Username + SEP1 + SessionId + SEP1 + HesapKurum + SEP1 + HesapNo + SEP1 + HesapAltHesap + SEP1 + HesapParola + SEP1 + msgsend);
                //    HidePopups();
                //}
                GetEl("DivConfirmMsj").innerHTML = "X" + SEP1 + "REQ_TRD_VIOP_EMIRGONDER" + SEP1 + Username + SEP1 + SessionId + SEP1 + HesapKurum + SEP1 + HesapNo + SEP1 + HesapAltHesap + SEP1 + HesapParola + SEP1 + msgsend;
                ShowConfirmWindow("Viop Emir Gönder", onaystr, 2);


            }
            else {

                ShowAlertWindow("Emir Giriş Uyarı", "Alım Satım yapılacak sembol değil");
            }

        }
        function OnMouseUp_DivBistBuySellDisplayFiyatTable() {
            var fiyattable = GetEl("TableBistBuySellFiyat");
            fiyattable.style.display = "inline-block";
            fiyattable.style.top = (GetEl("DivBistBuySellTextFiyat").offsetTop + GetEl("DivBistBuySellTextFiyat").clientHeight + 5) + "px";
            fiyattable.style.left = GetEl("DivBistBuySellTextFiyat").offsetLeft + "px";
            fiyattable.style.width = (GetEl("DivBistBuySellTextFiyat").offsetWidth + 50) + "px";

            var symbol = GetEl("DivBistBuySellTextSymbol").value.replace("ı", "i").replace("İ", "I").toUpperCase();
            var basic = BasicObject[symbol];
            if (basic == undefined) return;

            var fiyat = basic.GetPriceStr(basic.LastPrice + basic.Adim).replace(",", ".");
            for (var i = 0; i < fiyattable.rows.length; i++) {
                var row = fiyattable.rows[i];
                if (row.cells[0].innerHTML.indexOf(fiyat) == 0) {
                    fiyattable.scrollTop = row.offsetTop;
                    break;
                }
            }
        }
        function OnMouseUp_DivBistZincirBuySellDisplayFiyatTable() {
            var fiyattable = GetEl("TableBistZincirBuySellFiyat");
            fiyattable.style.display = "inline-block";
            fiyattable.style.top = (GetEl("DivBistZincirBuySellTextFiyat").offsetTop + GetEl("DivBistZincirBuySellTextFiyat").clientHeight + 5) + "px";
            fiyattable.style.left = GetEl("DivBistZincirBuySellTextFiyat").offsetLeft + "px";
            fiyattable.style.width = (GetEl("DivBistZincirBuySellTextFiyat").offsetWidth + 50) + "px";

            var symbol = GetEl("DivBistZincirBuySellTextSymbol").value.replace("ı", "i").replace("İ", "I").toUpperCase();
            var basic = BasicObject[symbol];
            if (basic == undefined) return;

            var fiyat = basic.GetPriceStr(basic.LastPrice + basic.Adim).replace(",", ".");
            for (var i = 0; i < fiyattable.rows.length; i++) {
                var row = fiyattable.rows[i];
                if (row.cells[0].innerHTML.indexOf(fiyat) == 0) {
                    fiyattable.scrollTop = row.offsetTop;
                    break;
                }
            }
        }
        function OnKeyUp_DivBistBuySellTextFiyat(e) {
            var fiyattable = GetEl("TableBistBuySellFiyat");
            if (e.keyCode == 13) {
                fiyattable.style.display = "none";
                return;
            }

            fiyattable.style.display = "inline-block";
            fiyattable.style.top = (GetEl("DivBistBuySellTextFiyat").offsetTop + GetEl("DivBistBuySellTextFiyat").clientHeight + 5) + "px";
            fiyattable.style.left = GetEl("DivBistBuySellTextFiyat").offsetLeft + "px";
            fiyattable.style.width = (GetEl("DivBistBuySellTextFiyat").clientWidth + 20) + "px";

            var symbol = GetEl("DivBistBuySellTextSymbol").value.replace("ı", "i").replace("İ", "I").toUpperCase();
            var basic = BasicObject[symbol];
            if (basic == undefined) return;

            var fiyat = GetEl("DivBistBuySellTextFiyat").value.replace(",", ".");
            for (var i = 0; i < fiyattable.rows.length; i++) {
                var row = fiyattable.rows[i];
                if (row.cells[0].innerHTML.indexOf(fiyat) == 0) {
                    fiyattable.scrollTop = row.offsetTop;
                    break;
                }
            }
        }
        function OnKeyUp_DivBistZincirBuySellTextFiyat(e) {
            var fiyattable = GetEl("TableBistZincirBuySellFiyat");
            if (e.keyCode == 13) {
                fiyattable.style.display = "none";
                return;
            }

            fiyattable.style.display = "inline-block";
            fiyattable.style.top = (GetEl("DivBistZincirBuySellTextFiyat").offsetTop + GetEl("DivBistZincirBuySellTextFiyat").clientHeight + 5) + "px";
            fiyattable.style.left = GetEl("DivBistZincirBuySellTextFiyat").offsetLeft + "px";
            fiyattable.style.width = (GetEl("DivBistZincirBuySellTextFiyat").clientWidth + 20) + "px";

            var symbol = GetEl("DivBistZincirBuySellTextSymbol").value.replace("ı", "i").replace("İ", "I").toUpperCase();
            var basic = BasicObject[symbol];
            if (basic == undefined) return;

            var fiyat = GetEl("DivBistZincirBuySellTextFiyat").value.replace(",", ".");
            for (var i = 0; i < fiyattable.rows.length; i++) {
                var row = fiyattable.rows[i];
                if (row.cells[0].innerHTML.indexOf(fiyat) == 0) {
                    fiyattable.scrollTop = row.offsetTop;
                    break;
                }
            }
        }

        function OnChange_DivBistBuySellSelectEmirTip(el) {
            if (el.id == "DivBistBuySellSelectEmirTip") {
                var elselect = GetEl("DivBistBuySellSelectEmirTip");
                var ordertypestr = elselect.options[elselect.selectedIndex].value;

                if (ToEngUp(ordertypestr) == "LIMIT" || ToEngUp(ordertypestr) == "MIDPOINT LIMIT" || ToEngUp(ordertypestr) == "DENGE") {
                    GetEl("DivBistBuySellTextFiyat").style.visibility = "visible";
                    GetEl("DivBistBuySellButtonFiyat").style.visibility = "visible";
                }
                else {
                    GetEl("DivBistBuySellTextFiyat").style.visibility = "hidden";
                    GetEl("DivBistBuySellButtonFiyat").style.visibility = "hidden";
                }
                GetEl("DivBistBuySellSelectSureTip").style.visibility = "visible";
                if (ToEngUp(ordertypestr) == "PIYASA")
                    GetEl("DivBistBuySellSelectSureTip").style.visibility = "hidden";
            }
            else {
                var elselect = GetEl("DivBistZincirBuySellSelectEmirTip");
                var ordertypestr = elselect.options[elselect.selectedIndex].value;

                if (ToEngUp(ordertypestr) == "LIMIT" || ToEngUp(ordertypestr) == "MIDPOINT LIMIT" || ToEngUp(ordertypestr) == "DENGE") {
                    GetEl("DivBistZincirBuySellTextFiyat").style.visibility = "visible";
                    GetEl("DivBistZincirBuySellButtonFiyat").style.visibility = "visible";
                }
                else {
                    GetEl("DivBistZincirBuySellTextFiyat").style.visibility = "hidden";
                    GetEl("DivBistZincirBuySellButtonFiyat").style.visibility = "hidden";
                }
                GetEl("DivBistZincirBuySellSelectSureTip").style.visibility = "visible";
                if (ToEngUp(ordertypestr) == "PIYASA")
                    GetEl("DivBistZincirBuySellSelectSureTip").style.visibility = "hidden";
            }
        }
        function OnKeyUp_DivBistBuySellTextSymbol(e) {
            OnChange_DivBistBuySellTextSymbol();

            var symboltable = GetEl("TableBistBuySellSymbol");
            if (e.keyCode == 13) {
                symboltable.style.display = "none";
                return;
            }
            symboltable.style.display = "inline";
            symboltable.style.top = (GetEl("DivBistBuySellTextSymbol").offsetTop + GetEl("DivBistBuySellTextSymbol").clientHeight + 5) + "px";
            symboltable.style.left = GetEl("DivBistBuySellTextSymbol").offsetLeft + "px";
            symboltable.style.width = (GetEl("DivBistBuySellTextSymbol").clientWidth + 50) + "px";
            symboltable.style.height = "40%";

            var symbol = GetEl("DivBistBuySellTextSymbol").value.replace("ı", "i").replace("İ", "I").toUpperCase();

            for (var i = 0; i < symboltable.rows.length; i++) {
                var row = symboltable.rows[i];
                if (row.cells[0].innerHTML.indexOf(symbol) == 0) {
                    symboltable.scrollTop = row.offsetTop;
                    break;
                }
            }
        }
        function OnKeyUp_DivBistZincirBuySellTextSymbol(e) {
            OnChange_DivBistZincirBuySellTextSymbol();

            var symboltable = GetEl("TableBistZincirBuySellSymbol");
            if (e.keyCode == 13) {
                symboltable.style.display = "none";
                return;
            }
            symboltable.style.display = "inline";
            symboltable.style.top = (GetEl("DivBistZincirBuySellTextSymbol").offsetTop + GetEl("DivBistZincirBuySellTextSymbol").clientHeight + 5) + "px";
            symboltable.style.left = GetEl("DivBistZincirBuySellTextSymbol").offsetLeft + "px";
            symboltable.style.width = (GetEl("DivBistZincirBuySellTextSymbol").clientWidth + 50) + "px";
            symboltable.style.height = "40%";

            var symbol = GetEl("DivBistZincirBuySellTextSymbol").value.replace("ı", "i").replace("İ", "I").toUpperCase();

            for (var i = 0; i < symboltable.rows.length; i++) {
                var row = symboltable.rows[i];
                if (row.cells[0].innerHTML.indexOf(symbol) == 0) {
                    symboltable.scrollTop = row.offsetTop;
                    break;
                }
            }
        }

        function OnKeyUp_DivSymbolEditSymbol(el, ev) // ssss
        {

            var str = ToEngUp(el.value);
            var table = GetEl("TableWatchlistSymbol");

            if (ev.keyCode == 13) {
                var tablewl = GetEl("TableWatchlist");
                for (var i = 0; i < tablewl.rows.length; i++) {
                    var sembolname = tablewl.rows[i].cells[0].innerHTML;
                    if (sembolname == str)
                        tablewl.rows[i].cells[0].innerHTML = "";
                }
                tablewl.rows[WatchlistActiveRow].cells[0].innerHTML = str;//table.rows[rowno].cells[0].innerHTML;
                //delete WatchlistSymbolObject[WatchlistActiveSymbol];
                //WatchlistSymbolObject[str] = WatchlistActiveRow;
                SaveWatchlistSymbols();
                FillWatchlistTable();
                ActivateWindow();
                return;
            }
            DisplayAutoCompleteTable(null, table);
            SearchAutoCompleteTable(table, str);
        }

        function OnClick_DivViopBuySellSendOrder(el) //Ssedat
        {
            if (el.id == "DivViopBuySellButtonVazgec") {
                GetEl("DivViopBuySell").style.display = "none";
                BuySellDerinlik = "";
                return;
            }

            var symbol = GetEl("DivViopBuySellTextSymbol").value.replace("ı", "i").replace("İ", "I").toUpperCase();

            var basic = BasicObject[symbol];
            if (basic == undefined) return;
            if (basic.Prefix != "VIP") return;

            if (CheckAkseansSembol(basic) == false)
                GetEl("chkViopAksamSeans").checked = false;

            var yon = "A";
            if (el.id == "DivViopBuySellButtonSat")
                yon = "S";

            var msgsend = "SEMBOL=" + symbol;  //basic.Composite;
            msgsend += "|" + "YON=" + yon;

            var fiyatstr = GetEl("DivViopBuySellTextFiyat").value;


            var elemirtip = GetEl("DivViopBuySellSelectEmirTip");
            var emirtipstr = elemirtip.options[elemirtip.selectedIndex].value;


            if (elemirtip == "LMT") {
                if (isNaN(fiyatstr) || fiyatstr.trim() == "") {

                    ShowAlertWindow("Emir Giriş Uyarı", "Fiyat Giriniz !!!");
                    return;
                }
            }
            msgsend += "|" + "FIYAT=" + fiyatstr;

            var miktarstr = GetEl("DivViopBuySellTextMiktar").value;
            if (isNaN(miktarstr) || miktarstr.trim() == "") {
                ShowAlertWindow("Emir Giriş Uyarı", "Miktar Giriniz !!!");
                return;
            }
            msgsend += "|" + "MIKTAR=" + miktarstr;
            msgsend += "|" + "EMIRTIP=" + emirtipstr;


            var elsure = GetEl("DivViopBuySellSelectSure");
            var surestr = elsure.options[elsure.selectedIndex].value;
            msgsend += "|" + "SURE=" + surestr;

            var tarihstr = GetEl("DivViopBuySellTextTarih").value;
            msgsend += "|" + "TARIH=" + tarihstr;


            if (HesapLogin == "0") {
                ShowAlertWindow("Emir Giriş Uyarı", "Hesabınıza giriş yapınız !!!");
                return;
            }

            if (GetEl("chkViopSart").checked == true) {

                if (GetEl("DivViopBuySellTextSartSymbol").value == "") {
                    ShowAlertWindow("Emir Giriş Uyarı", "Şart Sözleşmesi Seçiniz !");
                    return;
                }

                var sartsymbolstr = GetEl("DivViopBuySellTextSartSymbol").value;
                msgsend += "|" + "SARTSEMBOL=" + sartsymbolstr;
                var sartTipstr = GetEl("DivViopBuySellSelectSartTip").value;
                msgsend += "|" + "SARTTIP=" + sartTipstr;

                var Sartfiyatstr = GetEl("DivViopBuySellTextSartFiyat").value;
                if (isNaN(Sartfiyatstr) || Sartfiyatstr.trim() == "") {
                    ShowAlertWindow("Emir Giriş Uyarı", "Şart Fiyatı Giriniz !");
                    return;
                }
                msgsend += "|" + "SARTFIYAT=" + Sartfiyatstr;

            }


            if (GetEl("chkViopAksamSeans").checked == true)
                msgsend += "|" + "AKSAMSEANS=1"
            else
                msgsend += "|" + "AKSAMSEANS=0"
            // onay string
            var onaystr = symbol;
            if (el.id == "DivViopBuySellButtonAl")
                onaystr += "\n" + "ALIŞ";
            else if (el.id == "DivViopBuySellButtonSat")
                onaystr += "\n" + "SATIŞ";
            onaystr += "\n" + "Miktar=" + miktarstr;
            onaystr += "\n" + "Emir Tipi=" + emirtipstr;
            if (emirtipstr == "LMT")
                onaystr += "\n" + "Fiyat=" + fiyatstr;
            onaystr += "\n" + "Süre=" + surestr;
            if (sartsymbolstr != "" && sartsymbolstr != undefined) {
                onaystr += "\n" + "Şart Sembol=" + sartsymbolstr;
                onaystr += "\n" + "Şart Tip=" + GetEl("DivViopBuySellSelectSartTip").options[GetEl("DivViopBuySellSelectSartTip").selectedIndex].text;
                onaystr += "\n" + "Şart Fiyat=" + Sartfiyatstr;
            }
            if (GetEl("chkViopAksamSeans").checked == true)
                onaystr += "\n" + "Akşam Seansı";
            onaystr += "\n\n" + "Emir Gönderilecek, Onaylıyor musunuz ?";

            GetEl("DivConfirmMsj").innerHTML = "X" + SEP1 + "REQ_TRD_VIOP_EMIRGONDER" + SEP1 + Username + SEP1 + SessionId + SEP1 + HesapKurum + SEP1 + HesapNo + SEP1 + HesapAltHesap + SEP1 + HesapParola + SEP1 + msgsend;
            ShowConfirmWindow("Viop Emir Gönder", onaystr, 2);
        }


        function OnKeyUp_DivViopBuySellTextFiyat(e) {
            var fiyattable = GetEl("TableViopBuySellFiyat");
            if (e.keyCode == 13) {
                fiyattable.style.display = "none";
                return;
            }

            fiyattable.style.display = "inline";
            fiyattable.style.top = (GetEl("DivViopBuySellTextFiyat").offsetTop + GetEl("DivViopBuySellTextFiyat").clientHeight + 5) + "px";
            fiyattable.style.left = GetEl("DivViopBuySellTextFiyat").offsetLeft + "px";
            fiyattable.style.width = (GetEl("DivViopBuySellTextFiyat").clientWidth + 20) + "px";

            var symbol = GetEl("DivViopBuySellTextSymbol").value.replace("ı", "i").replace("İ", "I").toUpperCase();
            var basic = BasicObject[symbol];
            if (basic == undefined) return;

            var fiyat = GetEl("DivViopBuySellTextFiyat").value.replace(",", ".");
            for (var i = 0; i < fiyattable.rows.length; i++) {
                var row = fiyattable.rows[i];
                if (row.cells[0].innerHTML.indexOf(fiyat) == 0) {
                    fiyattable.scrollTop = row.offsetTop;
                    break;
                }
            }
        }
        function OnKeyUp_DivViopBuySellTextSartFiyat(e) {
            var fiyattable = GetEl("TableViopBuySellSartFiyat");
            if (e.keyCode == 13) {
                fiyattable.style.display = "none";
                return;
            }

            fiyattable.style.display = "inline";
            fiyattable.style.top = (GetEl("DivViopBuySellTextSartFiyat").offsetTop + GetEl("DivViopBuySellTextSartFiyat").clientHeight + 5) + "px";
            fiyattable.style.left = GetEl("DivViopBuySellTextSartFiyat").offsetLeft + "px";
            fiyattable.style.width = (GetEl("DivViopBuySellTextSartFiyat").clientWidth + 20) + "px";

            var symbol = GetEl("DivViopBuySellTextSartSymbol").value.replace("ı", "i").replace("İ", "I").toUpperCase();
            var basic = BasicObject[symbol];
            if (basic == undefined) return;

            var fiyat = GetEl("DivViopBuySellTextSartFiyat").value.replace(",", ".");
            for (var i = 0; i < fiyattable.rows.length; i++) {
                var row = fiyattable.rows[i];
                if (row.cells[0].innerHTML.indexOf(fiyat) == 0) {
                    fiyattable.scrollTop = row.offsetTop;
                    break;
                }
            }
        }

        function OnKeyUp_DivViopBuySellTextSymbol(e) {
            OnChange_DivViopBuySellTextSymbol();

            var symboltable = GetEl("TableViopBuySellSymbol");
            if (e.keyCode == 13) {
                symboltable.style.display = "none";
                return;
            }
            symboltable.style.display = "inline";
            symboltable.style.top = (GetEl("DivViopBuySellTextSymbol").offsetTop + GetEl("DivViopBuySellTextSymbol").clientHeight + 5) + "px";
            symboltable.style.left = GetEl("DivViopBuySellTextSymbol").offsetLeft + "px";
            symboltable.style.width = (GetEl("DivViopBuySellTextSymbol").clientWidth + 20) + "px";
            symboltable.style.height = "40%";

            var symbol = GetEl("DivViopBuySellTextSymbol").value.replace("ı", "i").replace("İ", "I").toUpperCase();

            for (var i = 0; i < symboltable.rows.length; i++) {
                var row = symboltable.rows[i];
                if (row.cells[0].innerHTML.indexOf(symbol) == 0) {
                    symboltable.scrollTop = row.offsetTop;
                    break;
                }
            }
        }
        function OnKeyUp_DivViopBuySellTextSartSymbol(e) {
            OnChange_DivViopBuySellTextSartSymbol();

            var symboltable = GetEl("TableViopBuySellSartSymbol");
            if (e.keyCode == 13) {
                symboltable.style.display = "none";
                return;
            }
            symboltable.style.display = "inline";
            symboltable.style.top = (GetEl("DivViopBuySellTextSartSymbol").offsetTop + GetEl("DivViopBuySellTextSartSymbol").clientHeight + 5) + "px";
            symboltable.style.left = GetEl("DivViopBuySellTextSartSymbol").offsetLeft + "px";
            symboltable.style.width = (GetEl("DivViopBuySellTextSartSymbol").clientWidth + 20) + "px";

            var symbol = GetEl("DivViopBuySellTextSartSymbol").value.replace("ı", "i").replace("İ", "I").toUpperCase();

            for (var i = 0; i < symboltable.rows.length; i++) {
                var row = symboltable.rows[i];
                if (row.cells[0].innerHTML.indexOf(symbol) == 0) {
                    symboltable.scrollTop = row.offsetTop;
                    break;
                }
            }
        }

        function OnKeyUp_TextKurumIslemSearch(el, ev) {
            var str = ToEngUp(el.value);
            var table = GetEl("TableKurumIslemSearch");
            DisplayAutoCompleteTable(el, table);
            SearchAutoCompleteTable2(table, str);
        }
        function OnKeyUp_TextKurumIslemPITESearch(el, ev) {
            var str = ToEngUp(el.value);
            var table = GetEl("TableKurumIslemPITESearch");
            DisplayAutoCompleteTable(el, table);
            SearchAutoCompleteTable2(table, str);
        }

        function OnKeyUp_TextAnalizHeaderSymbol(el, ev) {
            var str = ToEngUp(el.value);
            var table = GetEl("TableAnalizHeaderSearch");

            if (ev.keyCode == 13) {
                DetaySymbol = str;
                ActivateWindow();
                return;
            }
            DisplayAutoCompleteTable(el, table);
            SearchAutoCompleteTable(table, str);
        }

        function OnKeyUp_TextDetayHeaderSymbol(el, ev) {
            var str = ToEngUp(el.value);
            var table = GetEl("TableDetayHeaderSearch");

            if (ev.keyCode == 13) {
                DetaySymbol = str;
                ActivateWindow();
                return;
            }
            DisplayAutoCompleteTable(el, table);
            SearchAutoCompleteTable(table, str);
        }

        function OnKeyUp_TextTechSymbol(el, ev) {
            var str = ToEngUp(el.value);
            var table = GetEl("TableTechSearch");

            if (ev.keyCode == 13) {
                DetaySymbol = str;
                ActivateWindow();
                return;
            }
            DisplayAutoCompleteTable(el, table);
            SearchAutoCompleteTable(table, str);
        }

        function OnKeyUp_TextKurumTakasSearch(el, ev) {
            var str = ToEngUp(el.value);
            var table = GetEl("TableKurumTakasSearch");
            DisplayAutoCompleteTable(el, table);
            SearchAutoCompleteTable2(table, str);
        }

        function OnMouseUp_Chart(el, ev) {
            if (el.id != "CanvasDetayChart" && el.id != "Canvas1Tech") return;

            // chart level
            ChartCurrentBarNo = Math.round(ChartLastBarNo - (ChartWidth - ChartRightMargin - ev.layerX) / ChartBarSpace);
            if (ChartCurrentBarNo > ChartBarCount) ChartCurrentBarNo = ChartBarCount;
            ChartLevelPoint = ev.layerY;
            if (ev.layerX > ChartWidth - ChartRightMargin + 20) ChartLevelPoint = 0;

            DrawChart();
        }

        /*function OnMouseMoveChart(e)
        {
            if (e.which==1)
            {
                ChartCurrentBarNo=Math.round(ChartLastBarNo-(ChartWidth-ChartRightMargin-e.layerX)/ChartBarSpace);
                if (ChartCurrentBarNo>ChartBarCount) ChartCurrentBarNo=ChartBarCount;
                DrawChart();
            }
        }

        function OnMouseUpChart(e)
        {
            ChartCurrentBarNo=Math.round(ChartLastBarNo-(ChartWidth-ChartRightMargin-e.layerX)/ChartBarSpace);
            if (ChartCurrentBarNo>ChartBarCount) ChartCurrentBarNo=ChartBarCount;
            DrawChart();
        }
        */

        function OnMouseUp_DivViopBuySellDisplayFiyatTable() {
            var fiyattable = GetEl("TableViopBuySellFiyat");
            fiyattable.style.display = "inline";
            fiyattable.style.top = (GetEl("DivViopBuySellTextFiyat").offsetTop + GetEl("DivViopBuySellTextFiyat").clientHeight + 5) + "px";
            fiyattable.style.left = GetEl("DivViopBuySellTextFiyat").offsetLeft + "px";
            fiyattable.style.width = (GetEl("DivViopBuySellTextFiyat").clientWidth + 20) + "px";

            var symbol = GetEl("DivViopBuySellTextSymbol").value.replace("ı", "i").replace("İ", "I").toUpperCase();
            var basic = BasicObject[symbol];
            if (basic == undefined) return;

            var fiyat = basic.GetPriceStr(basic.LastPrice + basic.Adim).replace(",", ".");
            if (EmirSilRowNo >= 0)
                fiyat = GetEl("TablePortfoyData").rows[EmirSilRowNo].cells[3].innerHTML;
            for (var i = 0; i < fiyattable.rows.length; i++) {
                var row = fiyattable.rows[i];
                if (row.cells[0].innerHTML.indexOf(fiyat) == 0) {
                    fiyattable.scrollTop = row.offsetTop;
                    break;
                }
            }
        }
        function OnMouseUp_DivViopBuySellDisplaySartFiyatTable() {
            var fiyattable = GetEl("TableViopBuySellSartFiyat");
            fiyattable.style.display = "inline";
            fiyattable.style.top = (GetEl("DivViopBuySellTextSartFiyat").offsetTop + GetEl("DivViopBuySellTextSartFiyat").clientHeight + 5) + "px";
            fiyattable.style.left = GetEl("DivViopBuySellTextSartFiyat").offsetLeft + "px";
            fiyattable.style.width = (GetEl("DivViopBuySellTextSartFiyat").clientWidth + 20) + "px";

            var symbol = GetEl("DivViopBuySellTextSartSymbol").value.replace("ı", "i").replace("İ", "I").toUpperCase();
            var basic = BasicObject[symbol];
            if (basic == undefined) return;

            var fiyat = basic.GetPriceStr(basic.LastPrice + basic.Adim).replace(",", ".");
            if (EmirSilRowNo >= 0)
                fiyat = GetEl("TablePortfoyData").rows[EmirSilRowNo].cells[3].innerHTML;
            for (var i = 0; i < fiyattable.rows.length; i++) {
                var row = fiyattable.rows[i];
                if (row.cells[0].innerHTML.indexOf(fiyat) == 0) {
                    fiyattable.scrollTop = row.offsetTop;
                    break;
                }
            }
        }
        function OnScroll_DivDetaySlider(e) {
            //alert(e.type);
            //var el=GetEl("DivDetaySlider");
            //if (el.scrollLeft<200)
            //	el.style.overflow="hidden";
        }

        function OrientationBul() {
            //if (window.orientation == -90 || window.orientation == 90) {
            //    return true;
            //}
            //else {

            //    return false;
            //}

            //if (window.matchMedia("(orientation: portrait)").matches)
            //    return  false;
            //if (window.matchMedia("(orientation: landscape)").matches)
            //    return true;


            //alert(screen.orientation.type);

            //if (screen.orientation.angle == -90 || screen.orientation.angle == 90) {
            //    return true;
            //}
            //else {

            //    return false;
            //}

            if (DeviceType == "IOS" || DeviceType == "ANY") {
                if (window.orientation == -90 || window.orientation == 90) {
                    return true;
                }
                else {

                    return false;
                }
            }
            else {
                if (screen.orientation.type.indexOf("landscape") > -1) {
                    return true;
                }
                else {

                    return false;
                }

            }




            // return  window.innerHeight < window.innerWidth;



        }
        function OrientationChanged() {
            if (YayinState == false) return;
            if (GetEl("DivSozlesme").style.display != "none") return;
            if (GetEl("DivLogin").style.visibility == "visible") return;
            if (GetEl("DivMesajDosya").style.display != "none") return;
            if (GetEl("DivMesajlar").style.display != "none") return;
            if (GetEl("DivGelenMesaj").style.display != "none") return;
            if (GetEl("DivTemelAnaliz").style.display != "none") return;

            //if (txtFocusBool) return;

            //var yatay = false;
            //if (window.orientation == -90 || window.orientation == 90) {
            //    yatay = true;
            //}

            yatay = OrientationBul();

            Resize();
            ActivateWindow();

            if (yatay) {
                var basicitem = BasicObject[DetaySymbol];
                if (basicitem == undefined) return;
                GetEl("TextTechSymbol").value = basicitem.GetOriginal();
                RequestTech();

                ShowChartBuysell(true);

            }
        }

        function PaintElement(id, color1, color2, forecolor) {
            var el = GetEl(id);
            el.style.background = "-webkit-linear-gradient(" + color1 + "," + color2 + ")";
            el.style.background = "-moz-linear-gradient(" + color1 + "," + color2 + ")";
            el.style.background = "linear-gradient(" + color1 + "," + color2 + ")";
            el.style.color = forecolor;
        }

        function PaintTable(id, cellno, pback1, pback2, pfore, aback1, aback2, afore) {
            var table = GetEl(id);
            var row = table.rows[0];
            for (var i = 0; i < row.cells.length; i++) {
                var cell = row.cells[i];
                cell.style.color = pfore;
                cell.style.background = "-webkit-radial-gradient(" + pback1 + "," + pback2 + ")";
                cell.style.background = "-moz-linear-gradient(" + pback1 + "," + pback2 + ")";
                cell.style.background = "linear-gradient(" + pback1 + "," + pback2 + ")";
                cell.style.fontWeight = "normal";
            }
            if (cellno < 0) return;

            var cell = row.cells[cellno];
            cell.style.color = afore;
            cell.style.background = "-webkit-linear-linear(" + aback1 + "," + aback2 + ")";
            cell.style.background = "-moz-linear-gradient(" + aback1 + "," + aback2 + ")";
            cell.style.background = "linear-gradient(" + aback1 + "," + aback2 + ")";
            cell.style.fontWeight = "bold";
        }

        function PaintToolbarTable(id, cellno) {
            var pback1 = "#666";
            var pback2 = "#222";
            var pfore = "gainsboro";
            var aback1 = "#999";
            var aback2 = "#444";
            var afore = "white";
            var table = GetEl(id);
            var row = table.rows[0];


            for (var i = 0; i < row.cells.length; i++) {
                var cell = row.cells[i];
                cell.style.color = pfore;
                cell.style.background = "-webkit-linear-gradient(" + pback1 + "," + pback2 + ")";
                cell.style.background = "-moz-linear-gradient(" + pback1 + "," + pback2 + ")";
                cell.style.background = "linear-gradient(" + pback1 + "," + pback2 + ")";
                cell.style.fontWeight = "normal";
                cell.style.borderRadius = "2px";
                //cell.style.border="1px #555 solid";
            }
            if (cellno < 0) return;

            var cell = row.cells[cellno];
            cell.style.color = afore;
            cell.style.background = "-webkit-linear-gradient(" + aback1 + "," + aback2 + ")";
            cell.style.background = "-moz-linear-gradient(" + aback1 + "," + aback2 + ")";
            cell.style.background = "linear-gradient(" + aback1 + "," + aback2 + ")";
            cell.style.fontWeight = "bold";
        }

        function PaintTechToolbar() {
            GetEl("TableTechToolbar").rows[0].cells[1].innerHTML = ActiveChartPeriodElement.innerHTML;
            GetEl("TableTechToolbar").rows[0].cells[0].style.background = "";
        }

        function PaintMenuColor(el) {
            for (var i = 0; i < el.parentNode.children.length; i++) {
                if (el.parentNode.children[i].id != "") {
                    if (el.parentNode.children[i] == el) {
                        el.parentNode.children[i].style.fontWeight = "bold";
                        el.parentNode.children[i].style.color = "white";
                        el.parentNode.children[i].style.background = "-webkit-linear-gradient(#F60,#C40)";
                        el.parentNode.children[i].style.background = "-moz-linear-gradient(#F60,#C40)";
                        el.parentNode.children[i].style.background = "linear-gradient(#F60,#C40)";
                        el.parentNode.children[i].style.borderBottom = "1px solid black";
                        el.parentNode.children[i].style.borderRight = "1px solid black";
                    }
                    else {
                        el.parentNode.children[i].style.color = "silver";//passivecolor;
                        el.parentNode.children[i].style.fontWeight = "normal";
                        el.parentNode.children[i].style.background = "-webkit-linear-gradient(black,black)";
                        el.parentNode.children[i].style.background = "-moz-linear-gradient(black,black)";
                        el.parentNode.children[i].style.background = "linear-gradient(black,black)";
                        el.parentNode.children[i].style.borderBottom = "1px solid #555";
                        el.parentNode.children[i].style.borderRight = "1px solid #555";
                    }
                }
            }
        }

        function PaintToolbarGradient(el, passive1, passive2, passivecolor, active1, active2, activecolor) {
            for (var i = 0; i < el.parentNode.children.length; i++) {
                if (el.parentNode.children[i].id != "") {
                    if (el.parentNode.children[i] == el) {
                        PaintElement(el.parentNode.children[i].id, active1, active2, activecolor);
                        el.parentNode.children[i].style.fontWeight = "bold";
                    }
                    else {
                        PaintElement(el.parentNode.children[i].id, passive1, passive2, passivecolor);
                        el.parentNode.children[i].style.fontWeight = "normal";
                    }
                }
            }
        }

        function ParseMessage(message) {
            ParserArray = message.split(SEPEOL);
            for (var i = 0; i < ParserArray.length; i++)
                ParseSingleMessage(ParserArray[i]);
        }

        function ParseSingleMessage(message) {
            try {
                var parsetable;
                var parserow;
                var parsecell;

                ParserFieldArray = message.split(SEP1);
                if (ParserFieldArray[0] != "Y") return;

                switch (ParserFieldArray[1]) {
                    case "SRV_BASKA_BAGLANTI":
                        ShowAlertWindow("Bağlantı Bilgi", "Başka bağlantı nedeniyle yayın kesildi!");
                        BaskaBaglantiBool = true;
                        return;
                    case "SRV_DRN": // cccc
                        {
                            var paketarray = ParserFieldArray[2].split("|");
                            var symbol = paketarray[0];
                            var item = BasicObject[symbol];
                            if (item == undefined) return;
                            var basic = BasicObject[DetaySymbol];
                            if (basic == undefined) return;
                            if (item.GetOriginal(DetaySymbol) != basic.GetOriginal()) return;

                            //DerinlikUpdateTime = ParserFieldArray[3];
                            if (ActivePageElement.id != "DivDetay") return;
                            if (ActiveDetayFooterNo != 2) return;

                            var derinlikallowbool = false;
                            var islemallowbool = false;
                            if (item.Prefix == "IMKBH") {
                                if (BistDerinlikLisansBool) derinlikallowbool = true;
                                if (BistIslemlerLisansBool) islemallowbool = true;
                            }
                            if (item.Prefix == "VIP") {
                                if (ViopDerinlikLisansBool) derinlikallowbool = true;
                                if (ViopIslemlerLisansBool) islemallowbool = true;
                            }
                            for (var i = 1; i < paketarray.length - 1; i++) {
                                var splitarray = paketarray[i].split(";");
                                if (splitarray[0] == "D") // derinlik
                                {
                                    if (derinlikallowbool == false && islemallowbool == false) continue;

                                    DerinlikRepaintTime = new Date();
                                    DerinlikRepaintBool = true;
                                    var bidask = splitarray[1];
                                    var rowno = parseInt(splitarray[2]);
                                    if (derinlikallowbool == false && rowno > 0) continue;
                                    parserow = DerinlikTable.rows[rowno];

                                    if (bidask == "B") {
                                        parserow.cells[0].style.backgroundColor = "#080";
                                        parserow.cells[0].style.color = "white";
                                        parserow.cells[0].innerHTML = parseFloat(splitarray[5]).Format();

                                        parserow.cells[1].style.backgroundColor = "#080";
                                        parserow.cells[1].style.color = "white";
                                        parserow.cells[1].innerHTML = parseFloat(splitarray[4]).Format();

                                        parserow.cells[2].style.backgroundColor = "#080";
                                        parserow.cells[2].style.color = "white";
                                        parserow.cells[2].innerHTML = item.GetPriceStr(parseFloat(splitarray[3]));

                                        item.MarketMakerBid = item.GetPriceStr(parseFloat(splitarray[6]));

                                    }
                                    if (bidask == "A") {
                                        parserow.cells[4].style.backgroundColor = "#800";
                                        parserow.cells[4].style.color = "white";
                                        parserow.cells[4].innerHTML = item.GetPriceStr(parseFloat(splitarray[3]));

                                        parserow.cells[5].style.backgroundColor = "#800";
                                        parserow.cells[5].style.color = "white";
                                        parserow.cells[5].innerHTML = parseFloat(splitarray[4]).Format();

                                        parserow.cells[6].style.backgroundColor = "#800";
                                        parserow.cells[6].style.color = "white";
                                        parserow.cells[6].innerHTML = parseFloat(splitarray[5]).Format();

                                        item.MarketMakerAsk = item.GetPriceStr(parseFloat(splitarray[6]));
                                    }
                                }
                                if (splitarray[0] == "I") // işlemler
                                {
                                    if (islemallowbool == false) continue;
                                    var updatebool = true;
                                    if (DrnIslemTable.rows.length == 0) updatebool = false;
                                    IslemRepaintTime = new Date();

                                    var splitarray = paketarray[i].split(";");

                                    // pite kontrolü
                                    if (item.Prefix == "IMKBH" && PiteBool) {
                                        var table = GetEl("TableDrnIslemColName");
                                        table.rows[0].cells[0].style.width = "0%";
                                        table.rows[0].cells[1].style.width = "20%";
                                        table.rows[0].cells[2].style.width = "20%";
                                        table.rows[0].cells[4].style.width = "30%";
                                        table.rows[0].cells[5].style.width = "30%";
                                        table.rows[0].cells[4].innerHTML = "Alan";
                                        table.rows[0].cells[5].innerHTML = "Satan";
                                    }
                                    else {
                                        var table = GetEl("TableDrnIslemColName");
                                        table.rows[0].cells[0].style.width = "34%";
                                        table.rows[0].cells[1].style.width = "33%";
                                        table.rows[0].cells[2].style.width = "33%";
                                        table.rows[0].cells[4].style.width = "0";
                                        table.rows[0].cells[5].style.width = "0";
                                        table.rows[0].cells[4].innerHTML = "";
                                        table.rows[0].cells[5].innerHTML = "";
                                    }

                                    var color = "silver";
                                    var backcolor = "black";
                                    if (updatebool) {
                                        IslemRepaintCount++;
                                        color = "white";
                                        backcolor = "#666";
                                        if (splitarray[4] == "1")
                                            backcolor = "#080";
                                        else if (splitarray[4] == "2")
                                            backcolor = "#800";
                                    }
                                    else {
                                        if (splitarray[4] == "1")
                                            color = "#2F2";
                                        else if (splitarray[4] == "2")
                                            color = "#F22";
                                    } 43
                                    if (IslemKonsolideBool && IslemPrevTime == splitarray[1] && IslemPrevFiyat == splitarray[2] && IslemPrevYon == splitarray[4]) {
                                        parserow = DrnIslemTable.rows[0];
                                        var lot = parseFloat(parserow.cells[2].innerHTML.replace(",", "").replace(".", ""));
                                        lot += parseFloat(splitarray[3]);
                                        parserow.cells[2].innerHTML = lot.Format();
                                    }
                                    else {
                                        if (updatebool)
                                            IslemRepaintCount++;
                                        if (PiteBool && item.Prefix == "IMKBH") {
                                            parserow = DrnIslemTable.insertRow(0);
                                            InsertCell(parserow, "0%", "L", backcolor, color, "0", splitarray[1]);
                                            parserow.cells[0].style.paddingLeft = "5%";
                                            InsertCell(parserow, "20%", "C", backcolor, color, "0", splitarray[2]);
                                            InsertCell(parserow, "20%", "R", backcolor, color, "0", parseFloat(splitarray[3]).Format());
                                            parserow.cells[2].style.paddingRight = "5%";
                                            InsertCell(parserow, "0", "R", backcolor, "black", "0", splitarray[4]);
                                            InsertCell(parserow, "30", "L", backcolor, color, "0", splitarray[5]);
                                            InsertCell(parserow, "30", "L", backcolor, color, "0", splitarray[6]);
                                            SetRowStyle(parserow, "0", "0", "");

                                        }
                                        else {
                                            parserow = DrnIslemTable.insertRow(0);
                                            InsertCell(parserow, "34%", "L", backcolor, color, "0", splitarray[1]);
                                            parserow.cells[0].style.paddingLeft = "5%";
                                            InsertCell(parserow, "33%", "C", backcolor, color, "0", splitarray[2]);
                                            InsertCell(parserow, "33%", "R", backcolor, color, "0", parseFloat(splitarray[3]).Format());
                                            parserow.cells[2].style.paddingRight = "5%";
                                            InsertCell(parserow, "0", "R", backcolor, "black", "0", splitarray[4]);
                                            SetRowStyle(parserow, "0", "0", "");
                                        }
                                    }
                                    IslemPrevTime = splitarray[1];
                                    IslemPrevFiyat = splitarray[2];
                                    IslemPrevYon = splitarray[4];

                                }

                                DerinlikToplam();

                            }
                            return;
                        }

                    case "328":  // cccc
                        {
                            ReconnectAllowBool = ParserFieldArray[3];
                            if (ParserFieldArray[2] == "0") {
                                YayinStatus = ParserFieldArray[2];
                                YayinURL = "//" + ParserFieldArray[4] + ":" + ParserFieldArray[5];

                                if (YayinStatus == "0")
                                    ConnectYayin(ParserFieldArray[6]);
                            }
                            return;
                        }
                    case "SRV_CONNECTION_ERROR":
                        {
                            //RequestLogout();
                            var gelenmesajx = ParserFieldArray[2];
                            if (gelenmesajx != "") {
                                ShowAlertWindow("Uyarı", gelenmesajx);
                            }
                            return;
                        }

                    case "SRV_USER_MSG":
                        {
                            if (ParserFieldArray[2] == "USER_BASED") {
                                if (Username != ParserFieldArray[3]) return;
                                if (SessionId != ParserFieldArray[4]) return;

                            }
                            if (ParserFieldArray[5].indexOf("iDeal CEP") > -1)
                                ShowAlertWindow("Uyarı", ParserFieldArray[5] + "<br><p style='font-size:0.85em'>" + ServerUrl + "</p>");
                            else
                                ShowAlertWindow("Uyarı", ParserFieldArray[5]);

                            return;
                        }

                    case "SRV_OBSERVE":
                        {
                            if (Username != ParserFieldArray[2]) return;
                            ClearTable("TableObserve");
                            parsetable = GetEl("TableObserve");
                            if (ParserFieldArray[3] == "") return;
                            for (var i = 3; i < ParserFieldArray.length; i++) {
                                ParserSplitArray = ParserFieldArray[i].split("|");
                                var seperator = false;
                                if (ParserSplitArray[0] == "-") seperator = true;
                                parserow = parsetable.insertRow(parsetable.rows.length);

                                if (seperator) {
                                    InsertCell(parserow, "58%", "L", "", "black", "H", "");
                                    InsertCell(parserow, "22%", "L", "", "black", "H", "");
                                    InsertCell(parserow, "20%", "L", "", "black", "H", "");
                                }
                                else {
                                    InsertCell(parserow, "58%", "L", "", "aqua", "", ParserSplitArray[0]);
                                    InsertCell(parserow, "22%", "L", "", "aqua", "", ParserSplitArray[1]);
                                    InsertCell(parserow, "20%", "L", "", "aqua", "", ParserSplitArray[2]);
                                }
                                SetRowStyle(parserow, "1px", "", "");
                            }
                            return;
                        }

                    case "SRV_TRD_UYARI":
                        {
                            GetEl("DivPortfoySozlesme").style.display = "inline";
                            BringToFront(GetEl("DivPortfoySozlesme"));
                            GetEl("DivPortfoySozlesmeText").style.height = (GetEl("DivPortfoySozlesmeKabul").offsetTop - GetEl("DivPortfoySozlesmeHeader").offsetTop - GetEl("DivPortfoySozlesmeHeader").offsetHeight - 10) + "px";
                            GetEl("DivPortfoySozlesmeText").innerHTML = ParserFieldArray[2].replace(/\r\n/g, "<br>").replace(/\n/g, "<br>");



                            //localStorage["UYARIOKUNDU"] = "1";
                            //DisplayHesapLogin();

                            //ParserSplitArray = ParserFieldArray[2].split("\r\n");

                            //var elstat = GetEl("DivStat");
                            //elstat.style.display = "inline-block";
                            //ZIndex++;
                            //elstat.style.zIndex = ZIndex;

                            //// display table
                            //parsetable = GetEl("TableStat");
                            //ClearTable("TableStat");
                            //for (var i = 0; i < ParserSplitArray.length; i++)
                            //{
                            //    var rowcount = parsetable.rows.length;
                            //    parserow = parsetable.insertRow(rowcount);
                            //    parsecell = parserow.insertCell(0);
                            //    parsecell.innerHTML = ParserSplitArray[i];
                            //}
                            return;
                        }

                    case "4":	// ilişkili haber
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            //NewsUpdateTime=ParserFieldArray[4];
                            var symbol = ParserFieldArray[5];
                            if (symbol != DetaySymbol) return;

                            if (ActivePageElement.id == "DivDetay") {
                                if (ActiveDetayFooterNo == 4) {
                                    parsetable = GetEl("TableDetayHaber");
                                    for (var i = 6; i < ParserFieldArray.length; i++) {
                                        ParserSplitArray = ParserFieldArray[i].split(SEP2);
                                        var rowcount = parsetable.rows.length;
                                        var content = ParserSplitArray[6].replace(/[\n\r]+/g, "<br/>");
                                        parserow = parsetable.insertRow(rowcount);
                                        parsecell = parserow.insertCell(0);
                                        CellType(parsecell, "100%", "left", "silver", ParserSplitArray[5] + "<br/>" + "--- " + ParserSplitArray[1] + "<br/>" + content + "<br/>" + ".", "1%", true);
                                    }
                                }
                            }
                            return;
                        }

                    case "5":	// takas
                        {
                            var symbol = ParserFieldArray[2];
                            if (symbol != DetaySymbol) return;
                            var item = BasicObject[symbol];
                            if (item == undefined) return;

                            if (ActivePageElement.id == "DivAnaliz") {
                                if (ActiveAnalizFooterNo == 0) {
                                    parsetable = GetEl("TableAnalizTakas");
                                    ClearTable("TableAnalizTakas");
                                    for (var i = 3; i < ParserFieldArray.length; i++) {
                                        ParserSplitArray = ParserFieldArray[i].split(SEP2);
                                        var rowcount = parsetable.rows.length;
                                        parserow = parsetable.insertRow(rowcount);
                                        InsertCell(parserow, "14%", "C", "", "gray", "", rowcount + 1);
                                        InsertCell(parserow, "32%", "L", "", "gainsboro", "", ParserSplitArray[0].substr(0, 16));
                                        InsertCell(parserow, "36%", "R", "", "gold", "", parseFloat(ParserSplitArray[1]).Format());
                                        InsertCell(parserow, "18%", "R", "", "silver", "", parseFloat(ParserSplitArray[2]).toFixed(2));
                                        SetRowStyle(parserow, "1px", "", "");
                                    }
                                }
                            }
                            return;
                        }

                    case "39":	// takas2
                        {
                            var symbol = ParserFieldArray[2];
                            if (symbol != DetaySymbol) return;
                            var item = BasicObject[symbol];
                            if (item == undefined) return;

                            GetEl("DivTakasTarih").innerHTML = ParserFieldArray[3];
                            if (ActivePageElement.id == "DivAnaliz") {
                                if (ActiveAnalizFooterNo == 0) {
                                    parsetable = GetEl("TableAnalizTakas");
                                    ClearTable("TableAnalizTakas");
                                    for (var i = 4; i < ParserFieldArray.length; i++) {
                                        ParserSplitArray = ParserFieldArray[i].split(SEP2);
                                        var rowcount = parsetable.rows.length;
                                        parserow = parsetable.insertRow(rowcount);
                                        InsertCell(parserow, "14%", "C", "", "gray", "", rowcount + 1);
                                        InsertCell(parserow, "32%", "L", "", "gainsboro", "", ParserSplitArray[0].substr(0, 16));
                                        InsertCell(parserow, "36%", "R", "", "gold", "", parseFloat(ParserSplitArray[1]).Format());
                                        InsertCell(parserow, "18%", "R", "", "silver", "", parseFloat(ParserSplitArray[2]).toFixed(2));
                                        SetRowStyle(parserow, "1px", "", "");
                                    }
                                }
                            }
                            return;
                        }

                    case "6":	// chart data
                        {

                            var symbol = ParserFieldArray[2];
                            if (symbol != DetaySymbol) return;
                            BasicItem = BasicObject[symbol];
                            if (BasicItem == undefined) return;
                            if (ActiveChartPeriodElement.innerHTML != ParserFieldArray[3]) return;

                            if ((ActivePageElement.id == "DivDetay" && ActiveDetayFooterNo == 5) || GetEl("DivTech").style.display == "inline-block") {
                                for (var i = 4; i < ParserFieldArray.length; i++) {
                                    ParserSplitArray = ParserFieldArray[i].split(SEP2);
                                    ChartBarItem = new ChartClass();
                                    ChartBarItem.DateTime = ParserSplitArray[0];
                                    ChartBarItem.Open = parseFloat(ParserSplitArray[1]);
                                    ChartBarItem.High = parseFloat(ParserSplitArray[2]);
                                    ChartBarItem.Low = parseFloat(ParserSplitArray[3]);
                                    ChartBarItem.Close = parseFloat(ParserSplitArray[4]);
                                    ChartObject[ChartBarItem.DateTime] = ChartBarItem;
                                }
                                Bars.length = 0;
                                for (var name in ChartObject)
                                    Bars.push(ChartObject[name]);
                                Bars.sort(function (a, b) { return a.DateTime.localeCompare(b.DateTime) });
                                DrawChart();
                            }
                            return;
                        }

                    case "8":  // closing prices
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;

                            for (var i = 4; i < ParserFieldArray.length; i++) {
                                ParserSplitArray = ParserFieldArray[i].split(SEP2);
                                var symbol = ParserSplitArray[0];
                                BasicItem = BasicObject[symbol];
                                if (BasicItem != undefined) {
                                    BasicItem.DayClose = parseFloat(ParserSplitArray[1]);
                                    BasicItem.CalculatePercent();
                                    //DisplayWatchlistData(symbol);
                                }
                            }
                            return;
                        }

                    case "10":  // kapalıçarşı
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            if (ActivePageElement.id != "DivKapalicarsi") return;

                            parsetable = GetEl("TableKapalicarsi");
                            if (parsetable.rows.length == 0) {
                                ClearTable("TableKapalicarsi");
                                var rowcount = parsetable.rows.length;
                                parserow = parsetable.insertRow(rowcount);
                                InsertCell(parserow, "25%", "L", "", "white", "", "Kapalıçarşı");
                                InsertCell(parserow, "25%", "R", "", "white", "", "Alış");
                                InsertCell(parserow, "25%", "R", "", "white", "", "Satış");
                                InsertCell(parserow, "25%", "R", "", "white", "", "%");
                                for (var j = 0; j < parserow.cells.length; j++) {
                                    parserow.cells[j].style.backgroundColor = "orangered";
                                    parserow.cells[j].style.borderBottom = "5px black solid";
                                    parserow.cells[j].style.padding = "5px";
                                    parserow.cells[j].style.paddingTop = "5px";
                                    parserow.cells[j].style.paddingBottom = "5px";
                                    parserow.cells[j].style.fontSize = FontSizeCarsi;
                                    parserow.cells[j].style.fontWeight = "bold";
                                }
                                for (var i = 4; i < ParserFieldArray.length; i++) {
                                    ParserSplitArray = ParserFieldArray[i].split(SEP2);
                                    var rowcount = parsetable.rows.length;
                                    parserow = parsetable.insertRow(rowcount);
                                    InsertCell(parserow, "", "L", "", "#ED8", "", ParserSplitArray[0]);
                                    InsertCell(parserow, "", "R", "", "silver", "", ParserSplitArray[1]);
                                    InsertCell(parserow, "", "R", "", "silver", "", ParserSplitArray[2]);
                                    var change = parseFloat(ParserSplitArray[3]);
                                    var color = "gold";
                                    if (change > 0)
                                        color = "#3F3";
                                    else if (change < 0)
                                        color = "#F33";
                                    InsertCell(parserow, "", "R", "", color, "", change.toFixed(2));
                                    for (var j = 0; j < parserow.cells.length; j++) {
                                        parserow.cells[j].style.backgroundColor = "black";
                                        parserow.cells[j].style.borderBottom = "1px #333 solid";
                                        parserow.cells[j].style.padding = "5px";
                                        parserow.cells[j].style.paddingTop = "2px";
                                        parserow.cells[j].style.paddingBottom = "2px";
                                        parserow.cells[j].style.fontSize = FontSizeCarsi;
                                        parserow.cells[j].style.fontWeight = "bold";
                                    }
                                }
                            }
                            else {
                                KapalicarsiUpdateTime = new Date();
                                KapalicarsiRepaintBool = true;
                                for (var i = 4; i < ParserFieldArray.length; i++) {
                                    ParserSplitArray = ParserFieldArray[i].split(SEP2);
                                    parserow = parsetable.rows[i - 3];
                                    for (var j = 0; j < ParserSplitArray.length; j++) {
                                        if (parserow.cells[j].innerHTML != ParserSplitArray[j]) {
                                            parserow.cells[j].innerHTML = ParserSplitArray[j];
                                            if (j == 1 || j == 2) {
                                                parserow.cells[j].style.backgroundColor = "#000";
                                                parserow.cells[j].style.color = "yellow";
                                            }
                                            if (j == 3) {
                                                var change = parseFloat(ParserSplitArray[3]);
                                                var color = "gold";
                                                if (change > 0)
                                                    color = "#3F3";
                                                else if (change < 0)
                                                    color = "#F33";
                                                parserow.cells[j].innerHTML = change.toFixed(2);
                                            }
                                        }
                                    }
                                }
                            }
                            return;
                        }

                    case "11":  // sermaye genel
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;

                            var titles = ["Firma", "Tarih", "Bedelli", "Bedelsiz", "Temettü", "Oran"];
                            parsetable = GetEl("TableSermayeGenel");
                            ClearTable("TableSermayeGenel");
                            for (var i = 4; i < ParserFieldArray.length; i++) {
                                color = "#9F9";
                                if (i % 2 == 0) color = "silver";
                                ParserSplitArray = ParserFieldArray[i].split(SEP2);
                                for (var j = 0; j < ParserSplitArray.length; j++) {
                                    parserow = parsetable.insertRow(parsetable.rows.length);
                                    parsecell = parserow.insertCell(0);
                                    CellType(parsecell, "20%", "left", color, titles[j], "2px", true);
                                    parsecell.style.border = "0";
                                    if (j == ParserSplitArray.length - 1) parsecell.style.borderBottom = "2px teal solid";
                                    parsecell = parserow.insertCell(1);
                                    CellType(parsecell, "80%", "right", color, ParserSplitArray[j], "2px", true);
                                    parsecell.style.border = "0";
                                    if (j == ParserSplitArray.length - 1) parsecell.style.borderBottom = "2px teal solid";
                                }
                            }
                            return;
                        }

                    case "12":  // sermaye firma
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            if (DetaySymbol != ParserFieldArray[4]) return;

                            var titles = ["Tarih", "Bedelli", "Bedelsiz", "Temettü", "Oran"];
                            parsetable = GetEl("TableSermayeFirma");
                            ClearTable("TableSermayeFirma");
                            for (var i = 5; i < ParserFieldArray.length; i++) {
                                color = "#9F9";
                                if (i % 2 == 0) color = "silver";
                                ParserSplitArray = ParserFieldArray[i].split(SEP2);
                                for (var j = 0; j < ParserSplitArray.length; j++) {
                                    parserow = parsetable.insertRow(parsetable.rows.length);
                                    parsecell = parserow.insertCell(0);
                                    CellType(parsecell, "20%", "left", color, titles[j], "1%", true);
                                    parsecell.style.border = "0";
                                    if (j == ParserSplitArray.length - 1) parsecell.style.borderBottom = "2px teal solid";
                                    parsecell = parserow.insertCell(1);
                                    CellType(parsecell, "80%", "right", color, ParserSplitArray[j], "1%", true);
                                    parsecell.style.border = "0";
                                    if (j == ParserSplitArray.length - 1) parsecell.style.borderBottom = "2px teal solid";
                                }
                            }
                            return;
                        }

                    case "13":  // takas fark
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            if (DetaySymbol != ParserFieldArray[4]) return;

                            var color = "#F22";
                            if (ToEngUp(ActiveTakasFarkYonString) == "ALANLAR")
                                color = "#2F2";

                            var data = [];
                            parsetable = GetEl("TableTakasFark");
                            for (var i = 5; i < ParserFieldArray.length; i++) {
                                ParserSplitArray = ParserFieldArray[i].split(SEP2);
                                parsetable.rows[i - 5].cells[1].innerHTML = ParserSplitArray[0];
                                parsetable.rows[i - 5].cells[2].innerHTML = parseFloat(ParserSplitArray[1]).Format();
                                parsetable.rows[i - 5].cells[2].style.color = color;
                                parsetable.rows[i - 5].cells[3].innerHTML = ParserSplitArray[2];
                                data[i - 5] = parseFloat(ParserSplitArray[2]);
                            }

                            // canvas
                            var container = GetEl("DivTakasFarkCanvasContainer");
                            container.style.top = (parsetable.offsetTop + parsetable.offsetHeight + 5) + "px";
                            container.style.height = (GetEl("DivTakasFark").offsetHeight - container.offsetTop - 5) + "px";
                            var min = Math.min(container.clientWidth, container.clientHeight) - 0;
                            GetEl("CanvasTakasFark").width = min;
                            GetEl("CanvasTakasFark").height = min;


                            // pie
                            var canvas = GetEl("CanvasTakasFark");
                            var ctx = canvas.getContext("2d");
                            var lastend = 0;
                            var colors = ["lawngreen", "red", "gold", "blue", "cyan", "dimgray"];
                            var offset = Math.PI / 2;
                            var total = 0;
                            for (var i = 0; i < data.length; i++)
                                total += data[i];

                            for (var i = 0; i < data.length; i++) {
                                ctx.fillStyle = colors[i];
                                ctx.beginPath();
                                ctx.moveTo(canvas.width / 2, canvas.height / 2);
                                ctx.arc(canvas.width / 2, canvas.height / 2, canvas.height / 2, lastend - offset, lastend - offset + (Math.PI * 2 * (data[i] / total)), false);
                                ctx.lineTo(canvas.width / 2, canvas.height / 2);
                                ctx.fill();
                                lastend += Math.PI * 2 * (data[i] / total);
                            }
                            return;
                        }

                    case "45":  // getiri tablosu
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            if (DetaySymbol != ParserFieldArray[4]) return;

                            parsetable = GetEl("TableGetiri");

                            ParserSplitArray = ParserFieldArray[5].split(SEP2);
                            for (var i = 0; i < ParserSplitArray.length; i++) {
                                parsecell = parsetable.rows[i + 1].cells[1];
                                parsecell.innerHTML = ParserSplitArray[i];
                                var percent = parseFloat(ParserSplitArray[i]);
                                CellTypeHighLowColor(parsecell, percent);
                            }
                            ParserSplitArray = ParserFieldArray[6].split(SEP2);
                            for (var i = 0; i < ParserSplitArray.length; i++) {
                                parsecell = parsetable.rows[i + 1].cells[2];
                                parsecell.innerHTML = ParserSplitArray[i];
                                parsecell.style.color = "white";
                            }

                            ParserSplitArray = ParserFieldArray[7].split(SEP2);
                            for (var i = 0; i < ParserSplitArray.length; i++) {
                                parsecell = parsetable.rows[i + 1].cells[3];
                                parsecell.innerHTML = ParserSplitArray[i];
                                parsecell.style.color = "#4F4";
                            }
                            ParserSplitArray = ParserFieldArray[8].split(SEP2);
                            for (var i = 0; i < ParserSplitArray.length; i++) {
                                parsecell = parsetable.rows[i + 1].cells[4];
                                parsecell.innerHTML = ParserSplitArray[i];
                                parsecell.style.color = "#F44";
                            }
                            return;
                        }

                    case "15":  // dagilim
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            if (DetaySymbol != ParserFieldArray[4]) return;
                            var datestr = ParserFieldArray[5];
                            GetEl("DivDagilimTarih").innerHTML = datestr;

                            var color = "gold";
                            if (ToEngUp(ActiveDagilimYonString) == "ALANLAR")
                                color = "#2F2";
                            else if (ToEngUp(ActiveDagilimYonString) == "SATANLAR")
                                color = "#F33";

                            var data = [];
                            parsetable = GetEl("TableDagilim");
                            for (var i = 6; i < ParserFieldArray.length; i++) {
                                ParserSplitArray = ParserFieldArray[i].split(SEP2);
                                parsetable.rows[i - 6].cells[1].innerHTML = ParserSplitArray[0];
                                parsetable.rows[i - 6].cells[2].innerHTML = ParserSplitArray[1];
                                parsetable.rows[i - 6].cells[2].style.color = color;
                                parsetable.rows[i - 6].cells[3].innerHTML = ParserSplitArray[2];
                                if (i < 11)
                                    parsetable.rows[i - 6].cells[4].innerHTML = ParserSplitArray[3];
                                data[i - 6] = parseFloat(ParserSplitArray[2]);
                            }

                            // canvas
                            var container = GetEl("DivDagilimCanvasContainer");
                            container.style.top = (parsetable.offsetTop + parsetable.offsetHeight + 5) + "px";
                            container.style.height = (GetEl("DivDagilim").offsetHeight - container.offsetTop) - 5 + "px";
                            var min = Math.min(container.clientWidth, container.clientHeight) - 0;
                            GetEl("CanvasDagilim").width = min;
                            GetEl("CanvasDagilim").height = min;

                            // pie
                            var canvas = GetEl("CanvasDagilim");
                            var ctx = canvas.getContext("2d");
                            var lastend = 0;
                            var colors = ["lawngreen", "red", "gold", "blue", "cyan", "dimgray"];
                            var offset = Math.PI / 2;
                            var total = 0;
                            for (var i = 0; i < data.length; i++)
                                total += data[i];

                            for (var i = 0; i < data.length; i++) {
                                ctx.fillStyle = colors[i];
                                ctx.beginPath();
                                ctx.moveTo(canvas.width / 2, canvas.height / 2);
                                ctx.arc(canvas.width / 2, canvas.height / 2, canvas.height / 2, lastend - offset, lastend - offset + (Math.PI * 2 * (data[i] / total)), false);
                                ctx.lineTo(canvas.width / 2, canvas.height / 2);
                                ctx.fill();
                                lastend += Math.PI * 2 * (data[i] / total);
                            }
                            return;
                        }

                    case "16":  // dgl list
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            if (DetaySymbol != ParserFieldArray[4]) return;
                            var datestr = ParserFieldArray[5];
                            GetEl("DivDglListTarih").innerHTML = datestr;

                            var color = "gold";
                            if (ToEngUp(ActiveDagilimYonString) == "ALANLAR")
                                color = "#2F2";
                            else if (ToEngUp(ActiveDagilimYonString) == "SATANLAR")
                                color = "#F33";

                            parsetable = GetEl("TableDglList");
                            ClearTable("TableDglList");
                            for (var i = 6; i < ParserFieldArray.length; i++) {
                                ParserSplitArray = ParserFieldArray[i].split(SEP2);
                                parserow = parsetable.insertRow(i - 6);
                                InsertCell(parserow, "30%", "L", "", "gainsboro", "", ParserSplitArray[0]);
                                InsertCell(parserow, "30%", "R", "", color, "", ParserSplitArray[1]);
                                InsertCell(parserow, "18%", "R", "", "white", "", ParserSplitArray[2]);
                                var yuzde = parseFloat(ParserSplitArray[2]);
                                if (yuzde != 0)
                                    InsertCell(parserow, "22%", "R", "", "yellow", "", ParserSplitArray[3]);
                                SetRowStyle(parserow, "1px", "", "");
                            }
                            return;
                        }

                    case "17":  // takvim
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;

                            var titles = ["", "Tarih", "Ülke", "Beklenti", "Önceki", "Önem", "Dönem"];
                            parsetable = GetEl("TableTakvim");
                            ClearTable("TableTakvim");
                            var linearray = ParserFieldArray[4].split("\r\n");
                            for (var i = 0; i < linearray.length; i++) {
                                ParserSplitArray = linearray[i].split(";");
                                for (var j = 0; j < ParserSplitArray.length; j++) {
                                    if (j == 5) continue;
                                    parserow = parsetable.insertRow(parsetable.rows.length);
                                    parsecell = parserow.insertCell(0);
                                    if (j == 0) {
                                        CellType(parsecell, "20%", "left", "gold", ParserSplitArray[0], "2px", true);
                                        parsecell.style.fontWeight = "bold";
                                    }
                                    else {
                                        CellType(parsecell, "20%", "left", "silver", titles[j], "2px", true);
                                    }
                                    parsecell.style.border = "0";
                                    if (j == ParserSplitArray.length - 1)
                                        parsecell.style.borderBottom = "2px teal solid";

                                    parsecell = parserow.insertCell(1);
                                    if (j == 0) {
                                        CellType(parsecell, "80%", "right", "gold", ParserSplitArray[5], "2px", true);
                                        parsecell.style.fontWeight = "bold";
                                    }
                                    else
                                        CellType(parsecell, "80%", "right", "silver", ParserSplitArray[j], "2px", true);
                                    if (j == 2 || j == 3) {
                                        parsecell.style.color = "aqua";
                                        parsecell.style.fontWeight = "bold";
                                    }
                                    parsecell.style.border = "0";
                                    if (j == ParserSplitArray.length - 1)
                                        parsecell.style.borderBottom = "2px teal solid";
                                }
                            }
                            return;
                        }

                    case "18":	// teknik analiz
                        {
                            var symbol = ParserFieldArray[2];
                            if (symbol != DetaySymbol) return;
                            BasicItem = BasicObject[symbol];
                            if (BasicItem == undefined) return;
                            if (ActiveChartPeriodElement.innerHTML != ParserFieldArray[3]) return;
                            if (ActiveIndicatorElement.innerHTML != ParserFieldArray[4]) return;
                            if ((ActivePageElement.id == "DivDetay" && ActiveDetayFooterNo == 5) || GetEl("DivTech").style.display == "inline-block") {
                                for (var i = 5; i < ParserFieldArray.length; i++) {
                                    ParserSplitArray = ParserFieldArray[i].split(SEP2);
                                    ChartBarItem = new ChartClass();
                                    ChartBarItem.DateTime = ParserSplitArray[0];
                                    ChartBarItem.Open = parseFloat(ParserSplitArray[1]);
                                    ChartBarItem.High = parseFloat(ParserSplitArray[2]);
                                    ChartBarItem.Low = parseFloat(ParserSplitArray[3]);
                                    ChartBarItem.Close = parseFloat(ParserSplitArray[4]);
                                    for (var j = 0; j < IndLineCount; j++)
                                        ChartBarItem.IndData[j] = parseFloat(ParserSplitArray[j + 5]);
                                    ChartObject[ChartBarItem.DateTime] = ChartBarItem;
                                }
                                Bars.length = 0;
                                for (var name in ChartObject)
                                    Bars.push(ChartObject[name]);
                                Bars.sort(function (a, b) { return a.DateTime.localeCompare(b.DateTime) });
                                DrawChart();
                            }
                            return;
                        }

                    case "19":	// takas kurumlar list
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;

                            var linearray = ParserFieldArray[4].split("|");
                            for (var i = 0; i < linearray.length; i++) {
                                ParserSplitArray = linearray[i].split(";");
                                BrokerAdArray.push(ParserSplitArray[0]);
                                BrokerKodArray.push(ParserSplitArray[1]);
                            }
                            return;
                        }

                    case "20":  // kurum takas
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            if (GetTakasKurumKod(ActiveTakasKurumAd) != ParserFieldArray[4]) return;
                            var linearray = ParserFieldArray[5].split("|");
                            if (linearray.length <= 1) return;
                            parsetable = GetEl("TableKurumTakas");
                            parserow = parsetable.insertRow(parsetable.rows.length);
                            InsertCell(parserow, "21%", "L", "", "", "H", "Senet");
                            InsertCell(parserow, "30%", "R", "", "", "H", "Lot");
                            InsertCell(parserow, "32%", "R", "", "", "H", "TL");
                            InsertCell(parserow, "17%", "R", "", "", "H", "%");
                            for (var i = 0; i < linearray.length; i++) {
                                ParserSplitArray = linearray[i].split(";");
                                parserow = parsetable.insertRow(parsetable.rows.length);



                                InsertCell(parserow, "", "L", "", "gainsboro", "", ParserSplitArray[0]);
                                InsertCell(parserow, "", "R", "", "gold", "", FormattedVolumePrice(ParserSplitArray[1]));
                                InsertCell(parserow, "", "R", "", "silver", "", FormattedVolumePrice(ParserSplitArray[2]));
                                InsertCell(parserow, "", "R", "", "yellow", "", ParserSplitArray[3]);
                                SetRowStyle(parserow, "1px", "", "");
                            }
                            if (parsetable.rows.length > 1) {
                                parserow = parsetable.rows[1];
                                for (var i = 0; i < parserow.cells.length; i++) {
                                    parserow.cells[i].style.color = "red";
                                    parserow.cells[i].style.fontWeight = "Bold";
                                }
                                GetEl("TextKurumTakasSearch2").value = "";
                            }
                            return;
                        }

                    case "21":  // kurum işlem
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            if (GetTakasKurumKod(ActiveTakasKurumAd) != ParserFieldArray[4]) return;

                            parsetable = GetEl("TableKurumIslem");
                            ClearTable("TableKurumIslem");
                            parserow = parsetable.insertRow(parsetable.rows.length);
                            InsertCell(parserow, "20%", "L", "", "", "H", "Senet");
                            InsertCell(parserow, "30%", "R", "", "", "H", "Toplam");
                            InsertCell(parserow, "28%", "R", "", "", "H", "Net TL");
                            InsertCell(parserow, "22%", "R", "", "", "H", "Maliyet");
                            for (var i = 5; i < ParserFieldArray.length; i++) {
                                ParserSplitArray = ParserFieldArray[i].split(SEP2);
                                parserow = parsetable.insertRow(parsetable.rows.length);
                                var netx = parseFloat(ParserSplitArray[2]);
                                var color = "gold";
                                if (netx < 0)
                                    color = "#F33";
                                else if (netx > 0)
                                    color = "#3F3";
                                var maliyet = parseFloat(ParserSplitArray[3]);
                                if (maliyet == 0) ParserSplitArray[3] = "";
                                InsertCell(parserow, "", "L", "", "gainsboro", "", ParserSplitArray[0]);
                                InsertCell(parserow, "", "R", "", "gold", "", FormattedVolumePrice(ParserSplitArray[1]));
                                InsertCell(parserow, "", "R", "", color, "", netx.toLocaleString("en-US"));
                                InsertCell(parserow, "", "R", "", "silver", "", ParserSplitArray[3]);
                                SetRowStyle(parserow, "1px", "", "");
                            }
                            GetEl("TextKurumIslemSearch2").value = "";
                            return;
                        }

                    case "SRV_KURUMISLEM_DATA_PITE":  // kurum işlem PITE
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            if (GetTakasKurumKod(ActiveTakasKurumAd) != ParserFieldArray[4]) return;

                            parsetable = GetEl("TableKurumIslemPITE");
                            ClearTable("TableKurumIslemPITE");
                            parserow = parsetable.insertRow(parsetable.rows.length);
                            InsertCell(parserow, "20%", "L", "", "", "H", "Senet");
                            InsertCell(parserow, "30%", "R", "", "", "H", "Toplam");
                            InsertCell(parserow, "28%", "R", "", "", "H", "Net TL");
                            InsertCell(parserow, "22%", "R", "", "", "H", "Maliyet");
                            for (var i = 5; i < ParserFieldArray.length; i++) {
                                ParserSplitArray = ParserFieldArray[i].split(SEP2);
                                parserow = parsetable.insertRow(parsetable.rows.length);
                                var netx = parseFloat(ParserSplitArray[2]);
                                var color = "gold";
                                if (netx < 0)
                                    color = "#F33";
                                else if (netx > 0)
                                    color = "#3F3";
                                var maliyet = parseFloat(ParserSplitArray[3]);
                                if (maliyet == 0) ParserSplitArray[3] = "";
                                InsertCell(parserow, "", "L", "", "gainsboro", "", ParserSplitArray[0]);
                                InsertCell(parserow, "", "R", "", "gold", "", FormattedVolumePrice(ParserSplitArray[1]));
                                InsertCell(parserow, "", "R", "", color, "", netx.toLocaleString("en-US"));
                                InsertCell(parserow, "", "R", "", "silver", "", ParserSplitArray[3]);
                                SetRowStyle(parserow, "1px", "", "");
                            }
                            GetEl("TextKurumIslemPITESearch2").value = "";
                            return;
                        }
                    case "22":  // sirali
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            if (ToEngUp(GetComboValue("SelectSirali")) != ParserFieldArray[4]) return;

                            var linearray = ParserFieldArray[5].split("|");
                            if (linearray.length <= 1) return;
                            parsetable = GetEl("TableSirali");
                            ClearTable("TableSirali");
                            parserow = parsetable.insertRow(parsetable.rows.length);
                            InsertCell(parserow, "20%", "C", "", "", "H", "");
                            InsertCell(parserow, "30%", "L", "", "", "H", "Senet");
                            InsertCell(parserow, "50%", "R", "", "", "H", GetComboValue("SelectSirali"));
                            for (var i = 0; i < linearray.length; i++) {
                                ParserSplitArray = linearray[i].split(";");
                                parserow = parsetable.insertRow(parsetable.rows.length);
                                InsertCell(parserow, "", "C", "", "gray", "", i + 1);
                                InsertCell(parserow, "", "L", "", "gainsboro", "", ParserSplitArray[0]);
                                InsertCell(parserow, "", "R", "", "gold", "", ParserSplitArray[1]);
                                SetRowStyle(parserow, "1px", "", "");
                            }
                            GetEl("TextSiraliSearch2").value = "";
                            return;
                        }

                    case "46":  // yuzeysel request
                        {
                            var symbol = ParserFieldArray[2];
                            if (ActivePageElement.id != "DivDetay") return;
                            if (ActiveDetayFooterNo != 0) return;
                            if (symbol != DetaySymbol) return;
                            BasicItem = BasicObject[symbol];
                            if (BasicItem == undefined) return;
                            parsetable = GetEl("TableDetayYuzeysel");
                            parsetable.rows[0].cells[0].innerHTML = ParserFieldArray[3]; //last price
                            var percentday = parseFloat(ParserFieldArray[4]); //NetPerSession
                            parsetable.rows[0].cells[1].innerHTML = "% " + ParserFieldArray[4]; //NetPerSession
                            var color = "#555";
                            if (percentday > 0)
                                color = "#0A0";
                            else if (percentday < 0)
                                color = "#A00";



                            //parsetable.rows[0].cells[0].style.backgroundColor=color;
                            parsetable.rows[0].cells[1].style.backgroundColor = color;
                            parsetable.rows[1].cells[0].innerHTML = ParserFieldArray[5]; // BidPrice
                            parsetable.rows[1].cells[1].innerHTML = ParserFieldArray[6]; // AskPrice

                            if (BasicItem.Prefix == "IMKBH" && BasicItem.SeriNo != "V") {
                                parsetable.rows[2].cells[1].innerHTML = GetGrupDefinition(BasicItem.Group);
                                parsetable.rows[2].style.display = "table-row";
                            }
                            else {
                                parsetable.rows[2].style.display = "none";
                            }
                            if (BasicItem.Prefix == "IMKBH" || BasicItem.Prefix == "VIP") {
                                parsetable.rows[3].cells[1].innerHTML = ParserFieldArray[7]; // tavan
                                parsetable.rows[4].cells[1].innerHTML = ParserFieldArray[8]; // taban
                                parsetable.rows[3].style.display = "table-row";
                                parsetable.rows[4].style.display = "table-row";
                                parsetable.rows[5].style.display = "table-row";
                            }
                            else {
                                parsetable.rows[3].style.display = "none";
                                parsetable.rows[4].style.display = "none";
                                parsetable.rows[5].style.display = "none";
                            }
                            // seans

                            parsetable.rows[6].cells[1].innerHTML = ParserFieldArray[9]; // önceki kapanış
                            parsetable.rows[7].cells[1].innerHTML = ParserFieldArray[10]; // NetDifSession
                            parsetable.rows[8].cells[1].innerHTML = ParserFieldArray[11]; //HighSession
                            parsetable.rows[9].cells[1].innerHTML = ParserFieldArray[12]; //LowSession

                            var clearbool = true;
                            if (BasicItem.Prefix == "IMKBX" || BasicItem.Prefix == "IMKBH") {
                                var licplus = LicObject["IMKBL1P"];
                                if (licplus != undefined) clearbool = false;
                            }
                            if (BasicItem.Prefix == "VIP") {
                                var licplus = LicObject["VIPL1P"];
                                if (licplus != undefined) clearbool = false;
                            }
                            // Aort Temizle
                            if (clearbool) parsetable.rows[10].cells[1].innerHTML = ""; else parsetable.rows[10].cells[1].innerHTML = ParserFieldArray[13]; // Wavr2Session


                            parsetable.rows[11].cells[1].innerHTML = ParserFieldArray[14]; // SizeSession
                            parsetable.rows[12].cells[1].innerHTML = ParserFieldArray[15]; // VolSession

                            // denge
                            if (BasicItem.Prefix == "IMKBH") {
                                parsetable.rows[13].style.display = "table-row";
                                for (var i = 14; i < 18; i++) {
                                    parsetable.rows[i].style.display = "table-row";
                                }
                                parsetable.rows[14].cells[1].innerHTML = ParserFieldArray[16]; // DengeFiyat
                                parsetable.rows[15].cells[1].innerHTML = ParserFieldArray[17]; // DengeMiktar
                                parsetable.rows[16].cells[1].innerHTML = ParserFieldArray[18]; // DengeBidKalan
                                parsetable.rows[17].cells[1].innerHTML = ParserFieldArray[19]; // DengeAskKalan
                            }
                            else {
                                for (var i = 13; i < 18; i++) {
                                    parsetable.rows[i].style.display = "none";
                                }
                            }

                            // PGÇ
                            if (BasicItem.Prefix == "IMKBH") {
                                parsetable.rows[18].style.display = "table-row";
                                parsetable.rows[19].style.display = "table-row";
                                for (var i = 20; i < 24; i++) {
                                    parsetable.rows[i].style.display = "table-row";
                                }

                                parsetable.rows[20].cells[1].innerHTML = ParserFieldArray[20]; // Giriş
                                parsetable.rows[21].cells[1].innerHTML = ParserFieldArray[21]; // Çıkış
                                parsetable.rows[22].cells[1].innerHTML = ParserFieldArray[22]; // Toplam
                                parsetable.rows[23].cells[1].innerHTML = ParserFieldArray[23]; // Fark

                                if (parseFloat(ParserFieldArray[23]) > 0)
                                    parsetable.rows[23].cells[1].style.color = HighColor;
                                else if (parseFloat(ParserFieldArray[23]) < 0)
                                    parsetable.rows[23].cells[1].style.color = LowColor;
                                else
                                    parsetable.rows[23].cells[1].style.color = LastColor;


                            }
                            else {
                                for (var i = 18; i < 24; i++) {
                                    parsetable.rows[i].style.display = "none";
                                }

                            }

                            // bilanço
                            if (BasicItem.Prefix == "IMKBH" && BasicItem.SeriNo != "V") {
                                parsetable.rows[25].style.display = "table-row";
                                for (var i = 26; i < 35; i++) {
                                    parsetable.rows[i].style.display = "table-row";
                                }

                                parsetable.rows[26].cells[1].innerHTML = ParserFieldArray[24]; // Dönem
                                parsetable.rows[27].cells[1].innerHTML = ParserFieldArray[25]; // Net kar
                                parsetable.rows[28].cells[1].innerHTML = ParserFieldArray[26]; // Öz Sermaye
                                parsetable.rows[29].cells[1].innerHTML = ParserFieldArray[27]; // Ödenmiş Sermaye
                                parsetable.rows[30].cells[1].innerHTML = ParserFieldArray[28]; //Piyasa değeri
                                parsetable.rows[31].cells[1].innerHTML = ParserFieldArray[29]; // F/K
                                parsetable.rows[32].cells[1].innerHTML = ParserFieldArray[30]; // halka Açıklık
                                parsetable.rows[33].cells[1].innerHTML = ParserFieldArray[31]; // Defter Değeri
                                parsetable.rows[34].cells[1].innerHTML = ParserFieldArray[32]; // PD / DD

                            }
                            else {
                                for (var i = 25; i < 35; i++)
                                    parsetable.rows[i].style.display = "none";
                            }



                            if (BasicItem.Prefix == "VIP") {
                                // vadeli
                                parsetable.rows[35].style.display = "table-row";
                                parsetable.rows[36].style.display = "table-row";
                                parsetable.rows[37].cells[1].innerHTML = ParserFieldArray[33];
                                parsetable.rows[38].cells[1].innerHTML = ParserFieldArray[34];
                                parsetable.rows[39].cells[1].innerHTML = ParserFieldArray[35];
                                parsetable.rows[40].cells[1].innerHTML = ParserFieldArray[36];
                                parsetable.rows[41].cells[1].innerHTML = ParserFieldArray[38];

                                for (var i = 37; i < 42; i++) {
                                    parsetable.rows[i].style.display = "table-row";
                                }
                            }
                            else {
                                for (var i = 35; i < 42; i++) {
                                    parsetable.rows[i].style.display = "none";
                                }
                            }

                            // varant
                            if (BasicItem.SeriNo == "V") {
                                parsetable.rows[43].style.display = "table-row";
                                parsetable.rows[44].style.display = "table-row";
                                for (var i = 44; i < 51; i++) {
                                    parsetable.rows[i].cells[1].innerHTML = ParserFieldArray[i - 5];
                                    parsetable.rows[i].style.display = "table-row";
                                }

                            }
                            else {
                                for (var i = 42; i < 51; i++) {
                                    parsetable.rows[i].style.display = "none";
                                }

                            }
                            return;
                        }

                    case "24":  // tavan, taban, step
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            for (var i = 4; i < ParserFieldArray.length; i++) {
                                ParserSplitArray = ParserFieldArray[i].split(SEP2);
                                var symbol = ParserSplitArray[0];
                                BasicItem = BasicObject[symbol];
                                if (BasicItem != undefined) {
                                    BasicItem.LimitUp = parseFloat(ParserSplitArray[1]);
                                    BasicItem.LimitDown = parseFloat(ParserSplitArray[2]);
                                    BasicItem.Adim = parseFloat(ParserSplitArray[3]);
                                }
                            }
                            return;
                        }

                    case "25":  // bid ask
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            for (var i = 4; i < ParserFieldArray.length; i++) {
                                ParserSplitArray = ParserFieldArray[i].split(SEP2);
                                var symbol = ParserSplitArray[0];
                                BasicItem = BasicObject[symbol];
                                if (BasicItem != undefined) {
                                    BasicItem.BidPrice = parseFloat(ParserSplitArray[1]);
                                    BasicItem.AskPrice = parseFloat(ParserSplitArray[2]);
                                }
                                DisplayWatchlistData(symbol);
                            }
                            return;
                        }

                    case "26":  // real time update
                        {
                            YayinState = true;
                            YayinTime = new Date();
                            CurrentTime = ParserFieldArray[2];
                            SaatCell.innerHTML = CurrentTime;

                            for (var i = 3; i < ParserFieldArray.length; i++) {
                                ParserSplitArray = ParserFieldArray[i].split(SEP2);
                                var symbol = SymbolDecode(ParserSplitArray[0], 1);



                                BasicItem = BasicObject[symbol];
                                if (BasicItem != undefined) {
                                    var lic = LicObject[BasicItem.Prefix];
                                    if (lic == undefined)
                                        lic = LicObject["COMEX"];
                                    if (lic == undefined) continue;

                                    var prevlastprice = BasicItem.LastPrice;
                                    var prevbidprice = BasicItem.BidPrice;
                                    var prevaskprice = BasicItem.AskPrice;
                                    var lastreceived = false;
                                    var bidaskreceived = false;

                                    for (var j = 1; j < ParserSplitArray.length; j++) {
                                        var codestr = ParserSplitArray[j].substr(0, 1);
                                        var valnum = parseFloat(ParserSplitArray[j].substr(1));
                                        if (isNaN(valnum)) continue;
                                        switch (codestr) {
                                            case "0": BasicItem.LastPrice = valnum; lastreceived = true; break;
                                            case "1": BasicItem.DayClose = valnum; break;
                                            case "2": BasicItem.BidPrice = valnum; bidaskreceived = true; break;
                                            case "3": BasicItem.AskPrice = valnum; bidaskreceived = true; break;
                                        }
                                    }
                                    BasicItem.CalculatePercent();
                                    if (prevlastprice != 0 && lastreceived) {
                                        BasicItem.UpdateBool = true;
                                        BasicItem.UpdateTime = new Date();
                                    }
                                    if ((prevbidprice != 0 && bidaskreceived) || (prevaskprice != 0 && bidaskreceived)) {
                                        BasicItem.BidAskBool = true;
                                        BasicItem.UpdateTime = new Date();
                                    }


                                    DisplayWatchlistData(symbol);

                                }
                            }
                            return;
                        }

                    //case "27":  // AJAX real time last prices // cccc
                    //    {
                    //        //if (Username != ParserFieldArray[2]) return;
                    //        //if (SessionId != ParserFieldArray[3]) return;
                    //        //YayinState = true;
                    //        //YayinTime = new Date();
                    //        //CurrentTime = ParserFieldArray[4];
                    //        //SaatCell.innerHTML = CurrentTime;
                    //        //BasicUpdateTime = ParserFieldArray[5];
                    //        //for (var i = 6; i < ParserFieldArray.length; i++)
                    //        //{
                    //        //    ParserSplitArray = ParserFieldArray[i].split(SEP2);
                    //        //    var symbol = ParserSplitArray[0];

                    //        //    BasicItem = BasicObject[symbol];
                    //        //    if (BasicItem != undefined)
                    //        //    {
                    //        //        var lic = LicObject[BasicItem.Prefix];
                    //        //        if (lic == undefined) continue;
                    //        //        var prevlastprice = BasicItem.LastPrice;
                    //        //        var prevbidprice = BasicItem.BidPrice;
                    //        //        var prevaskprice = BasicItem.AskPrice;
                    //        //        BasicItem.LastPrice = parseFloat(ParserSplitArray[1]);
                    //        //        BasicItem.BidPrice = parseFloat(ParserSplitArray[2]);
                    //        //        BasicItem.AskPrice = parseFloat(ParserSplitArray[3]);
                    //        //        if (prevlastprice != BasicItem.LastPrice)
                    //        //        {
                    //        //            BasicItem.UpdateBool = true;
                    //        //            BasicItem.UpdateTime = new Date();
                    //        //        }
                    //        //        BasicItem.CalculatePercent();

                    //        //        if (WatchlistType == 0)
                    //        //        {
                    //        //            if (prevlastprice != BasicItem.LastPrice)
                    //        //            {
                    //        //                BasicItem.UpdateBool = true;
                    //        //                BasicItem.UpdateTime = new Date();
                    //        //                DisplayWatchlistData(symbol);
                    //        //            }
                    //        //        }
                    //        //        else if (WatchlistType == 1)
                    //        //        {
                    //        //            if (prevbidprice != BasicItem.BidPrice || prevaskprice != BasicItem.AskPrice)
                    //        //            {
                    //        //                BasicItem.UpdateBool = true;
                    //        //                BasicItem.UpdateTime = new Date();
                    //        //                DisplayWatchlistData(symbol);
                    //        //            }
                    //        //        }
                    //        //        else if (WatchlistType == 2)
                    //        //        {
                    //        //            if (prevlastprice != BasicItem.LastPrice)
                    //        //            {
                    //        //                BasicItem.UpdateBool = true;
                    //        //                BasicItem.UpdateTime = new Date();
                    //        //                DisplayWatchlistData(symbol);
                    //        //            }
                    //        //            if (prevbidprice != BasicItem.BidPrice || prevaskprice != BasicItem.AskPrice)
                    //        //            {
                    //        //                BasicItem.BidAskBool = true;
                    //        //                BasicItem.UpdateTime = new Date();
                    //        //                DisplayWatchlistData(symbol);
                    //        //            }
                    //        //        }
                    //        //    }
                    //        //}
                    //        //return;
                    //    }

                    case "28":
                        {
                            NewsUpdateTime = ParserFieldArray[2];
                            if (ParserFieldArray.length < 3) return;

                            for (var i = 3; i < ParserFieldArray.length; i++) {
                                ParserSplitArray = ParserFieldArray[i].split(SEP2);
                                var newsid = ParserSplitArray[0];

                                NewsItem = NewsObject[newsid];
                                if (NewsItem == undefined) {
                                    NewsObject[newsid] = new NewsClass();
                                    NewsItem = NewsObject[newsid];
                                }

                                NewsItem.NewsID = newsid;
                                NewsItem.DateStr = ParserSplitArray[1];
                                NewsItem.NewsNo = ParserSplitArray[2];
                                NewsItem.Header = ParserSplitArray[3];
                                NewsItem.SortKey = NewsItem.DateStr + ";" + NewsItem.NewsID;


                            }
                            if (ActivePageElement.id == "DivHaber")
                                FillNewsTable();


                            return;
                        }

                    case "29":
                        {
                            NewsObject = {};
                            NewsUpdateTime = ParserFieldArray[2];
                            if (ParserFieldArray.length < 3) return;

                            for (var i = 3; i < ParserFieldArray.length; i++) {
                                ParserSplitArray = ParserFieldArray[i].split(SEP2);
                                var newsid = ParserSplitArray[0];

                                NewsItem = NewsObject[newsid];
                                if (NewsItem == undefined) {
                                    NewsObject[newsid] = new NewsClass();
                                    NewsItem = NewsObject[newsid];
                                }

                                NewsItem.NewsID = newsid;
                                NewsItem.DateStr = ParserSplitArray[1];
                                NewsItem.NewsNo = ParserSplitArray[2];
                                NewsItem.Header = ParserSplitArray[3];
                                NewsItem.SortKey = NewsItem.DateStr + ";" + NewsItem.NewsID;
                            }
                            if (ActivePageElement.id == "DivHaber")
                                FillNewsTable();
                            return;
                        }

                    case "30":	// renkler
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            var table = GetEl("TableRenkPalet");
                            if (table.rows.length > 0) return;

                            ParserSplitArray = ParserFieldArray[4].split("|");
                            for (var i = 0; i < ParserSplitArray.length; i++) {
                                parserow = table.insertRow(table.rows.length);
                                parsecell = parserow.insertCell(0);
                                CellType(parsecell, "15%", "center", "silver", i, "2%", false);
                                parsecell = parserow.insertCell(1);
                                CellType(parsecell, "50%", "left", "silver", ParserSplitArray[i], "2%", false);
                                parsecell = parserow.insertCell(2);
                                CellType(parsecell, "25%", "center", "silver", "", "2%", false);
                                parsecell.style.backgroundColor = ParserSplitArray[i];
                            }
                            // click events
                            for (var i = 0; i < table.rows.length; i++) {
                                var row = table.rows[i];
                                var currentcell = table.rows[i].cells[2];
                                var cellclick = function (rowno) {
                                    return function () {
                                        RenkElement.style.backgroundColor = table.rows[rowno].cells[2].style.backgroundColor;
                                        RenkElement.style.color = table.rows[rowno].cells[2].style.color;
                                        HideThis(GetEl("DivRenkPalet"));
                                    };
                                };
                                currentcell.onclick = cellclick(i);
                            }
                            return;
                        }

                    case "31":	// mesajlar
                        {
                            if (GetEl("TableYeniMesajGruplar").rows.length > 0) return;
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            if (ParserFieldArray[4] == "1") GetEl("DivMesajlarYaz").style.visibility = "visible";

                            // gruplar
                            var table = GetEl("TableYeniMesajGruplar");
                            ClearTable("TableYeniMesajGruplar");
                            ParserSplitArray = ParserFieldArray[5].split("|");
                            for (var i = 0; i < ParserSplitArray.length; i++) {
                                parserow = table.insertRow(table.rows.length);
                                parsecell = parserow.insertCell(0);
                                CellType(parsecell, "20%", "center", "silver", "", "2px", false);
                                CheckTableCell(parsecell, false);
                                parsecell = parserow.insertCell(1);
                                CellType(parsecell, "80%", "left", "silver", ParserSplitArray[i], "2px", false);
                            }
                            // click events
                            for (var i = 0; i < table.rows.length; i++) {
                                var row = table.rows[i];
                                var currentcell = table.rows[i].cells[0];
                                var cellclick = function (rowno) {
                                    return function () {
                                        ReverseTableCell(table.rows[rowno].cells[0]);
                                    };
                                };
                                currentcell.onclick = cellclick(i);
                            }

                            // mesajlar
                            var table2 = GetEl("TableMesajlar");
                            if (ParserFieldArray[6] != "") {
                                ParserSplitArray = ParserFieldArray[6].split("|");
                                ClearTable("TableMesajlar");
                                for (var i = 0; i < ParserSplitArray.length; i++) {
                                    var temparray = ParserSplitArray[i].split(SEP2);
                                    var msgsender = temparray[0];
                                    var msgtimestr = temparray[1];
                                    var msgid = temparray[2];
                                    var msgtext = temparray[3].replace(/\r\n/g, "<br>").replace(/\n/g, "<br>");
                                    var headerline = msgsender + AddSpace(10) + msgtimestr;
                                    var pos = msgtext.indexOf("[URL]");
                                    if (pos >= 0) {
                                        msgurl = msgtext.substr(pos + 5).replace(/<br>/g, "").replace(" ", "");
                                        msgtext = msgtext.substr(0, pos);
                                        MesajDictionary[msgtimestr] = msgurl;
                                    }
                                    parserow = table2.insertRow(table2.rows.length);
                                    parsecell = parserow.insertCell(0);
                                    CellType(parsecell, "100%", "left", "gainsboro", headerline + "<br>" + "<br>" + msgtext + "<br>" + AddSpace(1), "2px", true);
                                    parsecell.style.borderBottom = "2px gold solid";
                                }
                            }
                            // click events
                            for (var i = 0; i < table2.rows.length; i++) {
                                var row = table2.rows[i];
                                var currentcell = row.cells[0];
                                var cellclick = function (rowno) {
                                    return function () {
                                        var msgstr = table2.rows[rowno].cells[0].innerHTML;
                                        var pos = msgstr.indexOf("<br>");
                                        var urlkey = msgstr.substr(pos - 8, 8);
                                        var msgurl = MesajDictionary[urlkey];
                                        if (msgurl != undefined) {
                                            SendRequest("X" + SEP1 + "REQ_MESAJ_COUNTER" + SEP1 + Username + SEP1 + SessionId);
                                            if (ToEngUp(msgurl.substr(msgurl.length - 4, 4)) == ".PNG") {
                                                var el = GetEl("DivMesajDosya");
                                                el.style.display = "inline";
                                                ZIndex++;
                                                el.style.zIndex = ZIndex;
                                                GetEl("ImgMesajDosya").src = msgurl;
                                                GetEl("ImgMesajDosya").style.display = "inline-block";
                                            }
                                            else {
                                                window.open(msgurl);
                                            }
                                        }
                                    };
                                };
                                currentcell.onclick = cellclick(i);
                            }
                            MesajCell.innerHTML = table2.rows.length.toString() + AddSpace(2) + "mesaj";
                            return;
                        }

                    case "32":	// yeni mesaj geldi
                        {
                            if (MesajOnayStr == "1") return;
                            var savestr = ParserFieldArray[2];
                            var temparray = ParserFieldArray[3].split(SEP2);
                            var msgsender = temparray[0];
                            var msgtimestr = temparray[1];
                            var msgid = temparray[2];
                            var msgtext = temparray[3].replace(/\r\n/g, "<br>").replace(/\n/g, "<br>");
                            var headerline = msgsender + AddSpace(10) + msgtimestr;
                            var pos = msgtext.indexOf("[URL]");
                            if (pos >= 0) {
                                msgurl = msgtext.substr(pos + 5).replace(/<br>/g, "").replace(" ", "");
                                msgtext = msgtext.substr(0, pos);
                                MesajDictionary[msgtimestr] = msgurl;
                            }
                            var elmesaj = GetEl("DivGelenMesaj");
                            elmesaj.style.display = "inline-block";
                            BringToFront(elmesaj);
                            GetEl("DivGelenMesajText").innerHTML = headerline + "<br>" + "<br>" + msgtext + "<br>" + AddSpace(1);
                            var divclick = function (str) {
                                return function () {
                                    var msgstr = GetEl("DivGelenMesajText").innerHTML;
                                    var pos = msgstr.indexOf("<br>");
                                    var urlkey = msgstr.substr(pos - 8, 8);
                                    var msgurl = MesajDictionary[urlkey];
                                    if (msgurl != undefined) {
                                        SendRequest("X" + SEP1 + "REQ_MESAJ_COUNTER" + SEP1 + Username + SEP1 + SessionId);
                                        if (ToEngUp(msgurl.substr(msgurl.length - 4, 4)) == ".PNG") {
                                            var el = GetEl("DivMesajDosya");
                                            el.style.display = "inline";
                                            ZIndex++;
                                            el.style.zIndex = ZIndex;
                                            GetEl("ImgMesajDosya").src = msgurl;
                                            GetEl("ImgMesajDosya").style.display = "inline-block";
                                        }
                                        else {
                                            window.open(msgurl);
                                        }
                                    }
                                };
                            };
                            GetEl("DivGelenMesajText").onclick = divclick(msgtext);

                            if (savestr == "1") {
                                var table = GetEl("TableMesajlar");
                                parserow = table.insertRow(0);
                                parsecell = parserow.insertCell(0);
                                CellType(parsecell, "100%", "left", "gainsboro", headerline + "<br>" + "<br>" + msgtext + "<br>" + AddSpace(1), "2px", true);
                                parsecell.style.borderBottom = "2px gold solid";

                                // click events
                                var table2 = GetEl("TableMesajlar");
                                for (var i = 0; i < table2.rows.length; i++) {
                                    var row = table2.rows[i];
                                    var currentcell = row.cells[0];
                                    var cellclick = function (rowno) {
                                        return function () {
                                            var msgstr = table2.rows[rowno].cells[0].innerHTML;
                                            var pos = msgstr.indexOf("<br>");
                                            var urlkey = msgstr.substr(pos - 8, 8);
                                            var msgurl = MesajDictionary[urlkey];
                                            if (msgurl != undefined) {
                                                SendRequest("X" + SEP1 + "REQ_MESAJ_COUNTER" + SEP1 + Username + SEP1 + SessionId);
                                                if (ToEngUp(msgurl.substr(msgurl.length - 4, 4)) == ".PNG") {
                                                    var el = GetEl("DivMesajDosya");
                                                    el.style.display = "inline";
                                                    ZIndex++;
                                                    el.style.zIndex = ZIndex;
                                                    GetEl("ImgMesajDosya").src = msgurl;
                                                    GetEl("ImgMesajDosya").style.display = "inline-block";
                                                }
                                                else {
                                                    window.open(msgurl);
                                                }
                                            }
                                        };
                                    };
                                    currentcell.onclick = cellclick(i);
                                }
                            }
                            MesajCell.innerHTML = table2.rows.length + AddSpace(2) + "mesaj";
                            return;
                        }

                    case "33":  // derinlik
                        {

                            var symbol = ParserFieldArray[2];
                            var item = BasicObject[symbol];
                            if (item == undefined) return;
                            var basic = BasicObject[DetaySymbol];
                            if (basic == undefined) return;
                            if (item.GetOriginal(DetaySymbol) != basic.GetOriginal()) return;
                            DerinlikUpdateTime = ParserFieldArray[3];
                            if (ActivePageElement.id != "DivDetay") return;
                            if (ActiveDetayFooterNo != 2) return;
                            DerinlikRepaintTime = new Date();
                            DerinlikRepaintBool = true;
                            for (var i = 4; i < ParserFieldArray.length; i++) {
                                ParserSplitArray = ParserFieldArray[i].split(SEP2);
                                var rowno = parseInt(ParserSplitArray[1]);
                                parserow = DerinlikTable.rows[rowno];
                                if (ParserSplitArray[0] == "B") {
                                    if (parserow.cells[0].innerHTML.replace(",", "").replace(".", "") != ParserSplitArray[4] && parserow.cells[0].innerHTML != "") {
                                        parserow.cells[0].style.backgroundColor = "#080";
                                        parserow.cells[0].style.color = "white";
                                    }
                                    parserow.cells[0].innerHTML = parseFloat(ParserSplitArray[4]).Format();

                                    if (parserow.cells[1].innerHTML.replace(",", "").replace(".", "") != ParserSplitArray[3] && parserow.cells[1].innerHTML != "") {
                                        parserow.cells[1].style.backgroundColor = "#080";
                                        parserow.cells[1].style.color = "white";
                                    }
                                    parserow.cells[1].innerHTML = parseFloat(ParserSplitArray[3]).Format();
                                    if (parserow.cells[2].innerHTML != item.GetPriceStr(parseFloat(ParserSplitArray[2])) && parserow.cells[2].innerHTML != "") {
                                        parserow.cells[2].style.backgroundColor = "#080";
                                        parserow.cells[2].style.color = "white";
                                    }
                                    parserow.cells[2].innerHTML = item.GetPriceStr(parseFloat(ParserSplitArray[2]));

                                    item.MarketMakerBid = item.GetPriceStr(parseFloat(ParserSplitArray[5]));

                                }
                                if (ParserSplitArray[0] == "A") {
                                    if (parserow.cells[4].innerHTML != item.GetPriceStr(parseFloat(ParserSplitArray[2])) && parserow.cells[4].innerHTML != "") {
                                        parserow.cells[4].style.backgroundColor = "#800";
                                        parserow.cells[4].style.color = "white";
                                    }
                                    parserow.cells[4].innerHTML = item.GetPriceStr(parseFloat(ParserSplitArray[2]));
                                    if (parserow.cells[5].innerHTML.replace(",", "").replace(".", "") != ParserSplitArray[3] && parserow.cells[5].innerHTML != "") {
                                        parserow.cells[5].style.backgroundColor = "#800";
                                        parserow.cells[5].style.color = "white";
                                    }
                                    parserow.cells[5].innerHTML = parseFloat(ParserSplitArray[3]).Format();

                                    if (parserow.cells[6].innerHTML.replace(",", "").replace(".", "") != ParserSplitArray[3] && parserow.cells[6].innerHTML != "") {
                                        parserow.cells[6].style.backgroundColor = "#800";
                                        parserow.cells[6].style.color = "white";
                                    }
                                    parserow.cells[6].innerHTML = parseFloat(ParserSplitArray[4]).Format();

                                    item.MarketMakerAsk = item.GetPriceStr(parseFloat(ParserSplitArray[5]));
                                }
                            }

                            if (DerinlikMaxKadene == 25) {
                                GetEl("DivTableDetayDerinlik").style.height = (DerinlikMaxKadene * DerinlikTable.rows[0].clientHeight) + "px";
                                GetEl("TableDerinlikYzy").style.display = "none";
                                GetEl("DivDetayDerinlik").style.height = GetEl("DivDetayDerinlik").clientHeight + "px";
                                GetEl("DivDetayDerinlik").style.overflow = "auto";
                            }
                            else {
                                GetEl("DivTableDetayDerinlik").style.height = (DerinlikMaxKadene * DerinlikTable.rows[0].clientHeight) + "px";
                                GetEl("TableDerinlikYzy").style.display = "table";
                            }

                            // GetEl("DivTableDetayDerinlik").style.height = (DerinlikMaxKadene * DerinlikTable.rows[0].clientHeight) + "px";
                            //console.log(GetEl("TableDetayFooter").clientHeight);
                            //GetEl("DivTableDetayDerinlik").style.height = (GetEl("DivDetayDerinlik").clientHeight - GetEl("TableDerinlikYzy").clientHeight - GetEl("TableDetayDerinlikToplam").clientHeight - GetEl("TableDetayFooter").clientHeight)  + "px";
                            //GetEl("DivDetayDerinlik").style.height = GetEl("DivDetayDerinlik").clientHeight + "px";
                            //GetEl("DivDetayDerinlik").style.overflow = "auto";
                            DerinlikToplam();
                            return;
                        }

                    case "34":  // işlemler
                        {
                            //var el=GetEl("DivDrnIslem");
                            //el.style.height=(el.parentNode.clientHeight-el.offsetTop-0)+"px";

                            var symbol = ParserFieldArray[2];
                            var item = BasicObject[symbol];
                            if (item == undefined) return;
                            var basic = BasicObject[DetaySymbol];
                            if (basic == undefined) return;
                            if (item.GetOriginal(DetaySymbol) != basic.GetOriginal()) return;
                            if (ActivePageElement.id != "DivDetay") return;
                            if (ActiveDetayFooterNo != 2) return;
                            IslemUpdateTime = ParserFieldArray[3];
                            SonIslemNo = ParserFieldArray[4];

                            var updatebool = true;
                            if (DrnIslemTable.rows.length == 0) updatebool = false;
                            IslemRepaintTime = new Date();
                            for (var i = 5; i < ParserFieldArray.length; i++) {
                                ParserSplitArray = ParserFieldArray[i].split(SEP2);



                                // pite kontrolü
                                if (ParserSplitArray.length == 6 && item.Prefix == "IMKBH") {

                                    var table = GetEl("TableDrnIslemColName");
                                    table.rows[0].cells[0].style.width = "0%";
                                    table.rows[0].cells[1].style.width = "20%";
                                    table.rows[0].cells[2].style.width = "20%";
                                    table.rows[0].cells[4].style.width = "30%";
                                    table.rows[0].cells[5].style.width = "30%";
                                    table.rows[0].cells[4].innerHTML = "Alan";
                                    table.rows[0].cells[5].innerHTML = "Satan";

                                }
                                else {
                                    var table = GetEl("TableDrnIslemColName");
                                    table.rows[0].cells[0].style.width = "34%";
                                    table.rows[0].cells[1].style.width = "33%";
                                    table.rows[0].cells[2].style.width = "33%";
                                    table.rows[0].cells[4].style.width = "0";
                                    table.rows[0].cells[5].style.width = "0";
                                    table.rows[0].cells[4].innerHTML = "";
                                    table.rows[0].cells[5].innerHTML = "";
                                }

                                var color = "silver";
                                var backcolor = "black";
                                if (updatebool) {
                                    IslemRepaintCount++;
                                    color = "white";
                                    backcolor = "#666";
                                    if (ParserSplitArray[3] == "1")
                                        backcolor = "#080";
                                    else if (ParserSplitArray[3] == "2")
                                        backcolor = "#800";
                                }
                                else {
                                    if (ParserSplitArray[3] == "1")
                                        color = "#2F2";
                                    else if (ParserSplitArray[3] == "2")
                                        color = "#F22";
                                }

                                if (IslemKonsolideBool && IslemPrevTime == ParserSplitArray[0] && IslemPrevFiyat == ParserSplitArray[1] && IslemPrevYon == ParserSplitArray[3]) {
                                    parserow = DrnIslemTable.rows[0];
                                    var lot = parseFloat(parserow.cells[2].innerHTML.replace(",", "").replace(".", ""));
                                    lot += parseFloat(ParserSplitArray[2]);
                                    parserow.cells[2].innerHTML = lot.Format();
                                }
                                else {
                                    if (updatebool)
                                        IslemRepaintCount++;
                                    if (PiteBool && item.Prefix == "IMKBH") {
                                        parserow = DrnIslemTable.insertRow(0);
                                        InsertCell(parserow, "0%", "L", backcolor, color, "0", ParserSplitArray[0]);
                                        parserow.cells[0].style.paddingLeft = "5%";
                                        InsertCell(parserow, "20%", "C", backcolor, color, "0", ParserSplitArray[1]);
                                        InsertCell(parserow, "20%", "R", backcolor, color, "0", parseFloat(ParserSplitArray[2]).Format());
                                        parserow.cells[2].style.paddingRight = "5%";
                                        InsertCell(parserow, "0", "R", backcolor, "black", "0", ParserSplitArray[3]);
                                        InsertCell(parserow, "30", "L", backcolor, color, "0", ParserSplitArray[4]);
                                        InsertCell(parserow, "30", "L", backcolor, color, "0", ParserSplitArray[5]);
                                        SetRowStyle(parserow, "0", "0", "");

                                    }
                                    else {
                                        parserow = DrnIslemTable.insertRow(0);
                                        InsertCell(parserow, "34%", "L", backcolor, color, "0", ParserSplitArray[0]);
                                        parserow.cells[0].style.paddingLeft = "5%";
                                        InsertCell(parserow, "33%", "C", backcolor, color, "0", ParserSplitArray[1]);
                                        InsertCell(parserow, "33%", "R", backcolor, color, "0", parseFloat(ParserSplitArray[2]).Format());
                                        parserow.cells[2].style.paddingRight = "5%";
                                        InsertCell(parserow, "0", "R", backcolor, "black", "0", ParserSplitArray[3]);
                                        SetRowStyle(parserow, "0", "0", "");
                                    }
                                }
                                IslemPrevTime = ParserSplitArray[0];
                                IslemPrevFiyat = ParserSplitArray[1];
                                IslemPrevYon = ParserSplitArray[3];
                            }
                            return;
                        }

                    case "41":  // derinlik yzy // cccc
                        {
                            var el = GetEl("DivDrnIslem");
                            el.style.height = (el.parentNode.clientHeight - el.offsetTop - 0) + "px";

                            var symbol = ParserFieldArray[2];
                            var item = BasicObject[symbol];
                            if (item == undefined) return;
                            //if (symbol != DetaySymbol) return;

                            var basic = BasicObject[DetaySymbol];
                            if (basic == undefined) return;
                            if (item.GetOriginal(DetaySymbol) != basic.GetOriginal()) return;
                            for (var i = 3; i < ParserFieldArray.length; i++)
                                DrnYuzeyselRow.cells[i - 3].innerHTML = ParserFieldArray[i];
                            return;
                        }

                    case "35":  // connection established
                        {
                            ConnectionEstablished = true;
                            PiteBool = false;  //  cccc
                            BistDerinlikLisansBool = false;
                            BistIslemlerLisansBool = false;
                            ViopDerinlikLisansBool = false;
                            ViopIslemlerLisansBool = false;
                            LicObject = {};
                            CurrentTime = ParserFieldArray[2];
                            ParserSplitArray = ParserFieldArray[3].split("|");
                            for (var i = 0; i < ParserSplitArray.length; i++) {
                                if (ParserSplitArray[i].length > 1)
                                    LicObject[ParserSplitArray[i]] = true;
                                if (ParserSplitArray[i] == "IMKBX")
                                    KapEnabled = true;
                                if (ParserSplitArray[i] == "PITE")
                                    PiteBool = true;  // cccc
                                if (ParserSplitArray[i] == "IMKBL2")
                                    BistDerinlikLisansBool = true;
                                if (ParserSplitArray[i] == "IMKBL1P")
                                    BistIslemlerLisansBool = true;
                                if (ParserSplitArray[i] == "VIPL2")
                                    ViopDerinlikLisansBool = true;
                                if (ParserSplitArray[i] == "VIPL1P")
                                    ViopIslemlerLisansBool = true;

                                if (ParserSplitArray[i] == "CBOT")
                                    ChartGoruntuLisansBool = true;
                                if (ParserSplitArray[i] == "DJI")
                                    FSystemLisansBool = true;
                            }


                            if (BistDerinlikLisansBool) BistIslemlerLisansBool = true;  //  cccc
                            if (ViopDerinlikLisansBool) ViopIslemlerLisansBool = true;

                            SozlesmeKabulDateStr = ParserFieldArray[5];
                            SozlesmeStr = ParserFieldArray[6];
                            MesajOnayStr = ParserFieldArray[7];
                            MesajUyariStr = ParserFieldArray[8];
                            SaatCell.innerHTML = CurrentTime;
                            DeviceHeight = window.innerHeight;
                            if (DetaySymbol == "")
                                DetaySymbol = "XU100";
                            YayinState = true;
                            YayinTime = new Date();

                            // SendRequest("X" + SEP1 + "REQ_BIST_BRUTTAKAS" + SEP1 + Username + SEP1 + SessionId);

                            if (FireBaseToken != "" && FireBaseToken != "null" && FireBaseToken != undefined)
                                SendRequest("X" + SEP1 + "REQ_FBT" + SEP1 + Username + SEP1 + SessionId + SEP1 + FireBaseToken + SEP1 + Versiyon + SEP1 + "1");

                            var loginkey = localStorage["TRADELOGINKEY"];
                            if (loginkey != undefined) {
                                var fieldarray = loginkey.split("|");
                                if (fieldarray[0] == "1" && fieldarray[1] == "1") {
                                    HesapKurum = fieldarray[2];
                                    HesapParola = fieldarray[3];
                                    HesapSifre = fieldarray[4];
                                    HesapNo = fieldarray[5];
                                    HesapAltHesap = fieldarray[6];
                                    HesapMusteriTip = fieldarray[7];
                                    DisplayPortfoyBool = false;
                                    if (ParolasizKurumlar.contains(HesapKurum)) HesapParola = "";
                                    SendRequest("X" + SEP1 + "B" + SEP1 + Username + SEP1 + SessionId);
                                }
                            }

                            var kurumnamestr = "";
                            if (ToEngUp(Username).indexOf(ToEngUp("INVEST")) == 0)
                                kurumnamestr = "INVEST AZ";
                            if (kurumnamestr != "") {
                                KurumlarArray.length = 0;
                                KurumlarArray.push(kurumnamestr);
                                HesapKurum = kurumnamestr;
                            }

                            return;
                        }

                    case "43":  // sembol definitions
                        {


                            for (var i = 2; i < ParserFieldArray.length; i++) {
                                ParserSplitArray = ParserFieldArray[i].split(SEP2);
                                var prefix = ParserSplitArray[0];
                                var symbol = ParserSplitArray[1];
                                var composite = prefix + "'" + symbol;
                                BasicItem = BasicObject[symbol];


                                if (prefix == "IMKBX" && symbol != "XU100" && symbol != "XU030" && LicObject["IMKBX"] == undefined) continue;

                                if (BasicItem == undefined) {
                                    BasicObject[symbol] = new BasicClass();
                                    BasicItem = BasicObject[symbol];
                                }
                                BasicItem.Symbol = symbol;
                                BasicItem.Prefix = prefix;
                                BasicItem.Composite = composite;
                                BasicItem.DecPoint = parseInt(ParserSplitArray[2]);
                                BasicItem.SeriNo = ParserSplitArray[3];
                                BasicItem.IndexType = ParserSplitArray[4];
                                BasicItem.SubMarket = ParserSplitArray[5];
                                BasicItem.Group = ParserSplitArray[6];
                                BasicItem.LastPrice = parseFloat(ParserSplitArray[7]);
                                BasicItem.DayClose = parseFloat(ParserSplitArray[8]);
                                BasicItem.BidPrice = parseFloat(ParserSplitArray[9]);
                                BasicItem.AskPrice = parseFloat(ParserSplitArray[10]);

                                if (BasicItem.Prefix != "VIP" && ParserSplitArray.length == 12) {
                                    if (ParserSplitArray[11] == "1") BasicItem.BrutTakasBool = true; else BasicItem.BrutTakasBool = false;
                                }
                                else if (BasicItem.Prefix == "VIP" && ParserSplitArray.length == 12) {
                                    BasicItem.Original = ParserSplitArray[11];
                                }
                                else if (BasicItem.Prefix == "VIP" && ParserSplitArray.length == 13) {
                                    BasicItem.Original = ParserSplitArray[11];
                                }


                                BasicItem.UpdateBool = false;
                                BasicItem.BidAskBool = false;
                                BasicItem.CalculatePercent();
                            }

                            ReadWatchlistSymbols();
                            FillWatchlistTable();
                            GetEl("DivLogin").style.visibility = "hidden";
                            ActivateWindow();



                            return;
                        }

                    case "36":  // varant sembol definitions
                        {
                            for (var i = 2; i < ParserFieldArray.length; i++) {
                                ParserSplitArray = ParserFieldArray[i].split(SEP2);
                                var composite = SymbolDecode(ParserSplitArray[0], 0);
                                var symbolnamearray = composite.split("'");
                                var prefix = symbolnamearray[0];
                                var symbol = symbolnamearray[1];

                                var lic = LicObject[prefix];
                                if (lic == undefined)
                                    lic = LicObject["COMEX"];
                                if (lic == undefined) continue;

                                BasicItem = BasicObject[symbol];
                                if (BasicItem == undefined) {
                                    BasicObject[symbol] = new BasicClass();
                                    BasicItem = BasicObject[symbol];
                                }
                                BasicItem.Symbol = symbol;
                                BasicItem.Prefix = prefix;
                                BasicItem.Composite = composite;
                                BasicItem.DecPoint = parseInt(ParserSplitArray[1]);
                                for (var j = 2; j < ParserSplitArray.length; j++) {
                                    var codestr = ParserSplitArray[j].substr(0, 1);
                                    var valstr = ParserSplitArray[j].substr(1);
                                    switch (codestr) {
                                        case "4": BasicItem.SeriNo = valstr; break;
                                        case "5": BasicItem.IndexType = valstr; break;
                                        case "6": BasicItem.SubMarket = valstr; break;
                                        case "7": BasicItem.Group = valstr; break;
                                        case "0": BasicItem.LastPrice = parseFloat(valstr); break;
                                        case "1": BasicItem.DayClose = parseFloat(valstr); break;
                                        case "2": BasicItem.BidPrice = parseFloat(valstr); break;
                                        case "3": BasicItem.AskPrice = parseFloat(valstr); break;
                                        case "N": BasicItem.LimitUp = parseFloat(valstr); break;
                                        case "O": BasicItem.LimitDown = parseFloat(valstr); break;
                                        case "h": BasicItem.Original = valstr; break;
                                        case "8": BasicItem.Adim = parseFloat(valstr); break;
                                    }
                                }
                                BasicItem.UpdateBool = false;
                                BasicItem.BidAskBool = false;
                                BasicItem.CalculatePercent();
                            }
                            ReadWatchlistSymbols();
                            FillWatchlistTable();
                            ActivateWindow();

                            //var kapalicarsistr = localStorage["KapaliCarsiStatus"];
                            //if (kapalicarsistr != undefined)
                            //{
                            //    if (kapalicarsistr == "1") KapaliCarsiStatus = "1";
                            //    if (KapaliCarsiStatus == "1")
                            //    {
                            //        ActivePageElement = GetEl("DivKapalicarsi");
                            //        ActivateWindow();
                            //    }
                            //}

                            //var loginkey = localStorage["TRADELOGINKEY"];
                            //if (loginkey != undefined)
                            //{
                            //    var fieldarray = loginkey.split("|");
                            //    if (fieldarray[0] == "1" && fieldarray[1] == "1")
                            //    {
                            //        HesapKurum = fieldarray[2];
                            //        HesapParola = fieldarray[3];
                            //        HesapSifre = fieldarray[4];
                            //        HesapNo = fieldarray[5];
                            //        HesapAltHesap = fieldarray[6];
                            //        DisplayPortfoyBool = false;
                            //        if (ParolasizKurumlar.contains(HesapKurum)) HesapParola = "";
                            //        SendRequest("X" + SEP1 + "B" + SEP1 + Username + SEP1 + SessionId);
                            //    }
                            //}

                            //var kurumnamestr = "";
                            //if (ToEngUp(Username).indexOf(ToEngUp("INVEST")) == 0)
                            //    kurumnamestr = "INVEST AZ";
                            //if (kurumnamestr != "")
                            //{
                            //    KurumlarArray.length = 0;
                            //    KurumlarArray.push(kurumnamestr);
                            //    HesapKurum = kurumnamestr;
                            //}

                            return;
                        }

                    case "37":  // hacim liste
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            if (ToEngUp(ActiveHacimListeYonString) != ParserFieldArray[4]) return;
                            var datestr = ParserFieldArray[5];
                            GetEl("DivHacimListeTarih").innerHTML = datestr;
                            GetEl("TableHacimOzet").rows[0].cells[1].innerHTML = parseFloat(ParserFieldArray[6]).Format();
                            GetEl("TableHacimOzet").rows[1].cells[1].innerHTML = parseFloat(ParserFieldArray[7]).Format();
                            GetEl("TableHacimOzet").rows[2].cells[1].innerHTML = "% " + ParserFieldArray[8];

                            var color = "gold";
                            if (ParserFieldArray[4] == "ALANLAR")
                                color = "#2F2";
                            else if (ParserFieldArray[4] == "SATANLAR")
                                color = "#F33";

                            parsetable = GetEl("TableHacimListe");
                            ClearTable("TableHacimListe");
                            for (var i = 9; i < ParserFieldArray.length; i++) {
                                ParserSplitArray = ParserFieldArray[i].split(SEP2);
                                parserow = parsetable.insertRow(i - 9);
                                InsertCell(parserow, "12%", "C", "", "gray", "", i - 8);
                                InsertCell(parserow, "30%", "L", "", "gainsboro", "", ParserSplitArray[0]);
                                InsertCell(parserow, "38%", "R", "", color, "", ParserSplitArray[1]);
                                InsertCell(parserow, "20%", "R", "", "silver", "", ParserSplitArray[2]);
                                SetRowStyle(parserow, "1px", "", "");
                            }
                            return;
                        }

                    case "38":	// kademe
                        {
                            var symbol = ParserFieldArray[2];
                            if (symbol != DetaySymbol) return;
                            var item = BasicObject[symbol];
                            if (item == undefined) return;

                            // detay kademe
                            if (ActivePageElement.id == "DivDetay") {
                                if (ActiveDetayFooterNo == 3) {
                                    parsetable = GetEl("TableDetayKademeData");
                                    ClearTable("TableDetayKademeData");
                                    for (var i = 3; i < ParserFieldArray.length; i++) {
                                        ParserSplitArray = ParserFieldArray[i].split(SEP2);
                                        var rowcount = parsetable.rows.length;
                                        parserow = parsetable.insertRow(rowcount);
                                        InsertCell(parserow, "10%", "C", "", "gray", "", rowcount + 1);
                                        InsertCell(parserow, "18%", "C", "", "white", "", item.GetPriceStr(parseFloat(ParserSplitArray[0])));
                                        InsertCell(parserow, "26%", "R", "", "gold", "", parseFloat(ParserSplitArray[1]).Format());
                                        InsertCell(parserow, "18%", "R", "", "white", "", parseFloat(ParserSplitArray[2]).toFixed(2));
                                        InsertCell(parserow, "14%", "R", "", "#2F2", "", ParserSplitArray[3]);
                                        InsertCell(parserow, "14%", "R", "", "#F22", "", ParserSplitArray[4]);
                                        SetRowStyle(parserow, "1px", "", "");
                                    }
                                }
                            }
                            return;
                        }
                    case "SRV_BIST_BRUTTAKAS":
                        {
                            BrutTakas = new Array();
                            for (var i = 2; i < ParserFieldArray.length; i++) {
                                arr = ParserFieldArray[i].split(SEP2);

                                for (var j = 0; j < arr.length; j++) {
                                    if (arr[j] == "") continue;
                                    BrutTakas.push(arr[j]);
                                }
                            }
                            return;

                        }

                    case "BSDER":  // BuySELL derinlik
                        {
                            if (BuySellDerinlik == "") return;
                            var symbol = ParserFieldArray[2];
                            if (symbol != DetaySymbol) return;
                            var item = BasicObject[symbol];
                            if (item == undefined) return;
                            DerinlikUpdateTime = ParserFieldArray[3];

                            BsDerinlikRepaintTime = new Date();
                            BsDerinlikRepaintBool = true;

                            if (BuySellDerinlik == "IMKBH") {

                                if (GetBsDerinlikTip() == 1) {

                                    var table = GetEl("BistBuysellDerinlik");

                                    for (var i = 4; i < ParserFieldArray.length; i++) {

                                        ParserSplitArray = ParserFieldArray[i].split(SEP2);
                                        var rowno = parseInt(ParserSplitArray[1]);
                                        if (table.rows.length < 2) {

                                            var backcolor = "black";

                                            parserow = table.insertRow(1);
                                            InsertCell(parserow, "22%", "R", backcolor, "lime", "", "");
                                            InsertCell(parserow, "20%", "R", backcolor, "lime", "", "");
                                            InsertCell(parserow, "4%", "C", backcolor, "gold", "", "");
                                            InsertCell(parserow, "20%", "L", backcolor, "red", "", "");
                                            InsertCell(parserow, "22%", "L", backcolor, "red", "", "");
                                            for (var r = 0; r < parserow.cells.length; r++) {
                                                parserow.cells[r].style.padding = "3px";
                                                parserow.cells[r].style.border = "";
                                            }
                                            SetRowStyle(parserow, "", "0", "");
                                        }
                                        else
                                            parserow = table.rows[1];



                                        if (ParserSplitArray[0] == "B") {
                                            if (parserow.cells[0].innerHTML.replace(",", "").replace(".", "") != ParserSplitArray[3] && parserow.cells[0].innerHTML != "") {
                                                parserow.cells[0].style.backgroundColor = "#080";
                                                parserow.cells[0].style.color = "white";
                                            }
                                            parserow.cells[0].innerHTML = (ParserSplitArray[3] == "") ? "" : parseFloat(ParserSplitArray[3]).Format();
                                            if (parserow.cells[1].innerHTML != item.GetPriceStr(parseFloat(ParserSplitArray[2])) && parserow.cells[1].innerHTML != "") {
                                                parserow.cells[1].style.backgroundColor = "#080";
                                                parserow.cells[1].style.color = "white";
                                            }

                                            parserow.cells[1].innerHTML = (ParserSplitArray[2] == "") ? "" : item.GetPriceStr(parseFloat(ParserSplitArray[2]));

                                        }




                                        if (ParserSplitArray[0] == "A") {
                                            if (parserow.cells[3].innerHTML != item.GetPriceStr(parseFloat(ParserSplitArray[2])) && parserow.cells[3].innerHTML != "") {
                                                parserow.cells[3].style.backgroundColor = "#800";
                                                parserow.cells[3].style.color = "white";
                                            }
                                            parserow.cells[3].innerHTML = (ParserSplitArray[2] == "") ? "" : item.GetPriceStr(parseFloat(ParserSplitArray[2]));
                                            if (parserow.cells[4].innerHTML.replace(",", "").replace(".", "") != ParserSplitArray[3] && parserow.cells[4].innerHTML != "") {
                                                parserow.cells[4].style.backgroundColor = "#800";
                                                parserow.cells[4].style.color = "white";
                                            }

                                            parserow.cells[4].innerHTML = (ParserSplitArray[3] == "") ? "" : parseFloat(ParserSplitArray[3]).Format();
                                        }



                                    }
                                }
                                else if (GetBsDerinlikTip() == 2) {
                                    var table = GetEl("BistBuysellEditDerinlik");

                                    for (var i = 4; i < ParserFieldArray.length; i++) {



                                        ParserSplitArray = ParserFieldArray[i].split(SEP2);
                                        var rowno = parseInt(ParserSplitArray[1]);
                                        if (table.rows.length < 2) {

                                            var backcolor = "black";

                                            parserow = table.insertRow(1);
                                            InsertCell(parserow, "22%", "R", backcolor, "lime", "", "");
                                            InsertCell(parserow, "20%", "R", backcolor, "lime", "", "");
                                            InsertCell(parserow, "4%", "C", backcolor, "gold", "", "");
                                            InsertCell(parserow, "20%", "L", backcolor, "red", "", "");
                                            InsertCell(parserow, "22%", "L", backcolor, "red", "", "");
                                            for (var r = 0; r < parserow.cells.length; r++) {
                                                parserow.cells[r].style.padding = "3px";
                                                parserow.cells[r].style.border = "";
                                            }
                                            SetRowStyle(parserow, "", "0", "");
                                        }
                                        else
                                            parserow = table.rows[1];


                                        if (ParserSplitArray[0] == "B") {
                                            if (parserow.cells[0].innerHTML.replace(",", "").replace(".", "") != ParserSplitArray[3] && parserow.cells[0].innerHTML != "") {
                                                parserow.cells[0].style.backgroundColor = "#080";
                                                parserow.cells[0].style.color = "white";
                                            }
                                            parserow.cells[0].innerHTML = (ParserSplitArray[3] == "") ? "" : parseFloat(ParserSplitArray[3]).Format();
                                            if (parserow.cells[1].innerHTML != item.GetPriceStr(parseFloat(ParserSplitArray[2])) && parserow.cells[1].innerHTML != "") {
                                                parserow.cells[1].style.backgroundColor = "#080";
                                                parserow.cells[1].style.color = "white";
                                            }
                                            parserow.cells[1].innerHTML = (ParserSplitArray[2] == "") ? "" : item.GetPriceStr(parseFloat(ParserSplitArray[2]));
                                        }
                                        if (ParserSplitArray[0] == "A") {
                                            if (parserow.cells[3].innerHTML != item.GetPriceStr(parseFloat(ParserSplitArray[2])) && parserow.cells[3].innerHTML != "") {
                                                parserow.cells[3].style.backgroundColor = "#800";
                                                parserow.cells[3].style.color = "white";
                                            }
                                            parserow.cells[3].innerHTML = (ParserSplitArray[2] == "") ? "" : item.GetPriceStr(parseFloat(ParserSplitArray[2]));
                                            if (parserow.cells[4].innerHTML.replace(",", "").replace(".", "") != ParserSplitArray[3] && parserow.cells[4].innerHTML != "") {
                                                parserow.cells[4].style.backgroundColor = "#800";
                                                parserow.cells[4].style.color = "white";
                                            }
                                            parserow.cells[4].innerHTML = (ParserSplitArray[3] == "") ? "" : parseFloat(ParserSplitArray[3]).Format();
                                        }


                                    }


                                }

                            }
                            else if (BuySellDerinlik == "VIP") {

                                var table = GetEl("ViopBuysellDerinlik");

                                for (var i = 4; i < ParserFieldArray.length; i++) {

                                    ParserSplitArray = ParserFieldArray[i].split(SEP2);
                                    var rowno = parseInt(ParserSplitArray[1]);
                                    if (table.rows.length < 2) {


                                        parserow = table.insertRow(1);
                                        InsertCell(parserow, "22%", "R", "black", "lime", "", "");
                                        InsertCell(parserow, "20%", "R", "black", "lime", "", "");
                                        InsertCell(parserow, "4%", "C", "black", "gold", "", "");
                                        InsertCell(parserow, "20%", "L", "black", "red", "", "");
                                        InsertCell(parserow, "22%", "L", "black", "red", "", "");
                                        for (var r = 0; r < parserow.cells.length; r++) {
                                            parserow.cells[r].style.padding = "3px";
                                            parserow.cells[r].style.border = "";
                                        }
                                        SetRowStyle(parserow, "", "0", "");
                                    }
                                    else
                                        parserow = table.rows[1];

                                    if (ParserSplitArray[0] == "B") {

                                        if (parserow.cells[0].innerHTML.replace(",", "").replace(".", "") != ParserSplitArray[3] && parserow.cells[0].innerHTML != "") {
                                            parserow.cells[0].style.backgroundColor = "#080";
                                            parserow.cells[0].style.color = "white";
                                        }
                                        parserow.cells[0].innerHTML = (ParserSplitArray[3] == "") ? "" : parseFloat(ParserSplitArray[3]).Format();
                                        if (parserow.cells[1].innerHTML != item.GetPriceStr(parseFloat(ParserSplitArray[2])) && parserow.cells[1].innerHTML != "") {
                                            parserow.cells[1].style.backgroundColor = "#080";
                                            parserow.cells[1].style.color = "white";
                                        }
                                        parserow.cells[1].innerHTML = (ParserSplitArray[2] == "") ? "" : item.GetPriceStr(parseFloat(ParserSplitArray[2]));
                                    }
                                    if (ParserSplitArray[0] == "A") {
                                        if (parserow.cells[3].innerHTML != item.GetPriceStr(parseFloat(ParserSplitArray[2])) && parserow.cells[3].innerHTML != "") {
                                            parserow.cells[3].style.backgroundColor = "#800";
                                            parserow.cells[3].style.color = "white";
                                        }
                                        parserow.cells[3].innerHTML = (ParserSplitArray[2] == "") ? "" : item.GetPriceStr(parseFloat(ParserSplitArray[2]));
                                        if (parserow.cells[4].innerHTML.replace(",", "").replace(".", "") != ParserSplitArray[3] && parserow.cells[4].innerHTML != "") {
                                            parserow.cells[4].style.backgroundColor = "#800";
                                            parserow.cells[4].style.color = "white";
                                        }
                                        parserow.cells[4].innerHTML = (ParserSplitArray[3] == "") ? "" : parseFloat(ParserSplitArray[3]).Format();
                                    }
                                }

                            }
                            else if (BuySellDerinlik == "CHART") {

                                var table = GetEl("ChartBuysellDerinlik");

                                for (var i = 4; i < ParserFieldArray.length; i++) {

                                    ParserSplitArray = ParserFieldArray[i].split(SEP2);
                                    var rowno = parseInt(ParserSplitArray[1]);
                                    if (table.rows.length < 2) {


                                        parserow = table.insertRow(1);
                                        InsertCell(parserow, "22%", "R", "black", "lime", "", "");
                                        InsertCell(parserow, "20%", "R", "black", "lime", "", "");
                                        InsertCell(parserow, "4%", "C", "black", "gold", "", "");
                                        InsertCell(parserow, "20%", "L", "black", "red", "", "");
                                        InsertCell(parserow, "22%", "L", "black", "red", "", "");
                                        for (var r = 0; r < parserow.cells.length; r++) {
                                            parserow.cells[r].style.padding = "3px";
                                            parserow.cells[r].style.border = "";
                                        }
                                        SetRowStyle(parserow, "", "0", "");
                                    }
                                    else
                                        parserow = table.rows[1];

                                    if (ParserSplitArray[0] == "B") {

                                        if (parserow.cells[0].innerHTML.replace(",", "").replace(".", "") != ParserSplitArray[3] && parserow.cells[0].innerHTML != "") {
                                            parserow.cells[0].style.backgroundColor = "#080";
                                            parserow.cells[0].style.color = "white";
                                        }
                                        parserow.cells[0].innerHTML = (ParserSplitArray[3] == "") ? "" : parseFloat(ParserSplitArray[3]).Format();
                                        if (parserow.cells[1].innerHTML != item.GetPriceStr(parseFloat(ParserSplitArray[2])) && parserow.cells[1].innerHTML != "") {
                                            parserow.cells[1].style.backgroundColor = "#080";
                                            parserow.cells[1].style.color = "white";
                                        }
                                        parserow.cells[1].innerHTML = (ParserSplitArray[2] == "") ? "" : item.GetPriceStr(parseFloat(ParserSplitArray[2]));
                                    }
                                    if (ParserSplitArray[0] == "A") {
                                        if (parserow.cells[3].innerHTML != item.GetPriceStr(parseFloat(ParserSplitArray[2])) && parserow.cells[3].innerHTML != "") {
                                            parserow.cells[3].style.backgroundColor = "#800";
                                            parserow.cells[3].style.color = "white";
                                        }
                                        parserow.cells[3].innerHTML = (ParserSplitArray[2] == "") ? "" : item.GetPriceStr(parseFloat(ParserSplitArray[2]));
                                        if (parserow.cells[4].innerHTML.replace(",", "").replace(".", "") != ParserSplitArray[3] && parserow.cells[4].innerHTML != "") {
                                            parserow.cells[4].style.backgroundColor = "#800";
                                            parserow.cells[4].style.color = "white";
                                        }
                                        parserow.cells[4].innerHTML = (ParserSplitArray[3] == "") ? "" : parseFloat(ParserSplitArray[3]).Format();
                                    }
                                }

                            }

                            return;
                        }
                    case "SRV_DUYURU":
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;

                            var fontsizetext = (window.innerWidth / 29) + "px";
                            var fontsizetarih = (window.innerWidth / 25) + "px";

                            var table = GetEl("TableMesajlar");
                            ClearTable("TableMesajlar");
                            var satirno = 0;
                            for (var i = 4; i < ParserFieldArray.length; i++) {
                                ParserSplitArray = ParserFieldArray[i].split(SEP2);
                                parserow = table.insertRow(satirno);
                                var backcolor = "black";
                                var forecolor = "white";

                                var htm = "<div style='font-Size:" + fontsizetarih + "'>" + ParserSplitArray[0] + "</div>";
                                htm += "<div style='font-Size:" + fontsizetext + "'>" + ParserSplitArray[1].replace(/\r\n/g, "<br>").replace(/\n/g, "<br>") + "</div>";

                                var newcell = InsertCell(parserow, "100%", "L", backcolor, forecolor, "", htm);
                                newcell.style.whiteSpace = "normal";
                                newcell.style.borderBottom = "3px #888 solid";
                                newcell.style.fontSize = "10px";// FontSizeTrade;

                            }

                            GetEl("DivMesajlar").style.display = "inline-block";
                            BringToFront(GetEl("DivMesajlar"));
                            return;
                        }

                    case "PITE":  // PITE
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            if (DetaySymbol != ParserFieldArray[4]) return;
                            var datestr = ParserFieldArray[5];
                            GetEl("DivPiteTarih").innerHTML = datestr;

                            var color = "gold";
                            if (ToEngUp(ActivePiteYonString) == "ALANLAR")
                                color = "#2F2";
                            else if (ToEngUp(ActivePiteYonString) == "SATANLAR")
                                color = "#F33";

                            var data = [];
                            parsetable = GetEl("TablePite");

                            if (ParserFieldArray.length != 12) return;
                            for (var i = 6; i < ParserFieldArray.length; i++) {
                                ParserSplitArray = ParserFieldArray[i].split(SEP2);

                                parsetable.rows[i - 6].cells[1].innerHTML = ParserSplitArray[0];
                                parsetable.rows[i - 6].cells[2].innerHTML = ParserSplitArray[1];
                                parsetable.rows[i - 6].cells[2].style.color = color;
                                parsetable.rows[i - 6].cells[3].innerHTML = ParserSplitArray[2];
                                if (i < 11)
                                    parsetable.rows[i - 6].cells[4].innerHTML = ParserSplitArray[3];
                                data[i - 6] = parseFloat(ParserSplitArray[2]);
                            }

                            // canvas
                            var container = GetEl("DivPiteCanvasContainer");
                            container.style.top = (parsetable.offsetTop + parsetable.offsetHeight + 5) + "px";
                            container.style.height = (GetEl("DivPite").offsetHeight - container.offsetTop) - 5 + "px";
                            var min = Math.min(container.clientWidth, container.clientHeight) - 0;
                            GetEl("CanvasPite").width = min;
                            GetEl("CanvasPite").height = min;



                            // pie
                            var canvas = GetEl("CanvasPite");
                            var ctx = canvas.getContext("2d");
                            var lastend = 0;
                            var colors = ["lawngreen", "red", "gold", "blue", "cyan", "dimgray"];
                            var offset = Math.PI / 2;
                            var total = 0;
                            for (var i = 0; i < data.length; i++)
                                total += data[i];

                            for (var i = 0; i < data.length; i++) {
                                ctx.fillStyle = colors[i];
                                ctx.beginPath();
                                ctx.moveTo(canvas.width / 2, canvas.height / 2);
                                ctx.arc(canvas.width / 2, canvas.height / 2, canvas.height / 2, lastend - offset, lastend - offset + (Math.PI * 2 * (data[i] / total)), false);
                                ctx.lineTo(canvas.width / 2, canvas.height / 2);
                                ctx.fill();
                                lastend += Math.PI * 2 * (data[i] / total);
                            }

                            return;
                        }
                    case "SRV_ALARM_EKLE":
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            if (ParserFieldArray[4] == 1) {
                                ShowAlarmEkleWindow();
                                ShowAlertWindow("Alarm", "Alarm Eklenmiştir");
                            }
                            else if (ParserFieldArray[4] == 2) {
                                ShowAlertWindow("Alarm Uyarı", "En Fazla " + ParserFieldArray[5] + " Alarm Tanımlayabilirsiniz.");
                            }
                            else {

                                ShowAlertWindow("Alarm Uyarı", "Alarm Ekleme Sorunu Tekrar Deneyiniz");
                            }
                            return;
                        }
                    case "SRV_AKDUYURU_SORGU":
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            if (HesapLogin == "0") return;
                            if (HesapAltHesap != ParserFieldArray[6]) return;
                            if (ParserFieldArray[4] == "0") {
                                ShowAlertWindow("Onay Duyuru", ParserFieldArray[5].trim());
                                return;
                            }
                            var akDuyuruArray = ParserFieldArray[7].split("|");

                            var htm = "";
                            var DivAkduyuruContentEl = GetEl("DivAkOnayDuyuruContent");

                            for (var i = 0; i < akDuyuruArray.length; i++) {

                                if (akDuyuruArray[i].indexOf("-") < 0) continue;

                                var onoynostr = akDuyuruArray[i].split("-")[0].trim();
                                htm += "<div class='DivAkOnayBox'><div  style='background-color:#787878;padding:1%' >" + onoynostr + " Numaralı Duyuru<br/></div> <div style='padding:1%'>" + FindAndReplaceLink(akDuyuruArray[i].split("-")[1].trim()) + "</div><br> <div style='width:100%;text-align:center'><div class='albtnbackcolor' style='width:20%;display:inline-block;padding:1%' onclick='OnClickAkDuyuruBtn(" + onoynostr + ")'>ONAY</div></div> </div>";
                            }

                            if (htm == "") {
                                HideByID("DivAkOnayDuyuru");
                                return;
                            }

                            DivAkduyuruContentEl.innerHTML = htm;

                            DivAkduyuruContentEl.style.overflow = "auto";
                            GetEl("DivAkOnayDuyuru").style.height = (GetEl("DivAkOnayDuyuru").parentNode.clientHeight - GetEl("DivDetayHeader").offsetHeight - GetEl("DivDetayFooter").offsetHeight) + "px";
                            DivAkduyuruContentEl.style.height = (GetEl("DivAkOnayDuyuru").parentNode.clientHeight - GetEl("DivDetayHeader").offsetHeight - GetEl("DivDetayFooter").offsetHeight - (DeviceHeight / 6)) + "px";


                            ShowByID("DivAkOnayDuyuru");
                            BringByID("DivAkOnayDuyuru");

                            return;
                        }
                    case "SRV_AKDUYURU_GUNCELLE":
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            if (HesapLogin == "0") return;
                            var mjsIDx = ParserFieldArray[6];

                            if (ParserFieldArray[4] == "0") {
                                ShowAlertWindow("Onay Duyuru", ParserFieldArray[5].trim());
                                return;
                            }

                            SendRequest("X" + SEP1 + "REQ_AKDUYURU_SORGU" + SEP1 + Username + SEP1 + SessionId + SEP1 + HesapKurum + SEP1 + HesapNo + SEP1 + HesapAltHesap + SEP1 + HesapParola + SEP1);

                            return;
                        }
                    case "SRV_SENETLER":
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;

                            SayfamCell.innerHTML = WatchlistName;

                            //var sayfamkey = localStorage["SAYFAM"]; // ssss
                            WatchlistSymbolObject = {};
                            if (ParserFieldArray[4] == "1") {
                            }
                            else if (ParserFieldArray[4] == "2") {
                                if (ParserFieldArray[5] != "" && ParserFieldArray[5] != undefined) {
                                    var symbolarray = ParserFieldArray[5].split("|");
                                    for (var i = 0; i < symbolarray.length; i++) {
                                        var fieldarray = symbolarray[i].split(";");
                                        if (parseInt(fieldarray[1]) >= 0 && parseInt(fieldarray[1]) <= 2000)
                                            WatchlistSymbolObject[fieldarray[0]] = parseInt(fieldarray[1]);
                                    }
                                }

                                else {
                                    WatchlistSymbolObject["XU100"] = 0;
                                    WatchlistSymbolObject["VIP-X030"] = 1;
                                    WatchlistSymbolObject["VIP-USD"] = 2;
                                    WatchlistSymbolObject["VIP-EUR"] = 3;
                                    WatchlistSymbolObject["VIP-GLD"] = 4;
                                    WatchlistSymbolObject["VIP-GOZ"] = 5;
                                    WatchlistSymbolObject["USDTRY"] = 7;
                                    WatchlistSymbolObject["EURUSD"] = 8;
                                    WatchlistSymbolObject["GARAN"] = 10;
                                    WatchlistSymbolObject["AKBNK"] = 11;
                                    WatchlistSymbolObject["HALKB"] = 12;
                                    WatchlistSymbolObject["ISCTR"] = 13;
                                    WatchlistSymbolObject["YKBNK"] = 14;
                                    WatchlistSymbolObject["SAHOL"] = 15;
                                    WatchlistSymbolObject["TCELL"] = 16;
                                    WatchlistSymbolObject["THYAO"] = 17;
                                    WatchlistSymbolObject["TUPRS"] = 18;
                                    WatchlistSymbolObject["VAKBN"] = 19;
                                }

                                FillWatchlistTable();
                            }



                            return;
                        }
                    case "SRV_ALARM":
                        {


                            if (ActivePageElement.id == "DivAlarmListesi")
                                SendRequest("X" + SEP1 + "REQ_ALARM_LIST" + SEP1 + Username + SEP1 + SessionId);
                            GetEl("AlarmText").innerHTML = ParserFieldArray[2];
                            ShowAlarmUyariWindow();
                            return;
                        }
                    case "SRV_ALARM_NO":
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            var telNoMesaj = "";
                            if (ParserFieldArray[4] == "") {
                                telNoMesaj += "Telefon Numaranız Kayıtlı Değil";
                            }
                            else { telNoMesaj += "Tel.No = " + ParserFieldArray[4]; }

                            telNoMesaj += "\nTel No değişimi için\nMüşteri Hizmetlerini Arayınız";
                            ShowAlertWindow("Alarm Uyarı", telNoMesaj);
                            return;
                        }
                    case "SRV_ALARM_SIL":
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            if (ParserFieldArray[4] == 1) {
                                ShowAlertWindow("Alarm", "Alarm Silinmiştir");
                                if (ActivePageElement.id == "DivAlarmListesi")
                                    SendRequest("X" + SEP1 + "REQ_ALARM_LIST" + SEP1 + Username + SEP1 + SessionId);
                            }
                            else {
                                ShowAlertWindow("Alarm", "Alarm Silme Sorunu Tekrar Deneyiniz");
                            }
                            return;
                        }
                    case "SRV_ALARM_LIST":
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            if (ParserFieldArray[4] == 1) {

                                parsetable = GetEl("TableAlarmListesi");
                                ClearTable("TableAlarmListesi");
                                parserow = parsetable.insertRow(0);
                                InsertCell(parserow, "35%", "L", "", "", "H", "Sembol");
                                InsertCell(parserow, "35%", "L", "", "", "H", "Şart");
                                InsertCell(parserow, "20%", "L", "", "", "H", "Fiyat");
                                InsertCell(parserow, "10%", "R", "", "", "H", "");
                                InsertCell(parserow, "0%", "L", "", "", "H", "");
                                InsertCell(parserow, "0%", "L", "", "", "H", "Tarih");

                                var backcolor = "black";
                                var color = "white";

                                if (ParserFieldArray[5] == "") return;
                                // print data
                                var alarmarray = ParserFieldArray[5].split(SEP2);
                                for (var i = 0; i < alarmarray.length; i++) {
                                    ParserSplitArray = alarmarray[i].split("|");
                                    var symbolstr = "";
                                    var idstr = "";
                                    var sartstr = "";
                                    var fiyatstr = "";
                                    var tarihstr = "";



                                    for (j = 0; j < ParserSplitArray.length; j++) {
                                        var valuearray = ParserSplitArray[j].split("=");
                                        switch (valuearray[0]) {
                                            case "SEMBOL": symbolstr = valuearray[1]; break;
                                            case "ID": idstr = valuearray[1]; break;
                                            case "DATE": tarihstr = valuearray[1]; break;
                                            case "SART": sartstr = valuearray[1]; break;
                                            case "PRICE": fiyatstr = valuearray[1]; break;

                                        }
                                    }

                                    if (sartstr == "D1") sartstr = "Küçükse";
                                    else if (sartstr == "D2") sartstr = "Küçükse Eşitse";
                                    else if (sartstr == "E") sartstr = "Eşitse";
                                    else if (sartstr == "U1") sartstr = "Son Fiyat Büyükse";
                                    else if (sartstr == "U2") sartstr = "Büyük Eşitse";

                                    rowcount = parsetable.rows.length;
                                    parserow = parsetable.insertRow(rowcount);
                                    var basicitem = BasicObject[symbolstr];
                                    if (basicitem != undefined) {
                                        fiyatstr = basicitem.GetPriceStr(parseFloat(fiyatstr));
                                    }

                                    InsertCell(parserow, "35%", "L", backcolor, color, "", symbolstr);
                                    InsertCell(parserow, "35%", "L", backcolor, color, "", sartstr);
                                    InsertCell(parserow, "20%", "L", backcolor, color, "", fiyatstr);
                                    InsertCell(parserow, "10%", "L", "red", "white", "", "Sil");
                                    InsertCell(parserow, "0%", "L", backcolor, color, "", idstr);
                                    InsertCell(parserow, "0%", "L", backcolor, color, "", tarihstr);
                                }

                                for (var i = 0; i < parsetable.rows.length; i++) {
                                    parserow = parsetable.rows[i];
                                    for (var j = 0; j < parserow.cells.length; j++) {
                                        parserow.cells[j].style.fontSize = FontSizeCarsi;
                                    }
                                }


                                // click events

                                if (parsetable.rows.length > 0) {
                                    for (var i = 0; i < parsetable.rows.length; i++) {
                                        for (var j = 0; j < parsetable.rows[i].cells.length; j++) {
                                            var currentcell = parsetable.rows[i].cells[j];
                                            var cellclick = function (colno, rowno) {
                                                return function () {
                                                    AlarmSilRowNo = rowno;
                                                    HidePopups();
                                                    for (var k = 0; k < parsetable.rows.length; k++) {
                                                        parserow = parsetable.rows[k];
                                                        for (var n = 0; n < parserow.cells.length; n++) {
                                                            if (n != 3)
                                                                parserow.cells[n].style.backgroundColor = "black";
                                                        }
                                                    }
                                                    parserow = parsetable.rows[rowno];
                                                    for (var n = 0; n < parserow.cells.length; n++) {
                                                        if (n != 3)
                                                            parserow.cells[n].style.backgroundColor = "#111";
                                                    }

                                                    if (colno == 3)
                                                        AlarmSil();

                                                };
                                            };
                                            currentcell.onclick = cellclick(j, i);
                                        }
                                    }
                                }



                            }

                            return;
                        }
                    case "SRV_BIST_YUKSELEN":
                    case "SRV_BIST_DUSEN":
                    case "SRV_BIST_HACIM":
                        {
                            WatchlistSymbolObject = {};
                            for (var i = 2; i < ParserFieldArray.length; i++) {
                                WatchlistSymbolObject[ParserFieldArray[i]] = i - 2;
                            }
                            ReadWatchlistSymbols();
                            FillWatchlistTable();
                            return;
                        }

                    case "SRV_BIST_SEKTOR":
                        {
                            var sector = ParserFieldArray[2];
                            if (ToEngUp(WatchlistName) != sector) return;
                            WatchlistSymbolObject = {};
                            for (var i = 3; i < ParserFieldArray.length; i++) {
                                WatchlistSymbolObject[ParserFieldArray[i]] = i - 3;
                            }
                            ReadWatchlistSymbols();
                            FillWatchlistTable();
                            return;
                        }

                    case "SRV_NEWS_CONTENT":
                        {
                            var newsid = ParserFieldArray[2];
                            var newscontent = ParserFieldArray[3];
                            newscontent = newscontent.replace(/[\n\r]+/g, "<br/>");

                            var item = NewsObject[newsid];
                            if (item == undefined) return;

                            var el = GetEl("DivNewsContent");
                            el.style.display = "inline";
                            ZIndex++;
                            el.style.zIndex = ZIndex;
                            el.innerHTML = item.Header + "<br/>" + "<br/>" + newscontent;



                            return;
                        }

                    case "B":
                        {
                            if (HesapKurum == "" || KurumlarArray.contains(HesapKurum) == false) {
                                //alert("Kurum Bulunamadı !!!"+"\r\n"+HesapKurum);
                                return;
                            }

                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            V1 = parseInt(ParserFieldArray[4]);
                            SendRequest("X" + SEP1 + "A" + SEP1 + Username + SEP1 + SessionId + SEP1 + ParserFieldArray[4]);
                            return;
                        }

                    case "A":
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            if (typeof F1 != "function") {
                                var script = document.createElement("script");
                                script.innerHTML = ParserFieldArray[4];
                                document.head.appendChild(script);
                            }
                            if (HesapKurum == "HALK YATIRIM" || HesapKurum == "ANADOLU YATIRIM" || HesapKurum == "TURKISH YATIRIM" || HesapKurum == "BURGAN YATIRIM")
                                F3(0);
                            else
                                F2();
                            return;
                        }

                    case "D":// SMS Sonucu Login
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;

                            if (HesapKurum == "HALK YATIRIM" || HesapKurum == "BURGAN YATIRIM") {

                                if (ParserFieldArray[4].trim() == "OTPSENT") {
                                    ShowSMSPanel();
                                    return;
                                }
                                else if (ParserFieldArray[4].trim() == "OTPBYPASS") {
                                    //alert("Hesabınıza Kayıtlı Cep Telefonu Bilgisi Bulunmuyor");
                                }
                                else {
                                    //alert(ParserFieldArray[4].trim());
                                    ShowAlertWindow("Uyarı", ParserFieldArray[4]);
                                }
                            }
                            else if (HesapKurum == "ANADOLU YATIRIM" || HesapKurum == "TURKISH YATIRIM") {

                                if (ParserFieldArray[4].trim() == "OK") {
                                    ShowSMSPanel();
                                    return;
                                }
                                else {
                                    //alert(ParserFieldArray[4].trim());
                                    ShowAlertWindow("Hata", ParserFieldArray[4].trim());
                                }
                            }

                            return;
                        }
                    case "SRV_TRD_LOGOUTFORTOKEN": // Token Süresi Geçmiş
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            //alert("Güvenliğiniz için oturumunuz sonlandırılmıştır. Lütfen tekrar giriş yapınız.");
                            HesapLogin = "0"
                            HesapSMSSifre = "";
                            GetEl("TextSMS").value = "";
                            GetEl("DivHesapLogin").style.visibility = "visible";

                            GetEl("DivHesapLoginSMSOnay").style.visibility = "hidden";

                            BringToFront(GetEl("DivHesapLogin"));
                            ShowAlertWindow("Logout", "Güvenliğiniz için oturumunuz sonlandırılmıştır. Lütfen tekrar giriş yapınız.");
                            return;

                        }

                    case "SRV_ONAY_SOZLESME":
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            GetEl("DivSozlesme").style.display = "none";
                            SozlesmeKabulDateStr = "1";
                            return;
                        }

                    case "SRV_ONAY_MESAJ":
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            GetEl("DivMesajOnay").style.display = "none";
                            MesajOnayStr = "0";
                            ActiveFooterNo = 3;
                            GetEl("DivMesajlar").style.display = "inline-block";
                            BringToFront(GetEl("DivMesajlar"));
                            return;
                        }

                    case "SRV_RBF_ONAY"://Risk Bildirim Onay
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            if (HesapLogin == "0") return;
                            if (ParserFieldArray[4] == "0") {
                                ShowAlertWindow("Hata", ParserFieldArray[5]);
                            }
                            else {
                                ShowAlertWindow("Risk Bildirim Onay", "Risk Bildirim Formu Onaylanmıştır.");
                                HideByID("DivRBFPopUp");
                            }
                            return;
                        }
                    case "SRV_RBF_CHECK"://Risk Bildirim Check
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            if (HesapLogin == "0") return;
                            if (ParserFieldArray[4] == "0") {
                                ShowAlertWindow("Hata", ParserFieldArray[5]);
                            }
                            else {
                                RiskBildirimOnay = ParserFieldArray[5];
                                if (RiskBildirimOnay == "0") {
                                    ShowByID("DivRBFPopUp");
                                    BringByID("DivRBFPopUp");
                                    GetEl("SpanKurumUnvan").innerHTML = GetKurumUnvan();
                                    GetEl("DivRBFPopUpContent").style.height = (DeviceHeight - GetEl("DivRBFPopUpButton").clientHeight - GetEl("DivRBFPopUpHeader").clientHeight - 20) + "px";
                                }

                            }
                            return;
                        }
                    case "SRV_TRD_LOGIN":
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            HesapLogin = ParserFieldArray[4];
                            if (HesapLogin == "0") {
                                //alert(ParserFieldArray[5]);
                                ShowAlertWindow("Hata", ParserFieldArray[5]);
                                return;
                            }

                            var accountinfoarray = ParserFieldArray[6].split(SEP2);
                            BistBackOffice = accountinfoarray[0];
                            ViopBackOffice = accountinfoarray[1];

                            var althesaparray = ParserFieldArray[7].split(SEP2);
                            HesapAltHesap = althesaparray[0];


                            if (BistBackOffice == "IDB") {
                                RiskBildirimOnay = ParserFieldArray[9];

                                if (RiskBildirimOnay == "0") {
                                    ShowByID("DivRBFPopUp");
                                    BringByID("DivRBFPopUp");
                                    GetEl("SpanKurumUnvan").innerHTML = GetKurumUnvan();
                                    GetEl("DivRBFPopUpContent").style.height = (DeviceHeight - GetEl("DivRBFPopUpButton").clientHeight - GetEl("DivRBFPopUpHeader").clientHeight - 20) + "px";
                                }
                            }
                            else if (BistBackOffice == "GTP") {
                                SendRBFCeck();
                            }


                            // fill subaccounts
                            parsetable = GetEl("TablePortfoySubAccount");
                            ClearTable("TablePortfoySubAccount");
                            for (var i = 0; i < althesaparray.length; i++) {
                                var rowcount = parsetable.rows.length;
                                parserow = parsetable.insertRow(rowcount);
                                parsecell = parserow.insertCell(0);
                                parsecell.innerHTML = althesaparray[i];
                                parsecell.style.padding = "3%";
                                parsecell.style.borderBottom = "2px black solid ";
                            }

                            // request tavan taban
                            SendRequest("X" + SEP1 + "REQ_TAVANTABAN" + SEP1 + Username + SEP1 + SessionId);


                            if (HesapKurum == "AK YATIRIM")
                                SendRequest("X" + SEP1 + "REQ_AKDUYURU_SORGU" + SEP1 + Username + SEP1 + SessionId + SEP1 + HesapKurum + SEP1 + HesapNo + SEP1 + HesapAltHesap + SEP1 + HesapParola + SEP1);


                            // click events
                            for (var i = 0; i < parsetable.rows.length; i++) {
                                var currentrow = parsetable.rows[i];
                                var cellclick = function (rowno) {
                                    return function () {
                                        HesapAltHesap = parsetable.rows[rowno].cells[0].innerHTML;
                                        ActivateWindow();
                                        GetEl("DivPortfoySubAccount").style.visibility = "hidden";
                                    };
                                };
                                currentrow.onmousedown = cellclick(i);
                            }
                            if (DisplayPortfoyBool) {
                                ActivePageElement = GetEl("DivPortfoy");
                                ActiveFooterNo = 5;
                                ActivateWindow();
                            }

                            //if (SpkUariBool == false) {
                            //    ShowByID("DivSPKPopUp");
                            //    BringByID("DivSPKPopUp");
                            //    GetEl("DivSPKPopUpContent").style.height = (DeviceHeight - GetEl("DivSPKPopUpButton").clientHeight - GetEl("DivSPKPopUpHeader").clientHeight - 20) + "px";
                            //    SpkUariBool = true;
                            //}
                            return;
                        }

                    case "SRV_TRD_BIST_PORTFOY":
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            if (HesapLogin == "0") return;
                            if (HesapAltHesap != ParserFieldArray[6]) return;
                            if (ActivePageElement.id != "DivPortfoy") return;
                            if (ActivePortfoyToolbarNo != 0) return;

                            if (ParserFieldArray[4] == "0") {
                                //alert(ParserFieldArray[5]);
                                ShowAlertWindow("Hata", ParserFieldArray[5]);
                                return;
                            }
                            parsetable = GetEl("TablePortfoyHeader");
                            ClearTable("TablePortfoyHeader");
                            parserow = parsetable.insertRow(0);
                            InsertCell(parserow, "18%", "L", "", "", "H", "Hisse");
                            InsertCell(parserow, "18%", "R", "", "", "H", "Miktar");
                            InsertCell(parserow, "18%", "R", "", "", "H", "Maliyet");
                            InsertCell(parserow, "24%", "R", "", "", "H", "Tutar");
                            InsertCell(parserow, "22%", "R", "", "", "H", "K/Z");

                            parsetable = GetEl("TablePortfoyData");
                            ClearTable("TablePortfoyData");

                            var positionarray = ParserFieldArray[7].split(SEP2);
                            var toplamKZ = 0;
                            var toplamTutar = 0;

                            for (var i = 0; i < positionarray.length; i++) {
                                ParserSplitArray = positionarray[i].split("|");
                                rowcount = parsetable.rows.length;
                                parserow = parsetable.insertRow(rowcount);

                                var symbolstr = "";
                                var miktarstr = "";
                                var maliyetstr = "";
                                var satilabilirstr = "";
                                var karzararstr = "";
                                for (j = 0; j < ParserSplitArray.length; j++) {
                                    var valuearray = ParserSplitArray[j].split("=");
                                    switch (valuearray[0]) {
                                        case "SEMBOL": symbolstr = valuearray[1]; break;
                                        case "MIKTAR": miktarstr = valuearray[1]; break;
                                        case "MALIYET": maliyetstr = valuearray[1]; break;
                                        case "SATILABILIR": satilabilirstr = valuearray[1]; break;
                                        case "KARZARAR": karzararstr = valuearray[1]; if (miktarstr != "0") toplamKZ += parseFloat(karzararstr); break;
                                    }
                                }


                                var tutar = 0;
                                var tutarstr = "";
                                var profit = 0;
                                var profitstr = "";
                                var miktar = parseFloat(miktarstr);

                                if (miktar == 0) continue;
                                var basicitem = BasicObject[symbolstr];
                                if (basicitem != undefined) {
                                    if (basicitem != undefined)
                                        tutar = basicitem.LastPrice * miktar;
                                    if (tutar != 0)
                                        tutarstr = tutar.toFixed(2);
                                    if (maliyetstr != "")
                                        profit = (basicitem.LastPrice - parseFloat(maliyetstr)) * miktar;
                                    if (profit != 0)
                                        profitstr = profit.toFixed(2);
                                }

                                var color = "#FF0";
                                if (parseFloat(karzararstr) > 0)
                                    color = "#5F5";
                                else if (parseFloat(karzararstr) < 0)
                                    color = "#F55";

                                if (tutarstr == "NaN") tutarstr = "";
                                InsertCell(parserow, "18%", "L", "", "#FFF", "", symbolstr);
                                InsertCell(parserow, "20%", "R", "", "#FFF", "", miktarstr);
                                InsertCell(parserow, "18%", "R", "", "#FFF", "", maliyetstr);
                                InsertCell(parserow, "22%", "R", "", "#FFF", "", tutarstr);
                                InsertCell(parserow, "22%", "R", "", color, "", karzararstr);

                                toplamTutar += tutar;
                            }

                            parserow = parsetable.insertRow(rowcount + 1);
                            InsertCell(parserow, "18%", "L", "", "#FF0", "", "Toplam");
                            InsertCell(parserow, "18%", "R", "", color, "", "");
                            InsertCell(parserow, "18%", "R", "", color, "", "");
                            InsertCell(parserow, "24%", "R", "", "#FF0", "", toplamTutar.toLocaleString("en-US"));
                            InsertCell(parserow, "22%", "R", "", (toplamKZ >= 0) ? "#5F5" : "#F55", "", toplamKZ.toLocaleString("en-US"));

                            for (var i = 0; i < parsetable.rows.length; i++) {
                                parserow = parsetable.rows[i];
                                for (var j = 0; j < parserow.cells.length; j++)
                                    parserow.cells[j].style.fontSize = FontSizeTrade;
                            }

                            // click events
                            if (parsetable.rows.length > 0) {
                                for (var i = 0; i < parsetable.rows.length; i++) {
                                    for (var j = 0; j < parsetable.rows[i].cells.length; j++) {
                                        var currentcell = parsetable.rows[i].cells[j];
                                        var cellclick = function (colno, rowno) {
                                            return function () {
                                                HidePopups();
                                                for (var k = 0; k < parsetable.rows.length; k++) {
                                                    parserow = parsetable.rows[k];
                                                    for (var n = 0; n < parserow.cells.length; n++)
                                                        parserow.cells[n].style.backgroundColor = "black";
                                                }
                                                parserow = parsetable.rows[rowno];
                                                for (var n = 0; n < parserow.cells.length; n++)
                                                    parserow.cells[n].style.backgroundColor = "#333";

                                                DetaySymbol = parsetable.rows[rowno].cells[0].innerHTML;
                                                if (colno == 0) {
                                                    DisplayBuySell();
                                                    GetEl("DivBistBuySellTextMiktar").value = parsetable.rows[rowno].cells[1].innerHTML;
                                                    BistBuySellTutarhesapla();
                                                    return;
                                                }
                                            };
                                        };
                                        currentcell.onclick = cellclick(j, i);
                                    }
                                }
                            }

                            return;
                        }

                    case "SRV_TRD_BIST_EMIRLER":
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            if (HesapLogin == "0") return;
                            if (HesapAltHesap != ParserFieldArray[6]) return;
                            if (ActivePageElement.id != "DivPortfoy") return;
                            if (ActivePortfoyToolbarNo != 1) return;

                            if (ParserFieldArray[4] == "0") {
                                //alert(ParserFieldArray[5]);
                                ShowAlertWindow("Hata", ParserFieldArray[5]);
                                return;
                            }
                            var orderstatus = "WAITING";
                            var backcolor = "#000";
                            if (ActiveEmirElement.id == GetEl("DivPortfoyEmirGerceklesen").id)
                                orderstatus = "FILLED";
                            else if (ActiveEmirElement.id == GetEl("DivPortfoyEmirIptaller").id)
                                orderstatus = "CANCELLED";

                            parsetable = GetEl("TablePortfoyHeader");
                            ClearTable("TablePortfoyHeader");
                            parserow = parsetable.insertRow(0);
                            InsertCell(parserow, "21%", "L", "", "", "H", "Hisse");
                            InsertCell(parserow, "14%", "C", "", "", "H", "A/S");
                            InsertCell(parserow, "25%", "R", "", "", "H", "Miktar");
                            InsertCell(parserow, "20%", "R", "", "", "H", "Fiyat");
                            InsertCell(parserow, "20%", "R", "", "", "H", "Süre");
                            parsecell = parserow.insertCell(5);
                            parsecell.style.display = "none";
                            parsecell = parserow.insertCell(6);
                            parsecell.style.display = "none";
                            parsecell = parserow.insertCell(7);
                            parsecell.style.display = "none";
                            parsecell = parserow.insertCell(8);
                            parsecell.style.display = "none";
                            InsertCell(parserow, "15%", "L", "", "", "H", "");
                            parsecell = parserow.insertCell(10);
                            parsecell.style.display = "none";



                            parsetable = GetEl("TablePortfoyData");
                            ClearTable("TablePortfoyData");

                            // print data
                            var positionarray = ParserFieldArray[7].split(SEP2);
                            for (var i = 0; i < positionarray.length; i++) {
                                ParserSplitArray = positionarray[i].split("|");
                                var symbolstr = "";
                                var yonstr = "";
                                var miktarstr = "";
                                var kalanmiktarstr = "";
                                var gerceklesenmiktarstr = "";
                                var fiyatstr = "";
                                var statusstr = "";
                                var ordernostr = "";
                                var orderrefstr = "";
                                var surestr = "";
                                var geneksdurationstr = "";
                                var ordertypestr = "";
                                var durumstr = "";
                                var zincir = "0";
                                var orderdate = "";



                                for (j = 0; j < ParserSplitArray.length; j++) {
                                    var valuearray = ParserSplitArray[j].split("=");
                                    switch (valuearray[0]) {
                                        case "SEMBOL": symbolstr = valuearray[1]; break;
                                        case "YON": yonstr = valuearray[1]; break;
                                        case "KALANMIKTAR": kalanmiktarstr = valuearray[1]; break;
                                        case "GERCEKLESENMIKTAR": gerceklesenmiktarstr = valuearray[1]; break;
                                        case "FIYAT": fiyatstr = valuearray[1]; break;
                                        case "STATUS": statusstr = valuearray[1]; break;
                                        case "ORDERNO": ordernostr = valuearray[1]; break;
                                        case "ORDERREF": orderrefstr = valuearray[1]; break;
                                        case "SURE": surestr = valuearray[1]; break;
                                        case "ORDERTYPE": ordertypestr = valuearray[1]; break;
                                        case "GENEKSDURATION": geneksdurationstr = valuearray[1]; break;
                                        case "DURUM": durumstr = valuearray[1]; break;
                                        case "ZINCIR": zincir = valuearray[1]; break;
                                        case "ORDERDATE": orderdate = valuearray[1]; break;
                                    }
                                }

                                if (statusstr == orderstatus) {
                                    rowcount = parsetable.rows.length;
                                    parserow = parsetable.insertRow(rowcount);

                                    miktarstr = (orderstatus == "FILLED") ? gerceklesenmiktarstr : kalanmiktarstr;

                                    if (HesapKurum == "TACIRLER MENKUL") {
                                        if (symbolstr.indexOf(".") > -1) {
                                            var arr = symbolstr.split(".");
                                            symbolstr = (arr[1] == "E") ? arr[0] : arr[0] + arr[1];
                                        }
                                    }
                                    var basicitem = BasicObject[symbolstr];
                                    //if (basicitem != undefined)
                                    //{
                                    //    fiyatstr = basicitem.GetPriceStr(parseFloat(fiyatstr));
                                    //}

                                    var kalanmiktar = parseFloat(kalanmiktarstr);
                                    var color = "#FF0";
                                    if (yonstr == "A")
                                        color = "#5F5";
                                    else if (yonstr == "S")
                                        color = "#F55";



                                    var fiyatx = parseFloat(fiyatstr).toFixed(2);
                                    if (fiyatstr.trim() != "")
                                        fiyatstr = fiyatx;
                                    InsertCell(parserow, "21%", "L", backcolor, color, "", symbolstr);
                                    InsertCell(parserow, "14%", "C", backcolor, color, "", yonstr);
                                    InsertCell(parserow, "25%", "R", backcolor, color, "", miktarstr);
                                    InsertCell(parserow, "20%", "R", backcolor, color, "", fiyatstr);
                                    InsertCell(parserow, "20%", "R", backcolor, color, "", surestr);
                                    parsecell = parserow.insertCell(5);
                                    parsecell.style.display = "none";
                                    parsecell.innerHTML = ordernostr;
                                    parsecell = parserow.insertCell(6);
                                    parsecell.style.display = "none";
                                    parsecell.innerHTML = geneksdurationstr;
                                    parsecell = parserow.insertCell(7);
                                    parsecell.style.display = "none";
                                    parsecell.innerHTML = orderrefstr;
                                    parsecell = parserow.insertCell(8);
                                    parsecell.style.display = "none";
                                    parsecell.innerHTML = ordertypestr;
                                    parsecell = parserow.insertCell(9);
                                    parsecell.innerHTML = (orderstatus == "WAITING") ? "Detay" : "";
                                    parsecell.style.width = "14%";
                                    parsecell.style.fontSize = "14px";
                                    parsecell.style.borderRadius = "6px";
                                    parsecell.style.height = "100%";
                                    parsecell.style.border = "2px #000 solid";
                                    parsecell.style.borderBottom = Border;
                                    if (orderstatus == "WAITING") {
                                        parsecell.style.color = "black";
                                        parsecell.style.background = "-webkit-linear-gradient(white,#888)";
                                        parsecell.style.background = "-o-linear-gradient(white,#888)";
                                        parsecell.style.background = "-moz-linear-gradient(white,#888)";
                                    }
                                    parsecell = parserow.insertCell(10);
                                    parsecell.style.display = "none";
                                    parsecell.innerHTML = durumstr;
                                    parsecell = parserow.insertCell(11);
                                    parsecell.style.display = "none";
                                    parsecell.innerHTML = zincir;
                                    parsecell = parserow.insertCell(12);
                                    parsecell.style.display = "none";
                                    parsecell.innerHTML = orderdate;
                                }
                            }

                            for (var i = 0; i < parsetable.rows.length; i++) {
                                parserow = parsetable.rows[i];
                                for (var j = 0; j < parserow.cells.length; j++) {
                                    if (j != 9)
                                        parserow.cells[j].style.fontSize = FontSizeTrade;
                                }
                            }

                            // click events
                            if (orderstatus == "WAITING") {
                                if (parsetable.rows.length > 0) {
                                    for (var i = 0; i < parsetable.rows.length; i++) {
                                        for (var j = 0; j < parsetable.rows[i].cells.length; j++) {
                                            var currentcell = parsetable.rows[i].cells[j];
                                            var cellclick = function (colno, rowno) {
                                                return function () {
                                                    EmirSilRowNo = rowno;
                                                    HidePopups();
                                                    for (var k = 0; k < parsetable.rows.length; k++) {
                                                        parserow = parsetable.rows[k];
                                                        for (var n = 0; n < parserow.cells.length; n++) {
                                                            if (n != 9)
                                                                parserow.cells[n].style.backgroundColor = "black";
                                                        }
                                                    }
                                                    parserow = parsetable.rows[rowno];
                                                    for (var n = 0; n < parserow.cells.length; n++) {
                                                        if (n != 9)
                                                            parserow.cells[n].style.backgroundColor = "#333";
                                                    }

                                                    if (colno == 9)
                                                        DisplayEmirDetay();

                                                };
                                            };
                                            currentcell.onclick = cellclick(j, i);
                                        }
                                    }
                                }
                            }

                            return;
                        }

                    case "SRV_TRD_BIST_EMIRGONDER":
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            if (HesapLogin == "0") return;
                            if (HesapAltHesap != ParserFieldArray[6]) return;

                            // alert(ParserFieldArray[5]);




                            if (ParserFieldArray[4] == 1) {
                                HideByID("DivBistBuySell");
                                BuySellDerinlik = "";
                            }

                            if (ActivePageElement.id == "DivPortfoy") {
                                if (ActivePortfoyToolbarNo == 0 || ActivePortfoyToolbarNo == 1)
                                    ActivateWindow();
                            }

                            ShowAlertWindow("Emir Gönder", ParserFieldArray[5]);
                            return;
                        }

                    case "SRV_TRD_BIST_ZINCIR":
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            if (HesapAltHesap != ParserFieldArray[6]) return;

                            // alert(ParserFieldArray[5]);



                            if (ParserFieldArray[4] == 1) {
                                HideByID("DivBistZincirBuySell");
                                HideByID("DivEmirDetay");
                            }

                            ActivateWindow();

                            ShowAlertWindow("Emir Gönder", ParserFieldArray[5]);
                            return;
                        }
                    case "SRV_TRD_BIST_EMIRIPTAL":
                    case "SRV_TRD_BIST_EMIRIYILESTIR":
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            if (HesapLogin == "0") return;
                            if (HesapAltHesap != ParserFieldArray[6]) return;

                            //alert(ParserFieldArray[5]);

                            if (ActivePageElement.id == "DivPortfoy") {
                                if (ActivePortfoyToolbarNo == 1)
                                    ActivateWindow();
                            }
                            ShowAlertWindow("Emir İşlemi", ParserFieldArray[5]);
                            return;
                        }

                    case "SRV_TRD_BIST_HESAPOZET":
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            if (HesapLogin == "0") return;
                            if (HesapAltHesap != ParserFieldArray[6]) return;
                            if (ActivePageElement.id != "DivPortfoy") return;
                            if (ActivePortfoyToolbarNo != 0) return;

                            if (ParserFieldArray[4] == "0") {
                                //alert(ParserFieldArray[5]);
                                ShowAlertWindow("Hata", ParserFieldArray[5]);

                                return;
                            }
                            parsetable = GetEl("TablePortfoyData");
                            rowcount = parsetable.rows.length;
                            parserow = parsetable.insertRow(rowcount);

                            InsertCell(parserow, "", "L", "", "black", "0", ".");
                            var positionarray = ParserFieldArray[7].split(SEP2);

                            for (var i = 0; i < positionarray.length; i++) {
                                ParserSplitArray = positionarray[i].split("=");
                                rowcount = parsetable.rows.length;
                                parserow = parsetable.insertRow(rowcount);

                                var keyx = ParserSplitArray[0].trim();
                                var valuex = ParserSplitArray[1].trim();
                                if (valuex == "N" || valuex == "A" || valuex == "G" || valuex == "O" || valuex == "V" || valuex == "K") continue;

                                InsertCell(parserow, "", "L", "", "silver", "", keyx);
                                parserow.cells[0].style.overflow = "";
                                InsertCell(parserow, "", "L", "", "", "", "");
                                InsertCell(parserow, "", "L", "", "", "", "");
                                InsertCell(parserow, "", "L", "", "", "", "");
                                InsertCell(parserow, "", "R", "", "gainsboro", "", FormattedVolumePrice(valuex));
                                parserow.cells[4].style.overflow = "";
                            }

                            for (var i = 0; i < parsetable.rows.length; i++) {
                                parserow = parsetable.rows[i];
                                for (var j = 0; j < parserow.cells.length; j++)
                                    parserow.cells[j].style.fontSize = FontSizeTrade;
                            }


                            return;
                        }

                    case "SRV_TRD_VIOP_PORTFOY":
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            if (HesapLogin == "0") return;
                            if (HesapAltHesap != ParserFieldArray[6]) return;
                            if (ActivePageElement.id != "DivPortfoy") return;
                            if (ActivePortfoyToolbarNo != 2) return;



                            if (ParserFieldArray[4] == "0") {
                                //alert(ParserFieldArray[5]);
                                ShowAlertWindow("Hata", ParserFieldArray[5]);

                                return;
                            }

                            parsetable = GetEl("TablePortfoyHeader");
                            ClearTable("TablePortfoyHeader");
                            parserow = parsetable.insertRow(0);
                            InsertCell(parserow, "50%", "L", "", "", "H", "Kontrat");
                            InsertCell(parserow, "20%", "R", "", "", "H", "Miktar");
                            InsertCell(parserow, "20%", "R", "", "", "H", "Maliyet");
                            InsertCell(parserow, "20%", "R", "", "", "H", "K/Z");

                            parsetable = GetEl("TablePortfoyData");
                            ClearTable("TablePortfoyData");



                            var positionarray = ParserFieldArray[7].split(SEP2);
                            var toplamKZ = 0;
                            for (var i = 0; i < positionarray.length; i++) {
                                ParserSplitArray = positionarray[i].split("|");
                                rowcount = parsetable.rows.length;
                                parserow = parsetable.insertRow(rowcount);

                                var symbolstr = "";
                                var miktarstr = "";
                                var maliyetstr = "";
                                var satilabilirstr = "";
                                var karzararstr = "";
                                for (j = 0; j < ParserSplitArray.length; j++) {
                                    var valuearray = ParserSplitArray[j].split("=");
                                    switch (valuearray[0]) {
                                        case "SEMBOL": symbolstr = valuearray[1]; break;
                                        case "MIKTAR": miktarstr = valuearray[1]; break;
                                        case "MALIYET": maliyetstr = valuearray[1]; break;
                                        case "KARZARAR": karzararstr = valuearray[1]; valuearray[1]; toplamKZ += parseFloat(karzararstr); break;
                                    }

                                }

                                var miktar = parseFloat(miktarstr);

                                if (miktar == 0 && BistBackOffice == "GENEKS") continue;

                                var color = "#FF0";
                                if (miktar > 0)
                                    color = "#5F5";
                                else if (miktar < 0)
                                    color = "#F55";
                                InsertCell(parserow, "50%", "L", "", color, "", symbolstr);
                                InsertCell(parserow, "20%", "R", "", color, "", miktarstr);
                                InsertCell(parserow, "20%", "R", "", color, "", maliyetstr);
                                InsertCell(parserow, "20%", "R", "", color, "", karzararstr);
                            }

                            parserow = parsetable.insertRow(rowcount + 1);
                            InsertCell(parserow, "50%", "L", "", color, "", "");
                            InsertCell(parserow, "20%", "R", "", "#FF0", "", "");
                            InsertCell(parserow, "20%", "R", "", "#FF0", "", "ToplamKZ");
                            InsertCell(parserow, "20%", "R", "", (toplamKZ >= 0) ? "#5F5" : "#F55", "", toplamKZ.toFixed(2));

                            for (var i = 0; i < parsetable.rows.length; i++) {
                                parserow = parsetable.rows[i];
                                for (var j = 0; j < parserow.cells.length; j++)
                                    parserow.cells[j].style.fontSize = FontSizeTrade;
                            }

                            // click events
                            if (parsetable.rows.length > 0) {
                                for (var i = 0; i < parsetable.rows.length; i++) {
                                    for (var j = 0; j < parsetable.rows[i].cells.length; j++) {
                                        var currentcell = parsetable.rows[i].cells[j];
                                        var cellclick = function (colno, rowno) {
                                            return function () {
                                                HidePopups();
                                                for (var k = 0; k < parsetable.rows.length; k++) {
                                                    parserow = parsetable.rows[k];
                                                    for (var n = 0; n < parserow.cells.length; n++)
                                                        parserow.cells[n].style.backgroundColor = "black";
                                                }
                                                parserow = parsetable.rows[rowno];
                                                for (var n = 0; n < parserow.cells.length; n++)
                                                    parserow.cells[n].style.backgroundColor = "#333";

                                                DetaySymbol = parsetable.rows[rowno].cells[0].innerHTML;
                                                if (colno == 0) {
                                                    DisplayBuySell();
                                                    GetEl("DivViopBuySellTextMiktar").value = Math.abs(parsetable.rows[rowno].cells[1].innerHTML);
                                                    return;
                                                }
                                            };
                                        };
                                        currentcell.onclick = cellclick(j, i);
                                    }
                                }
                            }

                            return;
                        }

                    case "SRV_TRD_VIOP_TEMINAT":
                        {

                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            if (HesapLogin == "0") return;
                            if (HesapAltHesap != ParserFieldArray[6]) return;
                            if (ActivePageElement.id != "DivPortfoy") return;
                            if (ActivePortfoyToolbarNo != 2) return;

                            if (ParserFieldArray[4] == "0") {
                                //alert(ParserFieldArray[5]);
                                ShowAlertWindow("Hata", ParserFieldArray[5]);

                                return;
                            }
                            parsetable = GetEl("TablePortfoyData");
                            rowcount = parsetable.rows.length;
                            parserow = parsetable.insertRow(rowcount);
                            parsecell = parserow.insertCell(0);
                            parsecell.style.borderTop = Border;
                            parsecell.style.color = "black";
                            parsecell.innerHTML = ".";
                            parsecell = parserow.insertCell(1);
                            parsecell.style.borderTop = Border;

                            var positionarray = ParserFieldArray[7].split(SEP2);

                            for (var i = 0; i < positionarray.length; i++) {
                                ParserSplitArray = positionarray[i].split("=");
                                rowcount = parsetable.rows.length;
                                parserow = parsetable.insertRow(rowcount);

                                parsecell = parserow.insertCell(0);
                                CellType(parsecell, "", "left", "silver", ParserSplitArray[0], "1%", true);
                                parsecell.style.overflow = "hidden";
                                parsecell.colSpan = "3";
                                //parsecell = parserow.insertCell(1);
                                //CellType(parsecell, "", "right", "white", " ", "1%", true);
                                parsecell = parserow.insertCell(1);
                                CellType(parsecell, "", "right", "white", FormattedVolumePrice(ParserSplitArray[1]), "1%", true);
                            }

                            for (var i = 0; i < parsetable.rows.length; i++) {
                                parserow = parsetable.rows[i];
                                for (var j = 0; j < parserow.cells.length; j++)
                                    parserow.cells[j].style.fontSize = FontSizeTrade;
                            }

                            break;
                        }

                    case "SRV_TRD_VIOP_EMIRLER": //Ssedat
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            if (HesapLogin == "0") return;
                            if (HesapAltHesap != ParserFieldArray[6]) return;
                            if (ActivePageElement.id != "DivPortfoy") return;
                            if (ActivePortfoyToolbarNo != 3) return;

                            if (ParserFieldArray[4] == "0") {
                                //alert(ParserFieldArray[5]);
                                ShowAlertWindow("Hata", ParserFieldArray[5]);

                                return;
                            }

                            var orderstatus = "WAITING";
                            var backcolor = "#000";
                            if (ActiveEmirElement.id == GetEl("DivPortfoyEmirGerceklesen").id)
                                orderstatus = "FILLED";
                            else if (ActiveEmirElement.id == GetEl("DivPortfoyEmirIptaller").id)
                                orderstatus = "CANCELLED";

                            parsetable = GetEl("TablePortfoyHeader");
                            ClearTable("TablePortfoyHeader");
                            parserow = parsetable.insertRow(0);

                            InsertCell(parserow, "40%", "L", "", "", "H", "Kontrat");
                            InsertCell(parserow, "12%", "C", "", "", "H", "A/S");
                            InsertCell(parserow, "15%", "R", "", "", "H", "Miktar");
                            InsertCell(parserow, "20%", "R", "", "", "H", "Fiyat");
                            InsertCell(parserow, "18%", "R", "", "", "H", "Süre");
                            parsecell = parserow.insertCell(5);
                            parsecell.style.display = "none";
                            parsecell = parserow.insertCell(6);
                            parsecell.style.display = "none";
                            parsecell = parserow.insertCell(7);
                            parsecell.style.display = "none";
                            parsecell = parserow.insertCell(8);
                            parsecell.style.display = "none";
                            parsecell = parserow.insertCell(9);
                            parsecell.style.display = "none";
                            InsertCell(parserow, "14%", "R", "", "", "H", "");
                            parsecell = parserow.insertCell(11);
                            parsecell.style.display = "none";
                            parsecell = parserow.insertCell(12);
                            parsecell.style.display = "none";
                            parsecell = parserow.insertCell(13);
                            parsecell.style.display = "none";
                            parsecell = parserow.insertCell(14);
                            parsecell.style.display = "none";
                            parsecell = parserow.insertCell(15);
                            parsecell.style.display = "none";
                            parsecell = parserow.insertCell(16);
                            parsecell.style.display = "none";
                            parsecell = parserow.insertCell(17);
                            parsecell.style.display = "none";
                            parsecell = parserow.insertCell(18);
                            parsecell.style.display = "none";
                            parsetable = GetEl("TablePortfoyData");
                            ClearTable("TablePortfoyData");

                            // print data
                            var positionarray = ParserFieldArray[7].split(SEP2);

                            for (var i = 0; i < positionarray.length; i++) {
                                ParserSplitArray = positionarray[i].split("|");

                                var symbolstr = "";
                                var yonstr = "";
                                var miktarstr = "";
                                var kalanmiktarstr = "";
                                var gerceklesenmiktarstr = "";
                                var fiyatstr = "";
                                var statusstr = "";
                                var ordernostr = "";
                                var orderRefnostr = "";
                                var surestr = "";
                                var emirtipstr = "";
                                var fiyattipstr = "";
                                var enddatestr = "";
                                var stopfiyatstr = "";
                                var sartsembolstr = "";
                                var sarttipstr = "";
                                var sartfiyatstr = "";
                                var orderdate = "";
                                var aksamSeansStr = "";


                                for (j = 0; j < ParserSplitArray.length; j++) {
                                    var valuearray = ParserSplitArray[j].split("=");
                                    switch (valuearray[0]) {
                                        case "SEMBOL": symbolstr = valuearray[1]; break;
                                        case "YON": yonstr = valuearray[1]; break;
                                        case "KALANMIKTAR": kalanmiktarstr = valuearray[1]; break;
                                        case "GERCEKLESENMIKTAR": gerceklesenmiktarstr = valuearray[1]; break;
                                        case "FIYAT": fiyatstr = valuearray[1]; break;
                                        case "STATUS": statusstr = valuearray[1]; break;
                                        case "ORDERNO": ordernostr = valuearray[1]; break;
                                        case "ORDERREF": orderRefnostr = valuearray[1]; break;
                                        case "SURE": surestr = valuearray[1]; break;
                                        case "EMIRTIP": emirtipstr = valuearray[1]; break;
                                        case "FIYATTIP": fiyattipstr = valuearray[1]; break;
                                        case "ENDDATE": enddatestr = valuearray[1]; break;
                                        case "STOPFIYAT": stopfiyatstr = valuearray[1]; break;
                                        case "SARTSEMBOL": sartsembolstr = valuearray[1]; break;
                                        case "SARTTIP": sarttipstr = valuearray[1]; break;
                                        case "SARTFIYAT": sartfiyatstr = valuearray[1]; break;
                                        case "ORDERDATE": orderdate = valuearray[1]; break;
                                        case "AKSAMSEANS": aksamSeansStr = valuearray[1]; break;

                                    }
                                }

                                var sarttipkod = sarttipstr;
                                if (BistBackOffice == "GENEKS") {
                                    sarttipstr = GetSartTipStr(sarttipkod);
                                }


                                if (statusstr == orderstatus) {
                                    rowcount = parsetable.rows.length;
                                    parserow = parsetable.insertRow(rowcount);
                                    miktarstr = (orderstatus == "FILLED") ? gerceklesenmiktarstr : kalanmiktarstr;
                                    var basicitem = BasicObject[symbolstr];
                                    if (basicitem != undefined) {
                                        fiyatstr = basicitem.GetPriceStr(parseFloat(fiyatstr));
                                    }

                                    var kalanmiktar = parseFloat(kalanmiktarstr);
                                    var color = "#FF0";
                                    if (yonstr == "A")
                                        color = "#5F5";
                                    else if (yonstr == "S")
                                        color = "#F55";
                                    InsertCell(parserow, "40%", "L", backcolor, color, "", symbolstr);
                                    InsertCell(parserow, "12%", "C", backcolor, color, "", yonstr);
                                    InsertCell(parserow, "15%", "R", backcolor, color, "", miktarstr);
                                    InsertCell(parserow, "20%", "R", backcolor, color, "", fiyatstr);
                                    InsertCell(parserow, "18%", "R", backcolor, color, "", surestr);
                                    parsecell = parserow.insertCell(5);
                                    parsecell.innerHTML = ordernostr;
                                    parsecell.style.display = "none";
                                    parsecell = parserow.insertCell(6);
                                    parsecell.innerHTML = emirtipstr;
                                    parsecell.style.display = "none";
                                    parsecell = parserow.insertCell(7);
                                    parsecell.innerHTML = ordernostr; //Ssedat
                                    parsecell.style.display = "none";
                                    parsecell = parserow.insertCell(8);
                                    parsecell.innerHTML = enddatestr;
                                    parsecell.style.display = "none";
                                    parsecell = parserow.insertCell(9);
                                    parsecell.innerHTML = sarttipkod;
                                    parsecell.style.display = "none";
                                    parsecell = parserow.insertCell(10);
                                    parsecell.innerHTML = (orderstatus == "WAITING") ? "Detay" : "";
                                    parsecell.style.width = "14%";
                                    parsecell.style.fontSize = "14px";
                                    parsecell.style.borderRadius = "6px";
                                    parsecell.style.height = "100%";
                                    parsecell.style.border = "2px #000 solid";
                                    parsecell.style.borderBottom = Border;
                                    if (orderstatus == "WAITING") {
                                        parsecell.style.color = "black";
                                        parsecell.style.background = "-webkit-linear-gradient(white,#888)";
                                        parsecell.style.background = "-o-linear-gradient(white,#888)";
                                        parsecell.style.background = "-moz-linear-gradient(white,#888)";
                                    }
                                    parsecell = parserow.insertCell(11);
                                    parsecell.innerHTML = sartsembolstr;
                                    parsecell.style.display = "none";
                                    parsecell = parserow.insertCell(12);
                                    parsecell.innerHTML = sarttipstr;
                                    parsecell.style.display = "none";
                                    parsecell = parserow.insertCell(13);
                                    parsecell.innerHTML = sartfiyatstr;
                                    parsecell.style.display = "none";
                                    parsecell = parserow.insertCell(14);
                                    parsecell.innerHTML = orderRefnostr;
                                    parsecell.style.display = "none";
                                    parsecell = parserow.insertCell(15);
                                    parsecell.innerHTML = orderdate;
                                    parsecell.style.display = "none";
                                    parsecell = parserow.insertCell(16);
                                    parsecell.innerHTML = gerceklesenmiktarstr;
                                    parsecell.style.display = "none";
                                    parsecell = parserow.insertCell(17);
                                    parsecell.innerHTML = kalanmiktarstr;
                                    parsecell.style.display = "none";
                                    parsecell = parserow.insertCell(18);
                                    parsecell.innerHTML = aksamSeansStr;
                                    parsecell.style.display = "none";

                                }
                            }

                            for (var i = 0; i < parsetable.rows.length; i++) {
                                parserow = parsetable.rows[i];
                                for (var j = 0; j < parserow.cells.length; j++) {
                                    if (j != 10)
                                        parserow.cells[j].style.fontSize = FontSizeTrade;
                                }
                            }

                            // click events
                            if (orderstatus == "WAITING") {
                                if (parsetable.rows.length > 0) {
                                    for (var i = 0; i < parsetable.rows.length; i++) {
                                        for (var j = 0; j < parsetable.rows[i].cells.length; j++) {
                                            var currentcell = parsetable.rows[i].cells[j];
                                            var cellclick = function (colno, rowno) {
                                                return function () {
                                                    EmirSilRowNo = rowno;
                                                    HidePopups();

                                                    for (var k = 0; k < parsetable.rows.length; k++) {
                                                        parserow = parsetable.rows[k];
                                                        for (var n = 0; n < parserow.cells.length; n++) {
                                                            if (n != 10)
                                                                parserow.cells[n].style.backgroundColor = "black";
                                                        }
                                                    }
                                                    parserow = parsetable.rows[rowno];
                                                    for (var n = 0; n < parserow.cells.length; n++) {
                                                        if (n != 10)
                                                            parserow.cells[n].style.backgroundColor = "#333";
                                                    }

                                                    if (colno == 10)
                                                        DisplayEmirDetayViop();

                                                };
                                            };
                                            currentcell.onclick = cellclick(j, i);
                                        }
                                    }
                                }
                            }
                            return;
                        }

                    case "SRV_TRD_VIOP_EMIRIPTAL":
                    case "SRV_TRD_VIOP_EMIRIYILESTIR":
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            if (HesapLogin == "0") return;
                            if (HesapAltHesap != ParserFieldArray[6]) return;

                            //alert(ParserFieldArray[5]);

                            if (ActivePageElement.id == "DivPortfoy") {
                                if (ActivePortfoyToolbarNo == 3)
                                    ActivateWindow();
                            }
                            ShowAlertWindow("Emir İşlemi", ParserFieldArray[5]);

                            return;
                        }

                    case "SRV_TRD_VIOP_EMIRGONDER":
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            if (HesapLogin == "0") return;
                            if (HesapAltHesap != ParserFieldArray[6]) return;

                            //alert(ParserFieldArray[5]);

                            if (ParserFieldArray[4] == 1) {
                                HideByID("DivViopBuySell");
                                BuySellDerinlik = "";
                            }

                            if (ActivePageElement.id == "DivPortfoy") {
                                if (ActivePortfoyToolbarNo == 2 || ActivePortfoyToolbarNo == 3)
                                    ActivateWindow();
                            }
                            ShowAlertWindow("Emir İşlemi", ParserFieldArray[5]);

                            return;
                        }
                    case "SRV_TANALIZ":
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (SessionId != ParserFieldArray[3]) return;
                            HesapLogin = ParserFieldArray[4];
                            if (HesapLogin == "0") {
                                //alert(ParserFieldArray[5]);
                                ShowAlertWindow("Hata", ParserFieldArray[5]);

                                return;
                            }
                            ActiveFooterNo = 5;
                            GetEl("FrameTemelAnaliz").src = ParserFieldArray[5];
                            GetEl("FrameTemelAnaliz").frameborder = "0";
                            GetEl("FrameTemelAnaliz").setAttribute("frameborder", "0");

                            return;



                            return;
                        }
                    case "SRV_CHART_GORUNTU":
                        {
                            if (Username != ParserFieldArray[2]) return;
                            if (ParserFieldArray[3] == "0") {
                                //alert("BMK Lisansınız bulunmamaktadır");
                                ShowAlertWindow("Lisans Uyarı", "BMK Lisansınız bulunmamaktadır");

                                return;
                            }
                            var msgurl = "http://www.directfn.com.tr/ChartGoruntu/" + ParserFieldArray[4];
                            var el = GetEl("DivMesajDosya");
                            el.style.display = "inline";
                            ZIndex++;
                            el.style.zIndex = ZIndex;
                            GetEl("ImgMesajDosya").src = msgurl;
                            GetEl("ImgMesajDosya").style.display = "inline-block";
                            //el.style.background = "Url(" + msgurl + ")";
                            //el.style.backgroundRepeat = "no-repeat";
                            // window.open(msgurl);

                            return;

                        }

                }
            }
            catch (e) { }
        }




        function PriceToIndStr(symbol, price) {
            var pricenum = parseFloat(price);
            if (IndDecimal == -1) {
                var item = BasicObject[symbol];
                if (item == undefined)
                    return pricenum.toString();
                else
                    return pricenum.toFixed(item.DecPoint);
            }
            else {
                return pricenum.toFixed(IndDecimal)
            }
        }

        function PriceToStr(symbol, price) {
            var pricenum = parseFloat(price);
            var item = BasicObject[symbol];
            if (item == undefined)
                return pricenum.toString();
            else
                return pricenum.toFixed(item.DecPoint);
        }
        function RandomSayiBul(min, max) {
            return Math.floor(Math.random() * (max - min)) + min;
        }
        function ReadWatchlistSymbols() {
            SayfamCell.innerHTML = WatchlistName;

            if (WatchlistName == "BIST Tüm") {
                var rowno = 0;
                for (var name in BasicObject) {
                    var item = BasicObject[name];
                    if (item.Prefix == "IMKBH" && item.SeriNo == "E") {
                        WatchlistSymbolObject[name] = rowno;
                        rowno++;
                    }
                }
            }

            else if (WatchlistName == "Yıldız Pazar") {
                var rowno = 0;
                for (var name in BasicObject) {

                    var item = BasicObject[name];
                    if (item.Prefix == "IMKBH" && item.Group == "Y" && item.SeriNo == "E") {
                        WatchlistSymbolObject[name] = rowno;
                        rowno++;
                    }
                }
            }
            else if (WatchlistName == "Ana Pazar") {
                var rowno = 0;
                for (var name in BasicObject) {

                    var item = BasicObject[name];
                    if (item.Prefix == "IMKBH" && item.Group == "A" && item.SeriNo == "E") {
                        WatchlistSymbolObject[name] = rowno;
                        rowno++;
                    }

                }
            }
            else if (WatchlistName == "Alt Pazar") {
                var rowno = 0;
                for (var name in BasicObject) {

                    var item = BasicObject[name];
                    if (item.Prefix == "IMKBH" && item.Group == "ALT" && item.SeriNo == "E") {
                        WatchlistSymbolObject[name] = rowno;
                        rowno++;
                    }

                }
            }

            else if (WatchlistName == "BIST INX") {
                var rowno = 0;
                for (var name in BasicObject) {
                    var item = BasicObject[name];
                    if (item.Prefix == "IMKBX") {
                        WatchlistSymbolObject[name] = rowno;
                        rowno++;
                    }
                }
            }

            else if (WatchlistName == "VIOP vadeli") {
                var rowno = 0;
                for (var name in BasicObject) {
                    var item = BasicObject[name];
                    if (item.Prefix == "VIP" && (name.substr(0, 2) == "F_" || name.substr(0, 4) == "TM_F")) {
                        WatchlistSymbolObject[name] = rowno;
                        rowno++;
                    }
                }
            }


            else if (WatchlistName == "VIOP aktif") {
                var rowno = 0;
                for (var name in BasicObject) {
                    var item = BasicObject[name];
                    if (item.Prefix == "VIP" && name.substr(0, 3) == "VIP") {
                        WatchlistSymbolObject[name] = rowno;
                        rowno++;
                    }
                }
            }

            else if (WatchlistName == "Döviz, Altın") {
                var rowno = 0;
                for (var name in BasicObject) {
                    var item = BasicObject[name];
                    if (item.Prefix == "SERPIY" || item.Prefix == "KIYM") {
                        WatchlistSymbolObject[name] = rowno;
                        rowno++;
                    }
                }
            }

            else if (WatchlistName == "Interbank") {
                var rowno = 0;
                for (var name in BasicObject) {
                    var item = BasicObject[name];
                    if (item.Prefix == "INTUSD" || item.Prefix == "INTEUR") {
                        WatchlistSymbolObject[name] = rowno;
                        rowno++;
                    }
                }
            }

            else if (WatchlistName == "Banka Gişe") {
                var rowno = 0;
                for (var name in BasicObject) {
                    var item = BasicObject[name];
                    if (item.Prefix == "BNKGS") {
                        WatchlistSymbolObject[name] = rowno;
                        rowno++;
                    }
                }
            }
            else if (WatchlistName == "Kripto Paralar") {

                var kriptoArr = ["BTCEUR", "BTCTRY", "BTCUSD", "ETHTRY", "ETHUSD", "LTCEUR", "ETHUSD", "LTCEUR", "LTCTRY", "LTCUSD", "XRPEUR", "XRPTRY", "XRPUSD"];
                var rowno = 0;
                for (var name in BasicObject) {
                    var item = BasicObject[name];
                    if (kriptoArr.contains(name)) {
                        WatchlistSymbolObject[name] = rowno;
                        rowno++;
                    }
                }
            }

            else if (WatchlistName == "Pariteler") {
                var rowno = 0;
                for (var name in BasicObject) {
                    var item = BasicObject[name];
                    if (item.Prefix == "FX") {
                        WatchlistSymbolObject[name] = rowno;
                        rowno++;
                    }
                }
            }

            else if (WatchlistName == "Dünya Bono") {
                var rowno = 0;
                for (var name in BasicObject) {
                    var item = BasicObject[name];
                    if (item.Prefix == "WBOND") {
                        WatchlistSymbolObject[name] = rowno;
                        rowno++;
                    }
                }
            }


            else if (WatchlistName == "Yurtdışı") {
                var rowno = 0;
                for (var name in BasicObject) {

                    var item = BasicObject[name];
                    if (item.Prefix == "FUTGCK" ||
                        item.Prefix == "WBOND" ||
                        name == "US30" ||
                        name == "DJ30-A" ||
                        name == "GER30" ||
                        name == "GER30-A" ||
                        name == "SPX500" ||
                        name == "SPX500-A" ||
                        name == "NAS100" ||
                        name == "NAS100-A" ||
                        name == "FRA40" ||
                        name == "FRA40-A" ||
                        name == "GBR100" ||
                        name == "GBR100-A" ||
                        name == "ESP35" ||
                        name == "EUR50" ||
                        name == "SUI20"

                    ) {
                        WatchlistSymbolObject[name] = rowno;
                        rowno++;
                    }
                }
            }

            else if (WatchlistName == "BIST 30") {
                var rowno = 0;
                for (var name in BasicObject) {
                    var item = BasicObject[name];
                    if (item.Prefix == "IMKBH" && item.IndexType.substr(2, 1) == "1") {
                        WatchlistSymbolObject[name] = rowno;
                        rowno++;
                    }
                }
            }

            else if (WatchlistName == "BIST 100") {
                var rowno = 0;
                for (var name in BasicObject) {
                    var item = BasicObject[name];
                    if (item.Prefix == "IMKBH" && item.IndexType.substr(0, 1) == "1") {
                        WatchlistSymbolObject[name] = rowno;
                        rowno++;
                    }
                }
            }

            else if (WatchlistName == "Varant") {
                var rowno = 0;
                for (var name in BasicObject) {
                    var item = BasicObject[name];
                    if (item.Prefix == "IMKBH" && item.SeriNo == "V") {
                        WatchlistSymbolObject[name] = rowno;
                        rowno++;
                    }
                }
            }
            else if (WatchlistName == "Brüt Takas") {
                var rowno = 0;
                for (var name in BasicObject) {
                    var item = BasicObject[name];
                    if (item.BrutTakasBool) {
                        WatchlistSymbolObject[name] = rowno;
                        rowno++;
                    }
                }
            }

            else if (WatchlistName == "VIOP opsiyon") {
                //alert(1);
                var rowno = 0;
                for (var name in BasicObject) {
                    var item = BasicObject[name];
                    if (item.Prefix == "VIP" && name.substr(0, 2) == "O_" || name.substr(0, 4) == "TM_O") {
                        WatchlistSymbolObject[name] = rowno;
                        rowno++;
                    }
                }
            }


            else if (WatchlistName == "Sertifika") {
                var rowno = 0;
                for (var name in BasicObject) {
                    var item = BasicObject[name];
                    if (item.Prefix == "IMKBH" && item.SeriNo == "C") {
                        WatchlistSymbolObject[name] = rowno;
                        rowno++;
                    }
                }
            }

            else if (WatchlistName == "SAYFAM")//ssss
            {
                if (Socket != null)
                    SendRequest("X" + SEP1 + "REQ_SENETLER" + SEP1 + Username + SEP1 + SessionId + SEP1 + "2" + SEP1);
            }
        }

        function Reload() {
            location.reload(true);

        }

        function ReorderParolaSifre() {
            GetEl("HesapLoginLabelParola").style.display = "inline-block";
            GetEl("HesapLoginTextParola").style.display = "inline-block";
            GetEl("labelHesapNoLabel").innerHTML = "Hesap No";
            GetEl("LabelHesapLoginSifre").innerHTML = "Şifre";
            GetEl("HesapLoginOl").innerHTML = "Giriş";

            var elselect = GetEl("HesapLoginSelectKurum");
            var kurum = elselect.options[elselect.selectedIndex].value;
            if (kurum == "INVEST AZ" || kurum == "A YATIRIM" || kurum == "A1 CAPITAL" || kurum == "OSMANLI MENKUL" || kurum == "ALNUS YATIRIM" || kurum == "DINAMIK MENKUL") {
                var el1 = GetEl("LabelHesapLoginSifre");
                el1.parentNode.insertBefore(el1, GetEl("HesapLoginLabelParola"));
                el1 = GetEl("HesapLoginTextSifre");
                el1.parentNode.insertBefore(el1, GetEl("HesapLoginLabelParola"));
                el1 = GetEl("brHesapLoginSifre");
                el1.parentNode.insertBefore(el1, GetEl("HesapLoginLabelParola"));
            }
            else {
                var el1 = GetEl("HesapLoginLabelParola");
                el1.parentNode.insertBefore(el1, GetEl("LabelHesapLoginSifre"));
                el1 = GetEl("HesapLoginTextParola");
                el1.parentNode.insertBefore(el1, GetEl("LabelHesapLoginSifre"));
                el1 = GetEl("brHesapLoginParola");
                el1.parentNode.insertBefore(el1, GetEl("LabelHesapLoginSifre"));
            }
            if (ParolasizKurumlar.contains(kurum)) {
                HesapParola = "";
                GetEl("HesapLoginLabelParola").style.display = "none";
                GetEl("HesapLoginTextParola").style.display = "none";
                GetEl("labelHesapNoLabel").innerHTML = "Kullanıcı Adı";
            }

            if (kurum == "INVEST AZ" || kurum == "A1 CAPITAL")
                GetEl("LabelHesapLoginSifre").innerHTML = "Kullanıcı Kodu";

            if (kurum == "ALAN YATIRIM" || kurum == "INFO YATIRIM" || kurum == "DINAMIK MENKUL" || kurum == "ISIK MENKUL" || kurum == "ALTERNATIF YATIRIM" || kurum == "AHLATCI YATIRIM" || kurum == "ALB YATIRIM")
                GetEl("HesapLoginLabelParola").innerHTML = "Kullanıcı Kodu"

            if (kurum == "TERA MENKUL")
                GetEl("HesapLoginLabelParola").innerHTML = "Kullanıcı Kodu"

            if (kurum == "OSMANLI MENKUL")
                GetEl("LabelHesapLoginSifre").innerHTML = "Şifre";

            if (kurum == "A1 CAPITAL")
                GetEl("HesapLoginLabelParola").innerHTML = "Şifre";

            if (kurum == "UNLU MENKUL") {
                GetEl("labelHesapNoLabel").innerHTML = "Müşteri No";
                GetEl("HesapLoginLabelParola").innerHTML = "Kullanıcı Adı";
            }

            if (kurum == "ALNUS YATIRIM") {
                GetEl("labelHesapNoLabel").innerHTML = "Müşteri No";
                GetEl("LabelHesapLoginSifre").innerHTML = "Şifre";
                GetEl("HesapLoginLabelParola").innerHTML = "Parola";
            }
            if (kurum == "HALK YATIRIM" || kurum == "BURGAN YATIRIM") {
                GetEl("HesapLoginOl").innerHTML = "SMS Talep";
                GetEl("labelHesapNoLabel").innerHTML = "Hesap No";
                GetEl("LabelHesapLoginSifre").innerHTML = "Şifre";
            }


            if (kurum == "ANADOLU YATIRIM") {
                GetEl("HesapLoginLabelMusteriTip").style.display = "inline-block";
                GetEl("HesapLoginSelectMusteriTip").style.display = "inline-block";
                GetEl("HesapLoginBrMusteriTip").style.display = "inline-block";
                GetEl("HesapLoginOl").innerHTML = "SMS Talep";
                GetEl("labelHesapNoLabel").innerHTML = "Kullanıcı Kodu";
                GetEl("LabelHesapLoginSifre").innerHTML = "Parola";
                GetEl("HesapLoginLabelParola").innerHTML = "Kullanıcı Kodu";

            }
            else {
                GetEl("HesapLoginLabelMusteriTip").style.display = "none";
                GetEl("HesapLoginSelectMusteriTip").style.display = "none";
                GetEl("HesapLoginBrMusteriTip").style.display = "none";
            }
        }

        function BuySellDerinlikTemizle() {
            if (GetBsDerinlikTip() == 1) {

                var table = GetEl("BistBuysellDerinlik");

                if (table.rows.length > 1) {
                    parserow = table.rows[1];
                    for (var i = 0; i < parserow.cells.length; i++) {
                        parserow.cells[i].innerHTML = "";
                    }
                }

            }
            else if (GetBsDerinlikTip() == 2) {

                var table = GetEl("BistBuysellEditDerinlik");

                if (table.rows.length > 1) {
                    parserow = table.rows[1];
                    for (var i = 0; i < parserow.cells.length; i++) {
                        parserow.cells[i].innerHTML = "";
                    }
                }

            }
            else if (GetBsDerinlikTip() == 3) {

                var table = GetEl("ViopBuysellDerinlik");

                if (table.rows.length > 1) {
                    parserow = table.rows[1];
                    for (var i = 0; i < parserow.cells.length; i++) {
                        parserow.cells[i].innerHTML = "";
                    }
                }

            }
            else if (GetBsDerinlikTip() == 4) {

                var table = GetEl("ChartBuysellDerinlik");

                if (table.rows.length > 1) {
                    parserow = table.rows[1];
                    for (var i = 0; i < parserow.cells.length; i++) {
                        parserow.cells[i].innerHTML = "";
                    }
                }

            }


            if (BuySellDerinlik != "") {
                DerinlikUpdateTime = 0;
                var basicitem = BasicObject[DetaySymbol];
                if (basicitem != undefined) {
                    SendRequest("X" + SEP1 + "REQ_BSDER" + SEP1 + Username + SEP1 + SessionId + SEP1 + basicitem.Composite + SEP1 + 0 + SEP1 + IslemUpdateTime + SEP1 + SonIslemNo);
                }
            }

        }

        function RequestTurevSymbolList() {

            var basicitem = BasicObject[DetaySymbol];
            if (basicitem != undefined) {
                SendRequest("X" + SEP1 + "REQ_TUREV_LIST" + SEP1 + Username + SEP1 + SessionId + SEP1 + basicitem.Composite + SEP1);
            }
        }

        function PrintCanvasText(ctx, text, backcolor, color, x, y) {
            ctx.fillStyle = backcolor;
            var width = ctx.measureText(text).width + 1;
            ctx.fillRect(x, y - 12, width, 13);
            ctx.fillStyle = color;
            ctx.beginPath();
            ctx.fillText(text, x, y);
            ctx.stroke();
        }

        function RequestLogin() {
            try {
                Username = GetEl("textUsername").value;
                var password = GetEl("textPassword").value;
                var msgsend = "X" + SEP1 + "REQ_CONNECT" + SEP1 + Username + SEP1 + password + SEP1 + SessionId + SEP1 + ProductType + SEP1 + DeviceType;

                if (Username != "" && password != "") {
                    if (SocketSupported)
                        Socket.send(msgsend);
                    else
                        SendRequest(msgsend);
                }
            }
            catch (e) { alert(e) }
        }

        function RequestLogout() {
            //SendRequest("X"+SEP1+"REQ_TRD_LOGOUT"+SEP1+Username+SEP1+SessionId);
            SendRequest("X" + SEP1 + "REQ_LOGOUT");

            YayinState = false;
            HesapLogin = "0";
            CloseSocket();
            if (YayinSckt != null)  // cccc
                YayinSckt.close();
        }

        function RequestNewsKriter() {
            var str = ToEngUp(GetEl("TextHaberSymbol").value);
            SendRequest("X" + SEP1 + "REQ_NEWS_HEADER" + SEP1 + Username + SEP1 + SessionId + SEP1 + "0" + SEP1 + "KRITER" + SEP1 + str);
        }

        function RequestTech() {
            BuySellDerinlikTemizle();
            ChartObject = {};
            Bars.length = 0;
            DrawChart();
            PaintTechToolbar();
            ChartCurrentBarNo = -1;
            ChartLevelPoint = 0;
            var basicitem = BasicObject[DetaySymbol];
            if (basicitem == undefined) return;
            if (ActiveIndicatorElement.id == "DivIndicatorNONE")
                SendRequest("X" + SEP1 + "REQ_CHART" + SEP1 + Username + SEP1 + basicitem.Composite + SEP1 + ActiveChartPeriodElement.innerHTML + SEP1 + "600");
            else
                SendRequest("X" + SEP1 + "REQ_TA" + SEP1 + Username + SEP1 + basicitem.Composite + SEP1 + ActiveChartPeriodElement.innerHTML + SEP1 + "600" + SEP1 + ActiveIndicatorElement.innerHTML + SEP1 +
                    IndParam1 + SEP1 + IndParam2 + SEP1 + IndParam3 + SEP1 + IndParam4 + SEP1 + IndParam5 + SEP1 + IndParam6);


        }

        function ReverseTableCell(cell) {
            if (cell.style.color == "silver") {
                cell.innerHTML = "&#10003;";
                cell.style.color = "aqua";
            }
            else {
                cell.innerHTML = "&#9711;";
                cell.style.color = "silver";
            }
        }

        function Resize() {
            if (YayinState == false) return;
            //main window
            var yatay = false;
            if (DeviceType == "ANY") {
                DeviceHeight = window.innerHeight;
            }
            else {
                //if (window.orientation == -90 || window.orientation == 90)
                //    yatay = true;

            }


            //if (txtFocusBool==false)
            yatay = OrientationBul();
            // if (window.innerWidth>window.innerHeight) yatay=true;
            if (GetEl("DivLogin").style.visibility == "visible") return;

            // yatay


            if (yatay) {
                var basicitem = BasicObject[DetaySymbol];
                if (basicitem == undefined) return;
                GetEl("TextTechSymbol").value = basicitem.GetOriginal();
                RequestTech();
                ShowChartBuysell(true);

            }

            if (yatay) {
                if (GetEl("DivSozlesme").style.display != "none") return;
                if (GetEl("DivMesajDosya").style.display != "none") return;
                if (GetEl("DivMesajlar").style.display != "none") return;
                if (GetEl("DivGelenMesaj").style.display != "none") return;

                GetEl("DivFooter").style.display = "none";
                GetEl("DivMain").style.display = "none";
                GetEl("DivTech").style.display = "inline-block";
                GetEl("DivTech").style.top = "0";
                if (window.innerWidth > window.innerHeight) {
                    YatayHeight = Math.max(YatayHeight, window.innerHeight);
                    GetEl("DivTech").style.height = (YatayHeight - 0) + "px";

                }
                GetEl("TextTechSymbol").style.width = GetEl("TableTechToolbar").rows[0].cells[0].offsetWidth - 20 + "px";
                BringToFront(GetEl("DivTech"));
                if (IndPanel == 0) {
                    GetEl("DivTechCanvas2").style.display = "none";
                    GetEl("DivTechCanvas1").style.top = (GetEl("TextTechSymbol").offsetTop + GetEl("TextTechSymbol").offsetHeight) + "px";
                    GetEl("DivTechCanvas1").style.height = (GetEl("DivTech").offsetHeight - GetEl("DivTechCanvas1").offsetTop - 0) + "px";
                    GetEl("Canvas1Tech").width = GetEl("DivTechCanvas1").clientWidth - 0;
                    GetEl("Canvas1Tech").height = GetEl("DivTechCanvas1").offsetHeight - 0;
                }
                else {
                    var headerheight = Math.max(GetEl("DivTechToolbar").offsetTop + GetEl("DivTechToolbar").offsetHeight, GetEl("TextTechSymbol").offsetTop + GetEl("TextTechSymbol").offsetHeight);
                    GetEl("DivTechCanvas1").style.top = headerheight + "px";
                    GetEl("DivTechCanvas1").style.height = (GetEl("DivTech").offsetHeight - GetEl("DivTech").offsetTop - 0) * 0.66 + "px";
                    GetEl("Canvas1Tech").width = GetEl("DivTechCanvas1").clientWidth - 0;
                    GetEl("Canvas1Tech").height = GetEl("DivTechCanvas1").offsetHeight - 0;

                    GetEl("DivTechCanvas2").style.display = "inline-block";
                    GetEl("DivTechCanvas2").style.left = "0";
                    GetEl("DivTechCanvas2").style.top = (GetEl("DivTechCanvas1").offsetTop + GetEl("DivTechCanvas1").offsetHeight) + 0 + "px";
                    GetEl("DivTechCanvas2").style.height = (GetEl("DivTech").offsetHeight - GetEl("DivTechCanvas2").offsetTop - 0) - 0 + "px";
                    GetEl("Canvas2Tech").width = GetEl("DivTechCanvas2").clientWidth - 0;
                    GetEl("Canvas2Tech").height = GetEl("DivTechCanvas2").offsetHeight - 0;
                }
                DrawChart();
                return;
            }

            GetEl("DivTech").style.display = "none";
            GetEl("DivFooter").style.display = "inline-block";
            GetEl("DivMain").style.display = "inline-block";

            GetEl("DivMain").style.left = "0";
            GetEl("DivMain").style.top = "0";
            GetEl("DivMain").style.width = "100%";
            GetEl("DivMain").style.height = (DeviceHeight - GetEl("DivFooter").offsetHeight - 0) + "px";

            if (ActivePageElement.id == "DivDetay") {
                GetEl("DivDetayFooter").style.top = (GetEl("DivMain").clientHeight - GetEl("DivDetayFooter").offsetHeight) + "px";
                var detaycontainer = GetEl("DivDetayContainer");
                detaycontainer.style.top = (GetEl("DivDetayHeader").offsetTop + GetEl("DivDetayHeader").offsetHeight + 0) + "px";
                detaycontainer.style.height = (detaycontainer.parentNode.clientHeight - GetEl("DivDetayHeader").offsetHeight - GetEl("DivDetayFooter").offsetHeight) + "px";
                detaycontainer.style.width = (window.innerWidth) + "px";

                GetEl("DivAlarmEkleSimge").innerHTML = "&#128276";

                if (FireBaseToken == "" || FireBaseToken == "null" || FireBaseToken == undefined) {
                    GetEl("DivAlarmEkleSimge").style.display = "none";
                }


                for (var i = 0; i < detaycontainer.children.length; i++) {
                    detaycontainer.children[i].style.display = "none";
                    if (i == ActiveDetayFooterNo)
                        detaycontainer.children[i].style.display = "inline-block";
                }
                // detay yüzeysel table
                if (ActiveDetayFooterNo == 0) {
                    var el = GetEl("DivTableDetayYuzeysel");
                    el.style.height = (el.parentNode.clientHeight - el.offsetTop - 0) + "px";
                    FillDetayYuzeyselTable();
                }

                // detay getiri
                if (ActiveDetayFooterNo == 1) {
                    var el = GetEl("DivTableGetiri");
                    el.style.height = (el.parentNode.clientHeight - el.offsetTop - 0) + "px";
                }

                // detay derinlik table
                if (ActiveDetayFooterNo == 2) {
                    var el = GetEl("DivDrnIslem");
                    el.style.height = (el.parentNode.clientHeight - el.offsetTop - 0) + "px";
                }

                // detay kademe table
                if (ActiveDetayFooterNo == 3) {
                    var el = GetEl("DivDetayKademeData");
                    el.style.height = (el.parentNode.clientHeight - el.offsetTop - 0) + "px";
                }

                // detay haber table
                if (ActiveDetayFooterNo == 4) {
                    var el = GetEl("DivTableDetayHaber");
                    el.style.height = (el.parentNode.clientHeight - el.offsetTop - 0) + "px";
                }

                // detay chart
                if (ActiveDetayFooterNo == 5) {
                    if (yatay == false) {
                        GetEl("DivTech").style.display = "none";
                        if (IndPanel == 0) {
                            GetEl("DivDetayIndDiv").style.display = "none";
                            GetEl("DivDetayChartDiv").style.top = (GetEl("DivDetayChartToolbar").offsetTop + GetEl("DivDetayChartToolbar").offsetHeight) + "px";
                            GetEl("DivDetayChartDiv").style.height = (GetEl("DivDetayChart").offsetHeight - GetEl("DivDetayChartDiv").offsetTop - 0) + "px";
                            GetEl("CanvasDetayChart").width = GetEl("DivDetayChartDiv").clientWidth - 0;
                            GetEl("CanvasDetayChart").height = GetEl("DivDetayChartDiv").offsetHeight - 3;
                        }
                        else {
                            GetEl("DivDetayChartDiv").style.top = (GetEl("DivDetayChartToolbar").offsetTop + GetEl("DivDetayChartToolbar").offsetHeight) + "px";
                            GetEl("DivDetayChartDiv").style.height = (GetEl("DivDetayChart").offsetHeight - GetEl("DivDetayChartDiv").offsetTop - 0) * 0.66 + "px";
                            GetEl("CanvasDetayChart").width = GetEl("DivDetayChartDiv").clientWidth - 0;
                            GetEl("CanvasDetayChart").height = GetEl("DivDetayChartDiv").offsetHeight - 0;

                            GetEl("DivDetayIndDiv").style.display = "inline-block";
                            GetEl("DivDetayIndDiv").style.left = "0";
                            GetEl("DivDetayIndDiv").style.top = (GetEl("DivDetayChartDiv").offsetTop + GetEl("DivDetayChartDiv").offsetHeight) + 0 + "px";
                            GetEl("DivDetayIndDiv").style.height = (GetEl("DivDetayChart").offsetHeight - GetEl("DivDetayIndDiv").offsetTop - 0) - 0 + "px";
                            GetEl("CanvasDetayInd").width = GetEl("DivDetayIndDiv").clientWidth;
                            GetEl("CanvasDetayInd").height = GetEl("DivDetayIndDiv").offsetHeight - 3;
                        }
                        // chart menus
                        var top = GetEl("DivDetayChartDiv").offsetTop + GetEl("DivDetayChartToolbar").offsetHeight + 10 + "px";
                        GetEl("DivDetayChartPeriod").style.top = top;
                        GetEl("DivDetayChartPeriod").style.left = "0";
                        GetEl("DivDetayChartPeriod").style.width = "100%";
                        GetEl("DivDetayChartMenu").style.top = top;
                        GetEl("DivDetayChartMenu").style.left = "0";
                        GetEl("DivDetayChartMenu").style.width = "97%";
                        GetEl("DivIndicator").style.top = top;
                        GetEl("DivIndicator").style.left = "0";
                        GetEl("DivIndicator").style.width = "100%";
                    }
                    DrawChart();
                }
            }

            // analiz slide
            if (ActivePageElement.id == "DivAnaliz") {
                GetEl("DivAnalizFooter").style.top = (GetEl("DivMain").clientHeight - GetEl("DivAnalizFooter").offsetHeight) + "px";
                var analizcontainer = GetEl("DivAnalizContainer");
                analizcontainer.style.top = (GetEl("DivAnalizHeader").offsetTop + GetEl("DivAnalizHeader").offsetHeight + 0) + "px";
                analizcontainer.style.height = (analizcontainer.parentNode.clientHeight - GetEl("DivAnalizHeader").offsetHeight - GetEl("DivAnalizFooter").offsetHeight) + "px";
                analizcontainer.style.width = (window.innerWidth) + "px";
                for (var i = 0; i < analizcontainer.children.length; i++) {
                    analizcontainer.children[i].style.display = "none";
                    if (i == ActiveAnalizFooterNo)
                        analizcontainer.children[i].style.display = "inline-block";
                }

                // analiz takas table
                if (ActiveAnalizFooterNo == 0) {
                    var el = GetEl("DivTableAnalizTakas");
                    el.style.height = (el.parentNode.clientHeight - el.offsetTop - 0) + "px";
                }

                // analiz dgl list
                if (ActiveAnalizFooterNo == 3) {
                    var el = GetEl("DivTableDglList");
                    el.style.height = (el.parentNode.clientHeight - el.offsetTop - 0) + "px";
                }



                // analiz sermaye firma
                if (ActiveAnalizFooterNo == 4) {

                    var el = GetEl("DivTableSermayeFirma");
                    el.style.height = (el.parentNode.clientHeight - el.offsetTop - 0) + "px";
                }

                // Pite analiz
                if (ActiveAnalizFooterNo == 5) {
                    var el = GetEl("DivPite");
                    el.style.height = (el.parentNode.clientHeight - el.offsetTop - 0) + "px";
                }


            }

            // watchlist table
            if (ActivePageElement.id == "DivWatchlist") {
                GetEl("DivWatchlist").style.height = (GetEl("DivMain").clientHeight - GetEl("DivWatchlist").offsetTop - 0) + "px";
                var el = GetEl("DivTableWatchlist");
                el.style.height = (el.parentNode.clientHeight - el.offsetTop - 0) + "px";
            }

            // portoy table
            if (ActivePageElement.id == "DivPortfoy") {
                var el = GetEl("DivTablePortfoyData");
                if (ActivePortfoyToolbarNo == 1 || ActivePortfoyToolbarNo == 3)
                    el.style.height = (el.parentNode.clientHeight - el.offsetTop - GetEl("DivPortfoyEmirOperation").offsetHeight) + "px";
                else
                    el.style.height = (el.parentNode.clientHeight - el.offsetTop - 0) + "px";
            }

            // haber
            if (ActivePageElement.id == "DivHaber") {
                var el = GetEl("DivTableNewsHeader");
                el.style.height = (el.parentNode.clientHeight - el.offsetTop - 0) + "px";
            }

            // kurum işlem
            if (ActivePageElement.id == "DivKurumIslem") {
                var el = GetEl("DivTableKurumIslem");
                el.style.height = (el.parentNode.clientHeight - el.offsetTop - 0) + "px";
            }

            // kurum işlem PITE
            if (ActivePageElement.id == "DivKurumIslemPITE") {
                var el = GetEl("DivTableKurumIslemPITE");
                el.style.height = (el.parentNode.clientHeight - el.offsetTop - 0) + "px";
            }

            // hacim liste
            if (ActivePageElement.id == "DivHacimListe") {
                var el = GetEl("DivTableHacimListe");
                el.style.height = (el.parentNode.clientHeight - el.offsetTop - 0) + "px";
            }

            // kurum takas
            if (ActivePageElement.id == "DivKurumTakas") {
                var el = GetEl("DivTableKurumTakas");
                el.style.height = (el.parentNode.clientHeight - el.offsetTop - 0) + "px";
            }



        }

        function SaveIndParam() {
            var elparam;
            switch (ActiveIndicatorElement.id) {
                case "DivIndicatorADX":
                    {
                        elparam = GetEl("DivParamADX");
                        IndParam1 = GetEl("TextParamADXParam1").value;
                        IndParam2 = GetEl("TextParamADXParam2").value;
                        IndParam3 = GetComboValue("SelectParamADXParam3");
                        break;
                    }
                case "DivIndicatorBOL":
                    {
                        elparam = GetEl("DivParamBOL");
                        IndParam1 = GetEl("TextParamBOLParam1").value;
                        IndParam2 = GetEl("TextParamBOLParam2").value;
                        IndParam3 = GetComboValue("SelectParamBOLParam3");
                        IndColors[0] = GetEl("DivColorParamBOL1").style.backgroundColor;
                        IndColors[1] = GetEl("DivColorParamBOL2").style.backgroundColor;
                        IndColors[2] = GetEl("DivColorParamBOL3").style.backgroundColor;
                        break;
                    }
                case "DivIndicatorFBANDS":
                    {
                        elparam = GetEl("DivParamFBANDS");
                        IndParam1 = GetEl("TextParamFBANDSParam1").value;
                        break;
                    }
                case "DivIndicatorATR":
                    {
                        elparam = GetEl("DivParamATR");
                        IndParam1 = GetEl("TextParamATRParam1").value;
                        IndParam2 = GetEl("TextParamATRParam2").value;
                        IndParam3 = GetComboValue("SelectParamATRParam3");
                        break;
                    }
                case "DivIndicatorALGTR":
                    {
                        elparam = GetEl("DivParamALGTR");
                        IndColors[0] = GetEl("DivColorParamALGTR1").style.backgroundColor;
                        IndColors[1] = GetEl("DivColorParamALGTR2").style.backgroundColor;
                        IndColors[2] = GetEl("DivColorParamALGTR3").style.backgroundColor;
                        break;
                    }
                case "DivIndicatorENV":
                    {
                        elparam = GetEl("DivParamENV");
                        IndParam1 = GetEl("TextParamENVParam1").value;
                        IndParam2 = GetEl("TextParamENVParam2").value;
                        IndParam3 = GetComboValue("SelectParamENVParam3");
                        break;
                    }
                case "DivIndicatorEWO":
                    {
                        elparam = GetEl("DivParamEWO");
                        IndParam1 = GetEl("TextParamEWOParam1").value;
                        IndParam2 = GetEl("TextParamEWOParam2").value;
                        IndParam3 = GetComboValue("SelectParamEWOParam3");
                        IndParam4 = GetEl("TextParamEWOParam4").value;
                        break;
                    }
                case "DivIndicatorDI":
                    {
                        elparam = GetEl("DivParamDI");
                        IndParam1 = GetEl("TextParamDIParam1").value;
                        break;
                    }
                case "DivIndicatorAROON":
                    {
                        elparam = GetEl("DivParamAROON");
                        IndParam1 = GetEl("TextParamAROONParam1").value;
                        break;
                    }
                case "DivIndicatorKAIRI":
                    {
                        elparam = GetEl("DivParamKAIRI");
                        IndParam1 = GetEl("TextParamKAIRIParam1").value;
                        IndParam2 = GetEl("TextParamKAIRIParam2").value;
                        IndParam3 = GetComboValue("SelectParamKAIRIParam3");
                        break;
                    }
                case "DivIndicatorMA":
                    {
                        elparam = GetEl("DivParamMA");
                        IndParam1 = GetEl("TextParamMAParam1").value;
                        IndParam2 = GetComboValue("SelectParamMAParam1");
                        IndColors[0] = GetEl("DivColorParamMAParam1").style.backgroundColor;
                        IndParam3 = GetEl("TextParamMAParam2").value;
                        IndParam4 = GetComboValue("SelectParamMAParam2");
                        IndColors[1] = GetEl("DivColorParamMAParam2").style.backgroundColor;
                        IndParam5 = GetEl("TextParamMAParam3").value;
                        IndParam6 = GetComboValue("SelectParamMAParam3");
                        IndColors[2] = GetEl("DivColorParamMAParam3").style.backgroundColor;

                        IndText[0] = "MA " + IndParam1;
                        IndText[1] = "MA " + IndParam3;
                        IndText[2] = "MA " + IndParam5;
                        break;
                    }
                case "DivIndicatorMACD":
                    {
                        elparam = GetEl("DivParamMACD");
                        IndParam1 = GetEl("TextParamMACDParam1").value;
                        IndParam2 = GetEl("TextParamMACDParam2").value;
                        IndParam3 = GetComboValue("SelectParamMACDParam3");
                        IndParam4 = GetEl("TextParamMACDParam4").value;
                        break;
                    }
                case "DivIndicatorMFI":
                    {
                        elparam = GetEl("DivParamMFI");
                        IndParam1 = GetEl("TextParamMFIParam1").value;
                        IndParam2 = GetEl("TextParamMFIParam2").value;
                        IndParam3 = GetComboValue("SelectParamMFIParam3");
                        break;
                    }
                case "DivIndicatorMOM":
                    {
                        elparam = GetEl("DivParamMOM");
                        IndParam1 = GetEl("TextParamMOMParam1").value;
                        IndParam2 = GetEl("TextParamMOMParam2").value;
                        IndParam3 = GetComboValue("SelectParamMOMParam3");
                        break;
                    }
                case "DivIndicatorPAR":
                    {
                        elparam = GetEl("DivParamPAR");
                        IndParam1 = GetEl("TextParamPARParam1").value;
                        IndParam2 = GetEl("TextParamPARParam2").value;
                        IndColors[0] = GetEl("DivColorParamPAR1").style.backgroundColor;
                        break;
                    }
                case "DivIndicatorPVTG":
                    {
                        elparam = GetEl("DivParamPVTG");
                        IndColors[0] = GetEl("DivColorParamPVTGParam1").style.backgroundColor;
                        IndColors[1] = GetEl("DivColorParamPVTGParam2").style.backgroundColor;
                        IndColors[2] = GetEl("DivColorParamPVTGParam3").style.backgroundColor;
                        break;
                    }
                case "DivIndicatorPVTH":
                    {
                        elparam = GetEl("DivParamPVTH");
                        IndColors[0] = GetEl("DivColorParamPVTHParam1").style.backgroundColor;
                        IndColors[1] = GetEl("DivColorParamPVTHParam2").style.backgroundColor;
                        IndColors[2] = GetEl("DivColorParamPVTHParam3").style.backgroundColor;
                        break;
                    }
                case "DivIndicatorRSI":
                    {
                        elparam = GetEl("DivParamRSI");
                        IndParam1 = GetEl("TextParamRSIParam1").value;
                        IndParam2 = GetEl("TextParamRSIParam2").value;
                        IndParam3 = GetComboValue("SelectParamRSIParam3");
                        break;
                    }
                case "DivIndicatorCCI":
                    {
                        elparam = GetEl("DivParamCCI");
                        IndParam1 = GetEl("TextParamCCIParam1").value;
                        IndParam2 = GetEl("TextParamCCIParam2").value;
                        IndParam3 = GetComboValue("SelectParamCCIParam3");
                        break;
                    }
                case "DivIndicatorQQE":
                    {
                        elparam = GetEl("DivParamQQE");
                        IndParam1 = GetEl("TextParamQQEParam1").value;
                        IndParam2 = GetEl("TextParamQQEParam2").value;
                        break;
                    }
                case "DivIndicatorWILLR":
                    {
                        elparam = GetEl("DivParamWILLR");
                        IndParam1 = GetEl("TextParamWILLRParam1").value;
                        IndParam2 = GetEl("TextParamWILLRParam2").value;
                        IndParam3 = GetComboValue("SelectParamWILLRParam3");
                        break;
                    }
                case "DivIndicatorPRCH":
                    {
                        elparam = GetEl("DivParamPRCH");
                        IndParam1 = GetEl("TextParamPRCHParam1").value;
                        break;
                    }
                case "DivIndicatorSTO":
                    {
                        elparam = GetEl("DivParamSTO");
                        IndParam1 = GetEl("TextParamSTOParam1").value;
                        IndParam2 = GetEl("TextParamSTOParam2").value;
                        IndParam3 = GetComboValue("SelectParamSTOParam3");
                        IndParam4 = GetEl("TextParamSTOParam4").value;
                        break;
                    }
                case "DivIndicatorTKE":
                    {
                        elparam = GetEl("DivParamTKE");
                        IndParam1 = GetEl("TextParamTKEParam1").value;
                        IndParam2 = GetComboValue("SelectParamTKEParam2");
                        break;
                    }
                case "DivIndicatorTOMA":
                    {
                        elparam = GetEl("DivParamTOMA");
                        IndParam1 = GetEl("TextParamTOMAParam1").value;
                        IndParam2 = GetEl("TextParamTOMAParam2").value;
                        IndColors[0] = GetEl("DivColorParamTOMA1").style.backgroundColor;
                        IndColors[1] = GetEl("DivColorParamTOMA2").style.backgroundColor;
                        break;
                    }
                case "DivIndicatorEHLRS":
                    {
                        elparam = GetEl("DivParamEHLRS");
                        IndColors[0] = GetEl("DivColorParamEHLRS1").style.backgroundColor;

                        break;
                    }
                case "DivIndicatorVHF":
                    {
                        elparam = GetEl("DivParamVHF");
                        IndParam1 = GetEl("TextParamVHFParam1").value;
                        IndParam2 = GetEl("TextParamVHFParam2").value;
                        IndParam3 = GetComboValue("SelectParamVHFParam3");
                        break;
                    }
                case "DivIndicatorVOL":
                    {
                        elparam = GetEl("DivParamVOL");
                        IndParam1 = GetEl("TextParamVOLParam1").value;
                        IndParam2 = GetComboValue("SelectParamVOLParam2");
                        break;
                    }
            }

            localStorage.removeItem("ActiveIndicatorElement.innerHTML");
            localStorage[ActiveIndicatorElement.innerHTML] = IndParam1 + "|" + IndParam2 + "|" + IndParam3 + "|" + IndParam4 + "|" + IndParam5 + "|" + IndParam6 + "|" + IndColors[0] + "|" + IndColors[1] + "|" + IndColors[2];
            elparam.style.display = "none";
            ActivateWindow();

        }

        function SaveTradeLoginKey() {
            var kurum = "";
            var parola = "";
            var sifre = "";
            var hesapno = "";
            var check1str = "0";
            var check2str = "0";

            var selectedindex = GetEl("HesapLoginSelectKurum").selectedIndex;
            if (selectedindex != -1)
                kurum = GetEl("HesapLoginSelectKurum").options[selectedindex].text;
            parola = GetEl("HesapLoginTextParola").value;
            sifre = GetEl("HesapLoginTextSifre").value;
            hesapno = GetEl("HesapLoginTextHesapNo").value;

            if (GetEl("HesapLoginCheckRemember").checked)
                check1str = "1";
            if (GetEl("HesapLoginCheckRemember2").checked)
                check2str = "1";
            if (check1str == "0") check2str = "0";
            if (check2str == "0") sifre = "_";

            localStorage.removeItem("TRADELOGINKEY");
            var str = check1str + "|" + check2str + "|" + kurum + "|" + parola + "|" + sifre + "|" + hesapno + "|" + HesapAltHesap + "|" + HesapMusteriTip;
            localStorage["TRADELOGINKEY"] = str;
        }

        function SaveWatchlistSymbols() // ssss
        {
            //var symbolobject = {};
            WatchlistSymbolObject = {};
            var symbolarray = [];
            var table = GetEl("TableWatchlist");

            for (var i = 0; i < table.rows.length; i++) {
                var sembolname = table.rows[i].cells[0].innerHTML.trim();
                if (sembolname != "") {
                    symbolarray.push(sembolname + ";" + i.toString());
                    WatchlistSymbolObject[sembolname] = i;
                }
            }
            SendRequest("X" + SEP1 + "REQ_SENETLER" + SEP1 + Username + SEP1 + SessionId + SEP1 + "1" + SEP1 + symbolarray.join("|") + SEP1);

            //var symbolarray = [];
            //for (var name in WatchlistSymbolObject)
            //    symbolarray.push(name + ";" + WatchlistSymbolObject[name]);

            //// localStorage["SAYFAM"] = symbolarray.join("|");

            //SendRequest("X" + SEP1 + "REQ_SENETLER" + SEP1 + Username + SEP1 + SessionId + SEP1 + "1" + SEP1 + symbolarray.join("|") + SEP1);
        }

        function SendKurumMesaj() {
            var msgtext = GetEl("TextYeniMesaj").value;
            if (msgtext == "") return;
            var table = GetEl("TableYeniMesajGruplar");
            if (table.rows.length == 0) return;

            var grupstr = "";
            for (var i = 0; i < table.rows.length; i++) {
                var row = table.rows[i];
                if (row.cells[0].style.color == "aqua")
                    grupstr += "<" + row.cells[1].innerHTML + ">";
            }
            if (grupstr == "") return;

            var savestr = "0";
            if (GetEl("checkYeniMesajKaydet").checked) savestr = "1";

            SendRequest("X" + SEP1 + "REQ_YENIMESAJ" + SEP1 + Username + SEP1 + SessionId + SEP1 + savestr + SEP1 + grupstr + SEP1 + msgtext);

            HideThis(GetEl("DivYeniMesaj"));
        }
        function SendRBFOnay() {
            var msjStr = "X" + SEP1 + "REQ_RBF_ONAY" + SEP1 + Username + SEP1 + SessionId + SEP1 + HesapKurum + SEP1 + HesapNo + SEP1 + HesapAltHesap + SEP1 + HesapParola;
            SendRequest(msjStr);
        }
        function SendRBFCeck() {
            var msjStr = "X" + SEP1 + "REQ_RBF_CHECK" + SEP1 + Username + SEP1 + SessionId + SEP1 + HesapKurum + SEP1 + HesapNo + SEP1 + HesapAltHesap + SEP1 + HesapParola;
            SendRequest(msjStr);
        }
        function SendRequest(msgsend) {
            RequestQueue.push(msgsend);
        }
        function SendRequestFromQueue()  // cccc
        {
            if (RequestQueue.length == 0) return;
            var msgsend = RequestQueue.shift();
            var fieldarray = msgsend.split(SEP1);
            var socketno = 0;
            if (YayinStatus == "0") {
                switch (fieldarray[1]) {
                    case "REQ_CONNECT":
                    case "A":
                    case "WLA":
                    case "B":
                    case "REQ_LOGOUT":
                    case "REQ_TRD_UYARI":
                    case "REQ_ONAY_SOZLESME":
                    case "REQ_ONAY_MESAJ":
                    case "REQ_CEP_USERNAME":
                    case "REQ_ALARM_LIST":
                    case "REQ_ALARM_EKLE":
                    case "REQ_ALARM_NO":
                    case "REQ_ALARM_SIL":
                    case "REQ_DUYURU":
                    case "REQ_SENETLER":
                    case "REQ_FBT":
                    case "REQ_SD":
                    case "REQ_ISLIST":
                    case "REQ_E":
                    case "REQ_EIZ":
                    case "REQ_BNKLIST":
                    case "REQ_TLP":
                    case "REQ_MB":
                    case "REQ_RTKN":
                    case "REQ_TRD_LOGIN":
                    case "REQ_WL_LOGIN":
                    case "REQ_TRD_LOGOUT":
                    case "REQ_SMS_0":
                    case "REQ_SMS_1":
                    case "REQ_TRD_BIST_PORTFOY":
                    case "REQ_TRD_BIST_EMIRLER":
                    case "REQ_TRD_BIST_EMIRGONDER":
                    case "REQ_TRD_BIST_EMIRIPTAL":
                    case "REQ_TRD_BIST_EMIRIYILESTIR":
                    case "REQ_TRD_BIST_ZINCIR":
                    case "REQ_TRD_BIST_TOPLUEMIRIPTAL":
                    case "REQ_TRD_VIOP_PORTFOY":
                    case "REQ_TRD_VIOP_EMIRLER":
                    case "REQ_TRD_VIOP_EMIRGONDER":
                    case "REQ_TRD_VIOP_EMIRIPTAL":
                    case "REQ_TRD_VIOP_TOPLUEMIRIPTAL":
                    case "REQ_TRD_VIOP_EMIRIYILESTIR":
                    case "REQ_BIST_BRUTTAKAS":
                        break;
                    default:
                        socketno = 1;
                        break;

                }
            }

            if (socketno == 0) {
                if (Socket.readyState == 1)
                    Socket.send(msgsend);
            }
            else if (socketno == 1) {
                if (YayinSckt.readyState == 1)
                    YayinSckt.send(msgsend);
            }
        }
        function SearchAutoCompleteTable(table, str) {
            var symbolx = ToEngUp(str);
            ClearTable(table.id);
            if (symbolx == "") return;
            for (var i = 0; i < symbolarray.length; i++) {
                if (symbolarray[i].indexOf(symbolx) != 0) continue;
                var tr = document.createElement('TR');
                table.appendChild(tr);
                var td = document.createElement('TD');
                td.style.paddingTop = "5px";
                td.style.paddingBottom = "5px";
                td.style.border = "1px gray solid";
                td.style.textAlign = "left";
                td.appendChild(document.createTextNode(symbolarray[i]));

                if (table.id == "TableWatchlistSymbol") {
                    var cellclick = function (rowno) {
                        return function () {
                            var tablewl = GetEl("TableWatchlist");
                            for (var i = 0; i < tablewl.rows.length; i++) {
                                var sembolname = tablewl.rows[i].cells[0].innerHTML;
                                if (sembolname == table.rows[rowno].cells[0].innerHTML)
                                    tablewl.rows[i].cells[0].innerHTML = "";
                            }
                            tablewl.rows[WatchlistActiveRow].cells[0].innerHTML = table.rows[rowno].cells[0].innerHTML;
                            SaveWatchlistSymbols();
                            FillWatchlistTable();
                            ActivateWindow();
                        };
                    };

                    td.onmousedown = cellclick(tr.rowIndex);
                    tr.appendChild(td);
                }
                else if (table.id == "TableAnalizHeaderSearch" || table.id == "TableDetayHeaderSearch") {

                    var cellclick = function (rowno) {
                        return function () {
                            DetaySymbol = table.rows[rowno].cells[0].innerHTML
                            ActivateWindow();
                        };
                    };

                    td.onmousedown = cellclick(tr.rowIndex);
                    tr.appendChild(td);
                }
                else if (table.id == "TableTechSearch") {

                    var cellclick = function (rowno) {
                        return function () {
                            DetaySymbol = table.rows[rowno].cells[0].innerHTML
                            RequestTech();
                            GetEl("TextTechSymbol").value = DetaySymbol;
                        };
                    };

                    td.onmousedown = cellclick(tr.rowIndex);
                    tr.appendChild(td);

                }

            }
        }

        function SearchAutoCompleteTable2(table, str) {
            for (var i = 0; i < table.rows.length; i++) {
                var row = table.rows[i];
                if (ToEngUp(row.cells[0].innerHTML).indexOf(ToEngUp(str)) == 0) {
                    table.parentNode.scrollTop = row.offsetTop;
                    break;
                }
            }
        }

        function SearchStringInTable(el, id, colno, toprow) {
            var str = ToEngUp(el.value);
            SearchTable = GetEl(id);
            for (var i = toprow; i < SearchTable.rows.length; i++) {
                SearchRow = SearchTable.rows[i];
                if (ToEngUp(SearchRow.cells[colno].innerHTML).indexOf(ToEngUp(str)) == 0) {
                    SearchTable.parentNode.scrollTop = SearchRow.offsetTop;
                    break;
                }
            }
        }

        function SetRowStyle(row, padvert, bottomborder, fontweight) {
            for (var j = 0; j < row.cells.length; j++) {
                if (padvert != "") {
                    row.cells[j].style.paddingTop = padvert;
                    row.cells[j].style.paddingBottom = padvert;
                }
                if (bottomborder != "")
                    row.cells[j].style.borderBottom = bottomborder;
                if (fontweight != "")
                    row.cells[j].style.fontWeight = fontweight;
            }
        }

        function ShowRenkPalet(el) {
            RenkElement = el;
            var palet = GetEl("DivRenkPalet");
            palet.style.display = "inline-block";
            BringToFront(palet);

            var table = GetEl("TableRenkPalet");
            if (table.rows.length > 0) return;

            SendRequest("X" + SEP1 + "REQ_COLOR_LIST" + SEP1 + Username + SEP1 + SessionId);
        }

        function DerinlikKademeSayisiDegistir() {
            if (DerinlikMaxKadene == 10) DerinlikMaxKadene = 25; else DerinlikMaxKadene = 10;

            var el = GetEl("DivDetayName");
            if (el.innerText != ("Derinlik-" + DerinlikMaxKadene)) {

                ActivateWindow();
            }
        }

        function ShowByID(id) {
            GetEl(id).style.display = "inline-block";
        }

        function ShowLoginPage() {
            //ActiveFooterNo = 3;
            //var logindiv = GetEl("DivLogin");
            //logindiv.style.visibility = "visible";

            GetEl("DivLogin").style.visibility = "visible";
            //GetEl("DivPortfoy").style.visibility = "visible";
            // GetEl("DivPortfoyLogin").innerHTML = "Giriş";
            BringToFront(GetEl("DivLogin"));
            Connect();
        }

        function ShowAlarmEkleWindow() {


            var basic = BasicObject[DetaySymbol];
            if (basic == undefined) return;
            GetEl("DivAlarmEkleTextSymbol").innerHTML = basic.Symbol;
            var sonfyt = 0;

            var option = GetEl("DivAlarmEkleSelectSart").options[GetEl("DivAlarmEkleSelectSart").selectedIndex];
            if (option.value == "U2") {
                if (basic.LastPrice > 0)
                    sonfyt = basic.LastPrice * 1.005;
            }
            else {

                if (basic.LastPrice > 0)
                    sonfyt = basic.LastPrice - (basic.LastPrice * 0.005);
            }

            var fiyattable = GetEl("TableAlarmEkleFiyat");
            ClearTable("TableAlarmEkleFiyat");

            GetEl("DivAlarmEkleTextFiyat").value = "";

            var pricestep = GetPriceStep(basic);

            var laststr = basic.GetPriceStr(sonfyt).replace(",", ".");

            GetEl("DivAlarmEkleTextFiyat").value = laststr;
            GetEl("DivAlarmEkleTextFiyat").step = pricestep;

            if (GetEl("DivAlarmEkle").style.visibility == "visible") {
                //  GetEl("DivAlarmEkle").style.transition = "all 0.2s";
                GetEl("DivAlarmEkle").style.left = "-200px";
                GetEl("DivAlarmEkle").style.visibility = "hidden";
            }
            else {
                GetEl("DivAlarmEkle").style.visibility = "visible";
                BringToFront(GetEl("DivAlarmEkle"));
                //  GetEl("DivAlarmEkle").style.transition = "all 0.2s";
                GetEl("DivAlarmEkle").style.left = "10%";
            }
        }

        function ShowAlarmUyariWindow() {
            if (GetEl("DivAlarmUyari").style.visibility == "visible") {
                //GetEl("DivAlarmUyari").style.transition = "all 0.2s";
                GetEl("DivAlarmUyari").style.left = "-200px";
                GetEl("DivAlarmUyari").style.visibility = "hidden";
            }
            else {
                GetEl("DivAlarmUyari").style.visibility = "visible";
                BringToFront(GetEl("DivAlarmUyari"));
                //GetEl("DivAlarmUyari").style.transition = "all 0.2s";
                GetEl("DivAlarmUyari").style.left = "10%";
            }
        }

        function ShowAlertWindow(headx, contentx) {
            GetEl("DivAlertHeader").innerHTML = headx;
            GetEl("DivAlertContent").innerHTML = contentx;
            GetEl("DivAlert").style.visibility = "visible";
            BringToFront(GetEl("DivAlert"));
            //GetEl("DivAlert").style.transition = "all 0.2s";
            GetEl("DivAlert").style.left = "10%";
        }
        function HideAlertWindow() {
            GetEl("DivAlertHeader").innerHTML = "";
            GetEl("DivAlertContent").innerHTML = "";
            //GetEl("DivAlert").style.transition = "all 0.2s";
            GetEl("DivAlert").style.left = "-200px";
            GetEl("DivAlert").style.visibility = "hidden";
        }
        function ShowConfirmWindow(headx, contentx, type) {
            GetEl("DivConfirmType").innerHTML = type;
            GetEl("DivConfirmContent").style.fontSize = FontSizeSmallWL;
            GetEl("DivConfirmHeader").innerHTML = headx;
            GetEl("DivConfirmContent").innerHTML = contentx;
            GetEl("DivConfirm").style.visibility = "visible";
            BringToFront(GetEl("DivConfirm"));
            //GetEl("DivConfirm").style.transition = "all 0.2s";
            GetEl("DivConfirm").style.left = "10%";

        }
        function HideConfirmWindow() {
            GetEl("DivConfirmType").innerHTML = "";
            GetEl("DivConfirmHeader").innerHTML = "";
            GetEl("DivConfirmContent").innerHTML = "";
            //GetEl("DivConfirm").style.transition = "all 0.2s";
            GetEl("DivConfirm").style.left = "-200px";
            GetEl("DivConfirm").style.visibility = "hidden";
        }
        function DivConfirmOKButtonClick() {
            var val = GetEl("DivConfirmType").innerHTML;
            if (val == "1") {
                var table = GetEl("TablePortfoyData");
                var symbolstr = table.rows[EmirSilRowNo].cells[0].innerHTML;
                var yonstr = table.rows[EmirSilRowNo].cells[1].innerHTML;
                var miktarstr = table.rows[EmirSilRowNo].cells[2].innerHTML;
                var fiyatstr = table.rows[EmirSilRowNo].cells[3].innerHTML;
                var emirnostr = table.rows[EmirSilRowNo].cells[5].innerHTML;
                var emirrefstr = table.rows[EmirSilRowNo].cells[7].innerHTML;
                var zincir = table.rows[EmirSilRowNo].cells[11].innerHTML;

                if (ActivePortfoyToolbarNo == 1) {
                    var msgsend = "ORDERNO=" + emirnostr;
                    msgsend += "|" + "SEMBOL=" + symbolstr;
                    msgsend += "|" + "ZINCIR=" + zincir;
                    SendRequest("X" + SEP1 + "REQ_TRD_BIST_EMIRIPTAL" + SEP1 + Username + SEP1 + SessionId + SEP1 + HesapKurum + SEP1 + HesapNo + SEP1 + HesapAltHesap + SEP1 + HesapParola + SEP1 + msgsend);
                }
                else if (ActivePortfoyToolbarNo == 3) {
                    var surestr = table.rows[EmirSilRowNo].cells[4].innerHTML;
                    var emirtipstr = table.rows[EmirSilRowNo].cells[6].innerHTML;
                    var fiyattipstr = table.rows[EmirSilRowNo].cells[7].innerHTML;
                    var enddatestr = table.rows[EmirSilRowNo].cells[8].innerHTML;
                    var stopfiyatstr = table.rows[EmirSilRowNo].cells[9].innerHTML;
                    var msgsend = "ORDERNO=" + emirnostr;
                    msgsend += "|" + "SEMBOL=" + symbolstr;
                    msgsend += "|" + "MIKTAR=" + miktarstr;
                    msgsend += "|" + "EMIRTIP=" + emirtipstr;
                    msgsend += "|" + "FIYATTIP=" + fiyattipstr;
                    msgsend += "|" + "SURE=" + surestr;
                    msgsend += "|" + "ENDDATE=" + enddatestr;
                    msgsend += "|" + "STOP=" + stopfiyatstr;
                    msgsend += "|" + "YON=" + yonstr;
                    msgsend += "|" + "FIYAT=" + fiyatstr;
                    SendRequest("X" + SEP1 + "REQ_TRD_VIOP_EMIRIPTAL" + SEP1 + Username + SEP1 + SessionId + SEP1 + HesapKurum + SEP1 + HesapNo + SEP1 + HesapAltHesap + SEP1 + HesapParola + SEP1 + msgsend);
                }


            }
            else if (val == "2") {
                SendRequest(GetEl("DivConfirmMsj").innerHTML);
            }
            else if (val == "4") {

                var fiyattable = GetEl("TableBistBuySellFiyat");
                // find symbol
                var basic = BasicObject[DetaySymbol];
                GetEl("DivBistBuySellTextSymbol").value = DetaySymbol;
                var symbol = GetEl("DivBistBuySellTextSymbol").value.replace("ı", "i").replace("İ", "I").toUpperCase();
                var basic = BasicObject[symbol];
                if (basic == undefined) {

                    //  DetaySymbol = "";
                    BuySellDerinlikTemizle();

                    return;
                }
                var pricestep = GetPriceStep(basic);

                var laststr = basic.GetPriceStr(basic.LastPrice).replace(",", ".");
                if (basic.LastPrice == 0)
                    laststr = basic.GetPriceStr(basic.DayClose).replace(",", ".");


                GetEl("DivBistBuySellTextFiyat").value = laststr;
                GetEl("DivBistBuySellTextFiyat").step = pricestep;

                var pricearray = GetBistPriceSteps(basic);
                for (var i = 0; i < pricearray.length; i++) {
                    var rowcount = fiyattable.rows.length;
                    var row = fiyattable.insertRow(rowcount);
                    InsertCell(row, "300px", "L", "", "gainsboro", "", basic.GetPriceStr(pricearray[i]).replace(",", "."));
                    row.cells[0].style.padding = "5px";
                }
                BistBuySellTutarhesapla();

                // click events
                for (var i = 0; i < fiyattable.rows.length; i++) {
                    var currentrow = fiyattable.rows[i];
                    var cellclick = function (rowno) {
                        return function () {
                            GetEl("DivBistBuySellTextFiyat").value = fiyattable.rows[rowno].cells[0].innerHTML;
                            GetEl("TableBistBuySellFiyat").style.display = "none";
                            BistBuySellTutarhesapla();
                        };
                    };
                    currentrow.onmousedown = cellclick(i);
                }
            }

            HideConfirmWindow();

        }

        function DerinlikToplam() {

            var basicitem = BasicObject[DetaySymbol];
            var decpointx = 2;
            if (basicitem != undefined)
                decpointx = basicitem.DecPoint;

            var AlKademeToplam = 0;
            var SatKademeToplam = 0;
            var AlKademeOrtalama = 0;
            var SatKademeOrtalama = 0;
            var AlKademeAToplam = 0;
            var SatKademeAToplam = 0;
            var derinlikRows = GetEl("TableDetayDerinlik").rows;

            for (var i = 0; i < 10; i++) {

                var KademeAlAdetStr = derinlikRows[i].cells[1].innerText.replace(/[^\d\,\-]/g, "").replace(/[^\d\.\-]/g, "");
                var kademeAlx = (derinlikRows[i].cells[2].innerText != "") ? derinlikRows[i].cells[2].innerText.replace(/[^\d\,\-]/g, ".") : "0";
                var kademeSatx = (derinlikRows[i].cells[4].innerText != "") ? derinlikRows[i].cells[4].innerText.replace(/[^\d\,\-]/g, ".") : "0";
                AlKademeToplam += parseFloat(KademeAlAdetStr);
                AlKademeAToplam += parseFloat(KademeAlAdetStr) * parseFloat(kademeAlx);

                var KademeSatAdetStr = derinlikRows[i].cells[5].innerText.replace(/[^\d\,\-]/g, "").replace(/[^\d\.\-]/g, "");
                SatKademeToplam += parseFloat(KademeSatAdetStr);
                SatKademeAToplam += parseFloat(KademeSatAdetStr) * parseFloat(kademeSatx);
            }

            DerinlikToplamTable.rows[0].cells[1].innerHTML = AlKademeToplam.toLocaleString("en-US");
            DerinlikToplamTable.rows[0].cells[2].innerHTML = (AlKademeToplam != 0) ? (AlKademeAToplam / AlKademeToplam).toFixed(decpointx) : 0;
            DerinlikToplamTable.rows[0].cells[4].innerHTML = (SatKademeToplam != 0) ? (SatKademeAToplam / SatKademeToplam).toFixed(decpointx) : 0;
            DerinlikToplamTable.rows[0].cells[5].innerHTML = SatKademeToplam.toLocaleString("en-US");


        }


        function ShowChartBuysell(toggle) {

            // Garfik Al Sat Penceresi
            if (ChartBuySellVisible) {
                var basic = BasicObject[DetaySymbol];
                var prefix = "";
                if (basic.Prefix == "IMKBH" || basic.Prefix == "VIP") {
                    GetEl("DivChartBuySell").style.display = "inline-block";
                    BringToFront(GetEl("DivChartBuySell"));
                    BuySellDerinlik = "CHART";

                }
                else {
                    GetEl("DivChartBuySell").style.display = "none";
                    BuySellDerinlik = "";
                }
            }
            else {
                GetEl("DivChartBuySell").style.display = "none";
                BuySellDerinlik = "";
            }


        }
        function ShowConnectionAlert(toggle) {

            if (GetEl("DivLogin").style.visibility == "visible" || YayinFirstConnect == false) return;

            if (toggle == 1) {
                GetEl("DivConnectionAlertWindow").style.display = "inline";
                BringToFront(GetEl("DivConnectionAlertWindow"));
            }
            else
                GetEl("DivConnectionAlertWindow").style.display = "none";

        }

        function ShowSanalKlavyeNumber(el, X, Y) {
            var klavye = GetEl("DivSanalKlavyeNumber");
            GetEl("KlavyeactiveEl").innerText = el.id;

            klavye.style.top = Y + "px";
            klavye.style.left = X + "px";;
            ShowByID("DivSanalKlavyeNumber");
            BringByID("DivSanalKlavyeNumber");

        }
        function OnClickAkDuyuruBtn(val) {
            SendRequest("X" + SEP1 + "REQ_AKDUYURU_GUNCELLE" + SEP1 + Username + SEP1 + SessionId + SEP1 + HesapKurum + SEP1 + HesapNo + SEP1 + HesapAltHesap + SEP1 + HesapParola + SEP1 + val + SEP1);
        }

        function OnClickKlavye(el) {

            var divsonuc = GetEl("KlavyeSonuc").innerText.split("");
            var activeel = GetEl(GetEl("KlavyeactiveEl").innerText);

            if (el.target.id == "DivSanalKlavyeNumber") return;

            var deger = el.target.innerText;
            if (deger == "") return;
            var kontrol = "0123456789SilTamam";
            if (kontrol.indexOf(deger) < 0) return;


            if (deger == "Sil") {

                //divsonuc.pop();
                divsonuc = [];
            }
            else if (deger == "Tamam") {

                HidePopups();

            }
            else {
                if (divsonuc.length != 0 || deger != "0")
                    divsonuc.push(deger);
            }
            var sonucstr = divsonuc.join("");
            if (sonucstr == "") activeel.innerHTML = "&nbsp;";
            else activeel.innerText = sonucstr;



            GetEl("KlavyeSonuc").innerText = sonucstr;





        }
        function ShowUyariWindow(headX, contX) {
            GetEl("uyariHeader").innerHTML = headX;
            GetEl("uyariContent").innerHTML = contX;
            if (GetEl("DivGecikmeUyari").style.visibility == "visible") {
                //GetEl("DivGecikmeUyari").style.transition = "all 0.2s";
                GetEl("DivGecikmeUyari").style.left = "-200px";
                GetEl("DivGecikmeUyari").style.visibility = "hidden";
            }
            else {
                GetEl("DivGecikmeUyari").style.visibility = "visible";
                GetEl("DivGecikmeUyari").style.zIndex = 200000;
                //GetEl("DivGecikmeUyari").style.transition = "all 0.2s";
                GetEl("DivGecikmeUyari").style.left = "10%";
            }
        }
        function ShowSMSPanel() {

            HesapSMSSifre = "";
            GetEl("TextSMS").value = "";
            GetEl("labelSMSMesaj").textContent = "Tek Kullanımlık SMS Şifreniz\nCep Telefonunuza Gönderilmiştir";
            GetEl("DivHesapLogin").style.visibility = "hidden";
            GetEl("DivHesapLoginSMSOnay").style.visibility = "visible";
            BringToFront(GetEl("DivHesapLoginSMSOnay"));
            GetEl("TextSMS").select();


        }
        function StrToBool(val) {
            if (val == "0")
                return false;
            else
                return true;
        }

        String.prototype.getBytes = function () {
            var bytes = [];
            for (var i = 0; i < this.length; ++i)
                bytes.push(this.charCodeAt(i));
            return bytes;
        }

        function SymbolDecode(strX, codingtype) {
            var str = "";
            switch (strX) {
                case "0": str = "FX'EURUSD"; break;
                case "1": str = "FX'EURTRY"; break;
                case "2": str = "FX'USDTRY"; break;
                case "3": str = "FX'TRYJPY"; break;
                case "4": str = "FX'EURJPY"; break;
                case "5": str = "FX'EURCAD"; break;
                case "6": str = "FX'EURGBP"; break;
                case "7": str = "FX'EURCHF"; break;
                case "8": str = "FX'GBPUSD"; break;
                case "9": str = "FX'GBPJPY"; break;
                case "10": str = "FX'GBPEUR"; break;
                case "11": str = "FX'USDJPY"; break;
                case "12": str = "EUREX'DAX-A"; break;
                case "13": str = "CBOTM'YM-A"; break;
                case "14": str = "CMEM'NQ-A"; break;
                case "15": str = "CMEM'ES-A"; break;
                case "16": str = "VIP'VIP-X030"; break;
                case "17": str = "VIP'VIP-USD"; break;
                case "18": str = "VIP'VIP-EUR"; break;
                case "19": str = "VIP'VIP-GLD"; break;
                case "20": str = "IMKBH'GARAN"; break;
                case "21": str = "IMKBH'HALKB"; break;
                case "22": str = "IMKBH'ISCTR"; break;
                case "23": str = "IMKBH'VAKBN"; break;
                case "24": str = "IMKBH'THYAO"; break;
                case "25": str = "IMKBH'EREGL"; break;
                case "26": str = "IMKBH'AKBNK"; break;
                case "27": str = "IMKBH'YKBNK"; break;
                case "28": str = "IMKBH'KRDMD"; break;
                case "29": str = "IMKBH'TCELL"; break;
                case "30": str = "IMKBH'ENKAI"; break;
                case "31": str = "IMKBH'BIMAS"; break;
                case "32": str = "IMKBH'SAHOL"; break;
                case "33": str = "IMKBH'PETKM"; break;
                case "34": str = "IMKBH'OTKAR"; break;
                case "35": str = "IMKBH'ASYAB"; break;
                case "36": str = "IMKBH'PGSUS"; break;
                case "37": str = "IMKBH'MGROS"; break;
                case "38": str = "IMKBH'ARCLK"; break;
                case "39": str = "IMKBH'KOZAA"; break;
                case "40": str = "IMKBH'TTKOM"; break;
                case "41": str = "IMKBH'EKGYO"; break;
                case "42": str = "IMKBH'ASELS"; break;
                case "43": str = "IMKBH'ULKER"; break;
                case "44": str = "IMKBH'KCHOL"; break;
                case "45": str = "IMKBH'TAVHL"; break;
                case "46": str = "IMKBH'FENER"; break;
                case "47": str = "IMKBH'NTTUR"; break;
                case "48": str = "IMKBH'NTHOL"; break;
                case "49": str = "IMKBH'TUPRS"; break;
                case "50": str = "IMKBH'BIZIM"; break;
                case "51": str = "KIYM'XGLD"; break;
                case "52": str = "DFN'GLDUSD"; break;
                case "53": str = "INTUSD'DLRBNK"; break;
                case "54": str = "BNKGS'ASYAEUR"; break;
                case "55": str = "BNKGS'ASYAUSD"; break;
                case "56": str = "BNKGS'HALKUSD"; break;
                case "57": str = "BNKGS'HALKEUR"; break;
                case "58": str = "BNKGS'ISBNKUSD"; break;
                case "59": str = "BNKGS'ISBNKEUR"; break;
                case "60": str = "BNKGS'SKBNEUR"; break;
                case "61": str = "BNKGS'SKBNUSD"; break;
                case "62": str = "BNKGS'VAKIFEUR"; break;
                case "63": str = "BNKGS'VAKIFUSD"; break;
                case "64": str = "BNKGS'DNZEUR"; break;
                case "65": str = "BNKGS'DNZUSD"; break;
                case "66": str = "BNKGS'AKBEUR"; break;
                case "67": str = "BNKGS'AKBUSD"; break;
                case "68": str = "BNKGS'GRNUSD"; break;
                case "69": str = "BNKGS'GRNEUR"; break;
                case "70": str = "BNKGS'YKBUSD"; break;
                case "71": str = "BNKGS'YKBEUR"; break;
            }
            if (str != "") {
                if (codingtype == 0) {
                    return str;
                }
                else {
                    var symbolnamearray = str.split("'");
                    return symbolnamearray[1];
                }
            }
            return strX;
        }

        function TimerElapsed() {
            var datetime = new Date();
            var dif200 = datetime - Time200;
            var dif1000 = datetime - Time1000;
            var dif5000 = datetime - Time5000;
            var dif30000 = datetime - Time30000;
            var dif300000 = datetime - Time300000;
            var parsetable;
            var parserow;
            var parsecell;


            //// switch to AJAX
            //if (ConnectionEstablished == false && SocketSupported && SocketInitialData == false) // ssss  // cccc
            //{
            //    if (datetime - TimeConnectionTest >= 4000) {
            //        SocketSupported = false;
            //        RequestLogin();
            //    }
            //}



            // yayın rengi
            if (datetime - YayinTime >= 10000 || YayinState == false) {
                if (YayinColorStatus != 0) {
                    SaatCell.style.background = "linear-gradient(#800,#000)";
                    SayfamCell.style.background = "linear-gradient(#800,#000)";
                    MesajCell.style.background = "linear-gradient(#800,#000)";
                    YayinColorStatus = 0;
                    //HesapLogin = 0;
                    // ShowConnectionAlert(1);


                }
            }
            else {

                var background = "linear-gradient(#008,#000)";
                if (SocketSupported) background = "linear-gradient(#000,#000)";
                //background="linear-gradient(#46C,#24A)";
                if (YayinColorStatus != 1) {

                    YayinColorStatus = 1;
                    SaatCell.style.background = background;
                    SayfamCell.style.background = background;
                    MesajCell.style.background = background;
                    //SaatCell.style.color="#8FC";
                    YayinFirstConnect = true;

                }
            }

            //if (ConnectionEstablished == false) return;  //  cccc


            if (dif200 >= 200) {
                Time200 = datetime;
                var timenow = datetime;
                for (var name in BasicObject) {
                    BasicItem = BasicObject[name];
                    if (BasicItem.UpdateBool || BasicItem.BidAskBool) {
                        var timeupdate = BasicItem.UpdateTime;
                        if (timenow - timeupdate >= 700) {
                            BasicItem.UpdateBool = false;
                            BasicItem.BidAskBool = false;
                            DisplayWatchlistData(name);
                        }
                    }
                }

                // repaint derinlik
                if (DerinlikRepaintBool) {
                    if (datetime - DerinlikRepaintTime > 700) {
                        DerinlikRepaintBool = false;
                        BasicItem = BasicObject[DetaySymbol];
                        for (var i = 0; i < DerinlikTable.rows.length; i++) {
                            parserow = DerinlikTable.rows[i];
                            parserow.cells[0].style.backgroundColor = "black";
                            parserow.cells[1].style.backgroundColor = "black";
                            parserow.cells[2].style.backgroundColor = "black";
                            parserow.cells[0].style.color = "#2F2";
                            parserow.cells[1].style.color = "#2F2";
                            parserow.cells[2].style.color = "#2F2";

                            if (parserow.cells[2].innerHTML == BasicItem.MarketMakerBid && BasicItem.MarketMakerBid != 0) {

                                for (var j = 0; j < 3; j++) {
                                    parserow.cells[j].style.backgroundColor = "gainsboro";
                                    parserow.cells[j].style.color = "#F22";
                                }

                            }


                            parserow.cells[4].style.backgroundColor = "black";
                            parserow.cells[5].style.backgroundColor = "black";
                            parserow.cells[6].style.backgroundColor = "black";
                            parserow.cells[4].style.color = "#F22";
                            parserow.cells[5].style.color = "#F22";
                            parserow.cells[6].style.color = "#F22";


                            if (parserow.cells[4].innerHTML == BasicItem.MarketMakerAsk && BasicItem.MarketMakerAsk != 0) {

                                for (var j = 4; j < 7; j++) {
                                    parserow.cells[j].style.backgroundColor = "gainsboro";
                                    parserow.cells[j].style.color = "blue";
                                }

                            }
                        }
                    }
                }

                if (BuySellDerinlik == "IMKBH") {
                    // repaint Buy Sell derinlik
                    if (BsDerinlikRepaintBool) {
                        if (datetime - BsDerinlikRepaintTime > 700) {

                            if (GetEl("DivBistEmirDuzelt").style.display == "none") {
                                BsDerinlikRepaintBool = false;
                                for (var i = 1; i < GetEl("BistBuysellDerinlik").rows.length; i++) {
                                    parserow = GetEl("BistBuysellDerinlik").rows[i];
                                    parserow.cells[0].style.backgroundColor = "black";
                                    parserow.cells[1].style.backgroundColor = "black";
                                    parserow.cells[0].style.color = "#2F2";
                                    parserow.cells[1].style.color = "#2F2";
                                    parserow.cells[3].style.backgroundColor = "black";
                                    parserow.cells[4].style.backgroundColor = "black";
                                    parserow.cells[3].style.color = "#F22";
                                    parserow.cells[4].style.color = "#F22";
                                }
                            } else {
                                BsDerinlikRepaintBool = false;
                                for (var i = 1; i < GetEl("BistBuysellEditDerinlik").rows.length; i++) {
                                    parserow = GetEl("BistBuysellEditDerinlik").rows[i];
                                    parserow.cells[0].style.backgroundColor = "black";
                                    parserow.cells[1].style.backgroundColor = "black";
                                    parserow.cells[0].style.color = "#2F2";
                                    parserow.cells[1].style.color = "#2F2";
                                    parserow.cells[3].style.backgroundColor = "black";
                                    parserow.cells[4].style.backgroundColor = "black";
                                    parserow.cells[3].style.color = "#F22";
                                    parserow.cells[4].style.color = "#F22";
                                }
                            }
                        }
                    }
                }
                else if (BuySellDerinlik == "VIP") {
                    if (BsDerinlikRepaintBool) {
                        if (datetime - BsDerinlikRepaintTime > 700) {
                            BsDerinlikRepaintBool = false;
                            for (var i = 1; i < GetEl("ViopBuysellDerinlik").rows.length; i++) {
                                parserow = GetEl("ViopBuysellDerinlik").rows[i];
                                parserow.cells[0].style.backgroundColor = "black";
                                parserow.cells[1].style.backgroundColor = "black";
                                parserow.cells[0].style.color = "#2F2";
                                parserow.cells[1].style.color = "#2F2";
                                parserow.cells[3].style.backgroundColor = "black";
                                parserow.cells[4].style.backgroundColor = "black";
                                parserow.cells[3].style.color = "#F22";
                                parserow.cells[4].style.color = "#F22";
                            }
                        }
                    }

                }

                else if (BuySellDerinlik == "CHART") {
                    if (BsDerinlikRepaintBool) {
                        if (datetime - BsDerinlikRepaintTime > 700) {
                            BsDerinlikRepaintBool = false;
                            for (var i = 1; i < GetEl("ChartBuysellDerinlik").rows.length; i++) {
                                parserow = GetEl("ChartBuysellDerinlik").rows[i];
                                parserow.cells[0].style.backgroundColor = "black";
                                parserow.cells[1].style.backgroundColor = "black";
                                parserow.cells[0].style.color = "#2F2";
                                parserow.cells[1].style.color = "#2F2";
                                parserow.cells[3].style.backgroundColor = "black";
                                parserow.cells[4].style.backgroundColor = "black";
                                parserow.cells[3].style.color = "#F22";
                                parserow.cells[4].style.color = "#F22";
                            }
                        }
                    }

                }

                // repaint işlem
                if (IslemRepaintCount > 0) {
                    if (datetime - IslemRepaintTime > 700) {
                        for (var i = 0; i < IslemRepaintCount; i++) {
                            var forecolor = "silver";
                            parserow = DrnIslemTable.rows[i];
                            if (parserow.cells[3].innerHTML == "1")
                                forecolor = "#2F2";
                            else if (parserow.cells[3].innerHTML == "2")
                                forecolor = "#F22";


                            parserow.cells[0].style.color = forecolor;
                            parserow.cells[1].style.color = forecolor;
                            parserow.cells[2].style.color = forecolor;

                            parserow.cells[0].style.backgroundColor = "black";
                            parserow.cells[1].style.backgroundColor = "black";
                            parserow.cells[2].style.backgroundColor = "black";

                            if (PiteBool && parserow.cells.length > 4) // cccc
                            {
                                parserow.cells[4].style.color = forecolor;
                                parserow.cells[5].style.color = forecolor;
                                parserow.cells[4].style.backgroundColor = "black";
                                parserow.cells[5].style.backgroundColor = "black";
                            }

                        }
                        IslemRepaintCount = 0;
                    }
                }

                // repaint kapalıçarşı
                if (KapalicarsiRepaintBool) {
                    if (datetime - KapalicarsiUpdateTime > 1000) {
                        KapalicarsiRepaintBool = false;
                        parsetable = GetEl("TableKapalicarsi");
                        for (var i = 1; i < parsetable.rows.length; i++) {
                            parserow = parsetable.rows[i];
                            parserow.cells[1].style.backgroundColor = "black";
                            parserow.cells[1].style.color = "silver";
                            parserow.cells[2].style.backgroundColor = "black";
                            parserow.cells[2].style.color = "silver";
                        }
                    }
                }
            }

            if (dif1000 >= 1950)  // cccc
            {
                Time1000 = datetime;
                //if (ReconnectAllowBool == 1) {
                //    if (SocketInitialData && (YayinStatus == "1" && (datetime - YayinTimeSckt1 >= 6000)) || (YayinStatus == "0" && datetime - YayinTimeSckt2 >= 6000)) {   // cccc
                //        Socket.close();
                //        if (YayinStatus == "0")
                //            YayinSckt.close();
                //        //alert("Reconnect" + "   " + YayinStatus + "   " + YayinTimeSckt2);
                //        setTimeout(function () { Connect() }, 200);
                //    }
                //}


                if (SocketInitialData && (YayinStatus == "1" && (datetime - YayinTimeSckt1 >= 6000)) || (YayinStatus == "0" && datetime - YayinTimeSckt2 >= 6000)) {   // cccc
                    Socket.close();
                    if (YayinStatus == "0")
                        YayinSckt.close();
                    //alert("Reconnect" + "   " + YayinStatus + "   " + YayinTimeSckt2);

                    if (BaskaBaglantiBool == false)
                        setTimeout(function () { Connect() }, 200);
                }

                if (YayinState) {
                    if (datetime - YayinTime >= 30000) {
                        //YayinState=false;
                        //RequestLogout();
                    }
                }

                //// http realtime request  // cccc
                //if (SocketSupported == false)
                //{
                //    if (YayinState)
                //    {
                //        var message = "X" + SEP1 + "REQ_LASTPRICES" + SEP1 + Username + SEP1 + SessionId + SEP1 + BasicUpdateTime;
                //        SendRequest(message);
                //    }
                //}

                // yayın request
                if (YayinState) {
                    //if (InitialMesajCount == 0)
                    //{
                    //    SendRequest("X" + SEP1 + "REQ_MESAJLAR" + SEP1 + Username + SEP1 + SessionId);
                    //    InitialMesajCount++;
                    //}

                    // detay
                    if (ActivePageElement.id == "DivDetay") {
                        // detay yuzeysel request
                        if (ActiveDetayFooterNo == 0) {
                            var basicitem = BasicObject[DetaySymbol];
                            if (basicitem != undefined)
                                SendRequest("X" + SEP1 + "REQ_YUZEYSEL3" + SEP1 + Username + SEP1 + SessionId + SEP1 + basicitem.Composite);
                        }

                        // detay derinlik request  //  cccc
                        //if (ActiveDetayFooterNo == 2)
                        //{
                        //    var basicitem = BasicObject[DetaySymbol];
                        //    if (basicitem != undefined)
                        //    {
                        //        DerinlikRequestCount++;
                        //        if (DerinlikRequestCount > 2 && BuySellDerinlik=="")
                        //            SendRequest("X" + SEP1 + "REQ_DERINLIK" + SEP1 + Username + SEP1 + SessionId + SEP1 + basicitem.Composite + SEP1 + DerinlikUpdateTime + SEP1 + IslemUpdateTime + SEP1 + SonIslemNo);
                        //    }
                        //}

                    }

                    //BuySell Derinlik Request
                    if (BuySellDerinlik != "" && GetBsDerinlikTip() > 0) {
                        var basicitem = BasicObject[DetaySymbol];
                        if (basicitem != undefined) {
                            SendRequest("X" + SEP1 + "REQ_BSDER" + SEP1 + Username + SEP1 + SessionId + SEP1 + basicitem.Composite + SEP1 + DerinlikUpdateTime + SEP1 + IslemUpdateTime + SEP1 + SonIslemNo);
                        }
                    }

                }
            }

            // 5000
            if (dif5000 >= 10000) {
                Time5000 = datetime;

                // request kapalıçarşı
                if (YayinState) {
                    if (ActivePageElement.id == "DivKapalicarsi") {
                        var message = "X" + SEP1 + "REQ_CARSI2" + SEP1 + Username + SEP1 + SessionId + SEP1 + "1";
                        SendRequest(message);
                    }
                }

                // getiri tablosu
                if (ActiveDetayFooterNo == 1) {
                    var basicitem = BasicObject[DetaySymbol];
                    if (basicitem != undefined)
                        SendRequest("X" + SEP1 + "REQ_SYMBOL_GETIRI" + SEP1 + basicitem.Composite + SEP1 + Username + SEP1 + SessionId + SEP1 + "1");
                }
                //if (InitialLogin)
                //{
                //	InitialLogin=false;
                //GetEl("DivLoginConnect").style.visibility="visible";
                //}


                if (YayinState) {
                    InitialRequestCount++
                    // initial manşet haber request
                    if (InitialRequestCount == 1) {
                        var message = "X" + SEP1 + "REQ_NEWS_HEADER" + SEP1 + Username + SEP1 + SessionId + SEP1 + "0" + SEP1 + "MANSET";
                        SendRequest(message);
                    }

                    // watchlist request
                    if (WatchlistName == "Yükselen") {
                        SendRequest("X" + SEP1 + "REQ_BIST_YUKSELEN" + SEP1 + Username + SEP1 + SessionId);
                    }
                    if (WatchlistName == "Düşen") {
                        SendRequest("X" + SEP1 + "REQ_BIST_DUSEN" + SEP1 + Username + SEP1 + SessionId);
                    }
                    if (WatchlistName == "Hacim") {
                        SendRequest("X" + SEP1 + "REQ_BIST_HACIM" + SEP1 + Username + SEP1 + SessionId);
                    }

                    // manşet haber request
                    if (SocketSupported == false) {
                        var message = "X" + SEP1 + "REQ_NEWS_HEADER" + SEP1 + Username + SEP1 + SessionId + SEP1 + NewsUpdateTime + SEP1 + "MANSET";
                        SendRequest(message);
                    }

                    // detay chart request
                    if (ActivePageElement.id == "DivDetay") {
                        if (ActiveDetayFooterNo == 5) {
                            var basicitem = BasicObject[DetaySymbol];
                            if (basicitem != undefined) {
                                if (ActiveIndicatorElement == GetEl("DivIndicatorNONE"))
                                    SendRequest("X" + SEP1 + "REQ_CHART" + SEP1 + Username + SEP1 + basicitem.Composite + SEP1 + ActiveChartPeriodElement.innerHTML + SEP1 + "2");
                            }
                        }
                    }

                    // BIST tüm görünüm
                    if (ActivePageElement.id == "DivBistTumGorunum") {
                        FillBistTumGorunum();
                    }
                }
            }


            if (dif30000 >= 30000) {
                Time30000 = datetime;


            }

            if (dif300000 >= 300000) {
                Time300000 = datetime;

                if (YayinState) {
                    var message = "X" + SEP1 + "REQ_CLOSEPRICES" + SEP1 + Username + SEP1 + SessionId;
                    SendRequest(message);
                }
            }
        }

        function ToEngUp(str) {
            str = str.replace("ç", "c");
            str = str.replace("Ç", "C");
            str = str.replace("ı", "i");
            str = str.replace("İ", "I");
            str = str.replace("ğ", "g");
            str = str.replace("Ğ", "G");
            str = str.replace("ö", "o");
            str = str.replace("Ö", "O");
            str = str.replace("ş", "s");
            str = str.replace("Ş", "S");
            str = str.replace("ü", "u");
            str = str.replace("Ü", "U");
            return str.toUpperCase();
        }
        function navigateUrl(val, tipx) {
            if (tipx == 0)
                window.location.href = val;
            else if (tipx == 1)
                window.open(val);
        }
        function FindAndReplaceLink(inputText) {
            var replacedText, replacePattern1, replacePattern2, replacePattern3;

            //URLs starting with http://, https://, or ftp://
            replacePattern1 = /(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim;
            replacedText = inputText.replace(replacePattern1, '<a href="$1" target="_self">$1</a>');

            //URLs starting with "www." (without // before it, or it'd re-link the ones done above).
            replacePattern2 = /(^|[^\/])(www\.[\S]+(\b|$))/gim;
            replacedText = replacedText.replace(replacePattern2, '$1<a href="http://$2" target="_self">$2</a>');

            //Change email addresses to mailto:: links.
            replacePattern3 = /(([a-zA-Z0-9\-\_\.])+@[a-zA-Z\_]+?(\.[a-zA-Z]{2,6})+)/gim;
            replacedText = replacedText.replace(replacePattern3, '<a href="mailto:$1">$1</a>');

            return replacedText;
        }

        function TouchMoveDetay(ev) {
            //ev.preventDefault();
            //alert("up");
            //GetEl("DivDetayName").innerHTML=ev.pageX
        }

        function TouchStartTech(ev) {
            //ev.preventDefault();
            TouchTechX = ev.changedTouches[0].pageX;
            //GetEl("TableTechToolbar").rows[0].cells[2].innerHTML=TouchTechX;

        }

        function TouchMoveTech(ev) {
            ev.preventDefault();
            var x = ev.changedTouches[0].pageX;

            if (x - TouchTechX < -30) // left
            {
                if (ChartBarSpace < 40) {
                    ChartBarSpace *= 2;
                    DrawChart();
                }
                TouchTechX = x;
            }
            else if (x - TouchTechX > 30) // left
            {
                if (ChartBarSpace > 1) {
                    ChartBarSpace /= 2;
                    DrawChart();
                }
                TouchTechX = x;
            }
        }

    </script>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-147142469-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-147142469-1');
    </script>

</head>

<body class="NoTextHighlight" onload="Init()" onresize="Resize()" oncontextmenu="return false;" ondragstart="return false;" ondrop="return false;" style="background-color:black;color:white">

    <!-- login -->
    <div id="DivLogin" style="position:absolute;background-color:#000;left:0;top:0;width:100%;height:100%">
        <div id="DivLogo" onclick="Reload()" style="text-align:center;font-weight:bold;color:gold;padding:5px;font-size:20px">iDeal Cep <span id="CodeVer" style="font-size:20px">0</span></div>
        <div style="text-align:center;padding:2px;color:silver">iDealCEP iDealData firmasının bir markasıdır</div>
        <div style="text-align:center;padding:2px;color:silver">Tüm hakları iDealData’ya aittir</div>
        <div id="DivGuncelle" onclick="Reload()" style="text-align:center;font-weight:bold;color:gold;padding:5px;font-size:20px">Güncelle</div><br>


        <label style="width:25%">Kullanıcı Adı</label>
        <input type="text" id="textUsername" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br><br>
        <label style="width:25%">Şifre</label>
        <input type="password" id="textPassword" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br><br>
        <label style="margin-left:30%"> <input type="checkbox" id="checkRemember">Hatırla</label><br><br>
        <div id="DivLoginConnect" class="PushButton" style="display:inline-block;width:92%;padding:2%;margin-left:2%" onclick="ConnectionTryCount=0;LoginClicked=true;Connect()">Bağlan</div><br><br>

        <div id="DivLoginConnect" class="PushButton" style="display:inline-block;width:92%;padding:2%;margin-left:2%" onclick="window.location = 'https://cep.idealdata.com.tr/gck.html'">15 Dakika Gecikmeli Veri İçin Tıklayınız</div><br><br>
        <br><br><br>
        <div style="text-align:center;font-weight:bold;color:aqua;font-size:20px"><span style="font-family:Conv_Sansus Webissimo-Regular;color:dodgerblue;font-size:20px">iDeal<span style="color:darkorange;font-size:20px">Data</span></span></div>
        <div style="text-align:center">www.idealdata.com.tr</div>
        <div style="text-align:center">Tel : 0212-385 35 35</div>
    </div>



    <!-- footer -->
    <div id="DivFooter" style="position:absolute;visibility:hidden;overflow:hidden;left:0;width:100%;bottom:0;border-top:1px #333 solid;background-color:black">
        <table id="TableFooter" class="TableStyle" style="margin-top:2px;border-collapse:separate"></table>
    </div>


    <!-- MAIN -->
    <div id="DivMain" style="position:absolute;display:inline-block;visibility:hidden;overflow:hidden;left:0;top:0;width:100%;text-align:center;background-color:black">

        <!-- watchlist -->
        <div id="DivWatchlist" class="Page" style="background-color:black">
            <table id="TableWatchlistHeader" class="TableStyle" style="border-collapse:separate;margin-top:0px"></table>
            <table id="TableWatchlistColName" class="TableStyle" style="margin-bottom:3px;margin-top:3px;border-collapse:collapse;border-bottom:0px darkturquoise solid"></table>
            <div id="DivTableWatchlist" style="overflow:auto;background-color:black">
                <table id="TableWatchlist" class="TableStyle"></table>
            </div>
            <div id="DivDemo" style="position:absolute;display:none;bottom:0;left:0;width:100%;height:35%;background-color:#555;border:2px #888 solid;border-radius:5px">
                <br>ücretsiz versiyonu kullanmaktasınız.
                <br> üye olmak için bizi arayınız.
                <br>
                <br> DirectFN Türkiye
                <p></p>
                <a href="tel:+902123853535" style="color:white">0212 385 35 35</a>
            </div>
        </div>

        <!-- menu edit -->
        <div id="DivSymbolEdit" class="EntryPage" style="left:15%;top:5%;width:75%;height:auto;background-color:#333;border:3px #AAA solid;padding:2%;border-radius:5px">
            <input type="text" id="DivSymbolEditSymbol" onkeyup="OnKeyUp_DivSymbolEditSymbol(this,event)" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" style="width:90%;text-transform:uppercase" />
            <div id="DivSymbolEditSearch" class="ComboTable" style="height:90px;width:94%;position:relative">
                <table id="TableWatchlistSymbol" class="TableStyle"></table>
            </div>
            <div id="DivSymbolEditInsert" class="PushButton" onclick="OnClick_DivSymbolEdit(this)" style="width:42%;position:relative;padding:2%">Satır Ekle</div>
            <div id="DivSymbolEditDelete" class="PushButton" onclick="OnClick_DivSymbolEdit(this)" style="width:42%;position:relative;padding:2%">Satır Sil</div>
            <div id="DivSymbolEditCancel" class="PushButton" onclick="OnClick_DivSymbolEdit(this)" style="width:92%;position:relative;padding:2%">Vazgeç</div>
        </div>

        <!-- piyasa seç -->
        <div id="DivMarket" class="Page" onclick="OnClick_PiyasaSec_Button(event)" style="display:none;background-color:#333;overflow:auto">

            <div id="DivMarketSayfam" class="MenuItem" style="width:40%;margin-top:10px">SAYFAM</div>
            <div id="DivMarketBistTum" class="MenuItem" style="width:40%;margin-top:10px">BIST Tüm</div><br>

            <div id="DivMarketViop" class="MenuItem" style="width:40%">VIOP vadeli</div>
            <!--<div id="DivMarketBistUlusal1" class="MenuItem" style="width:40%">1.Ulusal</div><br>-->
            <div id="DivMarketBist30" class="MenuItem" style="width:40%">BIST 30</div><br>

            <div id="DivMarketViopAktif" class="MenuItem" style="width:40%">VIOP aktif</div>
            <div id="DivMarketBist100" class="MenuItem" style="width:40%">BIST 100</div><br>


            <div id="DivMarketViopOpsiyon" class="MenuItem" style="width:40%">VIOP opsiyon</div>
            <div id="DivMarketBistYukselen" class="MenuItem" style="width:40%">Yükselen</div><br>

            <div id="DivMarketSerPiy" class="MenuItem" style="width:40%">Döviz, Altın</div>
            <div id="DivMarketBistDusen" class="MenuItem" style="width:40%">Düşen</div><br>

            <div id="DivMarketInterbank" class="MenuItem" style="width:40%">Interbank</div>
            <div id="DivMarketBistHacim" class="MenuItem" style="width:40%">Hacim</div><br>

            <div id="DivMarketParite" class="MenuItem" style="width:40%">Pariteler</div>
            <div id="DivMarketBistInx" class="MenuItem" style="width:40%">BIST INX</div><br>


            <div id="DivMarketYurtdisi" class="MenuItem" style="width:40%">Yurtdışı</div>
            <div id="DivMarketBistAna" class="MenuItem" style="width:40%">Ana Pazar</div><br>


            <div id="DivMarketBankaGise" class="MenuItem" style="width:40%">Banka Gişe</div>
            <div id="DivMarketBistY" class="MenuItem" style="width:40%">Yıldız Pazar</div><br>



            <div id="DivMarketDunyaBono" class="MenuItem" style="width:40%">Dünya Bono</div>
            <div id="DivMarketBistALT" class="MenuItem" style="width:40%">Alt Pazar</div><br>



            <div id="DivMarketKriptoParalar" class="MenuItem" style="width:40%">Kripto Paralar</div>
            <div id="DivMarketHoldingler" class="MenuItem" style="width:40%">Holdingler</div><br>


            <div id="DivMarketBrutTakas" class="MenuItem" style="width:40%">Brüt Takas</div>
            <div id="DivMarketCimento" class="MenuItem" style="width:40%">Taş, Toprak</div><br>


            <div id="DivMarketBistVarant" class="MenuItem" style="width:40%">Varant</div>
            <div id="DivMarketDemirCelik" class="MenuItem" style="width:40%">Metal</div><br>


            <div id="DivMarketBankalar" class="MenuItem" style="width:40%">Bankalar</div>
            <div id="DivMarketTeknoloji" class="MenuItem" style="width:40%">Teknoloji</div><br>


            <div id="DivMarketSigortalar" class="MenuItem" style="width:40%">Sigortalar</div>
            <div id="DivMarketKimya" class="MenuItem" style="width:40%">Kimya</div><br>


            <div class="MenuItem" style="visibility:hidden;width:40%"></div>

        </div>

        <!-- Detay  -->
        <div id="DivDetay" class="Page" onmousedown="if (event.target.className!='ComboTable') HideComboTables();" style="background-color:black">
            <!-- Header  -->
            <div id="DivDetayHeader" style="width:100%">
                <div onclick="DerinlikKademeSayisiDegistir()" id="DivDetayName" class="BigButton Bold" style="width:25%;color:aqua">.</div>
                <input type="text" id="TextDetayHeaderSymbol" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" onkeyup="OnKeyUp_TextDetayHeaderSymbol(this,event)" onmouseup="FillAutoDetayHeader(this);" style="width:40%;text-transform:uppercase;text-align:center;color:white;font-weight:bold" />
                <div id="DivDetayBuySell" class="Pad2P" onclick="DisplayBuySell()" style="width:12%;font-weight:bold;color:black;background-color:gold;margin-bottom:3%">A / S</div>
                <div id="DivAlarmEkleSimge" onclick="ShowAlarmEkleWindow()" style="width:9%;font-weight:bold;color:white;background-color:black;margin-bottom:3%;display:inline-block;cursor:pointer">.</div>
            </div>

            <!-- Detay Slider -->
            <div id="DivDetayContainer" class="Page">

                <!-- yuzeysel  -->
                <div id="DivDetayYuzeysel" class="Page">
                    <div id="DivTableDetayYuzeysel" style="overflow:auto">
                        <table id="TableDetayYuzeysel" class="TableStyle"></table>
                    </div>
                </div>

                <!-- getiri-->
                <div id="DivGetiri" class="Page">
                    <div id="DivTableGetiri" style="overflow:auto">
                        <table id="TableGetiri" class="TableStyle" style="border-collapse:separate"></table>
                    </div>
                </div>

                <!-- derinlik  -->
                <div id="DivDetayDerinlik" class="Page">
                    <table id="TableDerinlikYzy" class="TableStyle"></table>
                    <table id="TableDerinlikHeader1" class="TableStyle"></table>
                    <div id="DivTableDetayDerinlik" style="overflow:auto">
                        <table id="TableDetayDerinlik" class="TableStyle"></table>
                    </div>
                    <table id="TableDetayDerinlikToplam" class="TableStyle"></table>
                    <table id="TableDrnIslemColName" class="TableStyle"></table>
                    <div id="DivDrnIslem" style="overflow:auto" onclick="IslemKonsolideBool=!IslemKonsolideBool;ActivateWindow()">
                        <table id="TableDrnIslem" class="TableStyle"></table>
                    </div>
                </div>

                <!-- kademe  -->
                <div id="DivDetayKademe" class="Page">
                    <table id="TableKademeToolbar" class="TableStyle" style="border-collapse:separate"></table>
                    <table id="TableDetayKademeHeader" class="TableStyle" style="border-collapse:separate"></table>
                    <div id="DivDetayKademeData" style="overflow:auto">
                        <table id="TableDetayKademeData" class="TableStyle"></table>
                    </div>
                </div>

                <!-- haber -->
                <div id="DivDetayHaber" class="Page">
                    <div id="DivTableDetayHaber" style="overflow:auto">
                        <table id="TableDetayHaber" style="overflow:hidden;width:99%;table-layout:fixed"></table>
                    </div>
                </div>

                <!-- chart  -->
                <div id="DivDetayChart" class="Page" onmouseup="HidePopups()">
                    <div id="DivDetayChartToolbar">
                        <table id="TableDetayChartToolbar" class="TableStyle" style="border-collapse:separate"></table>
                    </div>
                    <div id="DivDetayChartDiv" style="position:absolute;width:100%;background-color:black">
                        <canvas id="CanvasDetayChart" onclick="OnMouseUp_Chart(this,event)" style="background-color:black"></canvas>
                    </div>
                    <div id="DivDetayIndDiv" style="display:none;position:absolute;width:100%;background-color:black">
                        <canvas id="CanvasDetayInd" style="background-color:black"></canvas>
                    </div>

                </div>

            </div>

            <!-- detay footer  -->
            <div id="DivDetayFooter" style="position:absolute;width:100%">
                <table id="TableDetayFooter" class="TableStyle" style="border-collapse:separate"></table>

            </div>

            <!-- auto complete-->
            <div id="DivDetayHeaderSearch" class="ComboTable">
                <table id="TableDetayHeaderSearch" class="TableStyle"></table>
            </div>

        </div>

        <!-- Analiz  -->
        <div id="DivAnaliz" class="Page" onmousedown="if (event.target.className!='ComboTable') HideComboTables();">
            <!-- Header  -->
            <div id="DivAnalizHeader" style="width:100%">
                <div id="DivAnalizName" class="BigButton Bold" style="width:24%;color:aqua">TKS</div>
                <input type="text" id="TextAnalizHeaderSymbol" onkeyup="OnKeyUp_TextAnalizHeaderSymbol(this,event)" onmouseup="FillAutoAnalizHeader(this);" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" style="width:44%;text-transform:uppercase;text-align:center;color:white;font-weight:bold" />
                <div id="DivAnalizBuySell" class="Pad2P" onclick="DisplayBuySell()" style="width:16%;font-weight:bold;color:gold;color:black;background-color:gold;margin-bottom:3%">A / S</div>
            </div>

            <!-- Analiz Container -->
            <div id="DivAnalizContainer" class="Page">

                <!-- takas -->
                <div id="DivAnalizTakas" class="Page">
                    <table id="TableTakasToolbar" class="TableStyle" style="border-collapse:separate"></table>
                    <div style="width:100%;text-align:center;padding-top:1%;padding-bottom:1%">
                        <div id="DivTakasTarih" class="LineMenuButton Bold" style="color:gold;margin-left:2%">Tarih</div>
                    </div>
                    <table id="TableAnalizTakasHeader" class="TableStyle" style="border-collapse:separate"></table>
                    <div id="DivTableAnalizTakas" style="overflow:auto">
                        <table id="TableAnalizTakas" class="TableStyle"></table>
                    </div>
                </div>

                <!-- takas fark-->
                <div id="DivTakasFark" class="Page">
                    <table id="TableTakasFarkToolbar" class="TableStyle" style="border-collapse:separate"></table>
                    <div id="DivTakasFarkYon" style="width:100%;text-align:left;padding-top:2%;padding-bottom:2%;border-bottom:2px #888 solid">
                        <div id="DivTakasFarkYonA2" class="LineMenuButton" onclick="OnClick_DivTakasFarkYon(this)" style="margin-left:5%"></div>
                        <div id="DivTakasFarkYonA" class="LineMenuButton" onclick="OnClick_DivTakasFarkYon(this)">Alanlar</div>
                        <div id="DivTakasFarkYonS2" class="LineMenuButton" onclick="OnClick_DivTakasFarkYon(this)" style="margin-left:5%"></div>
                        <div id="DivTakasFarkYonS" class="LineMenuButton" onclick="OnClick_DivTakasFarkYon(this)">Satanlar</div>
                    </div>
                    <table id="TableTakasFark" class="TableStyle" style="margin-top:2%"></table>
                    <div id="DivTakasFarkCanvasContainer" style="position:absolute;left:2%;width:96%">
                        <canvas id="CanvasTakasFark"></canvas>
                    </div>
                </div>

                <!-- dagilim -->
                <div id="DivDagilim" class="Page">
                    <table id="TableDagilimToolbar" class="TableStyle" style="border-collapse:separate"></table>
                    <div id="DivDagilimYon" style="width:100%;text-align:left;padding-top:2%;padding-bottom:2%;border-bottom:2px #888 solid">
                        <div id="DivDagilimTarih" class="LineMenuButton" style="color:gold;margin-left:2%">Tarih</div>
                        <div id="DivDagilimYonA" class="LineMenuButton" onclick="OnClick_DivDagilimYon(this)" style="margin-left:4%">Alanlar</div>
                        <div id="DivDagilimYonS" class="LineMenuButton" onclick="OnClick_DivDagilimYon(this)" style="margin-left:3%">Satanlar</div>
                        <div id="DivDagilimYonT" class="LineMenuButton" onclick="OnClick_DivDagilimYon(this)" style="margin-left:3%">Toplam</div>
                    </div>
                    <table id="TableDagilim" class="TableStyle" style="margin-top:2%"></table>
                    <div id="DivDagilimCanvasContainer" style="position:absolute;left:2%;width:96%">
                        <canvas id="CanvasDagilim"></canvas>
                    </div>
                </div>


                <!-- dgl list -->
                <div id="DivDglList" class="Page">
                    <table id="TableDglListToolbar" class="TableStyle" style="border-collapse:separate"></table>
                    <div id="DivDglListYon" style="width:100%;text-align:left;padding-top:2%;padding-bottom:2%">
                        <div id="DivDglListTarih" class="LineMenuButton" style="color:gold;margin-left:2%">Tarih</div>
                        <div id="DivDglListYonA" class="LineMenuButton" onclick="OnClick_DivDagilimYon(this)" style="margin-left:4%">Alanlar</div>
                        <div id="DivDglListYonS" class="LineMenuButton" onclick="OnClick_DivDagilimYon(this)" style="margin-left:3%">Satanlar</div>
                        <div id="DivDglListYonT" class="LineMenuButton" onclick="OnClick_DivDagilimYon(this)" style="margin-left:3%">Toplam</div>
                    </div>
                    <table id="TableDglListHeader" class="TableStyle" style="border-collapse:separate"></table>
                    <div id="DivTableDglList" style="overflow:auto">
                        <table id="TableDglList" class="TableStyle"></table>
                    </div>
                </div>

                <!-- sermaye firma-->
                <div id="DivSermayeFirma" class="Page">
                    <div id="DivTableSermayeFirma" style="overflow:auto">
                        <table id="TableSermayeFirma" class="TableStyle"></table>
                    </div>
                </div>

                <!-- PITE -->
                <div id="DivPite" class="Page">
                    <table id="TablePiteToolbar" class="TableStyle" style="border-collapse:separate"></table>
                    <div id="DivPiteYon" style="width:100%;text-align:left;padding-top:2%;padding-bottom:2%;border-bottom:2px #888 solid">
                        <div id="DivPiteTarih" class="LineMenuButton" style="color:gold;margin-left:2%">Tarih</div>
                        <div id="DivPiteYonA" class="LineMenuButton" onclick="OnClick_DivDagilimYon(this)" style="margin-left:4%">Alanlar</div>
                        <div id="DivPiteYonS" class="LineMenuButton" onclick="OnClick_DivDagilimYon(this)" style="margin-left:3%">Satanlar</div>
                        <div id="DivPiteYonT" class="LineMenuButton" onclick="OnClick_DivDagilimYon(this)" style="margin-left:3%">Toplam</div>
                    </div>
                    <table id="TablePite" class="TableStyle" style="margin-top:2%"></table>
                    <div id="DivPiteCanvasContainer" style="position:absolute;left:2%;width:96%">
                        <canvas id="CanvasPite"></canvas>
                    </div>
                </div>


            </div>

            <!-- Analiz footer  -->
            <div id="DivAnalizFooter" style="position:absolute;width:100%">
                <table id="TableAnalizFooter" class="TableStyle" style="border-collapse:separate"></table>

            </div>

            <!-- auto complete-->
            <div id="DivAnalizHeaderSearch" class="ComboTable">
                <table id="TableAnalizHeaderSearch" class="TableStyle"></table>
            </div>

        </div>

        <!-- news header -->
        <div id="DivHaber" class="Page">
            <!-- Header  -->
            <div style="width:100%;border-bottom:2px silver solid">
                <input type="text" id="TextHaberSymbol" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" onmouseup="this.value='';" style="width:45%;text-transform:uppercase;text-align:center" />
                <div class="PushButton" onclick="RequestNewsKriter()" style="width:34%;padding:2%">Getir</div>
            </div>

            <div id="DivTableNewsHeader" style="overflow:auto">
                <table id="TableNewsHeader" style="overflow:hidden;width:99%;text-align:left;table-layout:fixed"></table>
            </div>
        </div>

        <!-- portfoy -->
        <div id="DivPortfoy" class="Page">

            <!-- portfoy header -->
            <div style="width:100%;background-color:#444;border-bottom:2px #000 solid">
                <div id="DivPortfoyHesapNo" class="BigButton" onclick="OnClick_DivPortfoyHesapNo()" style="width:44%;padding-top:2%;padding-bottom:2%;font-weight:bold;border-bottom:1px #888 solid;border-radius:20px;margin-bottom:2%;background-color:black;color:silver">.</div>
                <div id="DivPortfoyBuySell" class="BigButton" onclick="DisplayBuySell()" style="width:25%;padding-top:2%;padding-top:2%;padding-bottom:2%;font-weight:bold;border-bottom:1px #888 solid;border-radius:20px;margin-bottom:2%;background-color:black;color:silver">A / S</div>
                <div id="DivPortfoyLogin" class="BigButton" onclick="OnClick_DivPortfoyLogin()" style="width:25%;background-color:red;padding-top:2%;padding-bottom:2%;font-weight:bold;border-bottom:1px #888 solid;border-radius:20px;margin-bottom:2%;color:silver">Giriş</div>
            </div>

            <!-- AutoComplete SubAccount -->
            <div id="DivPortfoySubAccount" class="EntryPage" style="left:0;width:52%;height:40%;border-bottom:3px #666 solid;border-top:3px #666 solid">
                <table id="TablePortfoySubAccount" style="width:90%;margin:2%;padding:2%"></table>
            </div>

            <!-- portfoy tab -->
            <table id="TablePortfoyToolbar" class="TableStyle" style="border-collapse:separate;margin-bottom:3%"></table>
            <div id="DivPortfoyTab" class="MenuBox" style="left:0;right:0;height:auto;border-bottom:2px #555 solid;border-top:2px #555 solid">
                <div class="MenuItem" id="DivPortfoyTabBistPortfoy" onclick="OnClick_DivPortfoyTab(this)" style="width:20%">BIST <br /> POZ</div>
                <div class="MenuItem" id="DivPortfoyTabBistEmirler" onclick="OnClick_DivPortfoyTab(this)" style="width:20%">BIST <br />EMIR</div>
                <div class="MenuItem" id="DivPortfoyTabViopPortfoy" onclick="OnClick_DivPortfoyTab(this)" style="width:20%">VIOP <br /> POZ</div>
                <div class="MenuItem" id="DivPortfoyTabViopEmirler" onclick="OnClick_DivPortfoyTab(this)" style="width:20%">VIOP <br /> EMIR</div>
            </div>


            <!-- portfoy emir tipleri -->
            <div id="DivPortfoyEmirStatus" style="display:none;width:100%;text-align:left;padding-top:5px;padding-bottom:5px;margin-top:3px">
                <div id="DivPortfoyEmirBekleyen2" class="LineMenuButton" onclick="OnClick_DivPortfoyEmirStatus(this)" style="margin-left:4%"></div>
                <div id="DivPortfoyEmirBekleyen" class="LineMenuButton" onclick="OnClick_DivPortfoyEmirStatus(this)" style="margin-left:0%">Bekleyen</div>
                <div id="DivPortfoyEmirGerceklesen2" class="LineMenuButton" onclick="OnClick_DivPortfoyEmirStatus(this)" style="margin-left:4%"></div>
                <div id="DivPortfoyEmirGerceklesen" class="LineMenuButton" onclick="OnClick_DivPortfoyEmirStatus(this)" style="margin-left:0%">Gerçekleşen</div>
                <div id="DivPortfoyEmirIptaller2" class="LineMenuButton" onclick="OnClick_DivPortfoyEmirStatus(this)" style="margin-left:4%"></div>
                <div id="DivPortfoyEmirIptaller" class="LineMenuButton" onclick="OnClick_DivPortfoyEmirStatus(this)" style="margin-left:0%">İptaller</div>
            </div>
            <!-- portfoy emir işlemleri -->
            <div id="DivPortfoyEmirOperation" style="position:absolute;display:none;left:0;width:100%;bottom:0;text-align:center">
                <div id="DivPortfoyEmirIptal" class="PushButton" style="width:42%;padding:2%" onclick="OnClick_DivPortfoyEmirIptal()">Emir Sil</div>
                <div id="DivPortfoyEmirDuzelt" class="PushButton" style="width:42%;padding:2%" onclick="OnClick_DivPortfoyEmirDuzelt()">İyileştir</div>
            </div>

            <!-- grid header -->
            <div id="DivTablePortfoyHeader" style="overflow:auto;background-color:black">
                <table id="TablePortfoyHeader" class="TableStyle" style="border-collapse:separate"></table>
            </div>


            <!-- portfoy data -->
            <div id="DivTablePortfoyData" style="overflow:auto;background-color:black">
                <table id="TablePortfoyData" class="TableStyle"></table>
            </div>

        </div>

        <!-- DivBistEmirDuzelt -->
        <div id="DivBistEmirDuzelt" class="Page" style="display:none;text-align:left" onmousedown="if (event.target.className!='ComboTable') HideComboTables();">
            <div class="Header">BIST Emir İyileştir</div><br>
            <table id="BistBuysellEditDerinlik" class="TableStyle" style="border-bottom:2px white solid"></table>
            <div id="DivBistEmirDuzeltDesc" style="width:100%;padding:10px;padding-bottom:2px"></div><br>
            <label id="LabelBistEmirDuzeltYeniFiyat" style="width:22%">Yeni Fiyat</label>
            <input type="number" id="TextBistEmirDuzeltYeniFiyat" onkeyup="OnKeyUp_TextBistEmirDuzeltYeniFiyat(event)" style="width:25%;text-align:center" />
            <div id="DivBistEmirDuzeltButtonFiyat" class="Combo" onmouseup="OnMouseUp_DivBistEmirDuzeltDisplayFiyatTable()" style="width:12%">&#9660;</div>
            <br>
            <label id="LabelBistEmirDuzeltYeniMiktar" style="width:22%">Yeni Miktar</label>
            <input type="number" id="TextBistEmirDuzeltYeniMiktar" style="width:25%;text-align:center" onclick="this.value=''" /><br><br>
            <div style="overflow:hidden;width:100%;text-align:center">
                <div id="DivBistEmirDuzeltOK" class="PushButton" style="width:42%;padding:2%" onclick="OnClick_DivBistEmirDuzeltOK()">İyileştir</div>
                <div id="DivBistEmirDuzeltVazgec" class="PushButton" style="width:42%;padding:2%" onclick="GetEl('DivBistEmirDuzelt').style.display='none'">Vazgeç</div>
            </div>
            <!-- AutoComplete Fiyat -->
            <table id="TableBistEmirDuzeltFiyat" class="ComboTable"></table>
        </div>

        <!-- portfoy Emir Detay -->
        <div id="DivEmirDetay" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:black">
            <div class="Header">Emir Detay</div><br>

            <table id="TableEmirDetay" class="TableStyle" style="border-collapse:separate"></table>

            <div class="PushButton" id="DivEmirDetayZincir" style="margin-left:2%;width:60%;padding:2%;bottom:0px;" onclick="DisplayZincirBuySell()">Zincir Emir Ver</div>
            <div class="PushButton" id="DivEmirDetayKapat" style="margin-left:2%;width:25%;padding:2%;bottom:0px;" onclick="GetEl('DivEmirDetay').style.display = 'none';">Kapat</div>
        </div>


        <!-- portfoy login -->
        <div id="DivHesapLogin" class="EntryPage" style="text-align:left;border:0;border-radius:0;color:silver;background-color:#000">
            <div class="Header">Portföy Giriş</div><br><br>

            <label style="width:30%">Kurum</label>
            <!--
            -->
            <select id="HesapLoginSelectKurum" onchange="ReorderParolaSifre()" style="width:50%"></select><br>

            <label id="HesapLoginLabelMusteriTip" style="width:30%">Müşteri Tipi</label>

            <select id="HesapLoginSelectMusteriTip" onchange="" style="width:50%"></select>
            <br id="HesapLoginBrMusteriTip">

            <label id="labelHesapNoLabel" style="width:30%">Hesap No</label>

            <input type="text" id="HesapLoginTextHesapNo" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" style="width:45%" />
            <label id="HesapLoginLabelParola" style="width:30%">Parola</label>

            <input type="password" id="HesapLoginTextParola" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" style="width:45%" />
            <br id="brHesapLoginParola">

            <label id="LabelHesapLoginSifre" style="width:30%">Şifre</label>

            <input type="password" id="HesapLoginTextSifre" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" style="width:45%" />
            <br id="brHesapLoginSifre">

            <label style="margin-left:30%"><input type="checkbox" id="HesapLoginCheckRemember" onclick="SaveTradeLoginKey()">Hesap Bilgilerimi Hatırla</label><br>
            <label style="margin-left:30%"><input type="checkbox" id="HesapLoginCheckRemember2" onclick="SaveTradeLoginKey()">Şifremi Hatırla !!!</label><br><br>
            <div class="PushButton" id="HesapLoginOl" style="margin-left:2%;width:92%;padding:2%" onclick="OnClick_DivHesapLoginOl()">Giriş Yap</div>
        </div>
        <!-- portfoy SMS Onay -->
        <div id="DivHesapLoginSMSOnay" class="EntryPage" style="text-align:left;border:0;border-radius:0;color:silver;background-color:#000">
            <div class="Header">SMS Onay</div><br><br>

            <label id="labelSMSMesaj" style="width:80%"></label>
            <br><br>



            <label id="labelSMS" style="width:30%">SMS Şifre</label>

            <input type="password" id="TextSMS" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" style="width:45%" /><br>




            <div class="PushButton" id="HesapLoginSMSOnay" style="margin-left:2%;width:92%;padding:2%" onclick="OnClick_SmsTalep()">Giriş Yap</div>
        </div>

        <!-- BIST A/S -->
        <div id="DivBistBuySell" class="Page Left" onmousedown="if (event.target.className!='ComboTable') HideComboTables();" style="display:none">
            <div class="Header">BIST Emir Gönder</div><br>

            <table id="BistBuysellDerinlik" class="TableStyle" style="border-bottom:2px white solid"></table>

            <label style="width:20%">Hisse</label>
            <input type="text" id="DivBistBuySellTextSymbol" onkeyup="OnKeyUp_DivBistBuySellTextSymbol(event)" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" style="width:25%;text-transform:uppercase;text-align:center" />
            <div id="DivBistBuySellButtonSymbol" class="Combo" onmouseup="OnKeyUp_DivBistBuySellTextSymbol(event)" style="width:12%">&#9660;</div>
            <label id="DivBistBuySellGrup" style="text-align:left">Grup</label>
            <br>

            <label style="display:inline-block;width:20%">Fiyat Tipi</label>
            <select id="DivBistBuySellSelectEmirTip" onchange="OnChange_DivBistBuySellSelectEmirTip(this)" style="width:40%">
                <option value="Limit" selected>Limit</option>
                <option value="Piyasa">Piyasa</option>
                <option value="Piyasadan Limite">Piyasadan Limite</option>
                <option value="Denge">Denge</option>
            </select><br>


            <label style="width:20%">Fiyat</label>
            <input type="number" id="DivBistBuySellTextFiyat" onkeyup="OnKeyUp_DivBistBuySellTextFiyat(event)" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" style="width:25%;text-align:center" />
            <div id="DivBistBuySellButtonFiyat" class="Combo" onmouseup="OnMouseUp_DivBistBuySellDisplayFiyatTable()" style="width:12%">&#9660;</div>
            <br>
            <label style="width:20%">Miktar</label>
            <input type="number" id="DivBistBuySellTextMiktar" onkeyup="BistBuySellTutarhesapla()" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" style="width:25%;text-align:center" onclick="this.value=''" /> <label id="lblBuysellTutar" style="width:35%"></label><br>


            <label style="display:inline-block;width:20%">Süre</label>
            <select id="DivBistBuySellSelectSureTip" style="width:28%">
                <option value="Gun" selected>Gun</option>
                <option value="KIE">KIE</option>
                <option value="IKG">IKG</option>
            </select><br>

            <label id="LabelBistValor" style="width:20%;display:none">Valor</label>
            <input type="text" id="TextBistValor" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" style="display:none;width:25%;text-align:center" />
            <label id="LabelBistValorFormat" style="display:none">GG/AA/YYYY</label>
            <br id="BrBistValor" style="display:none">
            <label style="margin-left:25%"><input type="checkbox" id="DivBistBuySellButtonAciga">Açığa Satış</label><br><br>
            <div style="overflow:hidden;width:100%;text-align:center">
                <div id="DivBistBuySellButtonAl" class="Pad2P" onclick="OnClick_DivBistBuySellSendOrder(this)" style="width:27%;background-color:lawngreen;color:black">Al</div>
                <div id="DivBistBuySellButtonSat" class="Pad2P" onclick="OnClick_DivBistBuySellSendOrder(this)" style="width:27%;background-color:#F22;color:black">Sat</div>
                <div id="DivBistBuySellButtonVazgec" class="Pad2P" onclick="OnClick_DivBistBuySellSendOrder(this)" style="width:27%;background-color:silver;color:black">Vazgeç</div>
            </div><br>

            <!-- AutoComplete Sembol , Fiyat -->
            <table id="TableBistBuySellSymbol" class="ComboTable"></table>
            <table id="TableBistBuySellFiyat" class="ComboTable" style="height:40%"></table>
        </div>

        <!-- BIST ZİNCİR A/S -->
        <div id="DivBistZincirBuySell" class="Page Left" onmousedown="if (event.target.className!='ComboTable') HideComboTables();" style="display:none">
            <div class="Header">BIST Zincir Emir Gönder</div><br><br>
            <label style="width:20%">Emir No</label>
            <label id="DivBistZincirBuySellEmirNo" style="width:50%"></label>
            <br />
            <label style="width:20%">Hisse</label>
            <input type="text" id="DivBistZincirBuySellTextSymbol" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" onkeyup="OnKeyUp_DivBistZincirBuySellTextSymbol(event)" style="width:25%;text-transform:uppercase;text-align:center" />
            <div id="DivBistZincirBuySellButtonSymbol" class="Combo" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" onmouseup="OnKeyUp_DivBistZincirBuySellTextSymbol(event)" style="width:12%">&#9660;</div>
            <label id="DivBistZincirBuySellGrup" style="text-align:left">Grup</label>
            <br>

            <label style="display:inline-block;width:20%">Fiyat Tipi</label>
            <select id="DivBistZincirBuySellSelectEmirTip" onchange="OnChange_DivBistBuySellSelectEmirTip(this)" style="width:40%">
                <option value="Limit" selected>Limit</option>
                <option value="Piyasa">Piyasa</option>
                <option value="Piyasadan Limite">Piyasadan Limite</option>
                <option value="Denge">Denge</option>
            </select><br>


            <label style="width:20%">Fiyat</label>
            <input type="number" id="DivBistZincirBuySellTextFiyat" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" onkeyup="OnKeyUp_DivBistZincirBuySellTextFiyat(event)" style="width:25%;text-align:center" />
            <div id="DivBistZincirBuySellButtonFiyat" class="Combo" onmouseup="OnMouseUp_DivBistZincirBuySellDisplayFiyatTable()" style="width:12%">&#9660;</div>
            <br>
            <label style="width:20%">Miktar</label>
            <input type="number" id="DivBistZincirBuySellTextMiktar" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" style="width:25%;text-align:center" onclick="this.value=''" /><br>


            <label style="display:inline-block;width:20%">Süre</label>
            <select id="DivBistZincirBuySellSelectSureTip" style="width:28%">
                <option value="Gun" selected>Gun</option>
                <option value="KIE">KIE</option>
                <option value="IKG">IKG</option>
            </select><br>

            <label id="LabelBistZincirValor" style="width:20%;display:none">Valor</label>
            <input type="text" id="TextBistZincirValor" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" style="display:none;width:25%;text-align:center" />
            <label id="LabelBistZincirValorFormat" style="display:none">GG/AA/YYYY</label>
            <br id="BrBistZincirValor" style="display:none">
            <label id="lblZincirSelltype" style="margin-left:25%"><input type="checkbox" id="DivBistZincirBuySellButtonAciga">Açığa Satış</label><br><br>
            <div style="overflow:hidden;width:100%;text-align:center">
                <div id="DivBistZincirBuySellButtonAl" class="Pad2P" onclick="OnClick_DivBistZincirBuySellSendOrder(this)" style="width:27%;background-color:lawngreen;color:black">Zincir AL</div>
                <div id="DivBistZincirBuySellButtonSat" class="Pad2P" onclick="OnClick_DivBistZincirBuySellSendOrder(this)" style="width:27%;background-color:#F22;color:black">Zincir Sat</div>
                <div id="DivBistZincirBuySellButtonVazgec" class="Pad2P" onclick="OnClick_DivBistZincirBuySellSendOrder(this)" style="width:27%;background-color:silver;color:black">Vazgeç</div>
            </div><br>

            <!-- AutoComplete Sembol , Fiyat -->
            <table id="TableBistZincirBuySellSymbol" class="ComboTable"></table>
            <table id="TableBistZincirBuySellFiyat" class="ComboTable" style="height:40%"></table>
        </div>
        <!-- VIOP A/S --> <!--Ssedat-->
        <div id="DivViopBuySell" class="Page Left" onmousedown="if (event.target.className!='ComboTable') HideComboTables();" style="display:none">
            <div id="DivViopBuySellHeader" class="Header">VIOP Emir Gönder</div><br>
            <table id="ViopBuysellDerinlik" class="TableStyle" style="border-bottom:2px white solid"></table>

            <label style="width:20%">Sözleşme</label>
            <input type="text" id="DivViopBuySellTextSymbol" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" onkeyup="OnKeyUp_DivViopBuySellTextSymbol(event)" style="width:45%;text-transform:uppercase;text-align:center" />
            <div id="DivViopBuySellButtonSymbol" class="Combo" onmouseup="OnKeyUp_DivViopBuySellTextSymbol(event)" style="width:12%">&#9660;</div>
            <br>
            <label id="LabelViopBuySellSelectEmirTip" style="width:20%">Emir Tipi</label>
            <select id="DivViopBuySellSelectEmirTip" onchange="OnChange_DivViopBuySellSelectEmirTip(this)" style="width:25%">
                <option value="LMT" selected>Limitli</option>
                <option value="PYL">Piyasadan Limite</option>
            </select>
            <input id="chkViopSart" type="checkbox" onchange="OnChange_DivViopBuySellSartEmirCheck(this)" value="Şartlı Emir" style="margin:0px;padding:0px;" />
            <label id="sartLabel" onclick="if (GetEl('chkViopSart').checked == false) GetEl('chkViopSart').checked = true; else GetEl('chkViopSart').checked = false; OnChange_DivViopBuySellSartEmirCheck(GetEl('chkViopSart')) ">Şartlı Emir</label>
            <br>
            <label style="width:20%">Fiyat</label>
            <input type="number" id="DivViopBuySellTextFiyat" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" onkeyup="OnKeyUp_DivViopBuySellTextFiyat(event)" style="width:22%;text-align:center" />
            <div id="DivViopBuySellButtonFiyat" class="Combo" onmouseup="OnMouseUp_DivViopBuySellDisplayFiyatTable()" style="width:12%">&#9660;</div>
            <br />
            <label style="width:20%">Miktar</label>
            <input type="number" id="DivViopBuySellTextMiktar" style="width:22%;text-align:center" onclick="this.value=''" />
            <div id="DivAksamSeans" style="display:inline-block;width:45%">
                <input id="chkViopAksamSeans" type="checkbox" onchange="" value="Akşam Seansı" style="margin:0px;padding:0px;display:inline-block" />
                <label id="aksamSeansLabel" style="margin:0px" onclick="if (GetEl('chkViopAksamSeans').checked == false) GetEl('chkViopAksamSeans').checked = true; else GetEl('chkViopAksamSeans').checked = false;">Akşam Seansı</label>
            </div>


            <br>


            <label style="width:20%">Süre</label>
            <select id="DivViopBuySellSelectSure" onchange="OnChange_DivViopBuySellSelectSure(this)" style="width:25%">
                <option value="GUN" selected>GUN</option>
                <option value="KIE">KIE</option>
                <option value="GIE">GIE</option>
                <option value="IKG">IKG</option>
                <option value="TAR">TAR</option>
            </select>
            <input type="text" id="DivViopBuySellTextTarih" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" style="visibility:hidden;width:30%" /><br>

            <!--Şart div-->
            <div id="ViopSartDiv" style="display:none;width:100%;margin:0px;padding:0px">
                <label style="width:20%">Ş.Sözleşme</label>
                <input type="text" id="DivViopBuySellTextSartSymbol" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" onkeyup="OnKeyUp_DivViopBuySellTextSartSymbol(event)" style="width:45%;text-transform:uppercase" />
                <div id="DivViopBuySellButtonSartSymbol" class="Combo" onmouseup="OnKeyUp_DivViopBuySellTextSartSymbol(event)" style="width:12%;text-align:center">&#9660;</div>
                <br />
                <label style="width:20%">Şart Tip</label>
                <select id="DivViopBuySellSelectSartTip" style="width:48%">
                    <option value="3U" selected>ALIŞ >= Şart Fiyat</option>
                    <option value="3D">ALIŞ <= Şart Fiyat</option>
                    <option value="1U">SATIŞ >= Şart Fiyat</option>
                    <option value="1D">SATIŞ <= Şart Fiyat</option>
                    <option value="2U">SON >= Şart Fiyat</option>
                    <option value="2D">SON <= Şart Fiyat</option>
                </select><br />
                <label style="width:20%">Şart Fiyat</label>
                <input type="number" id="DivViopBuySellTextSartFiyat" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" onkeyup="OnKeyUp_DivViopBuySellTextSartFiyat(event)" style="width:22%" />
                <div id="DivViopBuySellButtonSartFiyat" class="Combo" onmouseup="OnMouseUp_DivViopBuySellDisplaySartFiyatTable()" style="width:12%;text-align:center">&#9660;</div>

                <table id="TableViopBuySellSartSymbol" class="ComboTable"></table>
                <table id="TableViopBuySellSartFiyat" class="ComboTable"></table>
                <br />
            </div>

            <br>
            <div id="DivViopBuySellButton" style="overflow:hidden;width:100%;text-align:center">
                <div id="DivViopBuySellButtonAl" class="Pad2P" onclick="OnClick_DivViopBuySellSendOrder(this)" style="width:27%;background-color:lawngreen;color:black">Al</div>
                <div id="DivViopBuySellButtonSat" class="Pad2P" onclick="OnClick_DivViopBuySellSendOrder(this)" style="width:27%;background-color:#F22;color:black">Sat</div>
                <div id="DivViopBuySellButtonVazgec" class="Pad2P" onclick="OnClick_DivViopBuySellSendOrder(this)" style="width:27%;background-color:silver;color:black">Vazgeç</div>
            </div><br>
            <div id="DivViopBuySellEmirDuzelt" style="display:none;overflow:hidden;width:100%;text-align:center">
                <div id="DivViopBuySellEmirDuzeltOK" class="PushButton" style="width:42%;padding:2%" onclick="OnClick_DivViopEmirDuzeltOK()">İyileştir</div>
                <div id="DivViopBuySellEmirDuzeltVazgec" class="PushButton" style="width:42%;padding:2%" onclick="GetEl('DivViopBuySell').style.display='none'">Vazgeç</div>
            </div>


            <!-- AutoComplete Sembol , Fiyat -->
            <table id="TableViopBuySellSymbol" class="ComboTable"></table>
            <table id="TableViopBuySellFiyat" class="ComboTable" style="height:40%"></table>
        </div>


        <!-- menupage -->
        <div id="DivMenu" class="MenuBox" onclick="OnClick_DivMenu(event)" style="left:0;right:0;bottom:0;height:auto;border-top:3px #666 solid">
            <div id="DivMenuKapalicarsi" class="MenuItem" style="width:42%">Kapalıçarşı</div>
            <div id="DivMenuTakvim" class="MenuItem" style="width:42%">Takvim</div><br>
            <div id="DivMenuBistTumGorunum" class="MenuItem" style="width:42%">BIST Görünüm</div>
            <div id="DivMenuSermayeGenel" class="MenuItem" style="width:42%">Sermaye, Genel</div><br>
            <div id="DivMenuAlarm" class="MenuItem" style="width:42%">Alarmlar</div>
            <div id="DivMenuHacimListe" class="MenuItem" style="width:42%">Kurum Hacim</div><br>
            <div id="DivMenuCepSifre" class="MenuItem" style="width:42%">iDeal CEP Şifrem</div>
            <div id="DivMenuKurumTakas" class="MenuItem" style="width:42%">Kurum Takas</div><br>
            <div id="DivMenuHelp" class="MenuItem" style="width:42%;display:none">Kullanım Kılavuzu</div>
            <div id="DivMenuKurumIslemPITE" class="MenuItem" style="width:42%">Kurum İşlem(Anlık)</div>
            <div id="DivMenuKurumIslem" class="MenuItem" style="width:42%">Kurum İşlem</div><br>
            <div id="DivMenuLogin" class="MenuItem" style="width:42%">Bağlantı Bilgileri</div>
            <div id="DivMenuSirali" class="MenuItem" style="width:42%">Sıralı Listeler</div><br>
        </div>


        <!-- BIST Tüm Görünüm-->
        <div id="DivBistTumGorunum" class="Page">

            <input type="date" name="name" value="" style="min-width:95%" />
            <br />

            <table id="TableBistTumGorunum" style="width:100%;overflow:hidden;table-layout:fixed;white-space:nowrap;padding:2%"></table>
            <div id="DivBistTumGorunumCanvasContainer" style="position:absolute;width:90%;left:5%">
                <canvas id="CanvasBistTumGorunum"></canvas>
            </div>
        </div>

        <!-- kapalicarsi-->
        <div id="DivKapalicarsi" class="Page">
            <div style="height:100%;overflow:auto">
                <table id="TableKapalicarsi" class="TableStyle"></table>
            </div>
        </div>

        <!-- sermaye genel-->
        <div id="DivSermayeGenel" class="Page">
            <div style="height:100%;overflow:auto">
                <table id="TableSermayeGenel" class="TableStyle"></table>
            </div>
        </div>

        <!-- kurum işlem -->
        <div id="DivKurumIslem" class="Page" onmousedown="if (event.target.className!='ComboTable') HideComboTables();">
            <input type="text" id="TextKurumIslemSearch" placeholder="Kurum Şeçiniz" onclick="this.value='';" onkeyup="OnKeyUp_TextKurumIslemSearch(this,event)" onmouseup="FillAutoKurumIslem(this);" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" style="width:50%;text-align:center" />
            <input type="text" id="TextKurumIslemSearch2" onkeyup="SearchStringInTable(this,'TableKurumIslem',0,1)" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" style="width:25%;text-align:center;text-transform:uppercase" /><br>
            <table id="TableKurumIslemToolbar" class="TableStyle" style="border-collapse:separate"></table>
            <div id="DivKurumIslemYon" style="width:100%;text-align:left;padding-top:2%;padding-bottom:2%">
                <div id="DivKurumIslemYonA2" class="LineMenuButton" onclick="OnClick_DivKurumIslemYon(this)" style="margin-left:5%"></div>
                <div id="DivKurumIslemYonA" class="LineMenuButton" onclick="OnClick_DivKurumIslemYon(this)">Alınan</div>
                <div id="DivKurumIslemYonS2" class="LineMenuButton" onclick="OnClick_DivKurumIslemYon(this)" style="margin-left:5%"></div>
                <div id="DivKurumIslemYonS" class="LineMenuButton" onclick="OnClick_DivKurumIslemYon(this)">Satılan</div>
            </div>
            <div id="DivTableKurumIslem" style="overflow:auto">
                <table id="TableKurumIslem" class="TableStyle" style="border-collapse:separate"></table>
            </div>
            <!-- auto complete-->
            <div id="DivKurumIslemSearch" class="ComboTable">
                <table id="TableKurumIslemSearch" class="TableStyle"></table>
            </div>
        </div>

        <!-- kurum işlem PITE -->
        <div id="DivKurumIslemPITE" class="Page" onmousedown="if (event.target.className!='ComboTable') HideComboTables();">
            <input type="text" id="TextKurumIslemPITESearch" placeholder="Kurum Şeçiniz" onclick="this.value='';" onkeyup="OnKeyUp_TextKurumIslemPITESearch(this,event)" onmouseup="FillAutoKurumIslemPITE(this);" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" style="width:50%;text-align:center" />
            <input type="text" id="TextKurumIslemPITESearch2" onkeyup="SearchStringInTable(this,'TableKurumIslemPITE',0,1)" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" style="width:25%;text-align:center;text-transform:uppercase" /><br>

            <div id="DivKurumIslemYonPITE" style="width:100%;text-align:left;padding-top:2%;padding-bottom:2%">
                <div id="DivKurumIslemPITEYonA2" class="LineMenuButton" onclick="OnClick_DivKurumIslemPITEYon(this)" style="margin-left:5%"></div>
                <div id="DivKurumIslemPITEYonA" class="LineMenuButton" onclick="OnClick_DivKurumIslemPITEYon(this)">Alınan</div>
                <div id="DivKurumIslemPITEYonS2" class="LineMenuButton" onclick="OnClick_DivKurumIslemPITEYon(this)" style="margin-left:5%"></div>
                <div id="DivKurumIslemPITEYonS" class="LineMenuButton" onclick="OnClick_DivKurumIslemPITEYon(this)">Satılan</div>
            </div>
            <div id="DivTableKurumIslemPITE" style="overflow:auto">
                <table id="TableKurumIslemPITE" class="TableStyle" style="border-collapse:separate"></table>
            </div>
            <!-- auto complete-->
            <div id="DivKurumIslemPITESearch" class="ComboTable">
                <table id="TableKurumIslemPITESearch" class="TableStyle"></table>
            </div>
        </div>

        <!-- hacim liste -->
        <div id="DivHacimListe" class="Page">
            <table id="TableHacimListeToolbar" class="TableStyle" style="border-collapse:separate"></table>
            <div id="DivHacimListeYon" style="width:100%;text-align:left;padding-top:2%;padding-bottom:2%">
                <div id="DivHacimListeTarih" class="LineMenuButton" style="color:gold;margin-left:2%">Tarih</div>
                <div id="DivHacimListeYonA" class="LineMenuButton" onclick="OnClick_DivHacimListeYon(this)" style="margin-left:4%">Alanlar</div>
                <div id="DivHacimListeYonS" class="LineMenuButton" onclick="OnClick_DivHacimListeYon(this)" style="margin-left:3%">Satanlar</div>
                <div id="DivHacimListeYonT" class="LineMenuButton" onclick="OnClick_DivHacimListeYon(this)" style="margin-left:3%">Toplam</div>
            </div>
            <div id="DivTableHacimOzet" style="overflow:auto;border-top:2px #666 solid;border-bottom:2px #666 solid">
                <table id="TableHacimOzet" class="TableStyle" style="background-color:#000;margin-top:1%;margin-bottom:1%"></table>
            </div>
            <div id="DivTableHacimListe" style="overflow:auto;margin-top:2%">
                <table id="TableHacimListe" class="TableStyle" style="background-color:#000;padding-top:5px;padding-bottom:5px"></table>
            </div>
        </div>


        <!-- takvim -->
        <div id="DivTakvim" class="Page">
            <div style="height:100%;overflow:auto">
                <table id="TableTakvim" class="TableStyle"></table>
            </div>
        </div>


        <!-- kurum takas -->
        <div id="DivKurumTakas" class="Page" onmousedown="if (event.target.className!='ComboTable') HideComboTables();">
            <input type="text" id="TextKurumTakasSearch" placeholder="Kurum Şeçiniz" onclick="this.value='';" onkeyup="OnKeyUp_TextKurumTakasSearch(this,event)" onmouseup="FillAutoKurumTakas(this);" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" style="width:50%;text-align:center" />
            <input type="text" id="TextKurumTakasSearch2" onkeyup="SearchStringInTable(this,'TableKurumTakas',0,2)" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" style="width:25%;text-align:center;text-transform:uppercase" /><br>
            <div id="DivTableKurumTakas" style="height:90%;overflow:auto">
                <table id="TableKurumTakas" class="TableStyle" style="border-collapse:separate"></table>
            </div>
            <!-- auto complete-->
            <div id="DivKurumTakasSearch" class="ComboTable">
                <table id="TableKurumTakasSearch" class="TableStyle"></table>
            </div>
        </div>

        <!-- sıralı -->
        <div id="DivSirali" class="Page">
            <select id="SelectSirali" onchange="ActivateWindow()" style="width:50%"></select>
            <input type="text" id="TextSiraliSearch2" onkeyup="SearchStringInTable(this,'TableSirali',1,1)" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" style="width:25%;text-align:center;text-transform:uppercase" /><br>
            <div style="height:90%;overflow:auto">
                <table id="TableSirali" class="TableStyle" style="border-collapse:separate;margin-top:2%"></table>
            </div>
        </div>

        <!-- alarmlar -->
        <div id="DivAlarmListesi" class="Page">
            <div style="height:90%;overflow:auto;">
                <div class="Header" style="width:98%">Alarm Listesi </div> <!--<div class="Header" onclick="AlarmNoSorgula()" style="width:58%;cursor:pointer">Telefon No Sorgula</div>--><br>
                <table id="TableAlarmListesi" class="TableStyle" style="border-collapse:separate;margin-top:2%"></table>
            </div>
        </div>
        <!-- alarmlar ekle -->
        <div id="DivAlarmEkle" class="PagePopUp" style="text-align:left">
            <div class="Header">Alarm Ekle</div><br>
            <label style="width:15%">Sembol</label>
            <label id="DivAlarmEkleTextSymbol" style="width:55%"></label>
            <br>
            <label style="width:15%">Fiyat</label>
            <input type="number" id="DivAlarmEkleTextFiyat" style="width:67%;text-align:center" />

            <br>
            <label style="width:15%">Şart</label>
            <select id="DivAlarmEkleSelectSart" style="width:70%">
                <!--<option value="D1">Son Fiyat Küçükse</option>-->
                <!--<option value="E">Son Fiyat Eşitse</option>-->
                <!--<option value="U1">Son Fiyat Büyükse</option>-->
                <option value="U2">Son Fiyat Büyük Eşitse</option>
                <option value="D2">Son Fiyat Küçük Eşitse</option>
            </select><br>

            <div class="PushButton" id="DivAlarmEkleOK" style="margin-left:2%;width:40%;padding:2%;bottom:0px;" onclick="AlarmEkle()">Alarm Ekle</div>
            <div class="PushButton" id="DivAlarmEkleKapat" style="margin-left:2%;width:40%;padding:2%;bottom:0px;" onclick="ShowAlarmEkleWindow()">Vazgeç</div>

            <!-- AutoComplete Fiyat -->
            <table id="TableAlarmEkleFiyat" class="ComboTable" style="height:40%"></table>
        </div>
        <!-- alarm uyari ekranı -->
        <div id="DivAlarmUyari" class="PagePopUp">
            <div style="height:90%;overflow:auto;">
                <div class="Header" style="background-color:red;">Alarm Uyarı <div onclick="ShowAlarmUyariWindow()" style="display:inline-block;float:right;padding-right:3%">✗</div></div><br>
                <p id="AlarmText">.</p>
            </div>
        </div>

        <!-- alarm uyari ekranı -->
        <div id="DivGecikmeUyari" class="PagePopUp">
            <div style="height:90%;overflow:auto;">
                <div class="Header" style="background-color:red;"><span id="uyariHeader"></span><div onclick="ShowUyariWindow('','')" style="display:inline-block;float:right;padding-right:3%">✗</div></div><br>
                <p id="uyariContent">. </p>
            </div>
        </div>



        <!-- alarm uyari ekranı -->
        <div id="DivSembolSlider" style="height:0px;opacity:0;text-align:center" class="PagePopUp">
            <div id="DivSliderRow" style="display:none"></div>

            <div class="divSliderArrow" style="display:inline-block;width:100%;height:40%;font-size:3em;text-align:center" onclick="Onclick_SembolSliler('up')">&#9650;</div>
            <div class="divSliderArrow" style="display:inline-block;width:100%;height:40%;font-size:3em;text-align:center" onclick="Onclick_SembolSliler('down')">&#9660;</div>
        </div>

        <!-- DivHelp -->
        <div id="DivHelp" onmouseup="HideThis(this)" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:white;-webkit-overflow-scrolling:touch">
            <iframe id="FrameHelp" style="top:0;height:100%;width:100%"></iframe>
        </div>

        <!-- DivTemelAnaliz -->
        <div id="DivTemelAnaliz" onmouseup="HideThis(this)" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:black;-webkit-overflow-scrolling:touch">
            <iframe id="FrameTemelAnaliz" style="top:0;height:100%;width:100%"></iframe>
        </div>

        <!-- DivIletisim -->
        <div id="DivIletisim" onmouseup="HideThis(this)" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:white;-webkit-overflow-scrolling:touch">
            <iframe id="FrameIletisim" style="top:0;height:95%;width:98%"></iframe>
        </div>

        <!-- DivMesaj -->
        <div id="DivMesajlar" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:black">
            <div id="DivMesajlarTitle" class="Header">Gelen Mesajlar</div>
            <div id="DivMesajlarTable" style="height:80%;overflow:auto;background-color:black">
                <table id="TableMesajlar" style="overflow:hidden;width:99%;text-align:left;table-layout:fixed"></table>
            </div>
            <div id="DivMesajlarYaz" class="PushButton" onclick="GetEl('DivYeniMesaj').style.display='inline-block';BringToFront(GetEl('DivYeniMesaj'))" style="position:absolute;visibility:hidden;width:40%;padding:3%;bottom:1px;left:2%">Mesaj Yaz</div>
            <div id="DivMesajlarKapat" class="PushButton" onclick="GetEl('DivMesajlar').style.display='none';" style="position:absolute;width:40%;padding:3%;bottom:1px;right:2%">Kapat</div>
        </div>

        <!-- DivYeniMesaj -->
        <div id="DivYeniMesaj" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:black">
            <div class="Header">Mesaj Yaz</div>
            <div style="height:75%;overflow:auto">
                <textarea id="TextYeniMesaj" cols="40" rows="5" style="width:100%;height:30%;border:0;margin:0;padding:0"></textarea>
                <div style="width:100%;height:50%;overflow:auto;padding-top:10%">
                    <table id="TableYeniMesajGruplar" class="TableStyle"></table>
                </div>
            </div>
            <div>
                <label style="margin-left:5%"><input type="checkbox" id="checkYeniMesajKaydet">Kaydet</label>
                <div id="DivYeniMesajlarGonder" class="PushButton" onmouseup="SendKurumMesaj()" style="margin-left:5%;width:25%;padding:2%">Gönder</div>
                <div id="DivYeniMesajlarVazgec" class="PushButton" onmouseup="HideThis(GetEl('DivYeniMesaj'))" style="width:25%;padding:2%">Vazgeç</div>
            </div>
        </div>
    </div>

    <!-- Connection Alert Window -->
    <div id="DivConnectionAlertWindow" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:center;background-color:black">


        <div class="Header" style="background-color:red">
            <div class="CaptionText" style="width:100%">Bağlantı</div>

        </div>
        <br>

        <div style="height:100%;width:100%;top:30%;position:absolute;">

            <div style="font-size:16px;color:white;text-align:center;width:100%">Bağlantınız kesildi. Yeniden bağlanmak ister misiniz?</div>
            <br>

            <div id="DivConnectionAlertWindowOK" class="Pad2P" style="width:40%;margin:3px;background-color:limegreen;color:white" onclick="ShowLoginPage(); HideByID('DivConnectionAlertWindow')">Tekrar Bağlan</div>
            <div id="DivConnectionAlertWindowVazgec" class="Pad2P" style="width:40%;margin:3px;background-color:red;color:white" onclick="HideByID('DivConnectionAlertWindow')">Vazgeç</div>

        </div>



    </div>

    <!-- mesaj dosya-->
    <div id="DivMesajDosya" onclick="OnClick_DivMesajDosya(event)" style="display:none;position:absolute;overflow:auto; background-color:white;color:black;left:0;top:0;width:100%;height:100%">
        <img src="" id="ImgMesajDosya" style="position:absolute;left:0;top:0;width:100%;height:100%;padding:0;margin:0">
    </div>

    <!-- dosya menu-->
    <div id="DivDosyaMenu" class="Popup" style="text-align:center;top:5%;left:30%;width:40%;height:auto;border:0;border-top:2px #FFF solid;border-bottom:2px #FFF solid;background-color:#CCC;color:black">
        <div id="DivDosyaMenuZoom100" class="BigButton" style="width:90%" onclick="OnClick_DivDosyaMenu(this)">% 100</div><br>
        <div id="DivDosyaMenuZoom125" class="BigButton" style="width:90%" onclick="OnClick_DivDosyaMenu(this)">% 200</div><br>
        <div id="DivDosyaMenuZoom150" class="BigButton" style="width:90%" onclick="OnClick_DivDosyaMenu(this)">% 300</div><br>
        <div id="DivDosyaMenuKapat" class="BigButton" style="width:90%;background-color:#A00;color:white" onclick="OnClick_DivDosyaMenu(this)">Kapat</div><br><br>
    </div>

    <!-- news content -->
    <div id="DivNewsContent" onclick="OnClick_DivNewsText()" style="display:none;position:absolute;overflow:auto; background-color:white;color:black;left:0;top:0;width:100%;height:100%"></div>

    <!-- SPK Uyarı -->
    <div id="DivSPKPopUp" onclick="" style="display:none;position:absolute;background-color:black;color:white;left:0;top:0;width:100%;height:100%">

        <div id="DivSPKPopUpHeader" class="Header" style="background-color:red">
            <div class="CaptionText" style="width:100%">SPK UYARISI</div>
        </div>
        <div id="DivSPKPopUpContent" style="width:100%;display:inline-block;overflow:auto;padding:1%">

            <p style="font-weight:bolder">Sermaye Piyasası Kurulu’nun Basın Açıklaması – 04.06.2020</p>

            Kurulumuzca yapılan gözetim ve denetim faaliyetleri neticesinde, Facebook, Twitter gibi sosyal medya mecraları ile Whatsapp, Telegram v.b. iletişim sistemlerinde oluşturulan üyelik bazlı gruplar üzerinden, aralarında haklarında daha önce Kurulumuz tarafından piyasa dolandırıcılığı, güveni kötüye kullanma suçu dâhil pek çok suç fiilinden dolayı suç duyurusunda bulunulmuş ve işlem yasağı getirilmiş kişilerin de bulunduğu, Kurulumuzca yetkilendirilmiş yatırım danışmanlığı ve benzeri sermaye piyasası faaliyeti izni olmayan kişi veya kişilerce, yatırımcıların yönlendirilerek mağdur edilmeye yönelik eylemlerin devam ettiği görülmektedir.

            6362 sayılı Sermaye Piyasası Kanunu’nun “Piyasa Dolandırıcılığı” başlıklı 107’nci maddesinde işlem bazlı piyasa dolandırıcılığı ve bilgi bazlı piyasa dolandırıcılığı suçları düzenlenmiştir. Anılan düzenlemeler uyarınca, "sermaye piyasası araçlarının fiyatlarına, fiyat değişimlerine, arz ve taleplerine ilişkin olarak yanlış veya yanıltıcı izlenim uyandırmak amacıyla alım veya satım yapanlar, emir verenler, emir iptal edenler, emir değiştirenler veya hesap hareketleri gerçekleştirenler" ile "sermaye piyasası araçlarının fiyatlarını, değerlerini veya yatırımcıların kararlarını etkilemek amacıyla yalan, yanlış veya yanıltıcı bilgi veren, söylenti çıkaran, haber veren, yorum yapan veya rapor hazırlayan ya da bunları yayan ve bu suretle menfaat sağlayan" kişilerin 3 yıldan 5 yıla kadar hapis ve beş bin güne kadar adlî para cezası ile cezalandırılacağı hükme bağlanmıştır.

            Kurulumuzca yapılan incelemelerde;
            <ul>
                <li>Sosyal medya mecraları veya iletişim sistemleri üzerinde oluşturulan kapalı grupları kurarak yatırımcıları yönlendiren şahısların, grup içerisinde paya oluşturdukları talep sayesinde sahip oldukları payları satarak menfaat temin etme amacını taşıdığı,</li>
                <li>Gruplar içerisinde yatırımcıları yönlendirenlerin “al” yönünde verdiği tavsiye ile eş anlı olarak kendilerinin veya ilişkili olduğu kişilerin sahip olduğu payları sattıkları,</li>
                <li>
                    Böylelikle, gruplar içerisinde yatırımcıları yönlendirenlerin yüksek fiyatlardan ellerindeki payları grupların içindeki yatırımcılara satarak menfaat temin ederken yatırımcıları zarara uğrattığı görülmekte olup, bahsedilen nitelikte faaliyetlerde bulunan kişilere itibar edilmemesi önem arz etmektedir.
                    Bu çerçevede;
                </li>
                <li>Paylara ilişkin olarak sosyal medya ve iletişim sistemleri üzerinden yapılan telkinlerin ve yatırım tavsiyelerinin, belirli bir grup tarafından gerçekleştirilen piyasayı dolandırıcı işlemlere hizmet etme amacını taşıyabileceği,</li>
                <li>Sosyal medya ve iletişim sistemleri üzerinden yaptıkları paylaşımlarla yatırımcıları yönlendiren şahısların, aslında kendi pay satışlarına veya alışlarına talep/arz oluşturma çabasında olabileceği,</li>
                <li>Söz konusu gruplara dâhil olan yatırımcıların, bu grupları yönlendiren kişiler tarafından işlenen suçlara iştirak kapsamında sorumluluklarının doğabileceği,</li>
                <li>
                    Piyasa koşullarını değerlendirerek yatırımlarını yönlendirme konusunda yeterli bilgi ve tecrübesi olmayan yatırımcıların, Kurulumuz düzenlemeleri uyarınca yatırım danışmanlığı ve portföy yöneticiliği konusunda yetki belgesi almış kuruluşlarla sözleşme yaparak, yatırım kararlarını profesyonel kişilerin yardımıyla almalarında fayda görüldüğü
                    hususlarının da yatırımcılara bir kez daha hatırlatılmasında fayda görülmektedir.
                </li>
            </ul>

            Kamuoyuna saygıyla duyurulur.


        </div>

        <div id="DivSPKPopUpButton" class="PushButton" style="display:inline-block;width:92%;padding:2%;margin-left:2%" onclick="HideByID('DivSPKPopUp')">KAPAT</div>


    </div>

    <!-- Risk Bildirim Onay Formu -->
    <div id="DivRBFPopUp" onclick="" style="display:none;position:absolute;background-color:black;color:white;left:0;top:0;width:100%;height:100%">

        <div id="DivRBFPopUpHeader" class="Header" style="background-color:red">
            <div class="CaptionText" style="width:100%;">RİSK BİLDİRİM ONAY</div>
        </div>
        <div id="DivRBFPopUpContent" style="width:100%;display:inline-block;overflow:auto;padding:1%">
            <div style="width:100%;height:100%;text-align:center">

                <div style="width:90%;display:inline-block">

                    <div style="width:98%;text-align:center;display:inline-block">
                        BORSA İSTANBUL A.Ş. (BIST)<br />ALT PAZAR<br /> RİSK BİLDİRİM FORMU
                        <br />
                    </div>
                    <p>Bilgilendirme Mesajı:</p>
                    <p>"İşlem yapmak istediğiniz payın yer aldığı Alt Pazar paylarında, derinliğin/likiditenin sınırlı olabileceği dolayısıyla aşağı/yukarı yönlü sert fiyat hareketleri ihtimalinin daha yüksek olabileceğini dikkate alarak piyasa risklerinin net bir şekilde farkında olunması, bu riskler değerlendirilerek işlem yapılması ve fiyat riskinin sınırlandırılabilmesi için alım-satım emirlerinin mümkün olduğu kadar limit fiyatlı emir şeklinde iletilmesi hususları önemle dikkatlerinize sunulur." </p>

                    <p style="font-weight:bold">BIST Alt Pazar Paylarında işlem yapılması bazı özel risk unsurları barındırmakta ve yüksek bir yatırım riski taşımaktadır.</p><br />

                    <div style="width:98%;text-align:center;display:inline-block">RİSK BİLDİRİMİ<br /><br /></div>
                    <div style="width:98%;text-align:center;display:inline-block">(YATIRIMCILAR İÇİN BIST ALT PAZAR İŞLEMLERİ HAKKINDA GENEL AÇIKLAMALAR)<br /></div>
                    <p><span id="SpanKurumUnvan"></span> ile yaptığım Alım Satıma Aracılık Çerçeve Sözleşmesi’nde belirtilen hususlara ek olarak;</p>

                    <ul style="list-style:decimal">
                        <li>Aracı kuruluş nezdinde açtırdığım ve/veya açtıracağım hesaplar üzerinden BIST Alt Pazar’da gerçekleştirilecek tüm işlemlerin RBF, BIST ve diğer sermaye piyasası kuruluşları tarafından çıkartılan ilgili her türlü mevzuat ve benzeri tüm düzenleme hükümlerine tabi olacağının,</li>
                        <li>BIST Alt Pazar’ın, BIST Yıldız Pazar ve Ana Pazar’dan farklı bir pazar olarak organize edildiğinin, BIST Alt Pazar’da gerçekleşecek işlem kurallarının ve uygulanan işlem yöntemlerinin BIST Yıldız Pazar ve Ana Pazar ile benzerlikler gösterebileceği gibi farklılıklar da gösterebileceğinin,</li>
                        <li>BIST Pay Piyasası Pazarlarında açığa satış ve kredili işlem, brüt takas, özkaynak oranı, açık takas pozisyonu gibi işlem esaslarının Alt Pazar işlemlerinde değişiklik gösterdiğinin,</li>
                    </ul>

                    <p>Bu nedenler ile bu şirketlere yatırım yapmanın her durumda riskli olduğunun tarafımca bilindiğini, BIST Alt Pazar Risk Bildirim Formu’nu okuyup anladığımı, özgür iradem sonucu onayladığımı, kabul, beyan ve taahhüt ederim.</p>
                </div>

            </div>


        </div>

        <div style="display:inline-block;width:100%;text-align:center">
            <div id="DivRBFPopUpButton" class="PushButton" style="display:inline-block;width:40%;padding:2%;margin-left:2%" onclick="HideByID('DivRBFPopUp');RiskBildirimOnay='1'">KAPAT</div>
            <div id="DivRBFPopUpButtonOK" class="PushButton" style="display:inline-block;width:40%;padding:2%;margin-left:2%" onclick="SendRBFOnay()">ONAYLA</div>
        </div>


    </div>


    <!-- DivParamADX-->
    <div id="DivParamADX" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:#000">
        <div class="Header">ADX</div>
        <div style="margin:2%">Periyot</div>
        <input type="text" id="TextParamADXParam1" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <div style="margin:2%">Ortalama</div>
        <input type="text" id="TextParamADXParam2" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <div style="margin:2%">Metod</div>
        <select id="SelectParamADXParam3" style="width:50%"></select><br><br>
        <div class="PushButton" style="width:94%" onclick="SaveIndParam()">Kaydet</div>
        <div class="PushButton" style="width:94%" onclick="GetEl('DivParamADX').style.display='none'">Vazgeç</div>
    </div>
    <!-- DivParamATR-->
    <div id="DivParamATR" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:#222">
        <div class="Header">ATR</div>
        <div style="margin:2%">Periyot</div>
        <input type="text" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" id="TextParamATRParam1" style="width:40%" /><br>
        <div style="margin:2%">Ortalama</div>
        <input type="text" id="TextParamATRParam2" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" style="width:40%" /><br>
        <div style="margin:2%">Metod</div>
        <select id="SelectParamATRParam3" style="width:50%"></select><br><br>
        <div class="PushButton" style="width:94%" onclick="SaveIndParam()">Kaydet</div>
        <div class="PushButton" style="width:94%" onclick="GetEl('DivParamATR').style.display='none'">Vazgeç</div>
    </div>
    <!-- DivParamALGTR-->
    <div id="DivParamALGTR" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:#222">
        <div class="Header">ALGTR</div>
        <div style="display:inline-block;width:30%;margin:2%">Üst Renk</div>
        <div id="DivColorParamALGTR1" class="BigButton" onclick="ShowRenkPalet(this)" style="width:40%;border:2px white solid;margin:2%">.</div><br>
        <div style="display:inline-block;width:30%;margin:2%">Orta Renk</div>
        <div id="DivColorParamALGTR2" class="BigButton" onclick="ShowRenkPalet(this)" style="width:40%;border:2px white solid;margin:2%">.</div><br>
        <div style="display:inline-block;width:30%;margin:2%">Alt Renk</div>
        <div id="DivColorParamALGTR3" class="BigButton" onclick="ShowRenkPalet(this)" style="width:40%;border:2px white solid;margin:2%">.</div><br><br>
        <div class="PushButton" style="width:94%" onclick="SaveIndParam()">Kaydet</div>
        <div class="PushButton" style="width:94%" onclick="GetEl('DivParamALGTR').style.display='none'">Vazgeç</div>
    </div>

    <!-- DivParamBOL-->
    <div id="DivParamBOL" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:#222">
        <div class="Header">BOL</div>
        <div style="display:inline-block;width:30%;margin:2%">Periyot</div>
        <input type="text" id="TextParamBOLParam1" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <div style="display:inline-block;width:30%;margin:2%">Sapma</div>
        <input type="text" id="TextParamBOLParam2" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <div style="display:inline-block;width:30%;margin:2%">Metod</div>
        <select id="SelectParamBOLParam3" style="width:45%"></select><br>
        <div style="display:inline-block;width:30%;margin:2%">Üst Renk</div>
        <div id="DivColorParamBOL1" class="BigButton" onclick="ShowRenkPalet(this)" style="width:40%;border:2px white solid;margin:2%">.</div><br>
        <div style="display:inline-block;width:30%;margin:2%">Orta Renk</div>
        <div id="DivColorParamBOL2" class="BigButton" onclick="ShowRenkPalet(this)" style="width:40%;border:2px white solid;margin:2%">.</div><br>
        <div style="display:inline-block;width:30%;margin:2%">Alt Renk</div>
        <div id="DivColorParamBOL3" class="BigButton" onclick="ShowRenkPalet(this)" style="width:40%;border:2px white solid;margin:2%">.</div><br><br>
        <div class="PushButton" style="width:94%" onclick="SaveIndParam()">Kaydet</div>
        <div class="PushButton" style="width:94%" onclick="GetEl('DivParamBOL').style.display='none'">Vazgeç</div>
    </div>

    <!-- DivParamFBANDS-->
    <div id="DivParamFBANDS" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:#222">
        <div class="Header">FBANDS</div>
        <div style="display:inline-block;width:30%;margin:2%">Periyot</div>
        <input type="text" id="TextParamFBANDSParam1" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>

        <br>
        <div class="PushButton" style="width:94%" onclick="SaveIndParam()">Kaydet</div>
        <div class="PushButton" style="width:94%" onclick="GetEl('DivParamFBANDS').style.display='none'">Vazgeç</div>
    </div>

    <!-- DivParamENV-->
    <div id="DivParamENV" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:#222">
        <div class="Header">ENV</div>
        <div style="margin:2%">Periyot</div>
        <input type="text" id="TextParamENVParam1" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <div style="margin:2%">Sapma</div>
        <input type="text" id="TextParamENVParam2" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <div style="margin:2%">Metod</div>
        <select id="SelectParamENVParam3" style="width:40%"></select><br><br>
        <div class="PushButton" style="width:94%" onclick="SaveIndParam()">Kaydet</div>
        <div class="PushButton" style="width:94%" onclick="GetEl('DivParamENV').style.display='none'">Vazgeç</div>
    </div>

    <!-- DivParamEWO-->
    <div id="DivParamEWO" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:#222">
        <div class="Header">EWO</div>
        <div style="margin:2%">Periyot</div>

        <input type="text" id="TextParamEWOParam1" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <input type="text" id="TextParamEWOParam2" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <div style="margin:2%">Metod</div><br>
        <select id="SelectParamEWOParam3" style="width:50%"></select><br>
        <div style="margin:2%">Periyot</div>
        <input type="text" id="TextParamEWOParam4" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <div class="PushButton" style="width:94%" onclick="SaveIndParam()">Kaydet</div>
        <div class="PushButton" style="width:94%" onclick="GetEl('DivParamEWO').style.display='none'">Vazgeç</div>
    </div>
    <!-- DivParamDI-->
    <div id="DivParamDI" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:#222">
        <div class="Header">DI</div>
        <div style="margin:2%">Periyot</div>

        <input type="text" id="TextParamDIParam1" style="width:40%" /><br>
        <div class="PushButton" style="width:94%" onclick="SaveIndParam()">Kaydet</div>
        <div class="PushButton" style="width:94%" onclick="GetEl('DivParamDI').style.display='none'">Vazgeç</div>
    </div>
    <!-- DivParamAROON-->
    <div id="DivParamAROON" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:#222">
        <div class="Header">AROON</div>
        <div style="margin:2%">Periyot</div>

        <input type="text" id="TextParamAROONParam1" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <div class="PushButton" style="width:94%" onclick="SaveIndParam()">Kaydet</div>
        <div class="PushButton" style="width:94%" onclick="GetEl('DivParamAROON').style.display='none'">Vazgeç</div>
    </div>
    <!-- DivParamKAIRI-->
    <div id="DivParamKAIRI" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:#222">
        <div class="Header">KAIRI</div>
        <div style="margin:2%">Periyot</div>
        <input type="text" id="TextParamKAIRIParam1" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <div style="margin:2%">Ortalama</div>
        <input type="text" id="TextParamKAIRIParam2" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <div style="margin:2%">Metod</div>
        <select id="SelectParamKAIRIParam3" style="width:50%"></select><br><br>
        <div class="PushButton" style="width:94%" onclick="SaveIndParam()">Kaydet</div>
        <div class="PushButton" style="width:94%" onclick="GetEl('DivParamKAIRI').style.display='none'">Vazgeç</div>
    </div>
    <!-- DivParamMA-->
    <div id="DivParamMA" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:#222">
        <div class="Header">MA</div>
        <div style="display:inline-block;width:5%;margin:2%">1</div>
        <input type="text" id="TextParamMAParam1" style="width:15%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" />
        <select id="SelectParamMAParam1" style="width:30%"></select>
        <div id="DivColorParamMAParam1" class="BigButton" onclick="ShowRenkPalet(this)" style="width:20%;border:2px white solid">.</div><br>
        <div style="display:inline-block;width:5%;margin:2%">2</div>
        <input type="text" id="TextParamMAParam2" style="width:15%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" />
        <select id="SelectParamMAParam2" style="width:30%"></select>
        <div id="DivColorParamMAParam2" class="BigButton" onclick="ShowRenkPalet(this)" style="width:20%;border:2px white solid">.</div><br>
        <div style="display:inline-block;width:5%;margin:2%">3</div>
        <input type="text" id="TextParamMAParam3" style="width:15%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" />
        <select id="SelectParamMAParam3" style="width:30%"></select>
        <div id="DivColorParamMAParam3" class="BigButton" onclick="ShowRenkPalet(this)" style="width:20%;border:2px white solid">.</div><br><br>
        <div class="PushButton" style="width:90%; left:2px;right:2px; padding:2%" onclick="SaveIndParam()">Kaydet</div>
        <div class="PushButton" style="width:90%;padding:2%" onclick="GetEl('DivParamMA').style.display='none'">Vazgeç</div>
    </div>

    <!-- DivParamMACD-->
    <div id="DivParamMACD" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:#222">
        <div class="Header">MACD</div>
        <div style="margin:2%">Periyot1</div>
        <input type="text" id="TextParamMACDParam1" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <div style="margin:2%">Periyot2</div>
        <input type="text" id="TextParamMACDParam2" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <div style="margin:2%">Metod</div>
        <select id="SelectParamMACDParam3" style="width:50%"></select><br>
        <div style="margin:2%">Periyot</div>
        <input type="text" id="TextParamMACDParam4" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br><br>
        <div class="PushButton" style="width:94%" onclick="SaveIndParam()">Kaydet</div>
        <div class="PushButton" style="width:94%" onclick="GetEl('DivParamMACD').style.display='none'">Vazgeç</div>
    </div>

    <!-- DivParamMFI-->
    <div id="DivParamMFI" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:#222">
        <div class="Header">MFI</div>
        <div style="margin:2%">Periyot</div>
        <input type="text" id="TextParamMFIParam1" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <div style="margin:2%">Ortalama</div>
        <input type="text" id="TextParamMFIParam2" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <div style="margin:2%">Metod</div>
        <select id="SelectParamMFIParam3" style="width:50%"></select><br><br>
        <div class="PushButton" style="width:94%" onclick="SaveIndParam()">Kaydet</div>
        <div class="PushButton" style="width:94%" onclick="GetEl('DivParamMFI').style.display='none'">Vazgeç</div>
    </div>

    <!-- DivParamMOM-->
    <div id="DivParamMOM" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:#222">
        <div class="Header">MOM</div>
        <div style="margin:2%">Periyot</div>
        <input type="text" id="TextParamMOMParam1" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <div style="margin:2%">Ortalama</div>
        <input type="text" id="TextParamMOMParam2" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <div style="margin:2%">Metod</div>
        <select id="SelectParamMOMParam3" style="width:50%"></select><br><br>
        <div class="PushButton" style="width:94%" onclick="SaveIndParam()">Kaydet</div>
        <div class="PushButton" style="width:94%" onclick="GetEl('DivParamMOM').style.display='none'">Vazgeç</div>
    </div>

    <!-- DivParamPAR-->
    <div id="DivParamPAR" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:#222">
        <div class="Header">PAR</div>
        <div style="display:inline-block;width:30%;margin:2%">Step</div>
        <input type="text" id="TextParamPARParam1" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <div style="display:inline-block;width:30%;margin:2%">Maksimum</div>
        <input type="text" id="TextParamPARParam2" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <div style="display:inline-block;width:30%;margin:2%">Renk</div>
        <div id="DivColorParamPAR1" class="BigButton" onclick="ShowRenkPalet(this)" style="width:45%;border:2px white solid;margin:2%">.</div><br><br>
        <div class="PushButton" style="width:94%" onclick="SaveIndParam()">Kaydet</div>
        <div class="PushButton" style="width:94%" onclick="GetEl('DivParamPAR').style.display='none'">Vazgeç</div>
    </div>

    <!-- DivParamPVTG-->
    <div id="DivParamPVTG" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:#222">
        <div class="Header">PVTG</div>
        <div style="display:inline-block;width:30%;margin:2%">PH Renk</div>
        <div id="DivColorParamPVTGParam1" class="BigButton" onclick="ShowRenkPalet(this)" style="width:20%;border:2px white solid">.</div><br>
        <div style="display:inline-block;width:30%;margin:2%">PVT Renk</div>
        <div id="DivColorParamPVTGParam2" class="BigButton" onclick="ShowRenkPalet(this)" style="width:20%;border:2px white solid">.</div><br>
        <div style="display:inline-block;width:30%;margin:2%">PL Renk</div>
        <div id="DivColorParamPVTGParam3" class="BigButton" onclick="ShowRenkPalet(this)" style="width:20%;border:2px white solid">.</div><br><br>
        <div class="PushButton" style="width:90%; left:2px;right:2px; padding:2%" onclick="SaveIndParam()">Kaydet</div>
        <div class="PushButton" style="width:90%;padding:2%" onclick="GetEl('DivParamPVTG').style.display='none'">Vazgeç</div>
    </div>

    <!-- DivParamPVTH-->
    <div id="DivParamPVTH" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:#222">
        <div class="Header">PVTH</div>
        <div style="display:inline-block;width:30%;margin:2%">PH Renk</div>
        <div id="DivColorParamPVTHParam1" class="BigButton" onclick="ShowRenkPalet(this)" style="width:20%;border:2px white solid">.</div><br>
        <div style="display:inline-block;width:30%;margin:2%">PVT Renk</div>
        <div id="DivColorParamPVTHParam2" class="BigButton" onclick="ShowRenkPalet(this)" style="width:20%;border:2px white solid">.</div><br>
        <div style="display:inline-block;width:30%;margin:2%">PL Renk</div>
        <div id="DivColorParamPVTHParam3" class="BigButton" onclick="ShowRenkPalet(this)" style="width:20%;border:2px white solid">.</div><br><br>
        <div class="PushButton" style="width:90%; left:2px;right:2px; padding:2%" onclick="SaveIndParam()">Kaydet</div>
        <div class="PushButton" style="width:90%;padding:2%" onclick="GetEl('DivParamPVTH').style.display='none'">Vazgeç</div>
    </div>

    <!-- DivParamRSI-->
    <div id="DivParamRSI" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:#222">
        <div class="Header">RSI</div>
        <div style="margin:2%">Periyot</div>
        <input type="text" id="TextParamRSIParam1" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <div style="margin:2%">Ortalama</div>
        <input type="text" id="TextParamRSIParam2" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <div style="margin:2%">Metod</div>
        <select id="SelectParamRSIParam3" style="width:50%"></select><br><br>
        <div class="PushButton" style="width:94%" onclick="SaveIndParam()">Kaydet</div>
        <div class="PushButton" style="width:94%" onclick="GetEl('DivParamRSI').style.display='none'">Vazgeç</div>
    </div>
    <!-- DivParamQQE-->
    <div id="DivParamQQE" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:#222">
        <div class="Header">QQE</div>
        <div style="margin:2%">Periyot</div>

        <input type="text" id="TextParamQQEParam1" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <input type="text" id="TextParamQQEParam2" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <div class="PushButton" style="width:94%" onclick="SaveIndParam()">Kaydet</div>
        <div class="PushButton" style="width:94%" onclick="GetEl('DivParamQQE').style.display='none'">Vazgeç</div>
    </div>
    <!-- DivParamWILLR-->
    <div id="DivParamWILLR" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:#222">
        <div class="Header">WILLR</div>
        <div style="margin:2%">Periyot</div>
        <input type="text" id="TextParamWILLRParam1" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <div style="margin:2%">Ortalama</div>
        <input type="text" id="TextParamWILLRParam2" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <div style="margin:2%">Metod</div>
        <select id="SelectParamWILLRParam3" style="width:50%"></select><br><br>
        <div class="PushButton" style="width:94%" onclick="SaveIndParam()">Kaydet</div>
        <div class="PushButton" style="width:94%" onclick="GetEl('DivParamWILLR').style.display='none'">Vazgeç</div>
    </div>
    <!-- DivParamCCI-->
    <div id="DivParamCCI" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:#222">
        <div class="Header">CCI</div>
        <div style="margin:2%">Periyot</div>
        <input type="text" id="TextParamCCIParam1" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <div style="margin:2%">Ortalama</div>
        <input type="text" id="TextParamCCIParam2" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <div style="margin:2%">Metod</div>
        <select id="SelectParamCCIParam3" style="width:50%"></select><br><br>
        <div class="PushButton" style="width:94%" onclick="SaveIndParam()">Kaydet</div>
        <div class="PushButton" style="width:94%" onclick="GetEl('DivParamCCI').style.display='none'">Vazgeç</div>
    </div>
    <!-- DivParamPRCH-->
    <div id="DivParamPRCH" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:#222">
        <div class="Header">PRCH</div>
        <div style="margin:2%">Periyot</div>
        <input type="text" id="TextParamPRCHParam1" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <div style="margin:2%">Ortalama</div>
        <div class="PushButton" style="width:94%" onclick="SaveIndParam()">Kaydet</div>
        <div class="PushButton" style="width:94%" onclick="GetEl('DivParamPRCH').style.display='none'">Vazgeç</div>
    </div>

    <!-- DivParamSTO-->
    <div id="DivParamSTO" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:#222">
        <div class="Header">STO</div>
        <div style="margin:2%">Periyot1</div>
        <input type="text" id="TextParamSTOParam1" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <div style="margin:2%">Periyot2</div>
        <input type="text" id="TextParamSTOParam2" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <div style="margin:2%">Metod</div>
        <select id="SelectParamSTOParam3" style="width:50%"></select><br>
        <div style="margin:2%">Periyot</div>
        <input type="text" id="TextParamSTOParam4" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br><br>
        <div class="PushButton" style="width:94%" onclick="SaveIndParam()">Kaydet</div>
        <div class="PushButton" style="width:94%" onclick="GetEl('DivParamSTO').style.display='none'">Vazgeç</div>
    </div>

    <!-- DivParamTKE-->
    <div id="DivParamTKE" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:#222">
        <div class="Header">TKE</div>
        <div style="margin:2%">Ortalama</div>
        <input type="text" id="TextParamTKEParam1" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <div style="margin:2%">Metod</div>
        <select id="SelectParamTKEParam2" style="width:50%"></select><br><br>
        <div class="PushButton" style="width:94%" onclick="SaveIndParam()">Kaydet</div>
        <div class="PushButton" style="width:94%" onclick="GetEl('DivParamTKE').style.display='none'">Vazgeç</div>
    </div>

    <!-- DivParamTOMA-->
    <div id="DivParamTOMA" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:#222">
        <div class="Header">TOMA</div>
        <div style="display:inline-block;width:30%;margin:2%">Periyot</div>
        <input type="text" id="TextParamTOMAParam1" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <div style="display:inline-block;width:30%;margin:2%">Yüzde</div>
        <input type="text" id="TextParamTOMAParam2" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <div style="display:inline-block;width:30%;margin:2%">1.Renk</div>
        <div id="DivColorParamTOMA1" class="BigButton" onclick="ShowRenkPalet(this)" style="width:45%;border:2px white solid;margin:2%">.</div><br>
        <div style="display:inline-block;width:30%;margin:2%">2.Renk</div>
        <div id="DivColorParamTOMA2" class="BigButton" onclick="ShowRenkPalet(this)" style="width:45%;border:2px white solid;margin:2%">.</div><br><br>
        <div class="PushButton" style="width:94%" onclick="SaveIndParam()">Kaydet</div>
        <div class="PushButton" style="width:94%" onclick="GetEl('DivParamTOMA').style.display='none'">Vazgeç</div>
    </div>

    <!-- DivParamEHLRS-->
    <div id="DivParamEHLRS" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:#222">
        <div class="Header">EHLRS</div>

        <div style="display:inline-block;width:30%;margin:2%">Renk</div>
        <div id="DivColorParamEHLRS1" class="BigButton" onclick="ShowRenkPalet(this)" style="width:45%;border:2px white solid;margin:2%">.</div><br>
        <br>
        <div class="PushButton" style="width:94%" onclick="SaveIndParam()">Kaydet</div>
        <div class="PushButton" style="width:94%" onclick="GetEl('DivParamEHLRS').style.display='none'">Vazgeç</div>
    </div>

    <!-- DivParamVHF-->
    <div id="DivParamVHF" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:#222">
        <div class="Header">VHF</div>
        <div style="margin:2%">Periyot</div>
        <input type="text" id="TextParamVHFParam1" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <div style="margin:2%">Ortalama</div>
        <input type="text" id="TextParamVHFParam2" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <div style="margin:2%">Metod</div>
        <select id="SelectParamVHFParam3" style="width:50%"></select><br><br>
        <div class="PushButton" style="width:94%" onclick="SaveIndParam()">Kaydet</div>
        <div class="PushButton" style="width:94%" onclick="GetEl('DivParamVHF').style.display='none'">Vazgeç</div>
    </div>

    <!-- DivParamVOL-->
    <div id="DivParamVOL" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:#222">
        <div class="Header">VOL</div>
        <div style="margin:2%">Ortalama</div>
        <input type="text" id="TextParamVOLParam1" style="width:40%" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" /><br>
        <div style="margin:2%">Metod</div>
        <select id="SelectParamVOLParam2" style="width:50%"></select><br><br>
        <div class="PushButton" style="width:94%" onclick="SaveIndParam()">Kaydet</div>
        <div class="PushButton" style="width:94%" onclick="GetEl('DivParamVOL').style.display='none'">Vazgeç</div>
    </div>


    <!-- renk paleti-->
    <div id="DivRenkPalet" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;background-color:black">
        <div style="height:80%;overflow:auto;background-color:black">
            <table id="TableRenkPalet" class="TableStyle"></table>
        </div><br>
        <div class="PushButton" style="width:90%;padding:2%" onclick="GetEl('DivRenkPalet').style.display='none'">Vazgeç</div>
    </div>

    <!-- DivStat -->
    <div id="DivStat" onmouseup="HideThis(this)" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:#444">
        <table id="TableStat" style="width: 99%"></table>
    </div>

    <!-- DivObserve -->
    <div id="DivObserve" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;background-color:black;text-align:center">
        <div id="DivObserveType" style="width:100%">
            <div id="DivObserveType1" class="BigButton" onclick="ActiveObserveElement=this;OnClick_Saat()" style="width:22%">Genel</div>
            <div id="DivObserveType6" class="BigButton" onclick="ActiveObserveElement=this;OnClick_Saat()" style="width:22%">Trade</div>
            <div id="DivObserveType4" class="BigButton" onclick="ActiveObserveElement=this;OnClick_Saat()" style="width:22%">Cihaz</div>
            <div id="DivObserveType5" class="BigButton" onclick="ActiveObserveElement=this;OnClick_Saat()" style="width:22%">Online</div><br>
        </div><br><br>
        <div id="DivTableObserve" onmouseup="HideThis(GetEl('DivObserve'))" style="overflow:auto;background-color:black;border-top:2px #555 solid">
            <table id="TableObserve" class="TableStyle" style="table-layout:auto"></table>
        </div>
    </div>

    <!-- DivGelenMesaj -->
    <div id="DivGelenMesaj" style="display:none;position:absolute;overflow:auto;left:0;top:0;height:100%;width:100%;text-align:left;background-color:#222">
        <div style="background-color:#A00;color:white;padding-top:4px;padding-bottom:4px;text-align:center;width:100%;font-weight:bold">Mesajınız Var</div>
        <div id="DivGelenMesajText" style="height:80%; background-color:#222;color:white;padding:4px">Mesajınız Var</div>
        <div id="DivGelenMesajKapat" class="PushButton" onmouseup="HideThis(GetEl('DivGelenMesaj'))" style="width:94%;padding:3%;bottom:1%">Kapat</div>
    </div>

    <!-- DivSozlesme -->
    <div id="DivSozlesme" onclick="ApproveSozlesme()" style="display:none;position:absolute;overflow:hidden;left:0;top:0;height:100%;width:100%;background-color:white;color:black">
        <div id="DivSozlesmeHeader" style="background-color:#A00;color:white;padding-top:2%;padding-bottom:2%;text-align:center;width:100%;font-weight:bold">Sözleşme !!!</div>
        <div id="DivSozlesmeText" style="position:absolute;overflow:auto;padding:0;width:100%"></div>
        <div id="DivSozlesmeKabul" class="PushButton Bold" style="position:absolute;width:100%;bottom:0;padding-top:2%;padding-bottom:2%;margin:0">Okudum, Onaylıyorum</div>
    </div>

    <!-- DivPortfoySozlesme -->
    <div id="DivPortfoySozlesme" onmouseup="HideThis(this)" style="display:none;position:absolute;overflow:hidden;left:0;top:0;height:100%;width:100%;background-color:white;color:black">
        <div id="DivPortfoySozlesmeHeader" style="background-color:#A00;color:white;padding-top:2%;padding-bottom:2%;text-align:center;width:100%;font-weight:bold">İşlem Kuralları Bildirim Formu</div>
        <div id="DivPortfoySozlesmeText" style="position:absolute;overflow:auto;padding:0;width:100%"></div>
        <div id="DivPortfoySozlesmeKabul" class="PushButton Bold" onclick="ApprovePortfoySozlesme()" style="position:absolute;width:100%;bottom:0;padding-top:2%;padding-bottom:2%;margin:0">Okudum, Onaylıyorum</div>
    </div>

    <!-- Ak Onay Duyuruları -->
    <div id="DivAkOnayDuyuru" onmouseup="" style="display:none;position:absolute;overflow:hidden;left:0;top:0;height:100%;width:100%;background-color:#242424;color:white">
        <div id="DivAkOnayDuyuruHeader" style="background-color:#A00;color:white;padding-top:2%;padding-bottom:2%;text-align:center;width:100%;font-weight:bold">AK YATIRIM DUYURULARI</div>
        <div id="DivAkOnayDuyuruContent">.</div><br />
        <div class="vazgecbtnbackcolor" onclick="HideByID('DivAkOnayDuyuru');" style="color:black;width:95%;display:inline-block;margin:2%;padding-top:2%;padding-bottom:2%;text-align:center">Vazgeç</div>
    </div>

    <!-- DivMesajOnay -->
    <div id="DivMesajOnay" style="display:none;position:absolute;overflow:hidden;left:0;top:0;height:100%;width:100%;background-color:#FFF;color:black">
        <div id="DivMesajOnayHeader" style="background-color:#C00;color:white;padding-top:2%;padding-bottom:2%;text-align:center;width:100%;font-weight:bold">ÇEKİNCE !!!</div>
        <div id="DivMesajOnayTitle" style="color:#E00;padding-top:2%;padding-bottom:2%;text-align:left;width:100%;font-weight:bold;background-color:white"></div>
        <div id="DivMesajOnayText" style="position:absolute;overflow:auto;padding:0;width:100%;background-color:#EEE"></div>
        <div id="DivMesajOnayReddet" class="PushButton Bold" onclick="GetEl('DivMesajOnay').style.display='none'" style="position:absolute;left:1%;width:48%;bottom:0;padding-top:2%;padding-bottom:2%;margin:0;margin-bottom:1%">Reddet</div>
        <div id="DivMesajOnayKabul" class="PushButton Bold" onclick="ApproveMesajOnay()" style="position:absolute;width:48%;bottom:0;left:51%;padding-top:2%;padding-bottom:2%;margin:0;margin-bottom:1%">Onaylıyorum</div>
    </div>

    <!-- large chart  -->
    <div id="DivTech" class="Page" onmousedown="HideComboTables();" style="display:none;background-color:black;left:0;top:0;height:100%;width:100%">
        <div id="DivTechToolbar" style="display:inline-block;width:100%;background-color:black">
            <table id="TableTechToolbar" class="TableStyle" style="border-collapse:separate"></table>
            <input type="text" id="TextTechSymbol" onkeyup="OnKeyUp_TextTechSymbol(this,event)" onmouseup="FillAutoTech(this);" onfocus="onFocusTxtbox(this,event)" onfocusout="onFocusTxtbox(this,event)" style="position:absolute;left:0;top:0;width:22%;text-transform:uppercase;font-weight:bold;padding:4px;text-align:center;margin:1px" />
        </div>
        <div id="DivTechCanvas1" onmousedown="HidePopups()" style="position:absolute;width:100%;background-color:blue">
            <canvas id="Canvas1Tech" onclick="OnMouseUp_Chart(this,event)" style="background-color:black"></canvas>
        </div>
        <div id="DivTechCanvas2" onmousedown="HidePopups()" style="display:none;position:absolute;width:100%;background-color:gray">
            <canvas id="Canvas2Tech" style="background-color:black"></canvas>


        </div>
        <!-- auto complete-->
        <div id="DivTechSearch" class="ComboTable">
            <table id="TableTechSearch" class="TableStyle"></table>
        </div>
        <div></div>

        <div id="DivChartBuySell" style="border:1px solid white;height:10em;width:43%;position:absolute;bottom:2px;background-color:black;font-size:0.5em">

            <div style="width:100%;height:3.1em;display:inline-block">
                <table id="ChartBuysellDerinlik" class="TableStyle" style="border-bottom:0px white solid"></table>
            </div>

            <div style="width:100%;height:2em;text-align:center">


                <div id="DivChartBistBuySellButtonAl" onclick="OnClick_ChartDivBistBuySellSendOrder(this)" style="width:28%;display:inline-block"> <div class="albtnbackcolor" style="width:100%;display:inline-block;text-align:center;padding-top:0.3em;padding-bottom:0.3em;border-radius:0.2em">AL</div></div>
                <div style="width:35%;display:inline-block;text-align:center">
                    <div id="textChartBuySellAdet" onclick="ShowSanalKlavyeNumber(this,10,60)" style="width: 80%; display: inline-block; text-align: center; background-color: white; color: black; padding-top: 0.3em; padding-bottom: 0.3em; border-radius: 0.2em">1</div>
                </div>
                <div id="DivChartBistBuySellButtonSat" onclick="OnClick_ChartDivBistBuySellSendOrder(this)" style="width:28%;display:inline-block"> <div class="satbtnbackcolor" style="width:100%;display:inline-block;text-align:center;padding-top:0.3em;padding-bottom:0.3em;border-radius:0.2em">SAT</div></div>
            </div>
        </div>

    </div>

    <!-- period list -->
    <div id="DivDetayChartPeriod" class="MenuBox" style="border-top:3px #666 solid;border-bottom:3px #666 solid">
        <div id="DivDetayChartPeriod1" class="MenuItem" onclick="OnClick_DivDetayChartPeriod(this)" style="width:40%">1</div>
        <div id="DivDetayChartPeriod20" class="MenuItem" onclick="OnClick_DivDetayChartPeriod(this)" style="width:40%">20</div>
        <br>
        <div id="DivDetayChartPeriod2" class="MenuItem" onclick="OnClick_DivDetayChartPeriod(this)" style="width:40%">2</div>
        <div id="DivDetayChartPeriod30" class="MenuItem" onclick="OnClick_DivDetayChartPeriod(this)" style="width:40%">30</div>
        <br>
        <div id="DivDetayChartPeriod3" class="MenuItem" onclick="OnClick_DivDetayChartPeriod(this)" style="width:40%">3</div>
        <div id="DivDetayChartPeriod60" class="MenuItem" onclick="OnClick_DivDetayChartPeriod(this)" style="width:40%">60</div>
        <br>
        <div id="DivDetayChartPeriod4" class="MenuItem" onclick="OnClick_DivDetayChartPeriod(this)" style="width:40%">4</div>
        <div id="DivDetayChartPeriodSeans" class="MenuItem" onclick="OnClick_DivDetayChartPeriod(this)" style="width:40%">S</div>
        <br>
        <div id="DivDetayChartPeriod5" class="MenuItem" onclick="OnClick_DivDetayChartPeriod(this)" style="width:40%">5</div>
        <div id="DivDetayChartPeriodGun" class="MenuItem" onclick="OnClick_DivDetayChartPeriod(this)" style="width:40%">G</div>
        <br>
        <div id="DivDetayChartPeriod8" class="MenuItem" onclick="OnClick_DivDetayChartPeriod(this)" style="width:40%">8</div>
        <div id="DivDetayChartPeriodHafta" class="MenuItem" onclick="OnClick_DivDetayChartPeriod(this)" style="width:40%">H</div>
        <br>
        <div id="DivDetayChartPeriod10" class="MenuItem" onclick="OnClick_DivDetayChartPeriod(this)" style="width:40%">10</div>
        <div id="DivDetayChartPeriodAy" class="MenuItem" onclick="OnClick_DivDetayChartPeriod(this)" style="width:40%">A</div>
        <br>
        <div id="DivDetayChartPeriod15" class="MenuItem" onclick="OnClick_DivDetayChartPeriod(this)" style="width:40%">15</div>
        <div id="DivDetayChartPeriodYil" class="MenuItem" onclick="OnClick_DivDetayChartPeriod(this)" style="width:40%">Y</div>
        <br>
        <br>
    </div>


    <!-- chart menu-->
    <div id="DivDetayChartMenu" class="Popup" style="text-align:left;width:100%">
        <div id="DivDetayChartMenuValues1" class="LineMenuButton" onclick="OnClick_DivDetayChartMenu(this)"></div>
        <div id="DivDetayChartMenuValues2" class="LineMenuButton" onclick="OnClick_DivDetayChartMenu(this)">Değerleri Göster</div><br>
        <div id="DivDetayChartMenuColors1" class="LineMenuButton" onclick="OnClick_DivDetayChartMenu(this)"></div>
        <div id="DivDetayChartMenuColors2" class="LineMenuButton" onclick="OnClick_DivDetayChartMenu(this)">Yükselen Düşen Renkler</div><br>
        <div id="DivDetayChartMenuLevel1" class="LineMenuButton" onclick="OnClick_DivDetayChartMenu(this)"></div>
        <div id="DivDetayChartMenuLevel2" class="LineMenuButton" onclick="OnClick_DivDetayChartMenu(this)">Yatay Seviye</div><br>
        <div id="DivDetayChartMenuBuySell1" class="LineMenuButton" onclick="OnClick_DivDetayChartMenu(this)"></div>
        <div id="DivDetayChartMenuBuySell2" class="LineMenuButton" onclick="OnClick_DivDetayChartMenu(this)">Al-Sat Göster</div><br>

        <div id="DivDetayChartMenuOHLC1" class="LineMenuButton" onclick="OnClick_DivDetayChartMenu(this)"></div>
        <div id="DivDetayChartMenuOHLC2" class="LineMenuButton" onclick="OnClick_DivDetayChartMenu(this)">OHLC</div>
        <div id="DivDetayChartMenuCandle1" class="LineMenuButton" onclick="OnClick_DivDetayChartMenu(this)" style="margin-left:10%"></div>
        <div id="DivDetayChartMenuCandle2" class="LineMenuButton" onclick="OnClick_DivDetayChartMenu(this)">Candle</div>
        <div id="DivDetayChartMenuLine1" class="LineMenuButton" onclick="OnClick_DivDetayChartMenu(this)" style="margin-left:10%"></div>
        <div id="DivDetayChartMenuLine2" class="LineMenuButton" onclick="OnClick_DivDetayChartMenu(this)">Line</div><br>
        <div id="DivDetayChartMenuTrend1" class="LineMenuButton" onclick="OnClick_DivDetayChartMenu(this)"></div>
        <div id="DivDetayChartMenuTrend2" class="LineMenuButton" onclick="OnClick_DivDetayChartMenu(this)">Trend</div>
        <div id="DivDetayChartMenuFibo1" class="LineMenuButton" onclick="OnClick_DivDetayChartMenu(this)" style="margin-left:10%"></div>
        <div id="DivDetayChartMenuFibo2" class="LineMenuButton" onclick="OnClick_DivDetayChartMenu(this)">Fibo Ret</div><br>
        <div id="DivDetayChartMenuTrendStart" class="PushButton" onclick="OnClick_DivDetayChartMenu(this)" style="margin:2px;padding:4px;width:28%;max-width:100px">1.Trend Başlat</div>
        <div id="DivDetayChartMenuTrendEnd" class="PushButton" onclick="OnClick_DivDetayChartMenu(this)" style="margin:2px;padding:4px;width:28%;max-width:100px">1.Trend Bitir</div>
        <div id="DivDetayChartMenuTrendDelete" class="PushButton" onclick="OnClick_DivDetayChartMenu(this)" style="margin:2px;padding:4px;width:28%;max-width:100px">1.Trend Sil</div><br>
        <div id="DivDetayChartMenuTrend2Start" class="PushButton" onclick="OnClick_DivDetayChartMenu(this)" style="margin:2px;padding:4px;width:28%;max-width:100px">2.Trend Başlat</div>
        <div id="DivDetayChartMenuTrend2End" class="PushButton" onclick="OnClick_DivDetayChartMenu(this)" style="margin:2px;padding:4px;width:28%;max-width:100px">2.Trend Bitir</div>
        <div id="DivDetayChartMenuTrend2Delete" class="PushButton" onclick="OnClick_DivDetayChartMenu(this)" style="margin:2px;padding:4px;width:28%;max-width:100px">2.Trend Sil</div><br>
        <div id="DivDetayChartMenuYatayStart" class="PushButton" onclick="OnClick_DivDetayChartMenu(this)" style="margin:2px;padding:4px;width:28%;max-width:100px">Yatay Başlat</div>
        <div id="DivDetayChartMenuYatayEnd" class="PushButton" onclick="OnClick_DivDetayChartMenu(this)" style="margin:2px;padding:4px;width:28%;max-width:100px">Yatay Bitir</div>
        <div id="DivDetayChartMenuYatayDelete" class="PushButton" onclick="OnClick_DivDetayChartMenu(this)" style="margin:2px;padding:4px;width:28%;max-width:100px">Yatay Sil</div><br>
        <div class="IndicatorButton" style="border:0"></div>
    </div>

    <!-- indicator list -->
    <div id="DivIndicator" class="MenuBox" style="border-top:3px #666 solid;border-bottom:3px #666 solid">
        <div id="DivIndicatorNONE" class="MenuItem" onclick="OnClick_DivIndicator(this)" style="width:90%">Hiçbiri</div>

        <div id="DivIndicatorBOL" class="MenuItem" style="width:17%;margin:1%;margin-left:0;margin-right:0" onclick="OnClick_DivIndicator(this)">BOL</div>
        <div id="DivIndicatorENV" class="MenuItem" style="width:17%;margin:1%;margin-left:0;margin-right:0" onclick="OnClick_DivIndicator(this)">ENV</div>
        <div id="DivIndicatorADX" class="MenuItem" style="width:17%;margin:1%;margin-left:6%;margin-right:0" onclick="OnClick_DivIndicator(this)">ADX</div>
        <div id="DivIndicatorMOM" class="MenuItem" style="width:17%;margin:1%;margin-left:0;margin-right:0" onclick="OnClick_DivIndicator(this)">MOM</div><br>

        <div id="DivIndicatorMA" class="MenuItem" style="width:17%;margin:1%;margin-left:0;margin-right:0" onclick="OnClick_DivIndicator(this)">MA</div>
        <div id="DivIndicatorPAR" class="MenuItem" style="width:17%;margin:1%;margin-left:0;margin-right:0" onclick="OnClick_DivIndicator(this)">PAR</div>
        <div id="DivIndicatorMACD" class="MenuItem" style="width:17%;margin:1%;margin-left:6%;margin-right:0" onclick="OnClick_DivIndicator(this)">MACD</div>
        <div id="DivIndicatorRSI" class="MenuItem" style="width:17%;margin:1%;margin-left:0;margin-right:0" onclick="OnClick_DivIndicator(this)">RSI</div><br>

        <div id="DivIndicatorPVTG" class="MenuItem" style="width:17%;margin:1%;margin-left:0;margin-right:0" onclick="OnClick_DivIndicator(this)">PVTG</div>
        <div id="DivIndicatorPVTH" class="MenuItem" style="width:17%;margin:1%;margin-left:0;margin-right:0" onclick="OnClick_DivIndicator(this)">PVTH</div>
        <div id="DivIndicatorSTO" class="MenuItem" style="width:17%;margin:1%;margin-left:6%;margin-right:0" onclick="OnClick_DivIndicator(this)">STO</div>
        <div id="DivIndicatorTKE" class="MenuItem" style="width:17%;margin:1%;margin-left:0;margin-right:0" onclick="OnClick_DivIndicator(this)">TKE</div><br>

        <div id="DivIndicatorTOMA" class="MenuItem" style="width:17%;margin:1%;margin-left:0;margin-right:0" onclick="OnClick_DivIndicator(this)">TOMA</div>
        <div id="DivIndicatorPRCH" class="MenuItem" style="width:17%;margin:1%;margin-left:0%;margin-right:0" onclick="OnClick_DivIndicator(this)">PRCH</div>
        <div id="DivIndicatorVOL" class="MenuItem" style="width:17%;margin:1%;margin-left:6%;margin-right:0" onclick="OnClick_DivIndicator(this)">VOL</div>
        <div id="DivIndicatorCCI" class="MenuItem" style="width:17%;margin:1%;margin-left:0%;margin-right:0" onclick="OnClick_DivIndicator(this)">CCI</div><br>

        <div id="DivIndicatorATR" class="MenuItem" style="width:17%;margin:1%;margin-left:0;margin-right:0" onclick="OnClick_DivIndicator(this)">ATR</div>
        <div id="DivIndicatorWILLR" class="MenuItem" style="width:17%;margin:1%;margin-left:0%;margin-right:0" onclick="OnClick_DivIndicator(this)">WILLR</div>
        <div id="DivIndicatorDI" class="MenuItem" style="width:17%;margin:1%;margin-left:6%;margin-right:0" onclick="OnClick_DivIndicator(this)">DI</div>
        <div id="DivIndicatorAROON" class="MenuItem" style="width:17%;margin:1%;margin-left:0%;margin-right:0" onclick="OnClick_DivIndicator(this)">AROON</div><br>

        <div id="DivIndicatorALGTR" class="MenuItem" style="width:17%;margin:1%;margin-left:0;margin-right:0" onclick="OnClick_DivIndicator(this)">ALGTR</div>
        <div id="DivIndicatorEHLRS" class="MenuItem" style="width:17%;margin:1%;margin-left:0%;margin-right:0" onclick="OnClick_DivIndicator(this)">EHLRS</div>
        <div id="DivIndicatorMFI" class="MenuItem" style="width:17%;margin:1%;margin-left:6%;margin-right:0" onclick="OnClick_DivIndicator(this)">MFI</div>
        <div id="DivIndicatorVHF" class="MenuItem" style="width:17%;margin:1%;margin-left:0%;margin-right:0" onclick="OnClick_DivIndicator(this)">VHF</div><br>

        <div id="DivIndicatorFBANDS" class="MenuItem" style="width:17%;margin:1%;margin-left:0;margin-right:0" onclick="OnClick_DivIndicator(this)">FBANDS</div>
        <div id="DivIndicatorKAIRI" class="MenuItem" style="width:17%;margin:1%;margin-left:0%;margin-right:0" onclick="OnClick_DivIndicator(this)">KAIRI</div>
        <div id="DivIndicatorQQE" class="MenuItem" style="width:17%;margin:1%;margin-left:6%;margin-right:0" onclick="OnClick_DivIndicator(this)">QQE</div>
        <div id="DivIndicatorEWO" class="MenuItem" style="width:17%;margin:1%;margin-left:0%;margin-right:0" onclick="OnClick_DivIndicator(this)">EWO</div><br>

        <div id="DivChartGoruntuIndıcator" style="width:100%;display:inline-block">

            <hr />
            <div id="DivIndicatorBMK1" class="MenuItem" style="width:13%;margin:1%;margin-right:0;font-size:0.9em" onclick="OnClick_ChartGoruntu(this)">BMK1</div>
            <div id="DivIndicatorBMK2" class="MenuItem" style="width:13%;margin:1%;margin-left:1%;margin-right:0;font-size:0.9em" onclick="OnClick_ChartGoruntu(this)">BMK2</div>
            <div id="DivIndicatorBMK3" class="MenuItem" style="width:13%;margin:1%;margin-left:1%;margin-right:0;font-size:0.9em" onclick="OnClick_ChartGoruntu(this)">BMK3</div>
            <div id="DivIndicatorBMK4" class="MenuItem" style="width:13%;margin:1%;margin-left:1%;margin-right:0;font-size:0.9em" onclick="OnClick_ChartGoruntu(this)">BMK4</div>
            <div id="DivIndicatorBMK5" class="MenuItem" style="width:13%;margin:1%;margin-left:1%;margin-right:0;font-size:0.9em" onclick="OnClick_ChartGoruntu(this)">BMK5</div>
            <div id="DivIndicatorSistem1" class="MenuItem" style="width:0%;margin:1%;margin-left:6%;margin-right:0;display:none" onclick="OnClick_ChartGoruntu(this)">Sistem1</div>
            <div id="DivIndicatorSistem2" class="MenuItem" style="width:0%;margin:1%;margin-left:0%;margin-right:0;display:none" onclick="OnClick_ChartGoruntu(this)">Sistem2</div><br>

        </div>

        <div id="DivChartFSystemIndıcator" style="width:100%;display:inline-block">

            <hr />
            <div id="DivIndicatorFSYSTEM1" class="MenuItem" style="width:18%;margin:1%;margin-right:0;font-size:0.8em" onclick="OnClick_ChartGoruntu(this)">FSYSTEM1</div>
            <div id="DivIndicatorFSYSTEM2" class="MenuItem" style="width:18%;margin:1%;margin-left:1%;margin-right:0;font-size:0.8em" onclick="OnClick_ChartGoruntu(this)">FSYSTEM2</div>
            <div id="DivIndicatorFSYSTEM3" class="MenuItem" style="width:18%;margin:1%;margin-left:1%;margin-right:0;font-size:0.8em" onclick="OnClick_ChartGoruntu(this)">FSYSTEM3</div>
            <div id="DivIndicatorFSYSTEM4" class="MenuItem" style="width:18%;margin:1%;margin-left:1%;margin-right:0;font-size:0.8em" onclick="OnClick_ChartGoruntu(this)">FSYSTEM4</div>


        </div>


    </div>

    <div class="Klavye" id="DivSanalKlavyeNumber" onclick="OnClickKlavye(event)" style="display:none">

        <div>1</div> <div>2</div> <div>3</div><br />
        <div>4</div> <div>5</div> <div>6</div><br />
        <div>7</div> <div>8</div> <div>9</div><br />
        <div>Sil</div> <div>0</div> <div>Tamam</div><br />

        <div id="KlavyeSonuc" style="display:none"></div>
        <div id="KlavyeactiveEl" style="display:none"></div>

    </div>

    <!-- Genel Alert ekranı -->
    <div id="DivAlert" class="PagePopUp" style="text-align:center">
        <div style="height:90%;overflow:auto;">
            <div id="DivAlertHeader" class="Header" style="background-color:red;">Uyarı <div onclick="HideAlertWindow()" style="display:inline-block;float:right;padding-right:3%">✗</div></div><br>
            <p id="DivAlertContent" style="">.</p>
            <br />
            <div id="" class="PushButton" onclick="HideAlertWindow()" style="width:40%;padding:3%;bottom:1px;right:2%">Tamam</div>

        </div>
    </div>
    <!-- Genel Confirm ekranı -->
    <div id="DivConfirm" class="PagePopUp" style="text-align:center;top:20%">
        <div style="height:90%;overflow:auto;font-size:0.8em">
            <div id="DivConfirmHeader" class="Header" style="background-color:red;">Uyarı <div onclick="ShowConfirmWindow('', '', '')" style="display:inline-block;float:right;padding-right:3%">✗</div></div><br>
            <div id="DivConfirmContent" style="padding:1%">.</div>
            <br />
            <div id="" class="PushButton" onclick="DivConfirmOKButtonClick(1)" style="width:40%;padding:3%;bottom:1px;right:2%">Evet</div>
            <div id="" class="PushButton" onclick="HideConfirmWindow()" style="width:40%;padding:3%;bottom:1px;right:2%">Hayır</div>
            <br />
            <div id="DivConfirmType" style="display:none"></div>
            <div id="DivConfirmMsj" style="display:none"></div>

        </div>
    </div>


</body>
</html>
